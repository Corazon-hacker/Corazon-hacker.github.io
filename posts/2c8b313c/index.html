<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.3.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/006.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/6.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Noto Sans SC:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/lib/font-awesome/css/all.min.css"><script src="https://kit.fontawesome.com/b1f8a1a551.js" crossorigin="anonymous"></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css"><script src="/lib/pace/pace.min.js"></script><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"mcorazon.top",root:"/",scheme:"Gemini",version:"7.8.0",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:"default"},back2top:{enable:!0,sidebar:!0,scrollpercent:!0},bookmark:{enable:!1,color:"#00f",save:"manual"},fancybox:!0,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"buttons",active:"gitalk",storage:!0,lazyload:!1,nav:null,activeClass:"gitalk"},algolia:{hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},path:"search.xml"}</script><meta name="description" content="操作系统的发展史 Unix   1965年之前，电脑只有军事或者学院的研究机构碰的起，当时大型主机至多能提供30台终端（30个键盘、显示器)的连接。   1965年左后由贝尔实验室、麻省理工学院 以及 通用电气共同发起了Multics项目，想让大型主机支持300台终端   1969年前后这个项目进度缓慢，资金短缺，贝尔实验室退出了研究   1969年从这个项目中退出的Ken Thompson当时在"><meta property="og:type" content="article"><meta property="og:title" content="【Linux】总结"><meta property="og:url" content="http://mcorazon.top/posts/2c8b313c/index.html"><meta property="og:site_name" content="MCorazon"><meta property="og:description" content="操作系统的发展史 Unix   1965年之前，电脑只有军事或者学院的研究机构碰的起，当时大型主机至多能提供30台终端（30个键盘、显示器)的连接。   1965年左后由贝尔实验室、麻省理工学院 以及 通用电气共同发起了Multics项目，想让大型主机支持300台终端   1969年前后这个项目进度缓慢，资金短缺，贝尔实验室退出了研究   1969年从这个项目中退出的Ken Thompson当时在"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://mcorazon.top/posts/2c8b313c//df96e289eb08cd5e6e4170b17f5cf742.gif"><meta property="og:image" content="http://mcorazon.top/posts/2c8b313c//8eae2620bba177a756f74edee919b1d7.png"><meta property="og:image" content="http://mcorazon.top/posts/2c8b313c//bcc2453d54e29ee44def8556ffc03842.png"><meta property="og:image" content="http://mcorazon.top/posts/2c8b313c//94fda88f37da710407059bf585dfccf4.jpeg"><meta property="og:image" content="http://mcorazon.top/posts/2c8b313c//ed151692faccea1caf4f96f3b460d16f.png"><meta property="og:image" content="http://mcorazon.top/posts/2c8b313c//cee83d5e4c0ec6e1e6b1158c8ec56dba.jpeg"><meta property="og:image" content="http://mcorazon.top/posts/2c8b313c//eaa669cc38073241cb90af97af43bc92.png"><meta property="og:image" content="http://mcorazon.top/posts/2c8b313c//ccff78bd3a3c92ac11636923216ce3ed.png"><meta property="og:image" content="http://mcorazon.top/posts/2c8b313c//7da5a8288cfb2d26b70da16da71b36e8.png"><meta property="og:image" content="http://mcorazon.top/posts/2c8b313c//91c28994d6fb98e8c35f2eac36880df2.jpeg"><meta property="og:image" content="http://mcorazon.top/posts/2c8b313c//99fb8a619138438d007b738d8630fbdc.jpeg"><meta property="og:image" content="http://mcorazon.top/posts/2c8b313c//5c1df1e303458b97c3fcde9babdec6c8.jpeg"><meta property="article:published_time" content="2025-02-08T13:53:32.000Z"><meta property="article:modified_time" content="2025-02-08T13:58:07.358Z"><meta property="article:author" content="Corazon"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="http://mcorazon.top/posts/2c8b313c//df96e289eb08cd5e6e4170b17f5cf742.gif"><link rel="canonical" href="http://mcorazon.top/posts/2c8b313c/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,lang:"zh-CN"}</script><title>【Linux】总结 | MCorazon</title><script type="text/javascript" src="/js/tag/bubble.js"></script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css"></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span><h1 class="site-title">MCorazon</h1><span class="logo-line-after"><i></i></span></a><p class="site-subtitle" itemprop="description"><font color="#ffffff">这个世界总有黑夜<br>但是我们总发着光</font></p></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul id="menu" class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-schedule"><a href="/schedule/" rel="section"><i class="fa fa-calendar fa-fw"></i>日程表</a></li><li class="menu-item menu-item-sitemap"><a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>站点地图</a></li><li class="menu-item menu-item-commonweal"><a href="/commonweal/" rel="section"><i class="fa fa-heartbeat fa-fw"></i>公益 404</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocapitalize="off" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"><div id="no-result"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div></div></div></div></header><div class="reading-progress-bar"></div><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content post posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="http://mcorazon.top/posts/2c8b313c/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/006.png"><meta itemprop="name" content="Corazon"><meta itemprop="description" content="<font color="#000000">网络安全从业人员个人博客</font>"> </span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="MCorazon"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">【Linux】总结</h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2025-02-08 21:53:32 / 修改时间：21:58:07" itemprop="dateCreated datePublished" datetime="2025-02-08T21:53:32+08:00">2025-02-08</time> </span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="post-meta-item-text">阅读次数：</span> <span id="busuanzi_value_page_pv"></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>126k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>1:55</span></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="操作系统的发展史">操作系统的发展史</h2><h3 id="Unix">Unix</h3><ul class="lvl-0"><li class="lvl-2"><p>1965年之前，电脑只有军事或者学院的研究机构碰的起，当时大型主机至多能提供30台终端（30个键盘、显示器)的连接。</p></li><li class="lvl-2"><p>1965年左后由贝尔实验室、麻省理工学院 以及 通用电气共同发起了Multics项目，<strong>想让大型主机支持300台终端</strong></p></li><li class="lvl-2"><p>1969年前后这个项目进度缓慢，资金短缺，贝尔实验室退出了研究</p></li><li class="lvl-2"><p>1969年从这个项目中退出的Ken Thompson当时在实验室无聊时，为了让一台空闲的电脑上能够运行“星际旅行”游行，在8月份左右趁着其妻子探亲的时间，用了1个月的时间编写出了 Unix操作系统的原型</p></li><li class="lvl-2"><p>1970年，美国贝尔实验室的 Ken Thompson，以 BCPL语言 为基础，设计出很简单且很接近硬件的 B语言（取BCPL的首字母），并且他用B语言写了第一个UNIX操作系统。因为B语言的跨平台性较差，为了能够在其他的电脑上也能够运行这个非常棒的Unix操作系统，Dennis Ritchie和Ken Thompson 从B语言的基础上准备研究一个更好的语言</p></li><li class="lvl-2"><p>1972年，美国贝尔实验室的 Dennis Ritchie在B语言的基础上最终设计出了一种新的语言，他取了BCPL的第二个字母作为这种语言的名字，这就是C语言</p></li><li class="lvl-2"><p>1973年初，C语言的主体完成。Thompson和Ritchie迫不及待地开始用它完全重写了现在大名鼎鼎的Unix操作系统</p><span id="more"></span></li></ul><h3 id="Minix">Minix</h3><p>因为AT&amp;T(通用电气)的政策改变，在Version 7 Unix推出之后，发布新的使用条款，将UNIX源代码私有化，在大学中不再能使用UNIX源代码。Andrew S. Tanenbaum(塔能鲍姆)教授为了能在课堂上教授学生操作系统运作的实务细节，决定在不使用任何AT&amp;T的源代码前提下，自行开发与UNIX兼容的操作系统，以避免版权上的争议。他以小型UNIX（mini-UNIX）之意，将它称为MINIX。</p><h3 id="Linux">Linux</h3><p>因为Minix只是教学使用，因此功能并不强，因此Torvalds利用GNU的bash当做开发环境，gcc当做编译工具，编写了Linux内核-v0.02，但是一开始Linux并不能兼容Unix，即Unix上跑的应用程序不能在Linux上跑，即应用程序与内核之间的接口不一致，因为Unix是遵循POSIX规范的，因此Torvalds修改了Linux，并遵循POSIX（Portable Operating System Interface，他规范了应用程序与内核的接口规范）； 一开始Linux只适用于386，后来经过全世界的网友的帮助，最终能够兼容多种硬件</p><h3 id="操作系统的发展">操作系统的发展</h3><p><img src="/images/loading.jpeg" data-original="/posts/2c8b313c//df96e289eb08cd5e6e4170b17f5cf742.gif" alt="img"></p><p><img src="/images/loading.jpeg" data-original="/posts/2c8b313c//8eae2620bba177a756f74edee919b1d7.png" alt="img"><br><img src="/images/loading.jpeg" data-original="/posts/2c8b313c//bcc2453d54e29ee44def8556ffc03842.png" alt="img"></p><h3 id="Minix没有火起来的原因">Minix没有火起来的原因</h3><blockquote><p>Minix的创始人说，MINIX 3没有统治世界是源于他在1992年犯下的一个错误，当时他认为BSD必然会一统天下，因为它是一个更稳定和更成熟的系统，其它操作系统难以与之竞争。因此他的MINIX的重心集中在教育上。四名BSD开发者已经成立了一家公司销售BSD系统，他们甚至还有一个有趣的电话号码1-800-ITS-UNIX。然而他们正因为这个电话号码而惹火上身。美国电话电报公司因电话号码而提起诉讼。官司打了三年才解决。在此期间，BSD陷于停滞，而Linux则借此一飞冲天。他的错误在于没有意识官司竟然持续了如此长的时间，以及BSD会因此受到削弱。如果美国电话电报公司没有起诉，Linux永远不会流行起来，BSD将统治世界。</p></blockquote><h2 id="Linux介绍">Linux介绍</h2><h3 id="Linux内核-发行版">Linux内核&amp;发行版</h3><h4 id="Linux内核版本">Linux内核版本</h4><p>内核(kernel)是系统的心脏，是运行程序和管理像磁盘和打印机等硬件设备的核心程序，它提供了一个在裸设备与应用程序间的抽象层。</p><p>Linux内核版本又分为稳定版和开发版，两种版本是相互关联，相互循环：</p><ul class="lvl-0"><li class="lvl-2"><p>稳定版：具有工业级强度，可以广泛地应用和部署。新的稳定版相对于较旧的只是修正一些bug或加入一些新的驱动程序。</p></li><li class="lvl-2"><p>开发版：由于要试验各种解决方案，所以变化很快。</p></li></ul><p>内核源码网址：<a target="_blank" rel="noopener" href="http://www.kernel.org">http://www.kernel.org</a> 所有来自全世界的对Linux源码的修改最终都会汇总到这个网站，由Linus领导的开源社区对其进行甄别和修改最终决定是否进入到Linux主线内核源码中。</p><h4 id="Linux发行版本">Linux发行版本</h4><p>Linux发行版 (也被叫做 GNU/Linux 发行版) 通常包含了包括桌面环境、办公套件、媒体播放器、数据库等应用软件。</p><p>目前市面上较知名的发行版有：Ubuntu、RedHat、CentOS、Debian、Fedora、SuSE、OpenSUSE、Arch Linux、SolusOS 等。</p><p><img src="/images/loading.jpeg" data-original="/posts/2c8b313c//94fda88f37da710407059bf585dfccf4.jpeg" alt="img"></p><h3 id="类Unix系统目录结构">类Unix系统目录结构</h3><p>Unix没有盘符这个概念，只有一个根目录/，所有文件都在它下面</p><p><img src="/images/loading.jpeg" data-original="/posts/2c8b313c//ed151692faccea1caf4f96f3b460d16f.png" alt="img"></p><h3 id="Linux目录">Linux目录</h3><p><img src="/images/loading.jpeg" data-original="/posts/2c8b313c//cee83d5e4c0ec6e1e6b1158c8ec56dba.jpeg" alt="img"></p><ul class="lvl-0"><li class="lvl-2"><p>/：根目录，一般根目录下只存放目录，在Linux下有且只有一个根目录。所有的东西都是从这里开始。当你在终端里输入“/home”，你其实是在告诉电脑，先从/（根目录）开始，再进入到home目录。</p></li><li class="lvl-2"><p>/bin: /usr/bin: 可执行二进制文件的目录，如常用的命令ls、tar、mv、cat等。</p></li><li class="lvl-2"><p>/boot：放置linux系统启动时用到的一些文件，如Linux的内核文件：/boot/vmlinuz，系统引导管理器：/boot/grub。</p></li><li class="lvl-2"><p>/dev：存放linux系统下的设备文件，访问该目录下某个文件，相当于访问某个设备，常用的是挂载光驱 mount /dev/cdrom /mnt。</p></li><li class="lvl-2"><p>/etc：系统配置文件存放的目录，不建议在此目录下存放可执行文件，重要的配置文件有 /etc/inittab、/etc/fstab、/etc/init.d、/etc/X11、/etc/sysconfig、/etc/xinetd.d。</p></li><li class="lvl-2"><p>/home：系统默认的用户家目录，新增用户账号时，用户的家目录都存放在此目录下，表示当前用户的家目录，edu 表示用户 edu 的家目录。</p></li><li class="lvl-2"><p>/lib: /usr/lib: /usr/local/lib：系统使用的函数库的目录，程序在执行过程中，需要调用一些额外的参数时需要函数库的协助。</p></li><li class="lvl-2"><p>/lost+fount：系统异常产生错误时，会将一些遗失的片段放置于此目录下。</p></li><li class="lvl-2"><p>/mnt: /media：光盘默认挂载点，通常光盘挂载于 /mnt/cdrom 下，也不一定，可以选择任意位置进行挂载。</p></li><li class="lvl-2"><p>/opt：给主机额外安装软件所摆放的目录。</p></li><li class="lvl-2"><p>/proc：此目录的数据都在内存中，如系统核心，外部设备，网络状态，由于数据都存放于内存中，所以不占用磁盘空间，比较重要的目录有 /proc/cpuinfo、/proc/interrupts、/proc/dma、/proc/ioports、/proc/net/* 等。</p></li><li class="lvl-2"><p>/root：系统管理员root的家目录。</p></li><li class="lvl-2"><p>/sbin: /usr/sbin: /usr/local/sbin：放置系统管理员使用的可执行命令，如fdisk、shutdown、mount 等。与 /bin 不同的是，这几个目录是给系统管理员 root使用的命令，一般用户只能&quot;查看&quot;而不能设置和使用。</p></li><li class="lvl-2"><p>/tmp：一般用户或正在执行的程序临时存放文件的目录，任何人都可以访问，重要数据不可放置在此目录下。</p></li><li class="lvl-2"><p>/srv：服务启动之后需要访问的数据目录，如 www 服务需要访问的网页数据存放在 /srv/www 内。</p></li><li class="lvl-2"><p>/usr：应用程序存放目录，/usr/bin 存放应用程序，/usr/share 存放共享数据，/usr/lib 存放不能直接运行的，却是许多程序运行所必需的一些函数库文件。/usr/local: 存放软件升级包。/usr/share/doc: 系统说明文件存放目录。/usr/share/man: 程序说明文件存放目录。</p></li><li class="lvl-2"><p>/var：放置系统执行过程中经常变化的文件，如随时更改的日志文件 /var/log，/var/log/message：所有的登录文件存放目录，/var/spool/mail：邮件存放的目录，/var/run:程序或服务启动后，其PID存放在该目录下。</p></li></ul><h3 id="用户目录">用户目录</h3><p>位于/home/user，称之为用户工作目录或家目录,表示方式：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/home/user</span><br><span class="line">~</span><br><span class="line">12</span><br></pre></td></tr></table></figure><p>从/目录开始描述的路径为<strong>绝对路径</strong>，如：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /home</span><br><span class="line"><span class="built_in">ls</span> /usr</span><br><span class="line">12</span><br></pre></td></tr></table></figure><p>从当前位置开始描述的路径为<strong>相对路径</strong>，如：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ../../</span><br><span class="line"><span class="built_in">ls</span> abc/def</span><br><span class="line">12</span><br></pre></td></tr></table></figure><p>每个目录下都有**.和…**</p><p>. 表示当前目录</p><p>… 表示上一级目录，即父目录</p><p>根目录下的.和…都表示当前目录</p><table><thead><tr><th>文件的颜色</th><th>含义</th></tr></thead><tbody><tr><td>蓝色</td><td>目录</td></tr><tr><td>绿色</td><td>可执行文件</td></tr><tr><td>红色</td><td>压缩文件</td></tr><tr><td>浅蓝色</td><td>链接文件</td></tr><tr><td>灰色</td><td>其他文件</td></tr></tbody></table><h2 id="命令行基本操作">命令行基本操作</h2><h3 id="命令使用方法">命令使用方法</h3><p>Linux命令格式：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">command</span>  [-options]  [parameter1]  …</span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>command: 命令名； [-options]：选项,可用来对命令进行控制，也可以省略，<code>[]代表可选</code> parameter1 …：传给命令的参数：可以是零个一个或多个</p><h3 id="查看帮助文档">查看帮助文档</h3><h4 id="help">help</h4><p>一般是linux命令自带的帮助信息</p><p>如：ls --help</p><h4 id="man-manual">man(manual)</h4><p>man是linux提供的一个手册，包含了绝大部分的命令、函数使用说明</p><p>该手册分成很多章节（section），使用man时可以指定不同的章节来浏览。</p><p>例：man ls ; man 2 printf</p><p>man中各个section意义如下：</p><ol><li class="lvl-3"><p>Standard commands（标准命令）</p></li><li class="lvl-3"><p>System calls（系统调用，如open,write）</p></li><li class="lvl-3"><p>Library functions（库函数，如printf,fopen）</p></li><li class="lvl-3"><p>Special devices（设备文件的说明，/dev下各种设备）</p></li><li class="lvl-3"><p>File formats（文件格式，如passwd）</p></li><li class="lvl-3"><p>Games and toys（游戏和娱乐）</p></li><li class="lvl-3"><p>Miscellaneous（杂项、惯例与协定等，例如Linux档案系统、网络协定、ASCII 码；environ全局变量）</p></li><li class="lvl-3"><p>Administrative Commands（管理员命令，如ifconfig）</p></li></ol><p>man是按照手册的章节号的顺序进行搜索的。</p><p>man设置了如下的功能键：</p><table><thead><tr><th>功能键</th><th>功能</th></tr></thead><tbody><tr><td>空格键</td><td>显示手册页的下一屏</td></tr><tr><td>Enter键</td><td>一次滚动手册页的一行</td></tr><tr><td>b</td><td>回滚一屏</td></tr><tr><td>f</td><td>前滚一屏</td></tr><tr><td>q</td><td>退出man命令</td></tr><tr><td>h</td><td>列出所有功能键</td></tr><tr><td>/word</td><td>搜索word字符串</td></tr></tbody></table><p><img src="/images/loading.jpeg" data-original="/posts/2c8b313c//eaa669cc38073241cb90af97af43bc92.png" alt="img"></p><p>注意：实际上，我们不用指定第几个章节也用查看，如，man ls</p><h3 id="tab键自动补全">tab键<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E8%87%AA%E5%8A%A8%E8%A1%A5%E5%85%A8&amp;spm=1001.2101.3001.7020">自动补全</a></h3><p>在敲出命令的前几个字母的同时，按下tab键，系统会自动帮我们补全命令</p><h3 id="history游览历史">history游览历史</h3><p>当系统执行过一些命令后，可按上下键翻看以前的命令，history将执行过的命令列举出来</p><p>history保留了最近执行的命令记录，默认可以保留1000。历史清单从0开始编号到最大值。常见用法：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">history</span> N		显示最近N条命令</span><br><span class="line"><span class="built_in">history</span> -c		清除所有的历史记录</span><br><span class="line"><span class="built_in">history</span> -w  xxx.txt	保存历史记录到文本xxx.txt</span><br><span class="line">123</span><br></pre></td></tr></table></figure><h3 id="命令行中的ctrl组合键">命令行中的ctrl组合键</h3><ul class="lvl-0"><li class="lvl-2"><p>Ctrl+c 结束正在运行的程序</p></li><li class="lvl-2"><p>Ctrl+d 结束输入或退出shell</p></li><li class="lvl-2"><p>Ctrl+s 暂停屏幕输出【锁住终端】</p></li><li class="lvl-2"><p>Ctrl+q 恢复屏幕输出【解锁终端】</p></li><li class="lvl-2"><p>Ctrl+l 清屏，【是字母L的小写】等同于Clear</p></li><li class="lvl-2"><p>当前光标到行首：ctrl+a</p></li><li class="lvl-2"><p>当前光标到行尾：ctrl+e</p></li><li class="lvl-2"><p>删除当前光标到行首：ctrl+u</p></li><li class="lvl-2"><p>删除当前光标到行尾：ctrl+k</p></li><li class="lvl-2"><p>Ctrl+y 在光标处粘贴剪切的内容</p></li><li class="lvl-2"><p>Ctrl+r 查找历史命令【输入关键字，就能调出以前执行过的命令】</p></li><li class="lvl-2"><p>Ctrl+t 调换光标所在处与其之前字符位置，并把光标移到下个字符</p></li><li class="lvl-2"><p>Ctrl+x+u 撤销操作</p></li><li class="lvl-2"><p>Ctrl+z 转入后台运行</p></li></ul><h2 id="Linux命令">Linux命令</h2><h3 id="权限管理">权限管理</h3><h4 id="列出目录的内容：ls">列出目录的内容：ls</h4><p>Linux文件或者目录名称最长可以有265个字符，“.”代表当前目录，“…”代表上一级目录，以“.”开头的文件为隐藏文件，需要用 -a 参数才能显示。</p><p>ls常用参数：</p><table><thead><tr><th>参数</th><th>含义</th></tr></thead><tbody><tr><td>-a</td><td>显示指定目录下所有子目录与文件，包括隐藏文件</td></tr><tr><td>-l</td><td>以列表方式显示文件的详细信息</td></tr><tr><td>-h</td><td>配合 -l 以人性化的方式显示文件大小</td></tr></tbody></table><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@VM_0_9_centos ~]<span class="comment"># ll -h</span></span><br><span class="line">total 24K</span><br><span class="line">-rw-r--r--<span class="number"> 1 </span>root root 1.6K Dec <span class="number"> 1 </span><span class="number"> 2016 </span>CentOS7-Base-163.repo.1</span><br><span class="line">-rw-r--r--<span class="number"> 1 </span>root root 6.0K Nov<span class="number"> 12 </span><span class="number"> 2015 </span>mysql-community-release-el7-5.noarch.rpm</span><br><span class="line">-rw-r--r--<span class="number"> 1 </span>root root  <span class="number"> 90 </span>Nov<span class="number"> 23 </span>10:26 passwd</span><br><span class="line">drwxr-xr-t<span class="number"> 2 </span>root root 4.0K Nov<span class="number"> 22 </span>21:15 test</span><br><span class="line">-rw-r--r--<span class="number"> 1 </span>root root <span class="number"> 276 </span>Nov<span class="number"> 24 </span>10:01 user</span><br><span class="line">lrwxrwxrwx<span class="number"> 1 </span>root root  <span class="number"> 14 </span>Nov <span class="number"> 6 </span>19:18 web -&gt; /var/www/html/</span><br><span class="line">12345678</span><br></pre></td></tr></table></figure><p>列出的信息的含义：</p><p><img src="/images/loading.jpeg" data-original="/posts/2c8b313c//ccff78bd3a3c92ac11636923216ce3ed.png" alt="img"></p><p>ls支持通配符：</p><table><thead><tr><th>通配符</th><th>含义</th></tr></thead><tbody><tr><td>*</td><td>文件代表文件名中所有字符</td></tr><tr><td>ls te*</td><td>查找以te开头的文件</td></tr><tr><td>ls *html</td><td>查找结尾为html的文件</td></tr><tr><td>？</td><td>代表文件名中任意一个字符</td></tr><tr><td>ls ?.c</td><td>只找第一个字符任意，后缀为.c的文件</td></tr><tr><td>ls a.?</td><td>只找只有3个字符，前2字符为a.，最后一个字符任意的文件</td></tr><tr><td>[]</td><td>[”和“]”将字符组括起来，表示可以匹配字符组中的任意一个。“-”用于表示字符范围。</td></tr><tr><td>[abc]</td><td>匹配a、b、c中的任意一个</td></tr><tr><td>[a-f]</td><td>匹配从a到f范围内的的任意一个字符</td></tr><tr><td>ls [a-f]*</td><td>找到从a到f范围内的的任意一个字符开头的文件</td></tr><tr><td>ls a-f</td><td>查找文件名为a-f的文件,当“-”处于方括号之外失去通配符的作用</td></tr><tr><td>\</td><td>如果要使通配符作为普通字符使用，可以在其前面加上转义字符。“?”和“*”处于方括号内时不用使用转义字符就失去通配符的作用。</td></tr><tr><td>ls *a</td><td>查找文件名为*a的文件</td></tr></tbody></table><h4 id="显示inode的内容：stat">显示inode的内容：stat</h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">stat</span><span class="meta"> [文件或目录]</span></span><br><span class="line"><span class="attribute">1</span></span><br></pre></td></tr></table></figure><p>查看 testfile 文件的inode内容内容，可以用以下命令：</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[root@VM_0_9_centos ~]# stat mysql-community-release-el7<span class="string">-5</span>.noarch.rpm </span><br><span class="line">  File: ‘mysql-community-release-el7<span class="string">-5</span>.noarch.rpm’</span><br><span class="line">  Size: 6140            Blocks: 16         IO Block: 4096   regular file</span><br><span class="line">Device: fd01h/64769d    Inode: 394398      Links: 1</span><br><span class="line">Access: (0644/-rw-r--r--)  Uid: (    0/    root)   Gid: (    0/    root)</span><br><span class="line">Access: 2019<span class="string">-11</span><span class="string">-23</span> 13:30:42.000000000 <span class="string">+0800</span></span><br><span class="line">Modify: 2015<span class="string">-11</span><span class="string">-12</span> 15:58:42.000000000 <span class="string">+0800</span></span><br><span class="line">Change: 2019<span class="string">-11</span><span class="string">-23</span> 13:30:42.400300171 <span class="string">+0800</span></span><br><span class="line"> Birth: -</span><br><span class="line"></span><br><span class="line">python@ubuntu:~/txt$ stat find我的Mr.Right.txt </span><br><span class="line">  文件：&#x27;find我的Mr.Right.txt&#x27;</span><br><span class="line">  大小：64768           块：128        IO 块：4096   普通文件</span><br><span class="line">设备：801h/2049d        Inode：655501      硬链接：1</span><br><span class="line">权限：(0664/-rw-rw-r--)  Uid：( 1000/  python)   Gid：( 1000/  python)</span><br><span class="line">最近访问：2019<span class="string">-11</span><span class="string">-22</span> 22:43:17.565105155 <span class="string">+0800</span></span><br><span class="line">最近更改：2019<span class="string">-11</span><span class="string">-22</span> 22:42:42.000000000 <span class="string">+0800</span></span><br><span class="line">最近改动：2019<span class="string">-11</span><span class="string">-22</span> 22:43:08.797116491 <span class="string">+0800</span></span><br><span class="line">创建时间：-</span><br><span class="line">12345678910111213141516171819</span><br></pre></td></tr></table></figure><h4 id="文件访问权限">文件访问权限</h4><p>用户能够控制一个给定的文件或目录的访问程度，一个文件或目录可能有读、写及执行权限：</p><ul class="lvl-0"><li class="lvl-2"><p>读权限（r） ：对于文件，具有读取文件内容的权限；对于目录，具有浏览目录的权限。</p></li><li class="lvl-2"><p>写权限（w） ：对于文件，具有修改文件内容的权限；对于目录，具有删除、移动目录内文件的权限。</p></li><li class="lvl-2"><p>可执行权限（x）： 对于文件，具有执行文件的权限；对于目录，该用户具有进入目录的权限。</p></li></ul><p>通常，Unix/Linux系统只允许文件的属主(所有者)或超级用户改变文件的读写权限。</p><p>示例：</p><p><img src="/images/loading.jpeg" data-original="/posts/2c8b313c//7da5a8288cfb2d26b70da16da71b36e8.png" alt="img"></p><p>第1个字母代表文件的类型：</p><ul class="lvl-0"><li class="lvl-2"><p>“d” 代表文件夹</p></li><li class="lvl-2"><p>“-” 代表普通文件</p></li><li class="lvl-2"><p>“c” 代表硬件字符设备</p></li><li class="lvl-2"><p>“b” 代表硬件块设备</p></li><li class="lvl-2"><p>“s”表示管道文件</p></li><li class="lvl-2"><p>“l” 代表软链接文件。</p></li></ul><p>后9个字母分别代表三组权限：文件所有者、用户组、其他用户拥有的权限。</p><h4 id="修改文件权限：chmod">修改文件权限：<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=chmod&amp;spm=1001.2101.3001.7020">chmod</a></h4><p>chmod 修改文件权限有两种使用格式：字母法与数字法。</p><p>字母法：chmod u/g/o/a +/-/= rwx 文件</p><table><thead><tr><th>[ u/g/o/a ]</th><th>含义</th></tr></thead><tbody><tr><td>u</td><td>user 表示该文件的所有者</td></tr><tr><td>g</td><td>group 表示与该文件的所有者属于同一组( group )者，即用户组</td></tr><tr><td>o</td><td>other 表示其他以外的人</td></tr><tr><td>a</td><td>all 表示这三者皆是</td></tr></tbody></table><table><thead><tr><th>[ ±= ]</th><th>含义</th></tr></thead><tbody><tr><td>+</td><td>增加权限</td></tr><tr><td>-</td><td>撤销权限</td></tr><tr><td>=</td><td>设定权限</td></tr></tbody></table><table><thead><tr><th>rwx</th><th>含义</th></tr></thead><tbody><tr><td>r</td><td>read 表示可读取，对于一个目录，如果没有r权限，那么就意味着不能通过ls查看这个目录的内容。</td></tr><tr><td>w</td><td>write 表示可写入，对于一个目录，如果没有w权限，那么就意味着不能在目录下创建新的文件。</td></tr><tr><td>x</td><td>excute 表示可执行，对于一个目录，如果没有x权限，那么就意味着不能通过cd进入这个目录。</td></tr></tbody></table><p>数字法：“rwx” 这些权限也可以用数字来代替</p><table><thead><tr><th>字母</th><th>说明</th></tr></thead><tbody><tr><td>r</td><td>读取权限，数字代号为 “4”</td></tr><tr><td>w</td><td>写入权限，数字代号为 “2”</td></tr><tr><td>x</td><td>执行权限，数字代号为 “1”</td></tr><tr><td>-</td><td>不具任何权限，数字代号为 “0”</td></tr></tbody></table><p>如执行：chmod u=rwx,g=rx,o=r filename 就等同于：chmod u=7,g=5,o=4 filename</p><p>chmod 751 file：</p><ul class="lvl-0"><li class="lvl-2"><p>文件所有者：读、写、执行权限</p></li><li class="lvl-2"><p>同组用户：读、执行的权限</p></li><li class="lvl-2"><p>其它用户：执行的权限</p></li></ul><p>chmod 777 file：所有用户拥有读、写、执行权限</p><p>注意：如果想递归所有目录加上相同权限，需要加上参数“ -R ”。 如：chmod 777 test/ -R 递归 test 目录下所有文件加 777 权限</p><h4 id="修改文件所有者：chown">修改文件所有者：chown</h4><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">python<span class="variable">@ubuntu</span><span class="symbol">:~/test</span><span class="variable">$ </span>ll h.txt </span><br><span class="line">-rw------- <span class="number">1</span> python python <span class="number">4</span> <span class="number">11</span>月 <span class="number">22</span> <span class="number">22</span><span class="symbol">:</span><span class="number">35</span> h.txt</span><br><span class="line">python<span class="variable">@ubuntu</span><span class="symbol">:~/test</span><span class="variable">$ </span>chown mike h.txt </span><br><span class="line"><span class="symbol">chown:</span> 正在更改<span class="string">&#x27;h.txt&#x27;</span> 的所有者: 不允许的操作</span><br><span class="line">python<span class="variable">@ubuntu</span><span class="symbol">:~/test</span><span class="variable">$ </span>sudo chown mike h.txt </span><br><span class="line">python<span class="variable">@ubuntu</span><span class="symbol">:~/test</span><span class="variable">$ </span>ll h.txt              </span><br><span class="line">-rw------- <span class="number">1</span> mike python <span class="number">4</span> <span class="number">11</span>月 <span class="number">22</span> <span class="number">22</span><span class="symbol">:</span><span class="number">35</span> h.txt</span><br><span class="line"><span class="number">1234567</span></span><br></pre></td></tr></table></figure><h4 id="修改文件所属组：chgrp">修改文件所属组：chgrp</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">python@ubuntu:~/test$ ll h.txt              </span><br><span class="line">-rw------- 1 mike python 4 11月 22 22:35 h.txt</span><br><span class="line">python@ubuntu:~/test$ <span class="built_in">sudo</span> <span class="built_in">chgrp</span> mike h.txt </span><br><span class="line">python@ubuntu:~/test$ ll h.txt              </span><br><span class="line">-rw------- 1 mike mike 4 11月 22 22:35 h.txt</span><br><span class="line">12345</span><br></pre></td></tr></table></figure><h3 id="文件内容查看">文件内容查看</h3><p>Linux系统中使用以下命令来查看文件的内容：</p><ul class="lvl-0"><li class="lvl-2"><p>cat 由第一行开始显示文件内容</p></li><li class="lvl-2"><p>tac 从最后一行开始显示</p></li><li class="lvl-2"><p>nl 显示的时候，顺道输出行号</p></li><li class="lvl-2"><p>more 一页一页的显示文件内容</p></li><li class="lvl-2"><p>less与more 类似，但可以往前翻页</p></li><li class="lvl-2"><p>head 只看头几行</p></li><li class="lvl-2"><p>tail 只看尾巴几行</p></li></ul><h4 id="基本显示：cat、tac">基本显示：cat、tac</h4><p>语法：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> [-AbEnTv]</span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>选项与参数：</p><ul class="lvl-0"><li class="lvl-2"><p>-A ：相当于 -vET 的整合选项，可列出一些特殊字符而不是空白而已；</p></li><li class="lvl-2"><p>-v ：列出一些看不出来的特殊字符</p></li><li class="lvl-2"><p>-E ：将结尾的断行字节 $ 显示出来；</p></li><li class="lvl-2"><p>-T ：将 [tab] 按键以 ^I 显示出来；</p></li><li class="lvl-2"><p>-b ：列出行号，空白行不标行号</p></li><li class="lvl-2"><p>-n ：列出行号，连同空白行也会有行号</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@VM_0_9_centos ~]# <span class="built_in">cat</span> -b /etc/issue</span><br><span class="line">     1  \S</span><br><span class="line">     2  Kernel \r on an \m</span><br><span class="line">[root@VM_0_9_centos ~]# <span class="built_in">cat</span> -n /etc/issue</span><br><span class="line">     1  \S</span><br><span class="line">     2  Kernel \r on an \m</span><br><span class="line">     3</span><br><span class="line">[root@VM_0_9_centos ~]# </span><br><span class="line">12345678</span><br></pre></td></tr></table></figure><p>tac与cat命令刚好相反，文件内容从最后一行开始显示，可以看出 tac 是 cat 的倒着写！如：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@VM_0_9_centos ~]# <span class="built_in">tac</span> /etc/issue</span><br><span class="line">Kernel \r on an \m</span><br><span class="line">\S</span><br><span class="line">123</span><br></pre></td></tr></table></figure><h4 id="显示行号：nl">显示行号：nl</h4><p>语法：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">nl</span> [-bnw] 文件</span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>选项与参数：</p><ul class="lvl-0"><li class="lvl-2"><p>-b ：指定行号指定的方式，主要有两种：<br>-b a ：表示不论是否为空行，也同样列出行号(类似 cat -n)；<br>-b t ：如果有空行，空的那一行不要列出行号(默认值)；</p></li><li class="lvl-2"><p>-n ：列出行号表示的方法，主要有三种：<br>-n ln ：行号在荧幕的最左方显示；<br>-n rn ：行号在自己栏位的最右方显示，且不加 0 ；<br>-n rz ：行号在自己栏位的最右方显示，且加 0 ；</p></li><li class="lvl-2"><p>-w ：行号栏位的占用的位数。</p></li></ul><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@www ~]<span class="comment"># nl /etc/issue</span></span><br><span class="line">     <span class="number">1</span>  CentOS release <span class="number">6.4</span> (Final)</span><br><span class="line">     <span class="number">2</span>  Kernel <span class="string">\r</span> <span class="literal">on</span> an <span class="string">\m</span></span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure><h4 id="分屏显示：more、less">分屏显示：more、less</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@www ~]# more /etc/man_db.config </span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Generated automatically from man.conf.in by the</span></span><br><span class="line"><span class="comment"># configure script.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># man.conf from man-1.6d</span></span><br><span class="line">....(中间省略)....</span><br><span class="line">--More--(28%)  &lt;== 光标在这里等待命令</span><br><span class="line">12345678</span><br></pre></td></tr></table></figure><p>more运行时可以输入的命令有：</p><ul class="lvl-0"><li class="lvl-2"><p>空白键 (space)：代表向下翻一页；</p></li><li class="lvl-2"><p>Enter ：代表向下翻『一行』；</p></li><li class="lvl-2"><p>/字串 ：代表在这个显示的内容当中，向下搜寻『字串』这个关键字；</p></li><li class="lvl-2"><p>:f ：立刻显示出档名以及目前显示的行数；</p></li><li class="lvl-2"><p>q ：代表立刻离开 more ，不再显示该文件内容。</p></li><li class="lvl-2"><p>b 或 [ctrl]-b ：代表往回翻页，不过这动作只对文件有用，对管线无用。</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@www ~]# less /etc/man.config</span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Generated automatically from man.conf.in by the</span></span><br><span class="line"><span class="comment"># configure script.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># man.conf from man-1.6d</span></span><br><span class="line">....(中间省略)....</span><br><span class="line">:   &lt;== 这里可以等待你输入命令！</span><br><span class="line">12345678</span><br></pre></td></tr></table></figure><p>less运行时可以输入的命令有：</p><ul class="lvl-0"><li class="lvl-2"><p>空白键 ：向下翻动一页；</p></li><li class="lvl-2"><p>[pagedown]：向下翻动一页；</p></li><li class="lvl-2"><p>[pageup] ：向上翻动一页；</p></li><li class="lvl-2"><p>/字串 ：向下搜寻『字串』的功能；</p></li><li class="lvl-2"><p>?字串 ：向上搜寻『字串』的功能；</p></li><li class="lvl-2"><p>n ：重复前一个搜寻 (与 / 或 ? 有关！)</p></li><li class="lvl-2"><p>N ：反向的重复前一个搜寻 (与 / 或 ? 有关！)</p></li><li class="lvl-2"><p>q ：离开 less 这个程序；</p></li></ul><h4 id="取首尾n行：head、tail">取首尾n行：head、tail</h4><p>head取出文件前面几行</p><p>语法：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">head</span> [-n number] 文件 </span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>选项与参数：</p><ul class="lvl-0"><li class="lvl-2"><p>-n ：后面接数字，代表显示几行的意思</p></li></ul><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="symbol">@www</span> ~]<span class="meta"># head /etc/man.config</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>默认的情况中，显示前面 10 行！若要显示前 20 行，就得要这样：</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="symbol">@www</span> ~]<span class="meta"># head -n 20 /etc/man.config</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>tail取出文件后面几行</p><p>语法：</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tail [-n <span class="built_in">number</span>] 文件 </span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>选项与参数：</p><ul class="lvl-0"><li class="lvl-2"><p>-n ：后面接数字，代表显示几行的意思</p></li><li class="lvl-2"><p>-f ：表示持续侦测后面所接的档名，要等到按下[ctrl]-c才会结束tail的侦测</p></li></ul><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="symbol">@www</span> ~]<span class="meta"># tail /etc/man.config</span></span><br><span class="line"><span class="meta"># 默认的情况中，显示最后的十行！若要显示最后的 20 行，就得要这样：</span></span><br><span class="line">[root<span class="symbol">@www</span> ~]<span class="meta"># tail -n 20 /etc/man.config</span></span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure><h3 id="文件管理">文件管理</h3><h4 id="输出重定向：">输出重定向：&gt;</h4><p>可将本应显示在终端上的内容保存到指定文件中。</p><p>如：ls &gt; test.txt ( test.txt 如果不存在，则创建，存在则覆盖其内容 )</p><p>注意： <code>&gt;输出重定向会覆盖原来的内容，&gt;&gt;输出重定向则会追加到文件的尾部。</code></p><h4 id="管道：">管道：|</h4><p>管道：一个命令的输出可以通过管道做为另一个命令的输入。</p><p>“ | ”的左右分为两端，从左端写入到右端。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">python@ubuntu:/bin$ ll -h |more   </span><br><span class="line">总用量 13M</span><br><span class="line">drwxr-xr-x  2 root root  4.0K 8月   4  2016 ./</span><br><span class="line">drwxr-xr-x 26 root root  4.0K 7月  30  2016 ../</span><br><span class="line">-rwxr-xr-x  1 root root 1014K 6月  24  2016 bash*</span><br><span class="line">-rwxr-xr-x  1 root root   31K 5月  20  2015 bunzip2*</span><br><span class="line">-rwxr-xr-x  1 root root  1.9M 8月  19  2015 busybox*</span><br><span class="line">-rwxr-xr-x  1 root root   31K 5月  20  2015 bzcat*</span><br><span class="line">lrwxrwxrwx  1 root root     6 5月  16  2016 bzcmp -&gt; bzdiff*</span><br><span class="line">-rwxr-xr-x  1 root root  2.1K 5月  20  2015 bzdiff*</span><br><span class="line">lrwxrwxrwx  1 root root     6 5月  16  2016 bzegrep -&gt; bzgrep*</span><br><span class="line">--更多--</span><br><span class="line">123456789101112</span><br></pre></td></tr></table></figure><h4 id="清屏：clear">清屏：clear</h4><p>clear作用为清除终端上的显示(类似于DOS的cls清屏功能)，快捷键：Ctrl + l ( “l” 为字母 )。</p><h4 id="切换工作目录：-cd">切换工作目录： cd</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Linux所有的目录和文件名大小写敏感</span><br></pre></td></tr></table></figure><p>cd后面可跟绝对路径，也可以跟相对路径。如果省略目录，则默认切换到当前用户的主目录。</p><table><thead><tr><th>命令</th><th>含义</th></tr></thead><tbody><tr><td>cd</td><td>相当于cd ~</td></tr><tr><td>cd ~</td><td>切换到当前用户的主目录(/home/用户目录)</td></tr><tr><td>cd .</td><td>切换到当前目录</td></tr><tr><td>cd …</td><td>切换到上级目录</td></tr><tr><td>cd -</td><td>进入上次所在的目录</td></tr></tbody></table><h4 id="显示当前路径：pwd">显示当前路径：pwd</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">python@ubuntu:~$ <span class="built_in">pwd</span> </span><br><span class="line">/home/python</span><br><span class="line">12</span><br></pre></td></tr></table></figure><p>选项与参数：</p><ul class="lvl-0"><li class="lvl-2"><p><strong>-P</strong> ：显示出确实的路径，而非使用连结 (link) 路径。</p></li></ul><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="variable">@VM_0_9_centos</span> ~]<span class="comment"># cd /var/mail/</span></span><br><span class="line">[root<span class="variable">@VM_0_9_centos</span> mail]<span class="comment"># pwd</span></span><br><span class="line"><span class="regexp">/var/mail</span></span><br><span class="line">[root<span class="variable">@VM_0_9_centos</span> mail]<span class="comment"># pwd -P</span></span><br><span class="line"><span class="regexp">/var/spool</span><span class="regexp">/mail</span></span><br><span class="line"><span class="regexp">12345</span></span><br></pre></td></tr></table></figure><h4 id="创建目录：mkdir">创建目录：mkdir</h4><p>mkdir可以创建一个新的目录。</p><p>注意：新建目录的名称不能与当前目录中已有的目录或文件同名，并且目录创建者必须对当前目录具有写权限。</p><p>语法：</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir [-mp] 目录名称</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>选项与参数：</p><ul class="lvl-0"><li class="lvl-2"><p>-m ：指定被创建目录的权限，而不是根据默认权限 (umask) 设定</p></li><li class="lvl-2"><p>-p ：递归创建所需要的目录</p></li></ul><p>实例：-p递归创建目录：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@www ~]# <span class="built_in">cd</span> /tmp</span><br><span class="line">[root@www tmp]# <span class="built_in">mkdir</span> <span class="built_in">test</span>    &lt;==创建一名为 <span class="built_in">test</span> 的新目录</span><br><span class="line">[root@www tmp]# <span class="built_in">mkdir</span> test1/test2/test3/test4</span><br><span class="line"><span class="built_in">mkdir</span>: cannot create directory `test1/test2/test3/test4<span class="string">&#x27;: </span></span><br><span class="line"><span class="string">No such file or directory       &lt;== 没办法直接创建此目录啊！</span></span><br><span class="line"><span class="string">[root@www tmp]# mkdir -p test1/test2/test3/test4</span></span><br><span class="line"><span class="string">123456</span></span><br></pre></td></tr></table></figure><p>mkdir创建的目录权限默认根据umask得到，而-m参数可以指定被创建目录的权限：</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@VM_0_9_centos ~]<span class="comment"># mkdir t1</span></span><br><span class="line">[root@VM_0_9_centos ~]<span class="comment"># ll</span></span><br><span class="line">drwxr-xr-x<span class="number"> 2 </span>root root<span class="number"> 4096 </span>Nov<span class="number"> 22 </span>18:54 t1</span><br><span class="line">[root@VM_0_9_centos ~]<span class="comment"># mkdir t2 -m 711 </span></span><br><span class="line">[root@VM_0_9_centos ~]<span class="comment"># ll</span></span><br><span class="line">drwxr-xr-x<span class="number"> 2 </span>root root<span class="number"> 4096 </span>Nov<span class="number"> 22 </span>18:54 t1</span><br><span class="line">drwx--x--x<span class="number"> 2 </span>root root<span class="number"> 4096 </span>Nov<span class="number"> 22 </span>18:54 t2</span><br><span class="line">1234567</span><br></pre></td></tr></table></figure><h4 id="删除文件：rm">删除文件：rm</h4><p>可通过rm删除文件或目录。使用rm命令要小心，因为文件删除后不能恢复。为了防止文件误删，可以在rm后使用-i参数以逐个确认要删除的文件。</p><p>常用参数及含义如下表所示：</p><table><thead><tr><th>参数</th><th>含义</th></tr></thead><tbody><tr><td>-i</td><td>以进行交互式方式执行</td></tr><tr><td>-f</td><td>强制删除，忽略不存在的文件，无需提示</td></tr><tr><td>-r</td><td>递归地删除目录下的内容，删除文件夹时必须加此参数</td></tr></tbody></table><h4 id="建立链接文件：ln">建立链接文件：ln</h4><p>软链接：ln -s 源文件 链接文件</p><p>硬链接：ln 源文件 链接文件</p><p>软链接类似于Windows下的快捷方式，如果软链接文件和源文件不在同一个目录，源文件要使用绝对路径，不能使用相对路径。</p><p>硬链接只能链接普通文件不能链接目录。 两个文件占用相同大小的硬盘空间，即使删除了源文件，链接文件还是存在，所以-s选项是更常见的形式。</p><h4 id="文本搜索：grep">文本搜索：grep</h4><p>Linux系统中grep命令是一种强大的文本搜索工具，grep允许对文本文件进行模式查找。如果找到匹配模式， grep打印包含模式的所有行。</p><p>grep一般格式为：</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">grep</span> [-选项] <span class="string">&#x27;搜索内容串&#x27;</span> 文件名</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>在grep命令中输入字符串参数时，最好引号或双引号括起来。例如：<code>grep 'a' 1.txt</code>。</p><p>在当前目录中，查找前缀有test字样的文件中包含 test 字符串的文件，并打印出该字符串的行。此时，可以使用如下命令：</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ grep test test* <span class="meta">#查找前缀有test的文件包含test字符串的文件  </span></span><br><span class="line"><span class="symbol">testfile1:</span>This a Linux testfile! <span class="meta">#列出testfile1 文件中包含test字符的行  </span></span><br><span class="line"><span class="symbol">testfile_2:</span>This is a linux testfile! <span class="meta">#列出testfile_2 文件中包含test字符的行  </span></span><br><span class="line"><span class="symbol">testfile_2:</span>Linux test <span class="meta">#列出testfile_2 文件中包含test字符的行 </span></span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure><p>以递归的方式查找符合条件的文件。例如，查找指定目录/etc/acpi 及其子目录（如果存在子目录的话）下所有文件中包含字符串&quot;update&quot;的文件，并打印出该字符串所在行的内容，使用的命令为：</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ grep -r update <span class="regexp">/etc/</span>acpi <span class="comment">#以递归的方式查找“etc/acpi”  </span></span><br><span class="line"><span class="comment">#下包含“update”的文件  </span></span><br><span class="line"><span class="regexp">/etc/</span>acpi<span class="regexp">/ac.d/</span><span class="number">85</span>-anacron.sh:<span class="comment"># (Things like the slocate updatedb cause a lot of IO.)  </span></span><br><span class="line">Rather than  </span><br><span class="line"><span class="regexp">/etc/</span>acpi<span class="regexp">/resume.d/</span><span class="number">85</span>-anacron.sh:<span class="comment"># (Things like the slocate updatedb cause a lot of  </span></span><br><span class="line">IO.) Rather than  </span><br><span class="line"><span class="regexp">/etc/</span>acpi<span class="regexp">/events/</span>thinkpad-cmos:action=<span class="regexp">/usr/</span>sbin/thinkpad-keys--update </span><br><span class="line"><span class="number">1234567</span></span><br></pre></td></tr></table></figure><p>反向查找。前面各个例子是查找并打印出符合条件的行，通过&quot;-v&quot;参数可以打印出不符合条件行的内容。</p><p>查找文件名中包含 test 的文件中不包含test 的行，此时，使用的命令为：</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ grep -v test* #查找文件名中包含test 的文件中不包含test 的行  </span><br><span class="line">testfile1:helLinux!  </span><br><span class="line">testfile1:Linis a free Unix-<span class="keyword">type</span> <span class="type">operating </span>system.  </span><br><span class="line">testfile1:Lin  </span><br><span class="line">testfile_1:HELLO LINUX!  </span><br><span class="line">testfile_1:LINUX <span class="keyword">IS</span> A FREE UNIX-<span class="keyword">TYPE</span> <span class="type">OPTERATING </span>SYSTEM.  </span><br><span class="line">testfile_1:THIS <span class="keyword">IS</span> A LINUX TESTFILE!  </span><br><span class="line">testfile_2:HELLO LINUX!  </span><br><span class="line">testfile_2:Linux <span class="keyword">is</span> a free unix-<span class="keyword">type</span> <span class="type">opterating </span>system.  </span><br><span class="line"><span class="number">123456789</span></span><br></pre></td></tr></table></figure><h4 id="查找文件：find">查找文件：find</h4><p>常用用法：</p><table><thead><tr><th>命令</th><th>含义</th></tr></thead><tbody><tr><td>find ./ -name <a target="_blank" rel="noopener" href="http://test.sh">test.sh</a></td><td>查找当前目录下所有名为test.sh的文件</td></tr><tr><td>find ./ -name ‘*.sh’</td><td>查找当前目录下所有后缀为.sh的文件</td></tr><tr><td>find ./ -name “[A-Z]*”</td><td>查找当前目录下所有以大写字母开头的文件</td></tr><tr><td>find /tmp -size 2M</td><td>查找在/tmp 目录下等于2M的文件</td></tr><tr><td>find /tmp -size +2M</td><td>查找在/tmp 目录下大于2M的文件</td></tr><tr><td>find /tmp -size -2M</td><td>查找在/tmp 目录下小于2M的文件</td></tr><tr><td>find ./ -size +4k -size -5M</td><td>查找当前目录下大于4k，小于5M的文件</td></tr><tr><td>find ./ -perm 0777</td><td>查找当前目录下权限为 777 的文件或目录</td></tr></tbody></table><p>Linux find命令用来在指定目录下查找文件。任何位于参数之前的字符串都将被视为欲查找的目录名。如果使用该命令时，不设置任何参数，则find命令将在当前目录下查找子目录与文件。并且将查找到的子目录和文件全部进行显示。</p><p>语法：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">find <span class="selector-tag">path</span> -<span class="selector-tag">option</span> <span class="selector-attr">[ -print ]</span> <span class="selector-attr">[ -exec -ok command ]</span> &#123;&#125; \;</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p><strong>常用参数说明</strong> :</p><ul class="lvl-0"><li class="lvl-2"><p>-perm xxxx：权限为 xxxx的文件或目录</p></li><li class="lvl-2"><p>-user： 按照文件属主来查找文件。</p></li><li class="lvl-2"><p>-size n : n单位,b:512位元组的区块,c:字元数,k:kilo bytes,w:二个位元组</p></li><li class="lvl-2"><p>-mount, -xdev : 只检查和指定目录在同一个文件系统下的文件，避免列出其它文件系统中的文件</p></li><li class="lvl-2"><p>-amin n : 在过去 n 分钟内被读取过</p></li><li class="lvl-2"><p>-anewer file : 比文件 file 更晚被读取过的文件</p></li><li class="lvl-2"><p>-atime n : 在过去n天内被读取过的文件</p></li><li class="lvl-2"><p>-cmin n : 在过去 n 分钟内被修改过</p></li><li class="lvl-2"><p>-cnewer file :比文件 file 更新的文件</p></li><li class="lvl-2"><p>-ctime n : 在过去n天内被修改过的文件</p></li><li class="lvl-2"><p>-empty : 空的文件</p></li><li class="lvl-2"><p>-gid n or -group name : gid 是 n 或是 group 名称是 name</p></li><li class="lvl-2"><p>-ipath p, -path p : 路径名称符合 p 的文件，ipath 会忽略大小写</p></li><li class="lvl-2"><p>-name name, -iname name : 文件名称符合 name 的文件。iname 会忽略大小写</p></li><li class="lvl-2"><p>-type 查找某一类型的文件：</p><ul class="lvl-2"><li class="lvl-4">b - 块设备文件</li><li class="lvl-4">d - 目录</li><li class="lvl-4">c - 字符设备文件</li><li class="lvl-4">p - 管道文件</li><li class="lvl-4">l - 符号链接文件</li><li class="lvl-4">f - 普通文件</li></ul></li><li class="lvl-2"><p>-exec 命令名{} \ (注意：“}”和“\”之间有空格)</p></li></ul><p>find实例：</p><p>显示当前目录中大于20字节并以.c结尾的文件名</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">find . -name <span class="string">&quot;*.c&quot;</span> -size +20c </span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>将目前目录其其下子目录中所有一般文件列出</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">find . -<span class="built_in">type</span> f</span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>将目前目录及其子目录下所有最近 20 天内更新过的文件列出</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">find . -ctime -20</span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>查找/var/log目录中更改时间在7日以前的普通文件，并在删除之前询问它们：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">find /var/log -<span class="built_in">type</span> f -mtime +7 -ok <span class="built_in">rm</span> &#123;&#125; \;</span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>查找前目录中文件属主具有读、写权限，并且文件所属组的用户和其他用户具有读权限的文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">find . -<span class="built_in">type</span> f -perm 644 -<span class="built_in">exec</span> <span class="built_in">ls</span> -l &#123;&#125; \;</span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>查找系统中所有文件长度为0的普通文件，并列出它们的完整路径：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">find / -<span class="built_in">type</span> f -size 0 -<span class="built_in">exec</span> <span class="built_in">ls</span> -l &#123;&#125; \;</span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>从根目录查找类型为符号链接的文件，并将其删除：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">find / -<span class="built_in">type</span> l -<span class="built_in">exec</span> <span class="built_in">rm</span> -rf &#123;&#125; \</span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>从当前目录查找用户tom的所有文件并显示在屏幕上</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">find . -user tom</span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>在当前目录中查找所有文件以.doc结尾，且更改时间在3天以上的文件，找到后删除，并且给出删除提示</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">find . -name *.doc  -mtime +3 -ok <span class="built_in">rm</span> &#123;&#125; \;</span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>在当前目录下查找所有链接文件，并且以长格式显示文件的基本信息</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">find . -<span class="built_in">type</span> l -<span class="built_in">exec</span> <span class="built_in">ls</span> -l &#123;&#125; \;</span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>在当前目录下查找文件名有一个小写字母、一个大写字母、两个数字组成，且扩展名为.doc的文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">find . -name <span class="string">&#x27;[a-z][A-Z][0-9][0-9].doc&#x27;</span></span><br><span class="line">1</span><br></pre></td></tr></table></figure><h4 id="拷贝文件：cp">拷贝文件：cp</h4><p>cp命令的功能是将给出的文件或目录复制到另一个文件或目录中，相当于DOS下的copy命令。</p><p>常用选项说明：</p><table><thead><tr><th>选项</th><th>含义</th></tr></thead><tbody><tr><td>-a</td><td>该选项通常在复制目录时使用，它保留链接、文件属性，并递归地复制目录，简单而言，保持文件原有属性。</td></tr><tr><td>-f</td><td>已经存在的目标文件而不提示</td></tr><tr><td>-i</td><td>交互式复制，在覆盖目标文件之前将给出提示要求用户确认</td></tr><tr><td>-r</td><td>若给出的源文件是目录文件，则cp将递归复制该目录下的所有子目录和文件，目标文件必须为一个目录名。</td></tr><tr><td>-v</td><td>显示拷贝进度</td></tr><tr><td>-l</td><td>创建硬链接(hard link)，而非复制文件本身</td></tr><tr><td>-s</td><td>复制成为符号链接 (symbolic link)，相当于批量创建快捷方式</td></tr><tr><td>-u</td><td>若 destination 比 source 旧才升级 destination ！</td></tr></tbody></table><p>cp vim_configure/ code/ -ivr 把文件夹 vim_configure 拷贝到 code 目录里。</p><h4 id="移动文件：mv">移动文件：mv</h4><p>mv命令用来移动文件或目录，也可以给文件或目录重命名。</p><p>常用选项说明：</p><table><thead><tr><th>选项</th><th>含义</th></tr></thead><tbody><tr><td>-f</td><td>禁止交互式操作，如有覆盖也不会给出提示</td></tr><tr><td>-i</td><td>确认交互方式操作，如果mv操作将导致对已存在的目标文件的覆盖，系统会询问是否重写，要求用户回答以避免误覆盖文件</td></tr><tr><td>-v</td><td>显示移动进度</td></tr></tbody></table><h4 id="归档管理：tar">归档管理：tar</h4><p>此命令可以把一系列文件归档到一个大文件中，也可以把档案文件解开以恢复数据。</p><p>tar使用格式 tar [参数] 打包文件名 文件</p><p>tar命令参数很特殊，其参数前面可以使用“-”，也可以不使用。</p><p>常用参数：</p><table><thead><tr><th>参数</th><th>含义</th></tr></thead><tbody><tr><td>-c</td><td>生成档案文件，创建打包文件</td></tr><tr><td>-v</td><td>列出归档解档的详细过程，显示进度</td></tr><tr><td>-f</td><td>指定档案文件名称，f后面一定是.tar文件，所以必须放选项最后</td></tr><tr><td>-t</td><td>列出档案中包含的文件</td></tr><tr><td>-x</td><td>解开档案文件</td></tr></tbody></table><p>注意：除了f需要放在参数的最后，其它参数的顺序任意。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">python@ubuntu:~/test$ tar -cvf test.tar 1.txt 2.txt 3.txt </span><br><span class="line">1.txt</span><br><span class="line">2.txt</span><br><span class="line">3.txt</span><br><span class="line">python@ubuntu:~/test$ ll</span><br><span class="line">总用量 32</span><br><span class="line">drwxrwxr-x  2 python python  4096 11月 21 14:02 ./</span><br><span class="line">drwxr-xr-x 31 python python  4096 11月 21 13:34 ../</span><br><span class="line">-rw-rw-r--  1 python python    51 1月  20  2017 1.txt</span><br><span class="line">-rw-rw-r--  1 python python    55 1月  20  2017 2.txt</span><br><span class="line">-rw-rw-r--  1 python python    51 1月  20  2017 3.txt</span><br><span class="line">-rw-rw-r--  1 python python 10240 11月 21 14:02 test.tar</span><br><span class="line">python@ubuntu:~/test$ <span class="built_in">rm</span> -rf *.txt</span><br><span class="line">python@ubuntu:~/test$ ll</span><br><span class="line">总用量 20</span><br><span class="line">drwxrwxr-x  2 python python  4096 11月 21 14:03 ./</span><br><span class="line">drwxr-xr-x 31 python python  4096 11月 21 13:34 ../</span><br><span class="line">-rw-rw-r--  1 python python 10240 11月 21 14:02 test.tar</span><br><span class="line">python@ubuntu:~/test$ tar -xvf test.tar </span><br><span class="line">1.txt</span><br><span class="line">2.txt</span><br><span class="line">3.txt</span><br><span class="line">python@ubuntu:~/test$ <span class="built_in">ls</span> *.txt</span><br><span class="line">1.txt  2.txt  3.txt</span><br><span class="line">123456789101112131415161718192021222324</span><br></pre></td></tr></table></figure><h4 id="文件压缩解压：gzip、bzip2">文件压缩解压：gzip、bzip2</h4><p>tar与gzip命令结合使用实现文件打包、压缩。 tar只负责打包文件，但不压缩，用gzip压缩tar打包后的文件，其扩展名一般用xxxx.tar.gz。</p><p>gzip使用格式如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gzip  [选项]  被压缩文件</span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>常用选项：</p><table><thead><tr><th>选项</th><th>含义</th></tr></thead><tbody><tr><td>-d</td><td>解压文件</td></tr><tr><td>-r</td><td>压缩文件</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">python@ubuntu:~/test$ ll *.tar*</span><br><span class="line">-rw-rw-r-- 1 python python 10240 11月 25 07:39 test.tar</span><br><span class="line">python@ubuntu:~/test$ gzip -r test.tar test.tar.gz  ==&gt;或者:gzip test.tar</span><br><span class="line">python@ubuntu:~/test$ ll *.tar*</span><br><span class="line">-rw-rw-r-- 1 python python 139 11月 25 07:39 test.tar.gz</span><br><span class="line">python@ubuntu:~/test$ gzip -d test.tar.gz</span><br><span class="line">python@ubuntu:~/test$ ll *.tar*  </span><br><span class="line">-rw-rw-r-- 1 python python 10240 11月 25 07:39 test.tar</span><br><span class="line">12345678</span><br></pre></td></tr></table></figure><p>tar命令中-z选项可以调用gzip实现了一个压缩的功能，实行一个先打包后压缩的过程。</p><p>压缩用法：tar zcvf 压缩包包名 文件1 文件2 …</p><p>例如： tar zcvf test.tar.gz 1.c 2.c 3.c 4.c把 1.c 2.c 3.c 4.c 压缩成 test.tar.gz</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">python@ubuntu:~/test/code$ <span class="built_in">ls</span></span><br><span class="line">1.c  2.c  3.c  4.c</span><br><span class="line">python@ubuntu:~/test/code$ tar zcvf test.tar.gz 1.c 2.c 3.c 4.c </span><br><span class="line"></span><br><span class="line">python@ubuntu:~/test/code$ <span class="built_in">ls</span></span><br><span class="line">1.c  2.c  3.c  4.c  test.tar.gz</span><br><span class="line">python@ubuntu:~/test/code$ tar -zcvf new.tar.gz 1.c 2.c 3.c 4.c        </span><br><span class="line"></span><br><span class="line">python@ubuntu:~/test/code$ <span class="built_in">ls</span></span><br><span class="line">1.c  2.c  3.c  4.c  new.tar.gz  test.tar.gz</span><br><span class="line">12345678910</span><br></pre></td></tr></table></figure><p>解压用法： tar zxvf 压缩包包名</p><p>例如：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">python@ubuntu:~/test/code$ <span class="built_in">ls</span></span><br><span class="line">new.tar.gz  test.tar.gz</span><br><span class="line">python@ubuntu:~/test/code$ tar zxvf new.tar.gz </span><br><span class="line">1.c</span><br><span class="line">2.c</span><br><span class="line">3.c</span><br><span class="line">4.c</span><br><span class="line">python@ubuntu:~/test/code$ <span class="built_in">ls</span></span><br><span class="line">1.c  2.c  3.c  4.c  new.tar.gz  test.tar.gz</span><br><span class="line">123456789</span><br></pre></td></tr></table></figure><p>解压到指定目录：-C （解压时可以不指定-z选项）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">python@ubuntu:~/test/code$ <span class="built_in">ls</span> number/     </span><br><span class="line">python@ubuntu:~/test/code$ tar xvf test.tar.gz -C number/     </span><br><span class="line"></span><br><span class="line">python@ubuntu:~/test/code$ <span class="built_in">ls</span> number/                    </span><br><span class="line">1.c  2.c  3.c  4.c</span><br><span class="line">12345</span><br></pre></td></tr></table></figure><p>bzip2命令跟gzip用法类似</p><p>压缩用法：tar jcvf 压缩包包名 文件…(tar jcvf bk.tar.bz2 *.c)</p><p>解压用法：tar jxvf 压缩包包名 (tar jxvf bk.tar.bz2)</p><h4 id="文件压缩解压：zip、unzip">文件压缩解压：zip、unzip</h4><p>通过zip压缩文件的目标文件不需要指定扩展名，默认扩展名为zip。</p><p>压缩文件：zip [-r] 目标文件(没有扩展名) 源文件</p><p>解压文件：unzip -d 解压后目录文件 压缩文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">python@ubuntu:~/test$ <span class="built_in">ls</span></span><br><span class="line">1.txt  2.txt  3.txt  test.tar</span><br><span class="line">python@ubuntu:~/test$ zip myzip *.txt</span><br><span class="line">  adding: 1.txt (stored 0%)</span><br><span class="line">  adding: 2.txt (stored 0%)</span><br><span class="line">  adding: 3.txt (stored 0%)</span><br><span class="line">python@ubuntu:~/test$ <span class="built_in">ls</span></span><br><span class="line">1.txt  2.txt  3.txt  myzip.zip  test.tar</span><br><span class="line">python@ubuntu:~/test$ <span class="built_in">rm</span> -f *.txt *.tar</span><br><span class="line">python@ubuntu:~/test$ <span class="built_in">ls</span></span><br><span class="line">myzip.zip</span><br><span class="line">python@ubuntu:~/test$ unzip myzip.zip </span><br><span class="line">Archive:  myzip.zip</span><br><span class="line"> extracting: 1.txt                   </span><br><span class="line"> extracting: 2.txt                   </span><br><span class="line"> extracting: 3.txt                   </span><br><span class="line">python@ubuntu:~/test$ <span class="built_in">ls</span></span><br><span class="line">1.txt  2.txt  3.txt  myzip.zip</span><br><span class="line">python@ubuntu:~/test$ unzip -d <span class="built_in">dir</span> myzip.zip </span><br><span class="line">Archive:  myzip.zip</span><br><span class="line"> extracting: <span class="built_in">dir</span>/1.txt               </span><br><span class="line"> extracting: <span class="built_in">dir</span>/2.txt               </span><br><span class="line"> extracting: <span class="built_in">dir</span>/3.txt               </span><br><span class="line">python@ubuntu:~/test$ <span class="built_in">ls</span></span><br><span class="line">1.txt  2.txt  3.txt  <span class="built_in">dir</span>  myzip.zip</span><br><span class="line">12345678910111213141516171819202122232425</span><br></pre></td></tr></table></figure><h4 id="查看命令位置：which">查看命令位置：which</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">python@ubuntu:~$ <span class="built_in">which</span> <span class="built_in">ls</span></span><br><span class="line">/bin/ls</span><br><span class="line">python@ubuntu:~$ <span class="built_in">which</span> <span class="built_in">sudo</span></span><br><span class="line">/usr/bin/sudo</span><br><span class="line">1234</span><br></pre></td></tr></table></figure><h3 id="用户和用户组管理">用户和用户组管理</h3><p>用户管理包括用户与组账号的管理。</p><p>在Unix/Linux系统中，不论是由本机或是远程登录系统，每个系统都必须拥有一个账号，并且对于不同的系统资源拥有不同的使用权限。</p><p>Unix/Linux系统中的root账号通常用于系统的维护和管理，它对Unix/<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F&amp;spm=1001.2101.3001.7020">Linux操作系统</a>的所有部分具有不受限制的访问权限。</p><p>在Unix/Linux安装的过程中，系统会自动创建许多用户账号，而这些默认的用户就称为“标准用户”。</p><p>在大多数版本的Unix/Linux中，都不推荐直接使用root账号登录系统。</p><h4 id="查看当前用户：whoami">查看当前用户：whoami</h4><p>查看当前系统当前账号的用户名。可通过cat /etc/passwd查看系统用户信息。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">python@ubuntu:~/test$ <span class="built_in">whoami</span></span><br><span class="line">python</span><br><span class="line">12</span><br></pre></td></tr></table></figure><h4 id="查看登录用户：who">查看登录用户：who</h4><p>who命令用于查看当前所有登录系统的用户信息。</p><p>常用选项：</p><table><thead><tr><th>选项</th><th>含义</th></tr></thead><tbody><tr><td>-m或am I</td><td>只显示运行who命令的用户名、登录终端和登录时间</td></tr><tr><td>-q或–count</td><td>只显示用户的登录账号和登录用户的数量</td></tr><tr><td>-u</td><td>在登录时间后显示该用户最后一次操作到当前的时间间隔</td></tr><tr><td>-u或–heading</td><td>显示列标题</td></tr></tbody></table><h4 id="退出登录账户：-exit">退出登录账户： exit</h4><p>如果是图形界面，退出当前终端；</p><p>如果是使用ssh远程登录，退出登陆账户；</p><p>如果是切换后的登陆用户，退出则返回上一个登陆账号。</p><h4 id="添加用户账号：useradd">添加用户账号：useradd</h4><p>在Unix/Linux中添加用户账号可以使用adduser或useradd命令，因为adduser命令是指向useradd命令的一个链接，因此，这两个命令的使用格式完全一样。</p><p>useradd命令的使用格式如下： useradd [参数] 新建用户账号</p><table><thead><tr><th>参数</th><th>含义</th></tr></thead><tbody><tr><td>-d</td><td>指定用户登录系统时的主目录</td></tr><tr><td>-m</td><td>自动建立目录，未指定-d参数时会在/home/{当前用户}目录下建立主目录</td></tr><tr><td>-g</td><td>指定组名称</td></tr></tbody></table><p>相关说明：</p><ul class="lvl-0"><li class="lvl-2"><p>Linux每个用户都要有一个主目录，主目录就是第一次登陆系统，用户的默认当前目录(/home/用户)；</p></li><li class="lvl-2"><p>每一个用户必须有一个主目录，所以用useradd创建用户的时候，一定给用户指定一个主目录；</p></li><li class="lvl-2"><p>如果创建用户的时候，不指定组名，那么系统会自动创建一个和用户名一样的组名。</p></li></ul><p>若创建用户时未指定家目录，后期可通过<code>usermod -d /home/abc abc</code>指定</p><table><thead><tr><th>命令</th><th>含义</th></tr></thead><tbody><tr><td>useradd -d /home/abc abc -m</td><td>创建abc用户，如果/home/abc目录不存在，就自动创建这个目录，同时用户属于abc组</td></tr><tr><td>useradd -d /home/a a -g test -m</td><td>创建一个用户名字叫a，主目录在/home/a，如果主目录不存在，就自动创建主目录，同时用户属于test组</td></tr><tr><td>cat /etc/passwd</td><td>查看系统当前用户名</td></tr></tbody></table><h4 id="修改用户：usermod">修改用户：usermod</h4><p>常用的选项包括<code>-c, -d, -m, -g, -G, -s, -u以及-o等</code>，这些选项的意义与<code>useradd</code>命令中的选项一样，可以为用户指定新的资源值 。</p><p>修改用户所在组：usermod -g 用户组 用户名</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">usermod -g <span class="built_in">test</span> abc</span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>改abc用户的家目录位置：usermod -d 家目录 用户名</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">usermod -d /home/abc abc</span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>选项<code>-l 新用户名</code>指定一个新的账号，可修改用户名：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">python@ubuntu:~/txt$ <span class="built_in">tail</span> /etc/passwd -n 1 </span><br><span class="line">aaa:x:1001:1001::/home/aaa:</span><br><span class="line">python@ubuntu:~/txt$ <span class="built_in">sudo</span> usermod -l bbb -d /home/bbb aaa   </span><br><span class="line">python@ubuntu:~/txt$ <span class="built_in">tail</span> /etc/passwd -n 1               </span><br><span class="line">bbb:x:1001:1001::/home/bbb:</span><br><span class="line">12345</span><br></pre></td></tr></table></figure><h4 id="设置用户密码：passwd">设置用户密码：passwd</h4><p>超级用户可以为自己和其他用户指定口令，普通用户只能用它修改自己的口令。命令的格式为：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">passwd 选项 用户名</span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>可使用的选项：</p><ul class="lvl-0"><li class="lvl-2"><p>-l 锁定口令，即禁用账号。</p></li><li class="lvl-2"><p>-u 口令解锁。</p></li><li class="lvl-2"><p>-d 使账号无口令。</p></li><li class="lvl-2"><p>-f 强迫用户下次登录时修改口令。</p></li></ul><p>假设当前用户是sam，则下面的命令修改该用户自己的口令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ passwd </span><br><span class="line">Old password:****** </span><br><span class="line">New password:******* </span><br><span class="line">Re-enter new password:*******</span><br><span class="line">1234</span><br></pre></td></tr></table></figure><p>如果是超级用户，可以用下列形式指定任何用户的口令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># passwd sam </span></span><br><span class="line">New password:******* </span><br><span class="line">Re-enter new password:*******</span><br><span class="line">123</span><br></pre></td></tr></table></figure><p>普通用户修改自己的口令时，passwd命令会先询问原口令，验证后再要求用户输入两遍新口令，如果两次输入的口令一致，则将这个口令指定给用户；而超级用户为用户指定口令时，就不需要知道原口令。</p><p>为用户指定空口令时，执行下列形式的命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">passwd -d sam</span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>此命令将用户 sam 的口令删除，这样用户 sam 下一次登录时，系统就不再允许该用户登录了。</p><p>passwd 命令还可以用 -l(lock) 选项锁定某一用户，使其不能登录，例如：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">passwd -l sam</span><br><span class="line">1</span><br></pre></td></tr></table></figure><h4 id="删除用户：userdel">删除用户：userdel</h4><table><thead><tr><th>命令</th><th>含义</th></tr></thead><tbody><tr><td>userdel abc(用户名)</td><td>删除abc用户，但不会自动删除用户的主目录</td></tr><tr><td>userdel -r abc(用户名)</td><td>删除用户，同时删除用户的主目录</td></tr></tbody></table><h4 id="切换用户：su">切换用户：su</h4><p>su后面可以加“-”会将当前的工作目录自动转换到切换后的用户主目录.</p><table><thead><tr><th>命令</th><th>含义</th></tr></thead><tbody><tr><td>su</td><td>切换到root用户</td></tr><tr><td>su root</td><td>切换到root用户</td></tr><tr><td>su -</td><td>切换到root用户，同时切换目录到/root</td></tr><tr><td>su - root</td><td>切换到root用户，同时切换目录到/root</td></tr><tr><td>su 普通用户</td><td>切换到普通用户</td></tr><tr><td>su - 普通用户</td><td>切换到普通用户，同时切换普通用户所在的目录</td></tr></tbody></table><p>注意：对于ubuntu平台，只能通过sudo su进入root账号。</p><p>sudo允许系统管理员让普通用户执行一些或者全部的root命令的一个工具。</p><h4 id="以root身份执行指令：sudo">以root身份执行指令：sudo</h4><p>sudo命令可以临时获取root权限</p><p>使用权限：在 /etc/sudoers 中有出现的使用者。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">显示出自己（执行 <span class="built_in">sudo</span> 的使用者）的权限</span><br><span class="line"><span class="built_in">sudo</span> -l</span><br><span class="line">以root权限执行上一条命令</span><br><span class="line"><span class="built_in">sudo</span> !!</span><br><span class="line">1234</span><br></pre></td></tr></table></figure><p>sudoers文件配置语法</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">user  MACHINE=COMMANDS</span><br><span class="line">用户 登录的主机=（可以变换的身份） 可以执行的命令  </span><br><span class="line">12</span><br></pre></td></tr></table></figure><p>例子：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">允许root用户执行任意路径下的任意命令 </span><br><span class="line">root    ALL=(ALL)       ALL</span><br><span class="line">允许wheel用户组中的用户执行所有命令  </span><br><span class="line">%wheel        ALL=(ALL)       ALL</span><br><span class="line">允许wheel用户组中的用户在不输入该用户的密码的情况下使用所有命令</span><br><span class="line">%wheel        ALL=(ALL)       NOPASSWD: ALL</span><br><span class="line">允许support用户在EPG的机器上不输入密码的情况下使用SQUID中的命令</span><br><span class="line">Cmnd_Alias   SQUID = /opt/vtbin/squid_refresh, /sbin/service, /bin/rm</span><br><span class="line">Host_Alias   EPG = 192.168.1.1, 192.168.1.2</span><br><span class="line">support EPG=(ALL) NOPASSWD: SQUID</span><br><span class="line">12345678910</span><br></pre></td></tr></table></figure><h4 id="添加、删除组账号：groupadd、groupdel">添加、删除组账号：groupadd、groupdel</h4><p>groupadd 新建组账号 groupdel 组账号 cat /etc/group 查看用户组</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">python@ubuntu:~/test$ <span class="built_in">sudo</span> groupadd abc</span><br><span class="line">python@ubuntu:~/test$ <span class="built_in">sudo</span> groupdel abc</span><br><span class="line">python@ubuntu:~/test$ <span class="built_in">sudo</span> groupdel abc</span><br><span class="line">groupdel：“abc”组不存在</span><br><span class="line">1234</span><br></pre></td></tr></table></figure><h4 id="用户组管理：groupmod">用户组管理：groupmod</h4><p>修改用户组的属性使用groupmod命令。其语法如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">groupmod 选项 用户组</span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>常用的选项有：</p><ul class="lvl-0"><li class="lvl-2"><p>-g GID 为用户组指定新的组标识号。</p></li><li class="lvl-2"><p>-o 与-g选项同时使用，用户组的新GID可以与系统已有用户组的GID相同。</p></li><li class="lvl-2"><p>-n新用户组 将用户组的名字改为新名字</p></li></ul><p>将组group2的组标识号修改为102：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">groupmod -g 102 group2</span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>将组group2的标识号改为10000，组名修改为group3：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">groupmod –g 10000 -n group3 group2</span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>如果一个用户同时属于多个用户组，那么用户可以在用户组之间切换，以便具有其他用户组的权限。</p><p>用户可以在登录后，使用命令newgrp切换到其他用户组，这个命令的参数就是目的用户组。例如：</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>newgrp root</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>这条命令将当前用户切换到root用户组，前提条件是root用户组确实是该用户的主组或附加组。类似于用户账号的管理，用户组的管理也可以通过集成的系统管理工具来完成。</p><h3 id="系统管理">系统管理</h3><h4 id="查看当前日历：cal">查看当前日历：cal</h4><p>cal命令用于查看当前日历，-y显示整年日历：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">python@ubuntu:~$ cal</span><br><span class="line">      十一月 2019        </span><br><span class="line">日 一 二 三 四 五 六  </span><br><span class="line">                1  2  </span><br><span class="line"> 3  4  5  6  7  8  9  </span><br><span class="line">10 11 12 13 14 15 16  </span><br><span class="line">17 18 19 20 21 22 23  </span><br><span class="line">24 25 26 27 28 29 30 </span><br><span class="line">12345678</span><br></pre></td></tr></table></figure><h4 id="显示或设置时间：date">显示或设置时间：date</h4><p>设置时间格式（需要管理员权限）：</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">date</span> [MMDDhhmm<span class="string">[[CC]YY][.ss]]</span> +<span class="built_in">format</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>MM为月，DD为天，hh为小时，mm为分钟；CC为年前两位，YY为年的后两位，ss为秒。</p><p>如： date 010203042016.55。</p><p>显示时间格式（date ‘+%y,%m,%d,%H,%M,%S’）：</p><table><thead><tr><th>format格式</th><th>含义</th></tr></thead><tbody><tr><td>%Y，%y</td><td>年</td></tr><tr><td>%m</td><td>月</td></tr><tr><td>%d</td><td>日</td></tr><tr><td>%H</td><td>时</td></tr><tr><td>%M</td><td>分</td></tr><tr><td>%S</td><td>秒</td></tr></tbody></table><h4 id="查看网络状态：netstat">查看网络状态：netstat</h4><p>netstat命令用于显示网络状态。</p><p>利用netstat指令可让你得知整个Linux系统的网络情况。</p><p>语法：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">netstat <span class="selector-attr">[-acCeFghilMnNoprstuvVwx]</span><span class="selector-attr">[-A&lt;网络类型&gt;]</span><span class="selector-attr">[--ip]</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p><strong>参数说明</strong>：</p><ul class="lvl-0"><li class="lvl-2"><p>-a或–all 显示所有连线中的Socket。</p></li><li class="lvl-2"><p>-A&lt;网络类型&gt;或–&lt;网络类型&gt; 列出该网络类型连线中的相关地址。</p></li><li class="lvl-2"><p>-c或–continuous 持续列出网络状态。</p></li><li class="lvl-2"><p>-C或–cache 显示路由器配置的快取信息。</p></li><li class="lvl-2"><p>-e或–extend 显示网络其他相关信息。</p></li><li class="lvl-2"><p>-F或–fib 显示FIB。</p></li><li class="lvl-2"><p>-g或–groups 显示多重广播功能群组组员名单。</p></li><li class="lvl-2"><p>-h或–help 在线帮助。</p></li><li class="lvl-2"><p>-i或–interfaces 显示网络界面信息表单。</p></li><li class="lvl-2"><p>-l或–listening 显示监控中的服务器的Socket。</p></li><li class="lvl-2"><p>-M或–masquerade 显示伪装的网络连线。</p></li><li class="lvl-2"><p>-n或–numeric 直接使用IP地址，而不通过域名服务器。</p></li><li class="lvl-2"><p>-N或–netlink或–symbolic 显示网络硬件外围设备的符号连接名称。</p></li><li class="lvl-2"><p>-o或–timers 显示计时器。</p></li><li class="lvl-2"><p>-p或–programs 显示正在使用Socket的程序识别码和程序名称。</p></li><li class="lvl-2"><p>-r或–route 显示Routing Table。</p></li><li class="lvl-2"><p>-s或–statistice 显示网络工作信息统计表。</p></li><li class="lvl-2"><p>-t或–tcp 显示TCP传输协议的连线状况。</p></li><li class="lvl-2"><p>-u或–udp 显示UDP传输协议的连线状况。</p></li><li class="lvl-2"><p>-v或–verbose 显示指令执行过程。</p></li><li class="lvl-2"><p>-V或–version 显示版本信息。</p></li><li class="lvl-2"><p>-w或–raw 显示RAW传输协议的连线状况。</p></li><li class="lvl-2"><p>-x或–unix 此参数的效果和指定&quot;-A unix&quot;参数相同。</p></li><li class="lvl-2"><p>–ip或–inet 此参数的效果和指定&quot;-A inet&quot;参数相同。</p></li></ul><p>常用：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@VM_0_9_centos ~]# netstat -nltp</span><br><span class="line">Active Internet connections (only servers)</span><br><span class="line">Proto Recv-Q Send-Q Local Address  Foreign Address  State   PID/Program name</span><br><span class="line">tcp        0      0    0.0.0.0:22    0.0.0.0:*      LISTEN   3308/sshd</span><br><span class="line">tcp6       0      0         :::80         :::*      LISTEN   4624/httpd</span><br><span class="line">12345</span><br></pre></td></tr></table></figure><h4 id="查看进程信息：ps">查看进程信息：ps</h4><p>进程是一个具有一定独立功能的程序，它是操作系统动态执行的基本单元。</p><p><strong>ps命令选项：</strong></p><ul class="lvl-0"><li class="lvl-2"><p>ps a 显示现行终端机下的所有程序，包括其他用户的程序。</p></li><li class="lvl-2"><p>ps -A 显示所有程序。</p></li><li class="lvl-2"><p>ps c 列出程序时，显示每个程序真正的指令名称，而不包含路 径，参数或常驻服务的标示。</p></li><li class="lvl-2"><p>ps -e 此参数的效果和指定&quot;A&quot;参数相同。</p></li><li class="lvl-2"><p>ps e 列出程序时，显示每个程序所使用的环境变量。</p></li><li class="lvl-2"><p>ps f 用ASCII字符显示树状结构，表达程序间的相互关系。</p></li><li class="lvl-2"><p>ps -H 显示树状结构，表示程序间的相互关系。</p></li><li class="lvl-2"><p>ps -N 显示所有的程序，除了执行ps指令终端机下的程序之外。</p></li><li class="lvl-2"><p>ps s 采用程序信号的格式显示程序状况。</p></li><li class="lvl-2"><p>ps u 以用户为主的格式来显示程序状况。</p></li><li class="lvl-2"><p>ps x 显示所有程序，不以终端机来区分。</p></li></ul><table><thead><tr><th>选项</th><th>含义</th></tr></thead><tbody><tr><td>-a</td><td>显示终端上的所有进程，包括其他用户的进程</td></tr><tr><td>-u</td><td>显示进程的详细状态</td></tr><tr><td>-x</td><td>显示没有控制终端的进程</td></tr><tr><td>-w</td><td>显示加宽，以便显示更多的信息</td></tr><tr><td>-r</td><td>只显示正在运行的进程</td></tr></tbody></table><p><strong>常见用法：</strong></p><ul class="lvl-0"><li class="lvl-2"><p>ps -e 查看所有进程信息（瞬时的）</p></li><li class="lvl-2"><p>ps -u root -N 查看所有不是root运行的进程</p></li><li class="lvl-2"><p>ps ax 显示所有进程状态状态</p></li><li class="lvl-2"><p>ps -ef |grep xxx 显示含有xxx的进程</p></li></ul><p>实例：</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ps -A 显示进程信息</span></span><br><span class="line">PID TTY     TIME CMD</span><br><span class="line"> <span class="number"> 1 </span>?    00:00:02 init</span><br><span class="line"> <span class="number"> 2 </span>?    00:00:00 kthreadd</span><br><span class="line">……省略部分结果</span><br><span class="line">30749 pts/0  00:00:15 gedit</span><br><span class="line">30886 ?    00:01:10 qtcreator.bin</span><br><span class="line">30894 ?    00:00:00 qtcreator.bin </span><br><span class="line">12345678</span><br></pre></td></tr></table></figure><p>显示指定用户信息：</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ps -u root //显示root进程用户信息</span></span><br><span class="line"> PID TTY     TIME CMD</span><br><span class="line"> <span class="number"> 1 </span>?    00:00:02 init</span><br><span class="line"> <span class="number"> 2 </span>?    00:00:00 kthreadd</span><br><span class="line"> <span class="number"> 3 </span>?    00:00:00 migration/0</span><br><span class="line">……省略部分结果</span><br><span class="line">30487 ?    00:00:06 gnome-terminal</span><br><span class="line">30488 ?    00:00:00 gnome-pty-helpe</span><br><span class="line">30489 pts/0  00:00:00 bash</span><br><span class="line">123456789</span><br></pre></td></tr></table></figure><p>显示所有进程信息，连同命令行</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ps -ef //显示所有命令，连带命令行</span></span><br><span class="line">UID    PID PPID C STIME TTY     TIME CMD</span><br><span class="line">root    <span class="number"> 1 </span> <span class="number"> 0 </span>0 10:22 ?    00:00:02 /sbin/init</span><br><span class="line">root    <span class="number"> 2 </span> <span class="number"> 0 </span>0 10:22 ?    00:00:00 [kthreadd]</span><br><span class="line">root    <span class="number"> 3 </span> <span class="number"> 2 </span>0 10:22 ?    00:00:00 [migration/0]</span><br><span class="line">root    <span class="number"> 4 </span> <span class="number"> 2 </span>0 10:22 ?    00:00:00 [ksoftirqd/0]</span><br><span class="line">root    <span class="number"> 5 </span> <span class="number"> 2 </span>0 10:22 ?    00:00:00 [watchdog/0]</span><br><span class="line">root    <span class="number"> 6 </span> <span class="number"> 2 </span>0 10:22 ?    /usr/lib/NetworkManager</span><br><span class="line">……省略部分结果</span><br><span class="line">root  <span class="number"> 31302 </span>2095<span class="number"> 0 </span>17:42 ?    00:00:00 sshd: root@pts/2 </span><br><span class="line">root  <span class="number"> 31374 </span>31302<span class="number"> 0 </span>17:42 pts/2  00:00:00 -bash</span><br><span class="line">root  <span class="number"> 31400 </span> <span class="number"> 1 </span>0 17:46 ?    00:00:00 /usr/bin/python /usr/sbin/aptd</span><br><span class="line">root  <span class="number"> 31407 </span>31374<span class="number"> 0 </span>17:48 pts/2  00:00:00 ps -ef</span><br><span class="line">12345678910111213</span><br></pre></td></tr></table></figure><h4 id="以树状图显示进程关系：pstree">以树状图显示进程关系：pstree</h4><p>显示进程的关系</p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">pstree</span><br><span class="line">init-+-amd</span><br><span class="line">|<span class="string">-apmd</span></span><br><span class="line"><span class="string"></span>|<span class="string">-atd</span></span><br><span class="line"><span class="string"></span>|<span class="string">-httpd---10*[httpd]</span></span><br><span class="line"><span class="string">%pstree -p</span></span><br><span class="line"><span class="string">init(1)-+-amd(447)</span></span><br><span class="line"><span class="string"></span>|<span class="string">-apmd(105)</span></span><br><span class="line"><span class="string"></span>|<span class="string">-atd(339)</span></span><br><span class="line"><span class="string">%pstree -c</span></span><br><span class="line"><span class="string">init-+-amd</span></span><br><span class="line"><span class="string"></span>|<span class="string">-apmd</span></span><br><span class="line"><span class="string"></span>|<span class="string">-atd</span></span><br><span class="line"><span class="string"></span>|<span class="string">-httpd-+-httpd</span></span><br><span class="line"><span class="string"></span>|<span class="string"> </span>|<span class="string">-httpd</span></span><br><span class="line"><span class="string"></span>|<span class="string"> </span>|<span class="string">-httpd</span></span><br><span class="line"><span class="string"></span>|<span class="string"> </span>|<span class="string">-httpd</span></span><br><span class="line"><span class="string">....</span></span><br><span class="line"><span class="string">123456789101112131415161718</span></span><br></pre></td></tr></table></figure><p>特别表明在运行的进程：</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># pstree -apnh <span class="comment">//显示进程间的关系</span></span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>同时显示用户名称：</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># pstree -u <span class="comment">//显示用户名称</span></span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><h4 id="动态显示进程：top">动态显示进程：top</h4><p>top命令用来动态显示运行中的进程。top命令能够在运行后，在指定的时间间隔更新显示信息。-d参数可以指定显示信息更新的时间间隔。</p><p>在top命令执行后，可以按下按键得到对显示的结果进行排序：</p><table><thead><tr><th>按键</th><th>含义</th></tr></thead><tbody><tr><td>M</td><td>根据内存使用量来排序</td></tr><tr><td>P</td><td>根据CPU占有率来排序</td></tr><tr><td>T</td><td>根据进程运行时间的长短来排序</td></tr><tr><td>U</td><td>可以根据后面输入的用户名来筛选进程</td></tr><tr><td>K</td><td>可以根据后面输入的PID来杀死进程。</td></tr><tr><td>q</td><td>退出</td></tr><tr><td>h</td><td>获得帮助</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">python@ubuntu:~$ top</span><br><span class="line">top - 08:31:54 up 2 min,  1 user,  load average: 0.25, 0.37, 0.17</span><br><span class="line">Tasks: 271 total,   1 running, 270 sleeping,   0 stopped,   0 zombie</span><br><span class="line">%Cpu(s):  0.2 us,  0.0 sy,  0.0 ni, 99.8 <span class="built_in">id</span>,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st</span><br><span class="line">KiB Mem :  4028880 total,  3210104 free,   331668 used,   487108 buff/cache</span><br><span class="line">KiB Swap:  4192252 total,  4192252 free,        0 used.  3414856 avail Mem </span><br><span class="line"></span><br><span class="line">   PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND    </span><br><span class="line">  4827 redis     20   0   47204   6632   2300 S   0.3  0.2   0:00.21 redis-ser+ </span><br><span class="line">  6371 python    20   0   49000   3896   3176 R   0.3  0.1   0:00.12 top        </span><br><span class="line">     1 root      20   0  119940   6112   4004 S   0.0  0.2   0:02.77 systemd    </span><br><span class="line">     2 root      20   0       0      0      0 S   0.0  0.0   0:00.02 kthreadd   </span><br><span class="line">     3 root      20   0       0      0      0 S   0.0  0.0   0:00.11 ksoftirqd+ </span><br><span class="line">12345678910111213</span><br></pre></td></tr></table></figure><p>更高级的命令是htop，但需要安装：</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@VM_0_9_centos ~]<span class="comment"># htop</span></span><br><span class="line"></span><br><span class="line">  CPU[||                                                              1.3%]   Tasks: 55,<span class="number"> 29 </span>thr;<span class="number"> 1 </span>running</span><br><span class="line">  Mem[||||||||||||||||||||||||||||||||||||||||||||||||||||||||||184M/1.80G]   Load average: 0.00 0.01 0.05 </span><br><span class="line">  Swp[                                                               0K/0K]   Uptime:<span class="number"> 42 </span>days, 03:29:48</span><br><span class="line"></span><br><span class="line">  PID USER      PRI  NI  VIRT   RES   SHR S CPU% MEM%   TIME+  Command</span><br><span class="line"><span class="number"> 2609 </span>root      <span class="number"> 20 </span> <span class="number"> 0 </span> 156M <span class="number"> 9132 </span><span class="number"> 1784 </span>S  0.7  0.5 39:01.13 barad_agent</span><br><span class="line"><span class="number"> 2610 </span>root      <span class="number"> 20 </span> <span class="number"> 0 </span> 660M<span class="number"> 14168 </span><span class="number"> 1976 </span>S  0.7  0.8  3h35:20 barad_agent</span><br><span class="line"><span class="number"> 1158 </span>root      <span class="number"> 20 </span> <span class="number"> 0 </span> 120M <span class="number"> 2576 </span><span class="number"> 1492 </span>R  0.0  0.1  0:00.01 htop</span><br><span class="line">12345678910</span><br></pre></td></tr></table></figure><h4 id="终止进程：kill">终止进程：kill</h4><p>kill命令指定进程号的进程，需要配合 ps 使用。</p><p>使用格式：</p><figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kill [-<span class="keyword">signal</span><span class="string">] pid</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>信号值从0到15，其中9为绝对终止，可以处理一般信号无法终止的进程。</p><h4 id="关机重启：reboot、shutdown、init">关机重启：reboot、shutdown、init</h4><table><thead><tr><th>命令</th><th>含义</th></tr></thead><tbody><tr><td>reboot</td><td>重新启动操作系统</td></tr><tr><td>shutdown –r now</td><td>重新启动操作系统，shutdown会给别的用户提示</td></tr><tr><td>shutdown -h now</td><td>立刻关机，其中now相当于时间为0的状态</td></tr><tr><td>shutdown -h 20:25</td><td>系统在今天的20:25 会关机</td></tr><tr><td>shutdown -h +10</td><td>系统再过十分钟后自动关机</td></tr><tr><td>init 0</td><td>关机</td></tr><tr><td>init 6</td><td>重启</td></tr></tbody></table><h4 id="检测磁盘空间：df">检测磁盘空间：df</h4><p>df命令用于检测文件系统的磁盘空间占用和空余情况，可以显示所有文件系统对节点和磁盘块的使用情况。</p><table><thead><tr><th>选项</th><th>含义</th></tr></thead><tbody><tr><td>-a</td><td>显示所有文件系统的磁盘使用情况</td></tr><tr><td>-m</td><td>以1024字节为单位显示</td></tr><tr><td>-t</td><td>显示各指定文件系统的磁盘空间使用情况</td></tr><tr><td>-T</td><td>显示文件系统</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">python@ubuntu:~/test$ <span class="built_in">df</span> -Th</span><br><span class="line">文件系统       类型      容量  已用  可用 已用% 挂载点</span><br><span class="line">udev           devtmpfs  2.0G     0  2.0G    0% /dev</span><br><span class="line">tmpfs          tmpfs     394M  6.4M  388M    2% /run</span><br><span class="line">/dev/sda1      ext4       21G  8.7G   11G   45% /</span><br><span class="line">tmpfs          tmpfs     2.0G  256K  2.0G    1% /dev/shm</span><br><span class="line">tmpfs          tmpfs     5.0M  4.0K  5.0M    1% /run/lock</span><br><span class="line">tmpfs          tmpfs     2.0G     0  2.0G    0% /sys/fs/cgroup</span><br><span class="line">tmpfs          tmpfs     394M   44K  394M    1% /run/user/1000</span><br><span class="line">[root@VM_0_9_centos ~]# <span class="built_in">df</span> -Th</span><br><span class="line">Filesystem     Type      Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/vda1      ext4       50G  4.8G   42G  11% /</span><br><span class="line">devtmpfs       devtmpfs  909M     0  909M   0% /dev</span><br><span class="line">tmpfs          tmpfs     920M   24K  920M   1% /dev/shm</span><br><span class="line">tmpfs          tmpfs     920M  472K  919M   1% /run</span><br><span class="line">tmpfs          tmpfs     920M     0  920M   0% /sys/fs/cgroup</span><br><span class="line">tmpfs          tmpfs     184M     0  184M   0% /run/user/0</span><br><span class="line">1234567891011121314151617</span><br></pre></td></tr></table></figure><h4 id="检测目录所占磁盘空间：du">检测目录所占磁盘空间：du</h4><p>du命令用于统计目录或文件所占磁盘空间的大小，该命令的执行结果与df类似，du更侧重于磁盘的使用状况。</p><p>du命令的使用格式如下： du [选项] 目录或文件名</p><table><thead><tr><th>选项</th><th>含义</th></tr></thead><tbody><tr><td>-a</td><td>递归显示指定目录中各文件和子目录中文件占用的数据块</td></tr><tr><td>-s</td><td>显示指定文件或目录占用的数据块</td></tr><tr><td>-b</td><td>以字节为单位显示磁盘占用情况</td></tr><tr><td>-l</td><td>计算所有文件大小，对硬链接文件计算多次</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">python@ubuntu:~$ <span class="built_in">du</span> -sh /home/</span><br><span class="line">1.4G    /home/</span><br><span class="line">python@ubuntu:~$ <span class="built_in">du</span> -h</span><br><span class="line">4.0K    ./.gnome2/accels</span><br><span class="line">8.0K    ./.gnome2</span><br><span class="line">32K     ./.pki/nssdb</span><br><span class="line">36K     ./.pki</span><br><span class="line">8.0K    ./.dbus/session-bus</span><br><span class="line">12K     ./.dbus</span><br><span class="line">4.0K    ./.gnome2_private</span><br><span class="line">4.0K    ./Music</span><br><span class="line">1234567891011</span><br></pre></td></tr></table></figure><h4 id="查看或配置网卡信息：ifconfig">查看或配置网卡信息：ifconfig</h4><p>ifconfig显示所有网卡的信息：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">python@ubuntu:~$ ifconfig </span><br><span class="line">ens33     Link encap:以太网  硬件地址 00:0c:29:59:65:f2  </span><br><span class="line">          inet 地址:192.168.40.11  广播:192.168.40.255  掩码:255.255.255.0</span><br><span class="line">          inet6 地址: fe80::432f:6c4a:f47d:5f6b/64 Scope:Link</span><br><span class="line">          UP BROADCAST RUNNING MULTICAST  MTU:1500  跃点数:1</span><br><span class="line">          接收数据包:422794 错误:0 丢弃:0 过载:0 帧数:0</span><br><span class="line">          发送数据包:208666 错误:0 丢弃:0 过载:0 载波:0</span><br><span class="line">          碰撞:0 发送队列长度:1000 </span><br><span class="line">          接收字节:603741383 (603.7 MB)  发送字节:12819550 (12.8 MB)</span><br><span class="line"></span><br><span class="line">lo        Link encap:本地环回  </span><br><span class="line">          inet 地址:127.0.0.1  掩码:255.0.0.0</span><br><span class="line">          inet6 地址: ::1/128 Scope:Host</span><br><span class="line">          UP LOOPBACK RUNNING  MTU:65536  跃点数:1</span><br><span class="line">          接收数据包:2248 错误:0 丢弃:0 过载:0 帧数:0</span><br><span class="line">          发送数据包:2248 错误:0 丢弃:0 过载:0 载波:0</span><br><span class="line">          碰撞:0 发送队列长度:1 </span><br><span class="line">          接收字节:497588 (497.5 KB)  发送字节:497588 (497.5 KB)</span><br><span class="line">123456789101112131415161718</span><br></pre></td></tr></table></figure><p>修改ip:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">python@ubuntu:~$ <span class="built_in">sudo</span> ifconfig ens33 192.168.40.10</span><br><span class="line">python@ubuntu:~$ ifconfig ens33</span><br><span class="line">ens33     Link encap:以太网  硬件地址 00:0c:29:59:65:f2  </span><br><span class="line">          inet 地址:192.168.40.10  广播:192.168.40.255  掩码:255.255.255.0</span><br><span class="line">          inet6 地址: fe80::432f:6c4a:f47d:5f6b/64 Scope:Link</span><br><span class="line">          UP BROADCAST RUNNING MULTICAST  MTU:1500  跃点数:1</span><br><span class="line">          接收数据包:422818 错误:0 丢弃:0 过载:0 帧数:0</span><br><span class="line">          发送数据包:208692 错误:0 丢弃:0 过载:0 载波:0</span><br><span class="line">          碰撞:0 发送队列长度:1000 </span><br><span class="line">          接收字节:603745130 (603.7 MB)  发送字节:12822615 (12.8 MB)</span><br><span class="line">12345678910</span><br></pre></td></tr></table></figure><h4 id="测试远程主机连通性：ping">测试远程主机连通性：ping</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">python@ubuntu:~$ ping 192.168.40.1</span><br><span class="line">PING 192.168.40.1 (192.168.40.1) 56(84) bytes of data.</span><br><span class="line">64 bytes from 192.168.40.1: icmp_seq=1 ttl=64 time=0.699 ms</span><br><span class="line">64 bytes from 192.168.40.1: icmp_seq=2 ttl=64 time=0.372 ms</span><br><span class="line">^C</span><br><span class="line">--- 192.168.40.1 ping statistics ---</span><br><span class="line">2 packets transmitted, 2 received, 0% packet loss, time 1001ms</span><br><span class="line">rtt min/avg/max/mdev = 0.372/0.535/0.699/0.165 ms</span><br><span class="line">python@ubuntu:~$ ping 192.168.40.1 -c 3</span><br><span class="line">PING 192.168.40.1 (192.168.40.1) 56(84) bytes of data.</span><br><span class="line">64 bytes from 192.168.40.1: icmp_seq=1 ttl=64 time=0.409 ms</span><br><span class="line">64 bytes from 192.168.40.1: icmp_seq=2 ttl=64 time=0.367 ms</span><br><span class="line">64 bytes from 192.168.40.1: icmp_seq=3 ttl=64 time=0.373 ms</span><br><span class="line"></span><br><span class="line">--- 192.168.40.1 ping statistics ---</span><br><span class="line">3 packets transmitted, 3 received, 0% packet loss, time 2000ms</span><br><span class="line">rtt min/avg/max/mdev = 0.367/0.383/0.409/0.018 ms</span><br><span class="line">python@ubuntu:~$ </span><br><span class="line">123456789101112131415161718</span><br></pre></td></tr></table></figure><h3 id="Linux-磁盘管理">Linux 磁盘管理</h3><p>Linux磁盘管理常用三个命令为df、du和fdisk。</p><ul class="lvl-0"><li class="lvl-2"><p>df：列出文件系统的整体磁盘使用量</p></li><li class="lvl-2"><p>du：检查磁盘空间使用量</p></li><li class="lvl-2"><p>fdisk：用于磁盘分区</p></li></ul><hr><h4 id="df">df</h4><p>获取硬盘被占用了多少空间，目前还剩下多少空间等信息。</p><p>语法：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">df <span class="selector-attr">[-ahikHTm]</span> <span class="selector-attr">[目录或文件名]</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>选项与参数：</p><ul class="lvl-0"><li class="lvl-2"><p>-a ：列出所有的文件系统，包括系统特有的 /proc 等文件系统；</p></li><li class="lvl-2"><p>-k ：以 KBytes 的容量显示各文件系统；</p></li><li class="lvl-2"><p>-m ：以 MBytes 的容量显示各文件系统；</p></li><li class="lvl-2"><p>-h ：以人们较易阅读的 GBytes, MBytes, KBytes 等格式自行显示；</p></li><li class="lvl-2"><p>-H ：以 M=1000K 取代 M=1024K 的进位方式；</p></li><li class="lvl-2"><p>-T ：显示文件系统类型, 连同该 partition 的 filesystem 名称 (例如 ext3) 也列出；</p></li><li class="lvl-2"><p>-i ：不用硬盘容量，而以 inode 的数量来显示</p></li></ul><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="variable">@VM_0_9_centos</span> ~]<span class="comment"># df -hT</span></span><br><span class="line">Filesystem     Type      Size  Used Avail Use% Mounted on</span><br><span class="line"><span class="regexp">/dev/vda</span>1      ext4       <span class="number">50</span>G  <span class="number">4.9</span>G   <span class="number">42</span>G  <span class="number">11</span>% <span class="regexp">/</span></span><br><span class="line"><span class="regexp">devtmpfs       devtmpfs  909M     0  909M   0% /dev</span></span><br><span class="line">tmpfs          tmpfs     <span class="number">920</span>M   <span class="number">24</span>K  <span class="number">920</span>M   <span class="number">1</span>% <span class="regexp">/dev/shm</span></span><br><span class="line">tmpfs          tmpfs     <span class="number">920</span>M  <span class="number">496</span>K  <span class="number">919</span>M   <span class="number">1</span>% <span class="regexp">/run</span></span><br><span class="line"><span class="regexp">tmpfs          tmpfs     920M     0  920M   0% /sys</span><span class="regexp">/fs/cgroup</span></span><br><span class="line">tmpfs          tmpfs     <span class="number">184</span>M     <span class="number">0</span>  <span class="number">184</span>M   <span class="number">0</span>% <span class="regexp">/run/user</span><span class="regexp">/0</span></span><br><span class="line"><span class="regexp">12345678</span></span><br></pre></td></tr></table></figure><p>将系统内的所有特殊文件格式及名称都列出来</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@www ~]<span class="comment"># df -aT</span></span><br><span class="line">Filesystem    Type 1K-blocks    Used Available Use% Mounted on</span><br><span class="line">/dev/hdc2     ext3  <span class="number"> 9920624 </span>3823112  <span class="number"> 5585444 </span> 41% /</span><br><span class="line">proc          proc        <span class="number"> 0 </span>     <span class="number"> 0 </span>       <span class="number"> 0 </span>  -  /proc</span><br><span class="line">sysfs        sysfs        <span class="number"> 0 </span>     <span class="number"> 0 </span>       <span class="number"> 0 </span>  -  /sys</span><br><span class="line">devpts      devpts        <span class="number"> 0 </span>     <span class="number"> 0 </span>       <span class="number"> 0 </span>  -  /dev/pts</span><br><span class="line">/dev/hdc3     ext3  <span class="number"> 4956316 </span><span class="number"> 141376 </span> <span class="number"> 4559108 </span>  4% /home</span><br><span class="line">/dev/hdc1     ext3   <span class="number"> 101086 </span> <span class="number"> 11126 </span>   <span class="number"> 84741 </span> 12% /boot</span><br><span class="line">tmpfs        tmpfs   <span class="number"> 371332 </span>     <span class="number"> 0 </span>  <span class="number"> 371332 </span>  0% /dev/shm</span><br><span class="line">none   binfmt_misc        <span class="number"> 0 </span>     <span class="number"> 0 </span>       <span class="number"> 0 </span>  -  /proc/sys/fs/binfmt_misc</span><br><span class="line">sunrpc  rpc_pipefs        <span class="number"> 0 </span>     <span class="number"> 0 </span>       <span class="number"> 0 </span>  -  /var/lib/nfs/rpc_pipefs</span><br><span class="line">1234567891011</span><br></pre></td></tr></table></figure><h4 id="du">du</h4><p>du命令是对文件和目录磁盘使用的空间的查看.</p><p>语法：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">du</span> [-ahskm] 文件或目录名称</span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>选项与参数：</p><ul class="lvl-0"><li class="lvl-2"><p>-a ：列出所有的文件与目录容量，因为默认仅统计目录底下的文件量而已。</p></li><li class="lvl-2"><p>-h ：以人们较易读的容量格式 (G/M) 显示；</p></li><li class="lvl-2"><p>-s ：列出总量而已，而不列出每个各别的目录占用容量；</p></li><li class="lvl-2"><p>-S ：不包括子目录下的总计，与 -s 有点差别。</p></li><li class="lvl-2"><p>-k ：以 KBytes 列出容量显示；</p></li><li class="lvl-2"><p>-m ：以 MBytes 列出容量显示；</p></li></ul><p>du没有加任何选项时，只列出当前目录下的所有文件夹容量（包括隐藏文件夹）:</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@www ~]<span class="comment"># du</span></span><br><span class="line">8       <span class="string">./test4</span>     &lt;==每个目录都会列出来</span><br><span class="line">8       <span class="string">./test2</span></span><br><span class="line"><span class="string">....</span>中间省略<span class="string">....</span></span><br><span class="line">12      <span class="string">./.gconfd</span>   &lt;==包括隐藏文件的目录</span><br><span class="line">220     .           &lt;==这个目录<span class="params">(.)</span>所占用的总量</span><br><span class="line">123456</span><br></pre></td></tr></table></figure><p>直接输入 du 没有加任何选项时，则 du 会分析当前所在目录的文件与目录所占用的硬盘空间。</p><p>加<code>-a</code>选项才显示文件的容量：</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@www ~]<span class="comment"># du -a</span></span><br><span class="line">12      <span class="string">./install.log.syslog</span>   &lt;==有文件的列表了</span><br><span class="line">8       <span class="string">./.bash_logout</span></span><br><span class="line">8       <span class="string">./test4</span></span><br><span class="line">8       <span class="string">./test2</span></span><br><span class="line"><span class="string">....</span>中间省略<span class="string">....</span></span><br><span class="line">12      <span class="string">./.gconfd</span></span><br><span class="line">220     .</span><br><span class="line">12345678</span><br></pre></td></tr></table></figure><p>检查根目录底下每个目录所占用的容量</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@www ~]<span class="comment"># du -sh /*</span></span><br><span class="line">0       <span class="string">/bin</span></span><br><span class="line">108M    <span class="string">/boot</span></span><br><span class="line">4.0K    <span class="string">/data</span></span><br><span class="line"><span class="string">.....</span>中间省略<span class="string">....</span></span><br><span class="line">0       <span class="string">/proc</span></span><br><span class="line"><span class="string">.....</span>中间省略<span class="string">....</span></span><br><span class="line">40K     <span class="string">/tmp</span></span><br><span class="line">2.4G    <span class="string">/usr</span></span><br><span class="line">2.4G    <span class="string">/var</span></span><br><span class="line">12345678910</span><br></pre></td></tr></table></figure><h4 id="fdisk">fdisk</h4><p>fdisk 是 Linux 的磁盘分区表操作工具。</p><p>语法：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fdisk <span class="selector-attr">[-l]</span> 装置名称</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>选项与参数：</p><ul class="lvl-0"><li class="lvl-2"><p>-l ：输出后面接的装置所有的分区内容。若仅有 fdisk -l 时， 则系统将会把整个系统内能够搜寻到的装置的分区均列出来。</p></li></ul><p>列出所有分区信息：</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[root@AY120919111755c246621 tmp]<span class="comment"># fdisk -l</span></span><br><span class="line"></span><br><span class="line">Disk /dev/xvda: 21.5 GB,<span class="number"> 21474836480 </span>bytes</span><br><span class="line">255 heads,<span class="number"> 63 </span>sectors/track,<span class="number"> 2610 </span>cylinders</span><br><span class="line">Units = cylinders of<span class="number"> 16065 </span>*<span class="number"> 512 </span>=<span class="number"> 8225280 </span>bytes</span><br><span class="line">Sector size (logical/physical):<span class="number"> 512 </span>bytes /<span class="number"> 512 </span>bytes</span><br><span class="line">I/O size (minimum/optimal):<span class="number"> 512 </span>bytes /<span class="number"> 512 </span>bytes</span><br><span class="line">Disk identifier: 0x00000000</span><br><span class="line"></span><br><span class="line">    Device Boot      Start         End      Blocks   Id  System</span><br><span class="line">/dev/xvda1   *          <span class="number"> 1 </span>      <span class="number"> 2550 </span>  <span class="number"> 20480000 </span> <span class="number"> 83 </span> Linux</span><br><span class="line">/dev/xvda2           <span class="number"> 2550 </span>      <span class="number"> 2611 </span>    <span class="number"> 490496 </span> <span class="number"> 82 </span> Linux swap / Solaris</span><br><span class="line"></span><br><span class="line">Disk /dev/xvdb: 21.5 GB,<span class="number"> 21474836480 </span>bytes</span><br><span class="line">255 heads,<span class="number"> 63 </span>sectors/track,<span class="number"> 2610 </span>cylinders</span><br><span class="line">Units = cylinders of<span class="number"> 16065 </span>*<span class="number"> 512 </span>=<span class="number"> 8225280 </span>bytes</span><br><span class="line">Sector size (logical/physical):<span class="number"> 512 </span>bytes /<span class="number"> 512 </span>bytes</span><br><span class="line">I/O size (minimum/optimal):<span class="number"> 512 </span>bytes /<span class="number"> 512 </span>bytes</span><br><span class="line">Disk identifier: 0x56f40944</span><br><span class="line"></span><br><span class="line">    Device Boot      Start         End      Blocks   Id  System</span><br><span class="line">/dev/xvdb2              <span class="number"> 1 </span>      <span class="number"> 2610 </span>   20964793+ <span class="number"> 83 </span> Linux</span><br><span class="line">12345678910111213141516171819202122</span><br></pre></td></tr></table></figure><p>查看根目录所在磁盘，并查阅该硬盘内的相关信息：</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@www ~]<span class="comment"># df /            &lt;==注意：重点在找出磁盘文件名而已</span></span><br><span class="line">Filesystem           <span class="number">1</span>K-blocks      Used Available Use% Mounted <span class="keyword">on</span></span><br><span class="line">/dev/hdc2              <span class="number">9920624</span>   <span class="number">3823168</span>   <span class="number">5585388</span>  <span class="number">41</span>% /</span><br><span class="line"></span><br><span class="line">[root@www ~]<span class="comment"># fdisk /dev/hdc  &lt;==不要加上数字！</span></span><br><span class="line">The <span class="built_in">number</span> <span class="keyword">of</span> cylinders <span class="keyword">for</span> this disk <span class="keyword">is</span> <span class="keyword">set</span> <span class="keyword">to</span> <span class="number">5005.</span></span><br><span class="line">There <span class="keyword">is</span> nothing wrong <span class="keyword">with</span> <span class="keyword">that</span>, <span class="keyword">but</span> this <span class="keyword">is</span> larger than <span class="number">1024</span>,</span><br><span class="line"><span class="keyword">and</span> could <span class="keyword">in</span> certain setups cause problems <span class="keyword">with</span>:</span><br><span class="line"><span class="number">1</span>) software <span class="keyword">that</span> runs <span class="keyword">at</span> boot <span class="built_in">time</span> (e.g., old versions <span class="keyword">of</span> LILO)</span><br><span class="line"><span class="number">2</span>) booting <span class="keyword">and</span> partitioning software <span class="keyword">from</span> other OSs</span><br><span class="line">   (e.g., DOS FDISK, OS/<span class="number">2</span> FDISK)</span><br><span class="line"></span><br><span class="line">Command (m <span class="keyword">for</span> help):     &lt;==等待你的输入！</span><br><span class="line"><span class="number">12345678910111213</span></span><br></pre></td></tr></table></figure><p>输入 m 后，就会看到底下这些命令介绍</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">Command (m <span class="keyword">for</span> help): m   <span class="operator">&lt;=</span><span class="operator">=</span> 输入 m 后，就会看到底下这些命令介绍</span><br><span class="line">Command action</span><br><span class="line">   a   toggle a bootable flag</span><br><span class="line">   b   edit bsd disklabel</span><br><span class="line">   c   toggle the dos compatibility flag</span><br><span class="line">   d   <span class="keyword">delete</span> a <span class="keyword">partition</span>            <span class="operator">&lt;=</span><span class="operator">=</span>删除一个<span class="keyword">partition</span></span><br><span class="line">   l   list known <span class="keyword">partition</span> types</span><br><span class="line">   m   print this menu</span><br><span class="line">   n   <span class="keyword">add</span> a <span class="keyword">new</span> <span class="keyword">partition</span>           <span class="operator">&lt;=</span><span class="operator">=</span>新增一个<span class="keyword">partition</span></span><br><span class="line">   o   <span class="keyword">create</span> a <span class="keyword">new</span> <span class="keyword">empty</span> DOS <span class="keyword">partition</span> <span class="keyword">table</span></span><br><span class="line">   p   print the <span class="keyword">partition</span> <span class="keyword">table</span>     <span class="operator">&lt;=</span><span class="operator">=</span>在屏幕上显示分割表</span><br><span class="line">   q   quit <span class="keyword">without</span> saving changes   <span class="operator">&lt;=</span><span class="operator">=</span>不储存离开fdisk程序</span><br><span class="line">   s   <span class="keyword">create</span> a <span class="keyword">new</span> <span class="keyword">empty</span> Sun disklabel</span><br><span class="line">   t   change a <span class="keyword">partition</span><span class="string">&#x27;s system id</span></span><br><span class="line"><span class="string">   u   change display/entry units</span></span><br><span class="line"><span class="string">   v   verify the partition table</span></span><br><span class="line"><span class="string">   w   write table to disk and exit  &lt;==将刚刚的动作写入分割表</span></span><br><span class="line"><span class="string">   x   extra functionality (experts only)</span></span><br><span class="line"><span class="string">123456789101112131415161718</span></span><br></pre></td></tr></table></figure><p>离开 fdisk 时按下 <code>q</code>，那么所有的动作都不会生效！相反的， 按下<code>w</code>就是动作生效的意思。</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Command (m for help): p  &lt;== 这里可以输出目前磁盘的状态</span><br><span class="line"></span><br><span class="line">Disk /dev/hdc: 41.1 GB,<span class="number"> 41174138880 </span>bytes        &lt;==这个磁盘的文件名与容量</span><br><span class="line">255 heads,<span class="number"> 63 </span>sectors/track,<span class="number"> 5005 </span>cylinders      &lt;==磁头、扇区与磁柱大小</span><br><span class="line">Units = cylinders of<span class="number"> 16065 </span>*<span class="number"> 512 </span>=<span class="number"> 8225280 </span>bytes &lt;==每个磁柱的大小</span><br><span class="line"></span><br><span class="line">   Device Boot      Start         End      Blocks   Id  System</span><br><span class="line">/dev/hdc1   *          <span class="number"> 1 </span>        <span class="number"> 13 </span>    <span class="number"> 104391 </span> <span class="number"> 83 </span> Linux</span><br><span class="line">/dev/hdc2             <span class="number"> 14 </span>      <span class="number"> 1288 </span>   10241437+ <span class="number"> 83 </span> Linux</span><br><span class="line">/dev/hdc3           <span class="number"> 1289 </span>      <span class="number"> 1925 </span>    5116702+ <span class="number"> 83 </span> Linux</span><br><span class="line">/dev/hdc4           <span class="number"> 1926 </span>      <span class="number"> 5005 </span>  <span class="number"> 24740100 </span>  <span class="number"> 5 </span> Extended</span><br><span class="line">/dev/hdc5           <span class="number"> 1926 </span>      <span class="number"> 2052 </span>   <span class="number"> 1020096 </span> <span class="number"> 82 </span> Linux swap / Solaris</span><br><span class="line"><span class="comment"># 装置文件名 启动区否 开始磁柱    结束磁柱  1K大小容量 磁盘分区槽内的系统</span></span><br><span class="line"></span><br><span class="line">Command (m for help): q</span><br><span class="line">123456789101112131415</span><br></pre></td></tr></table></figure><p>使用 <code>p</code> 可以列出目前这颗磁盘的分割表信息，这个信息的上半部在显示整体磁盘的状态。</p><h4 id="磁盘格式化">磁盘格式化</h4><p>磁盘分割完毕后自然就是要进行文件系统的格式化，格式化的命令非常的简单，使用 <code>mkfs</code>（make filesystem） 命令。</p><p>语法：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkfs <span class="selector-attr">[-t 文件系统格式]</span> 装置文件名</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>选项与参数：</p><ul class="lvl-0"><li class="lvl-2"><p>-t ：可以接文件系统格式，例如 ext3, ext2, vfat 等(系统有支持才会生效)</p></li></ul><p>查看 mkfs 支持的文件格式：</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@VM_0_9_centos web]<span class="comment"># mkfs[tab]</span></span><br><span class="line">mkfs         mkfs.cramfs  mkfs.<span class="keyword">ext3 </span>   mkfs.minix   </span><br><span class="line">mkfs.<span class="keyword">btrfs </span>  mkfs.<span class="keyword">ext2 </span>   mkfs.<span class="keyword">ext4 </span>   mkfs.xfs</span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure><p>按下两个[tab]，会发现 mkfs 支持的文件格式如上所示。</p><p>将分区 /dev/hdc6（可指定其他分区） 格式化为ext3文件系统：</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">[root@www ~]# mkfs -t ext3 /dev/hdc6</span><br><span class="line">mke2fs 1.39 (29-May-2006)</span><br><span class="line">Filesystem label=                &lt;==这里指的是分割槽的名称(label)</span><br><span class="line">OS type: Linux</span><br><span class="line">Block <span class="attribute">size</span>=4096 (<span class="attribute">log</span>=2)          &lt;==block 的大小配置为 4K </span><br><span class="line">Fragment <span class="attribute">size</span>=4096 (<span class="attribute">log</span>=2)</span><br><span class="line">251392 inodes, 502023 blocks     &lt;==由此配置决定的inode/block数量</span><br><span class="line">25101 blocks (5.00%) reserved <span class="keyword">for</span> the super<span class="built_in"> user</span></span><br><span class="line"><span class="built_in"></span>First data <span class="attribute">block</span>=0</span><br><span class="line">Maximum filesystem <span class="attribute">blocks</span>=515899392</span><br><span class="line">16 block groups</span><br><span class="line">32768 blocks per group, 32768 fragments per<span class="built_in"> group</span></span><br><span class="line"><span class="built_in"></span>15712 inodes per<span class="built_in"> group</span></span><br><span class="line"><span class="built_in"></span>Superblock backups stored on blocks:</span><br><span class="line">        32768, 98304, 163840, 229376, 294912</span><br><span class="line"></span><br><span class="line">Writing inode tables: done</span><br><span class="line">Creating journal (8192 blocks): done &lt;==有日志记录</span><br><span class="line">Writing superblocks <span class="keyword">and</span> filesystem<span class="built_in"> accounting </span>information: done</span><br><span class="line"></span><br><span class="line">This filesystem will be automatically checked every 34 mounts <span class="keyword">or</span></span><br><span class="line">180 days, whichever comes first.  Use tune2fs -c <span class="keyword">or</span> -i <span class="keyword">to</span> override.</span><br><span class="line"><span class="comment"># 这样就创建起来我们所需要的 Ext3 文件系统了！简单明了！</span></span><br><span class="line">1234567891011121314151617181920212223</span><br></pre></td></tr></table></figure><h4 id="磁盘检验">磁盘检验</h4><p>fsck（file system check）用来检查和维护不一致的文件系统。</p><p>若系统掉电或磁盘发生问题，可利用fsck命令对文件系统进行检查。</p><p>语法：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fsck <span class="selector-attr">[-t 文件系统]</span> <span class="selector-attr">[-ACay]</span> 装置名称</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>选项与参数：</p><ul class="lvl-0"><li class="lvl-2"><p>-t : 给定档案系统的型式，若在 /etc/fstab 中已有定义或 kernel 本身已支援的则不需加上此参数</p></li><li class="lvl-2"><p>-s : 依序一个一个地执行 fsck 的指令来检查</p></li><li class="lvl-2"><p>-A : 对/etc/fstab 中所有列出来的 分区（partition）做检查</p></li><li class="lvl-2"><p>-C : 显示完整的检查进度</p></li><li class="lvl-2"><p>-d : 打印出 e2fsck 的 debug 结果</p></li><li class="lvl-2"><p>-p : 同时有 -A 条件时，同时有多个 fsck 的检查一起执行</p></li><li class="lvl-2"><p>-R : 同时有 -A 条件时，省略 / 不检查</p></li><li class="lvl-2"><p>-V : 详细显示模式</p></li><li class="lvl-2"><p>-a : 如果检查有错则自动修复</p></li><li class="lvl-2"><p>-r : 如果检查有错则由使用者回答是否修复</p></li><li class="lvl-2"><p>-y : 选项指定检测每个文件是自动输入yes，在不确定那些是不正常的时候，可以执行 # fsck -y 全部检查修复。</p></li></ul><p>查看系统有多少文件系统支持的 fsck 命令：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-attr">[root@www ~]</span># fsck<span class="selector-attr">[tab]</span><span class="selector-attr">[tab]</span></span><br><span class="line">fsck         fsck<span class="selector-class">.cramfs</span>  fsck<span class="selector-class">.ext2</span>    fsck<span class="selector-class">.ext3</span>    fsck<span class="selector-class">.msdos</span>   fsck<span class="selector-class">.vfat</span></span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure><p>强制检测 /dev/hdc6 分区:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">root@www</span> <span class="string">~</span>]<span class="comment"># fsck -C -f -t ext3 /dev/hdc6 </span></span><br><span class="line"><span class="string">fsck</span> <span class="number">1.39</span> <span class="string">(29-May-2006)</span></span><br><span class="line"><span class="string">e2fsck</span> <span class="number">1.39</span> <span class="string">(29-May-2006)</span></span><br><span class="line"><span class="attr">Pass 1:</span> <span class="string">Checking</span> <span class="string">inodes,</span> <span class="string">blocks,</span> <span class="string">and</span> <span class="string">sizes</span></span><br><span class="line"><span class="attr">Pass 2:</span> <span class="string">Checking</span> <span class="string">directory</span> <span class="string">structure</span></span><br><span class="line"><span class="attr">Pass 3:</span> <span class="string">Checking</span> <span class="string">directory</span> <span class="string">connectivity</span></span><br><span class="line"><span class="attr">Pass 4:</span> <span class="string">Checking</span> <span class="string">reference</span> <span class="string">counts</span></span><br><span class="line"><span class="attr">Pass 5:</span> <span class="string">Checking</span> <span class="string">group</span> <span class="string">summary</span> <span class="string">information</span></span><br><span class="line"><span class="attr">vbird_logical:</span> <span class="number">11</span><span class="string">/251968</span> <span class="string">files</span> <span class="string">(9.1%</span> <span class="string">non-contiguous),</span> <span class="number">36926</span><span class="string">/1004046</span> <span class="string">blocks</span></span><br><span class="line"><span class="number">123456789</span></span><br></pre></td></tr></table></figure><p>如果没有加上 -f 的选项，则由于这个文件系统不曾出现问题，检查的经过非常快速！若加上 -f 强制检查，才会一项一项的显示过程。</p><h4 id="磁盘挂载与卸除">磁盘挂载与卸除</h4><p>Linux 的磁盘挂载使用 <code>mount</code> 命令，卸载使用 <code>umount</code> 命令。</p><p>磁盘挂载语法：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mount <span class="selector-attr">[-t 文件系统]</span> <span class="selector-attr">[-L Label名]</span> <span class="selector-attr">[-o 额外选项]</span> <span class="selector-attr">[-n]</span>  装置文件名  挂载点</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>用默认的方式，将刚刚创建的 /dev/hdc6 挂载到 /mnt/hdc6 上面！</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="variable">@www</span> ~]<span class="comment"># mkdir /mnt/hdc6</span></span><br><span class="line">[root<span class="variable">@www</span> ~]<span class="comment"># mount /dev/hdc6 /mnt/hdc6</span></span><br><span class="line">[root<span class="variable">@www</span> ~]<span class="comment"># df</span></span><br><span class="line">Filesystem           <span class="number">1</span>K-blocks      Used Available Use% Mounted on</span><br><span class="line">.....中间省略.....</span><br><span class="line"><span class="regexp">/dev/hdc</span>6              <span class="number">1976312</span>     <span class="number">42072</span>   <span class="number">1833836</span>   <span class="number">3</span>% <span class="regexp">/mnt/hdc</span>6</span><br><span class="line"><span class="number">123456</span></span><br></pre></td></tr></table></figure><p>磁盘卸载命令 <code>umount</code> 语法：</p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">umount</span> [-<span class="meta">fn</span>] 装置文件名或挂载点</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>选项与参数：</p><ul class="lvl-0"><li class="lvl-2"><p>-f ：强制卸除！可用在类似网络文件系统 (NFS) 无法读取到的情况下；</p></li><li class="lvl-2"><p>-n ：不升级 /etc/mtab 情况下卸除。</p></li></ul><p>卸载/dev/hdc6</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="symbol">@www</span> ~]<span class="meta"># umount /dev/hdc6     </span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><h3 id="Linux管道命令">Linux管道命令</h3><p>Linux的管道命令是’|’，通过它可以对数据进行连续处理，其示意图如下：</p><p><img src="/images/loading.jpeg" data-original="/posts/2c8b313c//91c28994d6fb98e8c35f2eac36880df2.jpeg" alt="img"></p><p>注意：</p><p>1）管道命令仅处理标准输出，对于标准错误输出，将忽略</p><p>2）管道命令右边命令，必须能够接收标准输入流命令才行，否则传递过程中数据会抛弃。</p><p>常用来作为接收数据管道命令有： less,more,head,tail，而ls, cp, mv就不行。</p><h4 id="wc-统计字数">wc - 统计字数</h4><p>可以计算文件的Byte数、字数、或是列数，若不指定文件名称、或是所给予的文件名为&quot;-&quot;，则wc指令会从标准输入设备读取数据。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">wc</span> [-lwm] [filename]</span><br><span class="line">-l: 统计行数</span><br><span class="line">-w：统计英文单词</span><br><span class="line">-m：统计字符数</span><br><span class="line">python@xxx:~$ <span class="built_in">wc</span> -l /etc/passwd</span><br><span class="line">49 /etc/passwd</span><br><span class="line">python@xxx:~$ <span class="built_in">wc</span> -w /etc/passwd</span><br><span class="line">81 /etc/passwd</span><br><span class="line">python@xxx:~$ <span class="built_in">wc</span> -m /etc/passwd</span><br><span class="line">2696 /etc/passwd</span><br><span class="line">12345678910</span><br></pre></td></tr></table></figure><p>在默认的情况下，wc将计算指定文件的行数、字数，以及字节数。使用的命令为：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">wc</span> testfile           <span class="comment"># testfile文件的统计信息  </span></span><br><span class="line">3 92 598 testfile       <span class="comment"># testfile文件的行数为3、单词数92、字节数598 </span></span><br><span class="line">12</span><br></pre></td></tr></table></figure><p>其中，3 个数字分别表示testfile文件的行数、单词数，以及该文件的字节数。</p><p>如果想同时统计多个文件的信息，例如同时统计testfile、testfile_1、testfile_2，可使用如下命令：</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ wc testfile testfile_1 testfile_2  <span class="comment">#统计三个文件的信息  </span></span><br><span class="line">3<span class="number"> 92 </span>598 testfile                    <span class="comment">#第一个文件行数为3、单词数92、字节数598  </span></span><br><span class="line">9<span class="number"> 18 </span>78 testfile_1                   <span class="comment">#第二个文件的行数为9、单词数18、字节数78  </span></span><br><span class="line">3<span class="number"> 6 </span>32 testfile_2                    <span class="comment">#第三个文件的行数为3、单词数6、字节数32  </span></span><br><span class="line">15<span class="number"> 116 </span>708 总用量                    <span class="comment">#三个文件总共的行数为15、单词数116、字节数708 </span></span><br><span class="line">12345</span><br></pre></td></tr></table></figure><h4 id="cut-列选取命令">cut - 列选取命令</h4><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">选项与参数：</span><br><span class="line"><span class="deletion">-d  ：后面接分隔字符。与 -f 一起使用；</span></span><br><span class="line"><span class="deletion">-f  ：依据 -d 的分隔字符将一段信息分割成为数段，用 -f 取出第几段的意思；</span></span><br><span class="line"><span class="deletion">-c  ：以字符 (characters) 的单位取出固定字符区间；</span></span><br><span class="line">1234</span><br></pre></td></tr></table></figure><p>cut以行为单位，根据分隔符把行分成若干列，这样就可以指定选取哪些列了。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cut</span> -d <span class="string">&#x27;分隔字符&#x27;</span> -f 选取的列数</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$PATH</span>|<span class="built_in">cut</span> -d <span class="string">&#x27;:&#x27;</span> -f 2  	--选取第2列</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$PATH</span>|<span class="built_in">cut</span> -d <span class="string">&#x27;:&#x27;</span> -f 3,5  	--选取第3列和第5列</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$PATH</span>|<span class="built_in">cut</span> -d <span class="string">&#x27;:&#x27;</span> -f 3-5  	--选取第3列到第5列</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$PATH</span>|<span class="built_in">cut</span> -d <span class="string">&#x27;:&#x27;</span> -f 3-   	--选取第3列到最后1列</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$PATH</span>|<span class="built_in">cut</span> -d <span class="string">&#x27;:&#x27;</span> -f 1-3,5	--选取第1到第3列还有第5列</span><br><span class="line">123456</span><br></pre></td></tr></table></figure><p>只显示/etc/passwd的用户和shell：</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#cat /etc/passwd | cut -d <span class="string">&#x27;:&#x27;</span> -f 1,7 </span></span><br><span class="line"><span class="symbol">root:</span><span class="keyword">/bin/</span>bash</span><br><span class="line"><span class="symbol">daemon:</span><span class="keyword">/bin/</span>sh</span><br><span class="line"><span class="symbol">bin:</span><span class="keyword">/bin/</span>sh</span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure><h4 id="grep-行选取命令">grep - 行选取命令</h4><p>grep一般格式为：</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">grep</span> [-cinv] <span class="string">&#x27;查找的字符串&#x27;</span> filename</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>在grep命令中输入字符串参数时，最好引号或双引号括起来。例如：<code>grep 'a' 1.txt</code>。</p><p>常用选项说明：</p><table><thead><tr><th>选项</th><th>含义</th></tr></thead><tbody><tr><td>-v</td><td>显示不包含匹配文本的所有行（相当于求反）</td></tr><tr><td>-n</td><td>显示匹配行及行号</td></tr><tr><td>-i</td><td>忽略大小写</td></tr><tr><td>-c</td><td>计算找到的行数</td></tr></tbody></table><p>grep搜索内容串可以是正则表达式，常用正则表达式：</p><table><thead><tr><th>参数</th><th>含义</th></tr></thead><tbody><tr><td>^a</td><td>行首,搜寻以 m 开头的行；grep -n ‘^a’ 1.txt</td></tr><tr><td>ke$</td><td>行尾,搜寻以 ke 结束的行；grep -n ‘ke$’ 1.txt</td></tr><tr><td>[Ss]igna[Ll]</td><td>匹配 [] 里中一系列字符中的一个；搜寻匹配单词signal、signaL、Signal、SignaL的行；grep -n ‘[Ss]igna[Ll]’ 1.txt</td></tr><tr><td>.</td><td>.匹配一个非换行符的字符；grep -n ‘e.e’ 1.txt可以匹配 eee，eae，eve，但是不匹配 ee，eaae；</td></tr><tr><td>*</td><td>匹配零个或多个先前字符</td></tr><tr><td>[^]</td><td>匹配一个不在指定范围内的字符</td></tr><tr><td><code>\(..\)</code></td><td>标记匹配字符</td></tr><tr><td>\</td><td>锚定单词的开始</td></tr><tr><td><code>\&lt;</code></td><td>锚定单词的开头</td></tr><tr><td><code>\&gt;</code></td><td>锚定单词的结束</td></tr><tr><td><code>x\&#123;m\&#125;</code></td><td>重复字符x，m次</td></tr><tr><td><code>x\&#123;m,\&#125;</code></td><td>重复字符x,至少m次</td></tr><tr><td><code>x\&#123;m,n\&#125;</code></td><td>重复字符x，至少m次，不多于n次</td></tr><tr><td>\w</td><td>匹配文字和数字字符，也就是[A-Za-z0-9]</td></tr><tr><td>\b</td><td>单词锁定符</td></tr></tbody></table><p>实例：显示所有以“h”结尾的行<br>grep h$<br>匹配所有以“a”开头且以“e”结尾的，中间包含2个字符的单词<br>grep ‘&lt;a…e&gt;’<br>显示所有包含一个”y”或”h”字符的行<br>grep [yh]<br>显示不包含字母a~k 且后紧跟“pple”的单词</p><figure class="highlight cos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep [<span class="symbol">^a</span>-<span class="keyword">k</span>]pple</span><br></pre></td></tr></table></figure><p>从系统词典中选择所有以“c”开头且以“o”结尾的单词<code>grep '\&lt;c.*o\&gt;'</code><br>找出一个文件中或者输出中找到包含<code>*</code>的行<code>grep '\*'</code><br>显示所有包含每个字符串至少有20个连续字母的单词的行<br><code>grep [a-Z]\&#123;20,\&#125;</code></p><h4 id="sort-排序">sort - 排序</h4><p><strong>语法：</strong></p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sort</span> [-fbMnrtuk] [<span class="built_in">file</span> <span class="keyword">or</span> <span class="keyword">stdin</span>]</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p><strong>参数说明</strong>：</p><ul class="lvl-0"><li class="lvl-2"><p>-f ：忽略大小写的差异，例如 A 与 a 视为编码相同；</p></li><li class="lvl-2"><p>-b ：忽略最前面的空格符部分；</p></li><li class="lvl-2"><p>-M ：以月份的名字来排序，例如 JAN, DEC 等等的排序方法；</p></li><li class="lvl-2"><p>-n ：使用『纯数字』进行排序(默认是以文字型态来排序的)；</p></li><li class="lvl-2"><p>-r ：反向排序；</p></li><li class="lvl-2"><p>-u ：就是 uniq ，相同的数据中，仅出现一行代表；</p></li><li class="lvl-2"><p>-t ：分隔符，默认是用 [tab] 键来分隔；</p></li><li class="lvl-2"><p>-k ：以哪个区间 (field) 来进行排序</p></li></ul><p>默认是以第一个字符升序排序:</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cat /etc/passwd | sort </span></span><br><span class="line"><span class="symbol">adm:</span><span class="symbol">x:</span><span class="number">3</span><span class="symbol">:</span><span class="number">4</span><span class="symbol">:adm</span><span class="symbol">:/var/adm</span><span class="symbol">:/sbin/nologin</span></span><br><span class="line">avahi-<span class="symbol">autoipd:</span><span class="symbol">x:</span><span class="number">100</span><span class="symbol">:</span><span class="number">156</span><span class="symbol">:avahi-autoipd</span><span class="symbol">:/var/lib/avahi-autoipd</span><span class="symbol">:/sbin/nologin</span></span><br><span class="line"><span class="symbol">avahi:</span><span class="symbol">x:</span><span class="number">70</span><span class="symbol">:</span><span class="number">70</span><span class="symbol">:Avahi</span> <span class="symbol">daemon:</span>/<span class="symbol">:/sbin/nologin</span></span><br><span class="line"><span class="symbol">bin:</span><span class="symbol">x:</span><span class="number">1</span><span class="symbol">:</span><span class="number">1</span><span class="symbol">:bin</span><span class="symbol">:/bin</span><span class="symbol">:/sbin/nologin</span></span><br><span class="line">......</span><br><span class="line"><span class="number">123456</span></span><br></pre></td></tr></table></figure><p>以第3列排序：</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="variable">@www</span> ~]<span class="comment"># cat /etc/passwd | sort -t &#x27;:&#x27; -k 3</span></span><br><span class="line"><span class="symbol">root:</span><span class="symbol">x:</span><span class="number">0</span><span class="symbol">:</span><span class="number">0</span><span class="symbol">:root</span><span class="symbol">:/root</span><span class="symbol">:/bin/bash</span></span><br><span class="line"><span class="symbol">uucp:</span><span class="symbol">x:</span><span class="number">10</span><span class="symbol">:</span><span class="number">14</span><span class="symbol">:uucp</span><span class="symbol">:/var/spool/uucp</span><span class="symbol">:/sbin/nologin</span></span><br><span class="line"><span class="symbol">operator:</span><span class="symbol">x:</span><span class="number">11</span><span class="symbol">:</span><span class="number">0</span><span class="symbol">:operator</span><span class="symbol">:/root</span><span class="symbol">:/sbin/nologin</span></span><br><span class="line"><span class="symbol">bin:</span><span class="symbol">x:</span><span class="number">1</span><span class="symbol">:</span><span class="number">1</span><span class="symbol">:bin</span><span class="symbol">:/bin</span><span class="symbol">:/sbin/nologin</span></span><br><span class="line"><span class="symbol">games:</span><span class="symbol">x:</span><span class="number">12</span><span class="symbol">:</span><span class="number">100</span><span class="symbol">:games</span><span class="symbol">:/usr/games</span><span class="symbol">:/sbin/nologin</span></span><br><span class="line"><span class="number">123456</span></span><br></pre></td></tr></table></figure><p>使用数字排序：</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/passwd | sort -t <span class="string">&#x27;:&#x27;</span> -k <span class="number">3</span>n</span><br><span class="line"><span class="symbol">root:</span><span class="symbol">x:</span><span class="number">0</span><span class="symbol">:</span><span class="number">0</span><span class="symbol">:root</span><span class="symbol">:/root</span><span class="symbol">:/bin/bash</span></span><br><span class="line"><span class="symbol">daemon:</span><span class="symbol">x:</span><span class="number">1</span><span class="symbol">:</span><span class="number">1</span><span class="symbol">:daemon</span><span class="symbol">:/usr/sbin</span><span class="symbol">:/bin/sh</span></span><br><span class="line"><span class="symbol">bin:</span><span class="symbol">x:</span><span class="number">2</span><span class="symbol">:</span><span class="number">2</span><span class="symbol">:bin</span><span class="symbol">:/bin</span><span class="symbol">:/bin/sh</span></span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure><p>倒序排序：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /etc/passwd | <span class="built_in">sort</span> -t <span class="string">&#x27;:&#x27;</span> -k 3nr</span><br><span class="line">nobody:x:65534:65534:nobody:/nonexistent:/bin/sh</span><br><span class="line">ntp:x:106:113::/home/ntp:/bin/false</span><br><span class="line">messagebus:x:105:109::/var/run/dbus:/bin/false</span><br><span class="line">sshd:x:104:65534::/var/run/sshd:/usr/sbin/nologin</span><br><span class="line">或者</span><br><span class="line"><span class="built_in">cat</span> /etc/passwd | <span class="built_in">sort</span> -t <span class="string">&#x27;:&#x27;</span> -k 3 -nr</span><br><span class="line">1234567</span><br></pre></td></tr></table></figure><p>先以第六个域的第2个字符到第4个字符进行正向排序，再基于第一个域进行反向排序：</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/passwd |  sort -t <span class="string">&#x27;:&#x27;</span> -k <span class="number">6.2</span>,<span class="number">6.4</span> -k <span class="number">1</span>r      </span><br><span class="line"><span class="symbol">sync:</span><span class="symbol">x:</span><span class="number">4</span><span class="symbol">:</span><span class="number">65534</span><span class="symbol">:sync</span><span class="symbol">:/bin</span><span class="symbol">:/bin/sync</span></span><br><span class="line"><span class="symbol">proxy:</span><span class="symbol">x:</span><span class="number">13</span><span class="symbol">:</span><span class="number">13</span><span class="symbol">:proxy</span><span class="symbol">:/bin</span><span class="symbol">:/bin/sh</span></span><br><span class="line"><span class="symbol">bin:</span><span class="symbol">x:</span><span class="number">2</span><span class="symbol">:</span><span class="number">2</span><span class="symbol">:bin</span><span class="symbol">:/bin</span><span class="symbol">:/bin/sh</span></span><br><span class="line"><span class="symbol">sys:</span><span class="symbol">x:</span><span class="number">3</span><span class="symbol">:</span><span class="number">3</span><span class="symbol">:sys</span><span class="symbol">:/dev</span><span class="symbol">:/bin/sh</span></span><br><span class="line"><span class="number">12345</span></span><br></pre></td></tr></table></figure><p>查看/etc/passwd有多少个shell:</p><p>方法对/etc/passwd的第七个域排序并去重，然后统计行数：</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="variable">@VM_0_9_centos</span> ~]<span class="comment"># cat /etc/passwd |  sort -t&#x27;:&#x27; -k 7 -u</span></span><br><span class="line"><span class="symbol">root:</span><span class="symbol">x:</span><span class="number">0</span><span class="symbol">:</span><span class="number">0</span><span class="symbol">:root</span><span class="symbol">:/root</span><span class="symbol">:/bin/bash</span></span><br><span class="line"><span class="symbol">syslog:</span><span class="symbol">x:</span><span class="number">996</span><span class="symbol">:</span><span class="number">994</span><span class="symbol">:</span><span class="symbol">:/home/syslog</span><span class="symbol">:/bin/false</span></span><br><span class="line"><span class="symbol">sync:</span><span class="symbol">x:</span><span class="number">5</span><span class="symbol">:</span><span class="number">0</span><span class="symbol">:sync</span><span class="symbol">:/sbin</span><span class="symbol">:/bin/sync</span></span><br><span class="line"><span class="symbol">halt:</span><span class="symbol">x:</span><span class="number">7</span><span class="symbol">:</span><span class="number">0</span><span class="symbol">:halt</span><span class="symbol">:/sbin</span><span class="symbol">:/sbin/halt</span></span><br><span class="line"><span class="symbol">bin:</span><span class="symbol">x:</span><span class="number">1</span><span class="symbol">:</span><span class="number">1</span><span class="symbol">:bin</span><span class="symbol">:/bin</span><span class="symbol">:/sbin/nologin</span></span><br><span class="line"><span class="symbol">shutdown:</span><span class="symbol">x:</span><span class="number">6</span><span class="symbol">:</span><span class="number">0</span><span class="symbol">:shutdown</span><span class="symbol">:/sbin</span><span class="symbol">:/sbin/shutdown</span></span><br><span class="line">[root<span class="variable">@VM_0_9_centos</span> ~]<span class="comment"># cat /etc/passwd |  sort -t&#x27;:&#x27; -k 7 -u|wc -l</span></span><br><span class="line"><span class="number">6</span></span><br><span class="line"><span class="number">123456789</span></span><br></pre></td></tr></table></figure><h4 id="uniq-去重">uniq - 去重</h4><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">选项与参数：</span><br><span class="line"><span class="deletion">-i   ：忽略大小写字符的不同；</span></span><br><span class="line"><span class="deletion">-c  ：进行计数</span></span><br><span class="line"><span class="deletion">-u  ：只显示唯一的行</span></span><br><span class="line">1234</span><br></pre></td></tr></table></figure><p>该命令用于排完序之后，对排序结果进行去重</p><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">python</span>@xxx:~$ last | cut -d <span class="string">&#x27; &#x27;</span> -f <span class="number">1</span>  | <span class="keyword">sort</span> | uniq</span><br><span class="line"></span><br><span class="line">haha</span><br><span class="line"><span class="keyword">python</span></span><br><span class="line">reboot</span><br><span class="line">wtmp</span><br><span class="line"><span class="keyword">python</span>@xxx:~$ last | cut -d <span class="string">&#x27; &#x27;</span> -f <span class="number">1</span>  | <span class="keyword">sort</span> | uniq -c</span><br><span class="line">      <span class="number">1</span> </span><br><span class="line">      <span class="number">2</span> haha</span><br><span class="line">     <span class="number">22</span> <span class="keyword">python</span></span><br><span class="line">      <span class="number">7</span> reboot</span><br><span class="line">      <span class="number">1</span> wtmp</span><br><span class="line"><span class="number">123456789101112</span></span><br></pre></td></tr></table></figure><p>排序文件，默认是去重：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="built_in">cat</span> words | <span class="built_in">sort</span> |<span class="built_in">uniq</span></span></span><br><span class="line">friend</span><br><span class="line">hello</span><br><span class="line">world</span><br><span class="line">1234</span><br></pre></td></tr></table></figure><p>排序之后删除了重复行，同时在行首位置输出该行重复的次数：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="built_in">sort</span> testfile | <span class="built_in">uniq</span> -c</span></span><br><span class="line">1 friend</span><br><span class="line">3 hello</span><br><span class="line">2 world</span><br><span class="line">1234</span><br></pre></td></tr></table></figure><p>仅显示存在重复的行，并在行首显示该行重复的次数：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="built_in">sort</span> testfile | <span class="built_in">uniq</span> -dc</span></span><br><span class="line">3 hello</span><br><span class="line">2 world</span><br><span class="line">123</span><br></pre></td></tr></table></figure><p>仅显示不重复的行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sort</span> testfile | <span class="built_in">uniq</span> -u</span><br><span class="line">friend</span><br><span class="line">12</span><br></pre></td></tr></table></figure><h4 id="tee-同时输出多个文件">tee - 同时输出多个文件</h4><p>从标准输入设备读取数据，将其内容输出到标准输出设备，同时保存成文件。</p><p>一般情况下用重定向实现，需要同时输出多个文件时可以使用该命令。</p><p><strong>参数</strong>：</p><ul class="lvl-0"><li class="lvl-2"><p>-a或–append 　附加到既有文件的后面，而非覆盖它．</p></li></ul><p>将输出同时保存到多个文件中，同时将输出内容显示到控制台：</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">python<span class="variable">@xxx</span><span class="symbol">:~/test</span><span class="variable">$ </span>echo <span class="string">&quot;hello world&quot;</span>|tee f1 f2 </span><br><span class="line">hello world</span><br><span class="line">python<span class="variable">@xxx</span><span class="symbol">:~/test</span><span class="variable">$ </span>cat f1</span><br><span class="line">hello world</span><br><span class="line">python<span class="variable">@xxx</span><span class="symbol">:~/test</span><span class="variable">$ </span>echo <span class="string">&quot;hello world&quot;</span>|tee f1 f2 -a</span><br><span class="line">hello world</span><br><span class="line">python<span class="variable">@xxx</span><span class="symbol">:~/test</span><span class="variable">$ </span>cat f1</span><br><span class="line">hello world</span><br><span class="line">hello world</span><br><span class="line"><span class="number">123456789</span></span><br></pre></td></tr></table></figure><h4 id="tr-替换指定的字符">tr - 替换指定的字符</h4><p>不指定参数时，即表示替换指定的字符为另一个字符，支持指定的字符集合。</p><p><strong>参数说明：</strong></p><ul class="lvl-0"><li class="lvl-2"><p>-d, --delete：删除指定的字符</p></li><li class="lvl-2"><p>-s, --squeeze-repeats：缩减连续重复的字符成指定的单个字符</p></li></ul><p>字符集合的范围：</p><ul class="lvl-0"><li class="lvl-2"><p>\NNN 八进制值的字符 NNN (1 to 3 为八进制值的字符)</p></li><li class="lvl-2"><p>\ 反斜杠</p></li><li class="lvl-2"><p>\a Ctrl-G 铃声</p></li><li class="lvl-2"><p>\b Ctrl-H 退格符</p></li><li class="lvl-2"><p>\f Ctrl-L 走行换页</p></li><li class="lvl-2"><p>\n Ctrl-J 新行</p></li><li class="lvl-2"><p>\r Ctrl-M 回车</p></li><li class="lvl-2"><p>\t Ctrl-I tab键</p></li><li class="lvl-2"><p>\v Ctrl-X 水平制表符</p></li><li class="lvl-2"><p>CHAR1-CHAR2 ：字符范围从 CHAR1 到 CHAR2 的指定，范围的指定以 ASCII 码的次序为基础，只能由小到大，不能由大到小。</p></li><li class="lvl-2"><p>[CHAR*] ：这是 SET2 专用的设定，功能是重复指定的字符到与 SET1 相同长度为止</p></li><li class="lvl-2"><p>[CHAR*REPEAT] ：这也是 SET2 专用的设定，功能是重复指定的字符到设定的 REPEAT 次数为止(REPEAT 的数字采 8 进位制计算，以 0 为开始)</p></li><li class="lvl-2"><p>[:alnum:] ：所有字母字符与数字</p></li><li class="lvl-2"><p>[:alpha:] ：所有字母字符</p></li><li class="lvl-2"><p>[:blank:] ：所有水平空格</p></li><li class="lvl-2"><p>[:cntrl:] ：所有控制字符</p></li><li class="lvl-2"><p>[:digit:] ：所有数字</p></li><li class="lvl-2"><p>[:graph:] ：所有可打印的字符(不包含空格符)</p></li><li class="lvl-2"><p>[:lower:] ：所有小写字母</p></li><li class="lvl-2"><p>[:print:] ：所有可打印的字符(包含空格符)</p></li><li class="lvl-2"><p>[:punct:] ：所有标点字符</p></li><li class="lvl-2"><p>[:space:] ：所有水平与垂直空格符</p></li><li class="lvl-2"><p>[:upper:] ：所有大写字母</p></li><li class="lvl-2"><p>[:xdigit:] ：所有 16 进位制的数字</p></li><li class="lvl-2"><p>[=CHAR=] ：所有符合指定的字符(等号里的 CHAR，代表你可自订的字符)</p></li></ul><p>将文件testfile中的小写字母全部转换成大写字母：</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">cat</span> <span class="selector-tag">testfile</span> |<span class="selector-tag">tr</span> <span class="selector-tag">a</span><span class="selector-tag">-z</span> <span class="selector-tag">A</span><span class="selector-tag">-Z</span> </span><br><span class="line">或</span><br><span class="line"><span class="selector-tag">cat</span> <span class="selector-tag">testfile</span> |<span class="selector-tag">tr</span> <span class="selector-attr">[:lower:]</span> <span class="selector-attr">[:upper:]</span> </span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure><p>缩减连续重复的字符成指定的单个字符：</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">python<span class="variable">@xxx</span><span class="symbol">:~/test</span><span class="variable">$ </span>cat t</span><br><span class="line">dddddddsssssdd</span><br><span class="line">eeeeeeeeee</span><br><span class="line">aaaaaaaaaaaaaa</span><br><span class="line">vvvvvvvvvvvvvv</span><br><span class="line">python<span class="variable">@xxx</span><span class="symbol">:~/test</span><span class="variable">$ </span>cat t|tr -s <span class="string">&#x27;se&#x27;</span></span><br><span class="line">dddddddsdd</span><br><span class="line">e</span><br><span class="line">aaaaaaaaaaaaaa</span><br><span class="line">vvvvvvvvvvvvvv</span><br><span class="line">python<span class="variable">@xxx</span><span class="symbol">:~/test</span><span class="variable">$ </span>cat t|tr -s <span class="string">&#x27;sdeav&#x27;</span></span><br><span class="line">dsd</span><br><span class="line">e</span><br><span class="line">a</span><br><span class="line">v</span><br><span class="line"><span class="number">123456789101112131415</span></span><br></pre></td></tr></table></figure><p>删除指定的字符：</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">python<span class="variable">@xxx</span><span class="symbol">:~/test</span><span class="variable">$ </span>cat t|tr -d <span class="string">&#x27;dv&#x27;</span></span><br><span class="line">sssss</span><br><span class="line">eeeeeeeeee</span><br><span class="line">aaaaaaaaaaaaaa</span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure><h4 id="join-文件按行连接">join - 文件按行连接</h4><p>将两个文件中指定栏位相同的行连接起来。即按照两个文件中共同拥有的某一列，将对应的行拼接成一行。</p><p>注意：在使用join之前所处理的文件要事先经过排序。</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ cat testfile_1</span><br><span class="line">Hello 95 #例如，本例中第一列为姓名，第二列为数额  </span><br><span class="line">Linux 85  </span><br><span class="line"><span class="keyword">test </span>30  </span><br><span class="line">cmd@hdd-desktop:~$ cat testfile_2</span><br><span class="line">Hello 2005 #例如，本例中第一列为姓名，第二列为年份  </span><br><span class="line">Linux 2009  </span><br><span class="line"><span class="keyword">test </span>2006 </span><br><span class="line">12345678</span><br></pre></td></tr></table></figure><p>使用join命令，将两个文件连接：</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ join testfile_1 testfile_2 #连接testfile_1、testfile_2中的内容  </span><br><span class="line">Hello 95 2005 #连接后显示的内容  </span><br><span class="line">Linux 85 2009  </span><br><span class="line"><span class="keyword">test </span>30 2006 </span><br><span class="line">1234</span><br></pre></td></tr></table></figure><p>两个文件互换，输出结果的变化：</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ join testfile_2 testfile_1 #改变文件顺序连接两个文件  </span><br><span class="line">Hello 2005 95 #连接后显示的内容  </span><br><span class="line">Linux 2009 85  </span><br><span class="line"><span class="keyword">test </span>2006 30 </span><br><span class="line">1234</span><br></pre></td></tr></table></figure><p><strong>参数</strong>：</p><ul class="lvl-0"><li class="lvl-2"><p>-a&lt;1或2&gt; 除了显示原来的输出内容之外，还显示指令文件中没有相同栏位的行。</p></li><li class="lvl-2"><p>-e&lt;字符串&gt; 若[文件1]与[文件2]中找不到指定的栏位，则在输出中填入选项中的字符串。</p></li><li class="lvl-2"><p>-i或–igore-case 比较栏位内容时，忽略大小写的差异。</p></li><li class="lvl-2"><p>-o&lt;格式&gt; 按照指定的格式来显示结果。</p></li><li class="lvl-2"><p>-t&lt;字符&gt; 使用栏位的分隔字符。</p></li><li class="lvl-2"><p>-v&lt;1或2&gt; 跟-a相同，但是只显示文件中没有相同栏位的行。</p></li><li class="lvl-2"><p>-1&lt;栏位&gt; 连接[文件1]指定的栏位。</p></li><li class="lvl-2"><p>-2&lt;栏位&gt; 连接[文件2]指定的栏位。</p></li></ul><h4 id="paste-将多个文件对应行链接在一起">paste-将多个文件对应行链接在一起</h4><p>paste 指令会把每个文件以列对列的方式，一列列地加以合并。</p><p>语法：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">paste <span class="selector-attr">[-s]</span><span class="selector-attr">[-d &lt;间隔字符&gt;]</span><span class="selector-attr">[文件...]</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p><strong>参数</strong>：</p><ul class="lvl-0"><li class="lvl-2"><p>-d&lt;间隔字符&gt;或–delimiters=&lt;间隔字符&gt; 　用指定的间隔字符取代跳格字符。</p></li><li class="lvl-2"><p>-s或–serial 　串列进行而非平行处理。</p></li><li class="lvl-2"><p>[文件…] 指定操作的文件路径</p></li></ul><p>使用paste指令将文件&quot;file&quot;、“testfile”、&quot;testfile1&quot;进行合并，输入如下命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> file                  <span class="comment">#file文件的内容</span></span>  </span><br><span class="line">xiongdan 200  </span><br><span class="line">lihaihui 233  </span><br><span class="line">lymlrl 231  </span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> testfile              <span class="comment">#testfile文件的内容</span></span>  </span><br><span class="line">liangyuanm  ss  </span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> testfile1             <span class="comment">#testfile1文件的内容</span></span>  </span><br><span class="line">huanggai 56  </span><br><span class="line">zhixi 73 </span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">paste</span> file testfile testfile1</span></span><br><span class="line">xiongdan 200    liangyuanm ss   huanggai 56</span><br><span class="line">lihaihui 233            zhixi 73</span><br><span class="line">lymlrl 231</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">paste</span> -d <span class="string">&#x27;:&#x27;</span> file testfile testfile1</span></span><br><span class="line">xiongdan 200:liangyuanm ss:huanggai 56</span><br><span class="line">lihaihui 233::zhixi 73</span><br><span class="line">lymlrl 231::</span><br><span class="line">1234567891011121314151617</span><br></pre></td></tr></table></figure><p>参数&quot;-s&quot;可以将一个文件中的多行数据合并为一行进行显示：</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ paste -s file             <span class="comment">#合并指定文件的多行数据</span></span><br><span class="line">xiongdan<span class="number"> 200 </span>lihaihui<span class="number"> 233 </span>lymlrl<span class="number"> 231 </span></span><br><span class="line">12</span><br></pre></td></tr></table></figure><p>如果将文件位置改为-，表示接收标准输入：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> file |<span class="built_in">paste</span> testfile1 -</span></span><br><span class="line">huanggai 56     xiongdan 200</span><br><span class="line">zhixi 73        lihaihui 233</span><br><span class="line">        lymlrl 231</span><br><span class="line">1234</span><br></pre></td></tr></table></figure><h4 id="split-文件切割">split - 文件切割</h4><p>split命令用于将一个文件分割成数个。</p><p>该指令将大文件分割成较小的文件，在默认情况下将按照每1000行切割成一个小文件。</p><p>语法：</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">split [-<span class="keyword">bl] </span>file <span class="keyword">prefix</span></span><br><span class="line"><span class="keyword"></span>-<span class="keyword">b: </span>以大小切割</span><br><span class="line">-l：以行数切割</span><br><span class="line"><span class="keyword">prefix：切割后文件的前缀</span></span><br><span class="line"><span class="keyword"></span><span class="number">1234</span></span><br></pre></td></tr></table></figure><p><strong>参数说明</strong>：</p><ul class="lvl-0"><li class="lvl-2"><p>-&lt;行数&gt; : 指定每多少行切成一个小文件</p></li><li class="lvl-2"><p>-b&lt;字节&gt; : 指定每多少字节切成一个小文件</p></li><li class="lvl-2"><p>-C&lt;字节&gt; : 与参数&quot;-b&quot;相似，但是在切 割时将尽量维持每行的完整性</p></li><li class="lvl-2"><p>[输出文件名] : 设置切割后文件的前置文件名， split会自动在前置文件名后再加上编号</p></li></ul><p>使用指令&quot;split&quot;将文件&quot;README&quot;每6行切割成一个文件，输入如下命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">split</span> -6 README       <span class="comment">#将README文件每六行分割成一个文件</span></span> </span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">ls</span>                                <span class="comment">#执行ls指令</span></span>  </span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">获得当前目录结构</span></span><br><span class="line">README xaa xad xag xab xae xah xac xaf xai</span><br><span class="line">1234</span><br></pre></td></tr></table></figure><p>以上命令执行后，指令&quot;split&quot;会将原来的大文件&quot;README&quot;切割成多个以&quot;x&quot;开头的小文件。而在这些小文件中，每个文件都只有6行内容。</p><p>以大小切割：</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ ls -<span class="keyword">lh </span><span class="keyword">disease.dmp</span></span><br><span class="line"><span class="keyword"></span>-rwxr-xr-x <span class="number">1</span> root root <span class="number">122</span>M <span class="keyword">Jul </span> <span class="number">4</span>  <span class="number">2013</span> <span class="keyword">disease.dmp</span></span><br><span class="line"><span class="keyword"></span>$ split -<span class="keyword">b </span><span class="number">50</span>m <span class="keyword">disease.dmp </span><span class="keyword">disease.dmp</span></span><br><span class="line"><span class="keyword"></span>$ ls -<span class="keyword">lh </span><span class="keyword">disease.dmp*</span></span><br><span class="line"><span class="keyword"></span>-rwxr-xr-x <span class="number">1</span> root root <span class="number">122</span>M <span class="keyword">Jul </span> <span class="number">4</span>  <span class="number">2013</span> <span class="keyword">disease.dmp</span></span><br><span class="line"><span class="keyword"></span>-rw-r--r-- <span class="number">1</span> root root  <span class="number">50</span>M <span class="keyword">Jan </span> <span class="number">9</span> <span class="number">16</span>:<span class="number">10</span> <span class="keyword">disease.dmpaa</span></span><br><span class="line"><span class="keyword"></span>-rw-r--r-- <span class="number">1</span> root root  <span class="number">50</span>M <span class="keyword">Jan </span> <span class="number">9</span> <span class="number">16</span>:<span class="number">10</span> <span class="keyword">disease.dmpab</span></span><br><span class="line"><span class="keyword"></span>-rw-r--r-- <span class="number">1</span> root root  <span class="number">22</span>M <span class="keyword">Jan </span> <span class="number">9</span> <span class="number">16</span>:<span class="number">10</span> <span class="keyword">disease.dmpac</span></span><br><span class="line"><span class="keyword"></span><span class="number">12345678</span></span><br></pre></td></tr></table></figure><h4 id="xargs-参数代换">xargs - 参数代换</h4><p>不是所有的命令都支持管道，如ls，对于不支持管道的命令，可以通过xargs让其有管道命令的效果，如下所示：</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># find /sbin -perm +7000 | xargs ls -l</span></span><br><span class="line">-rwsr-x---<span class="number"> 1 </span>root ecryptfs<span class="number"> 19896 </span>Feb<span class="number"> 23 </span><span class="number"> 2012 </span>/sbin/mount.ecryptfs_private</span><br><span class="line">-rwsr-xr-x<span class="number"> 1 </span>root root    <span class="number"> 75496 </span>Jan <span class="number"> 9 </span><span class="number"> 2013 </span>/sbin/mount.nfs</span><br><span class="line">-rwsr-xr-x<span class="number"> 1 </span>root root    <span class="number"> 75504 </span>Jan <span class="number"> 9 </span><span class="number"> 2013 </span>/sbin/mount.nfs4</span><br><span class="line">-rwxr-sr-x<span class="number"> 1 </span>root root     <span class="number"> 8544 </span>Feb<span class="number"> 22 </span><span class="number"> 2012 </span>/sbin/netreport</span><br><span class="line">-rwsr-xr-x<span class="number"> 1 </span>root root    <span class="number"> 14112 </span>Nov <span class="number"> 2 </span><span class="number"> 2010 </span>/sbin/pam_timestamp_check</span><br><span class="line">-rwsr-xr-x<span class="number"> 1 </span>root root    <span class="number"> 75504 </span>Jan <span class="number"> 9 </span><span class="number"> 2013 </span>/sbin/umount.nfs</span><br><span class="line">-rwsr-xr-x<span class="number"> 1 </span>root root    <span class="number"> 75504 </span>Jan <span class="number"> 9 </span><span class="number"> 2013 </span>/sbin/umount.nfs4</span><br><span class="line">-rwsr-xr-x<span class="number"> 1 </span>root root    <span class="number"> 19768 </span>Nov <span class="number"> 2 </span><span class="number"> 2010 </span>/sbin/unix_chkpwd</span><br><span class="line">123456789</span><br></pre></td></tr></table></figure><p>如果没有xargs，ls -l的结果将不是前面find的标准输出，因为ls不支持管道命令。</p><p>xargs 用作替换工具，读取输入数据重新格式化后输出。</p><p>定义一个测试文件，内有多行文本数据：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># cat test<span class="selector-class">.txt</span></span><br><span class="line"><span class="selector-tag">a</span> <span class="selector-tag">b</span> c d e f <span class="selector-tag">g</span></span><br><span class="line">h <span class="selector-tag">i</span> j k l m n</span><br><span class="line">o <span class="selector-tag">p</span> <span class="selector-tag">q</span></span><br><span class="line"><span class="attribute">r</span> s t</span><br><span class="line">u v w <span class="attribute">x</span> <span class="attribute">y</span> z</span><br><span class="line"><span class="number">123456</span></span><br></pre></td></tr></table></figure><p>多行输入单行输出：</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># <span class="selector-tag">cat</span> <span class="selector-tag">test</span><span class="selector-class">.txt</span> | <span class="selector-tag">xargs</span></span><br><span class="line"><span class="selector-tag">a</span> <span class="selector-tag">b</span> <span class="selector-tag">c</span> <span class="selector-tag">d</span> <span class="selector-tag">e</span> <span class="selector-tag">f</span> <span class="selector-tag">g</span> <span class="selector-tag">h</span> <span class="selector-tag">i</span> <span class="selector-tag">j</span> <span class="selector-tag">k</span> <span class="selector-tag">l</span> <span class="selector-tag">m</span> <span class="selector-tag">n</span> <span class="selector-tag">o</span> <span class="selector-tag">p</span> <span class="selector-tag">q</span> <span class="selector-tag">r</span> <span class="selector-tag">s</span> <span class="selector-tag">t</span> <span class="selector-tag">u</span> <span class="selector-tag">v</span> <span class="selector-tag">w</span> <span class="selector-tag">x</span> <span class="selector-tag">y</span> <span class="selector-tag">z</span></span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure><p>-n 选项多行输出：</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># <span class="selector-tag">cat</span> <span class="selector-tag">test</span><span class="selector-class">.txt</span> | <span class="selector-tag">xargs</span> <span class="selector-tag">-n3</span></span><br><span class="line"><span class="selector-tag">a</span> <span class="selector-tag">b</span> <span class="selector-tag">c</span></span><br><span class="line"><span class="selector-tag">d</span> <span class="selector-tag">e</span> <span class="selector-tag">f</span></span><br><span class="line"><span class="selector-tag">g</span> <span class="selector-tag">h</span> <span class="selector-tag">i</span></span><br><span class="line"><span class="selector-tag">j</span> <span class="selector-tag">k</span> <span class="selector-tag">l</span></span><br><span class="line"><span class="selector-tag">m</span> <span class="selector-tag">n</span> <span class="selector-tag">o</span></span><br><span class="line"><span class="selector-tag">p</span> <span class="selector-tag">q</span> <span class="selector-tag">r</span></span><br><span class="line"><span class="selector-tag">s</span> <span class="selector-tag">t</span> <span class="selector-tag">u</span></span><br><span class="line"><span class="selector-tag">v</span> <span class="selector-tag">w</span> <span class="selector-tag">x</span></span><br><span class="line"><span class="selector-tag">y</span> <span class="selector-tag">z</span></span><br><span class="line"><span class="number">12345678910</span></span><br></pre></td></tr></table></figure><p>-d 选项可以自定义一个定界符：</p><figure class="highlight sqf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># echo <span class="string">&quot;nameXnameXnameXname&quot;</span> | xargs -dX</span></span><br><span class="line"><span class="built_in">name</span> <span class="built_in">name</span> <span class="built_in">name</span> <span class="built_in">name</span></span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure><p>结合 -n 选项使用：</p><figure class="highlight sqf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># echo <span class="string">&quot;nameXnameXnameXname&quot;</span> | xargs -dX -n2</span></span><br><span class="line"><span class="built_in">name</span> <span class="built_in">name</span></span><br><span class="line"><span class="built_in">name</span> <span class="built_in">name</span></span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure><p>读取 stdin，将格式化后的参数传递给命令:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">cat</span> sk.sh</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">sk.sh命令内容，打印出所有参数。</span></span><br><span class="line">echo $*</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">cat</span> arg.txt</span></span><br><span class="line">aaa</span><br><span class="line">bbb</span><br><span class="line">ccc</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">cat</span> arg.txt | xargs -I &#123;&#125; ./sk.sh -p &#123;&#125; -l</span></span><br><span class="line">-p aaa -l</span><br><span class="line">-p bbb -l</span><br><span class="line">-p ccc -l</span><br><span class="line">123456789101112</span><br></pre></td></tr></table></figure><p>选项<code>-I</code>指定一个替换字符串 {}，这个字符串在 xargs 扩展时会被替换掉。</p><p>复制所有图片文件到 /data/images 目录下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span> *.jpg | xargs -n1 -I &#123;&#125; <span class="built_in">cp</span> &#123;&#125; /data/images</span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>选项<code>-n</code> 后面加次数，表示命令在执行的时候一次用的argument的个数，默认是用所有的。</p><p><strong>xargs 结合 find 使用</strong></p><p>用 rm 删除太多的文件时候，可能得到一个错误信息：<strong>/bin/rm Argument list too long.</strong> 用 xargs 去避免这个问题：</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">find . -<span class="keyword">type</span> <span class="type">f </span>-name <span class="string">&quot;*.log&quot;</span> -print0 | xargs -<span class="number">0</span> rm -f</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>xargs -0 将 \0 作为定界符。</p><p>统计一个源代码目录中所有 php 文件的行数：</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">find . -<span class="keyword">type</span> <span class="type">f </span>-name <span class="string">&quot;*.php&quot;</span> -print0 | xargs -<span class="number">0</span> wc -l</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>查找所有的 jpg 文件，并且压缩它们：</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">find</span> . -type f -name <span class="string">&quot;*.jpg&quot;</span> -<span class="built_in">print</span> | xargs tar -czvf images.tar.gz</span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>批量下载：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">cat</span> url-list.txt | xargs wget -c</span></span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>wget的<code>-c</code>选项表示断点续传。</p><h2 id="linux命令练习">linux命令练习</h2><h3 id="常用命令">常用命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line">1.进入到用户根目录</span><br><span class="line"><span class="built_in">cd</span> ~ 或 <span class="built_in">cd</span></span><br><span class="line"></span><br><span class="line">2.查看当前所在目录</span><br><span class="line"><span class="built_in">pwd</span></span><br><span class="line"></span><br><span class="line">3.进入到hadoop用户根目录</span><br><span class="line"><span class="built_in">cd</span> ~hadoop</span><br><span class="line"></span><br><span class="line">4.返回到原来目录</span><br><span class="line"><span class="built_in">cd</span> -</span><br><span class="line"></span><br><span class="line">5.返回到上一级目录</span><br><span class="line"><span class="built_in">cd</span> ..</span><br><span class="line"></span><br><span class="line">6.查看hadoop用户根目录下的所有文件</span><br><span class="line"><span class="built_in">ls</span> -la</span><br><span class="line"></span><br><span class="line">7.在根目录下创建一个hadoop的文件夹</span><br><span class="line"><span class="built_in">mkdir</span> /hadoop</span><br><span class="line"></span><br><span class="line">8.在/hadoop目录下创建src和WebRoot两个文件夹</span><br><span class="line">分别创建：<span class="built_in">mkdir</span> /hadoop/src</span><br><span class="line">		  <span class="built_in">mkdir</span> /hadoop/WebRoot</span><br><span class="line">同时创建：<span class="built_in">mkdir</span> /hadoop/&#123;src,WebRoot&#125;</span><br><span class="line"></span><br><span class="line">进入到/hadoop目录，在该目录下创建.classpath和README文件</span><br><span class="line">分别创建：<span class="built_in">touch</span> .classpath</span><br><span class="line">		  <span class="built_in">touch</span> README</span><br><span class="line">同时创建：<span class="built_in">touch</span> &#123;.classpath,README&#125;</span><br><span class="line"></span><br><span class="line">查看/hadoop目录下面的所有文件</span><br><span class="line"><span class="built_in">ls</span> -la</span><br><span class="line"></span><br><span class="line">在/hadoop目录下面创建一个test.txt文件,同时写入内容<span class="string">&quot;this is test&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;this is test&quot;</span> &gt; test.txt</span><br><span class="line"></span><br><span class="line">查看一下test.txt的内容</span><br><span class="line"><span class="built_in">cat</span> test.txt</span><br><span class="line">more test.txt</span><br><span class="line">less test.txt</span><br><span class="line"></span><br><span class="line">向README文件追加写入<span class="string">&quot;please read me first&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;please read me first&quot;</span> &gt;&gt; README</span><br><span class="line"></span><br><span class="line">将test.txt的内容追加到README文件中</span><br><span class="line"><span class="built_in">cat</span> test.txt &gt;&gt; README</span><br><span class="line"></span><br><span class="line">拷贝/hadoop目录下的所有文件到/hadoop-bak</span><br><span class="line"><span class="built_in">cp</span> -r /hadoop /hadoop-bak</span><br><span class="line"></span><br><span class="line">进入到/hadoop-bak目录，将test.txt移动到src目录下，并修改文件名为Student.java</span><br><span class="line"><span class="built_in">mv</span> test.txt src/Student.java</span><br><span class="line"></span><br><span class="line">在src目录下创建一个struts.xml</span><br><span class="line">&gt; struts.xml</span><br><span class="line"></span><br><span class="line">删除所有的xml类型的文件</span><br><span class="line"><span class="built_in">rm</span> -rf *.xml</span><br><span class="line"></span><br><span class="line">删除/hadoop-bak目录和下面的所有文件</span><br><span class="line"><span class="built_in">rm</span> -rf /hadoop-bak</span><br><span class="line"></span><br><span class="line">返回到/hadoop目录，查看一下README文件有多单词，多少个少行</span><br><span class="line"><span class="built_in">wc</span> -w README</span><br><span class="line"><span class="built_in">wc</span> -l README</span><br><span class="line"></span><br><span class="line">返回到根目录，将/hadoop目录先打包，再用gzip压缩</span><br><span class="line">分步完成：tar -cvf hadoop.tar hadoop</span><br><span class="line">		  gzip hadoop.tar</span><br><span class="line">一步完成：tar -zcvf hadoop.tar.gz hadoop</span><br><span class="line">		  </span><br><span class="line">将其解压缩，再取消打包</span><br><span class="line">分步完成：gzip -d hadoop.tar.gz 或 gunzip hadoop.tar.gz</span><br><span class="line">一步完成：tar -zxvf hadoop.tar.gz</span><br><span class="line"></span><br><span class="line">将/hadoop目录先打包，同时用bzip2压缩，并保存到/tmp目录下</span><br><span class="line">tar -jcvf /tmp/hadoop.tar.bz2 hadoop</span><br><span class="line"></span><br><span class="line">将/tmp/hadoop.tar.bz2解压到/usr目录下面</span><br><span class="line">tar -jxvf hadoop.tar.bz2 -C /usr/</span><br><span class="line">123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081</span><br></pre></td></tr></table></figure><h3 id="系统命令">系统命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">1.查看主机名</span><br><span class="line">hostname</span><br><span class="line"></span><br><span class="line">2.修改主机名(重启后无效)</span><br><span class="line">hostname hadoop</span><br><span class="line"></span><br><span class="line">3.修改主机名(重启后永久生效)</span><br><span class="line">vi /ect/sysconfig/network</span><br><span class="line"></span><br><span class="line">4.修改IP(重启后无效)</span><br><span class="line">ifconfig eth0 192.168.12.22</span><br><span class="line"></span><br><span class="line">5.修改IP(重启后永久生效)</span><br><span class="line">vi /etc/sysconfig/network-scripts/ifcfg-eth0</span><br><span class="line"></span><br><span class="line">6.查看系统信息</span><br><span class="line"><span class="built_in">uname</span> -a</span><br><span class="line"><span class="built_in">uname</span> -r</span><br><span class="line"></span><br><span class="line">7.查看ID命令</span><br><span class="line"><span class="built_in">id</span> -u</span><br><span class="line"><span class="built_in">id</span> -g</span><br><span class="line"></span><br><span class="line">8.日期</span><br><span class="line"><span class="built_in">date</span></span><br><span class="line"><span class="built_in">date</span> +%Y-%m-%d</span><br><span class="line"><span class="built_in">date</span> +%T</span><br><span class="line"><span class="built_in">date</span> +%Y-%m-%d<span class="string">&quot; &quot;</span>%T</span><br><span class="line"></span><br><span class="line">9.日历</span><br><span class="line">cal 2012</span><br><span class="line"></span><br><span class="line">10.查看文件信息</span><br><span class="line">file filename</span><br><span class="line"></span><br><span class="line">11.挂载硬盘</span><br><span class="line">mount</span><br><span class="line">umount</span><br><span class="line">加载windows共享</span><br><span class="line">mount -t cifs //192.168.1.100/tools /mnt</span><br><span class="line"></span><br><span class="line">12.查看文件大小</span><br><span class="line"><span class="built_in">du</span> -h</span><br><span class="line"><span class="built_in">du</span> -ah</span><br><span class="line"></span><br><span class="line">13.查看分区</span><br><span class="line"><span class="built_in">df</span> -h</span><br><span class="line"></span><br><span class="line">14.ssh</span><br><span class="line">ssh hadoop@192.168.1.1</span><br><span class="line"></span><br><span class="line">15.关机</span><br><span class="line">shutdown -h now /init 0</span><br><span class="line">shutdown -r now /reboot</span><br><span class="line">123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354</span><br></pre></td></tr></table></figure><h3 id="用户和组">用户和组</h3><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">添加一个tom用户，设置它属于users组，并添加注释信息</span><br><span class="line">分步完成：useradd tom</span><br><span class="line">          usermod -g users tom</span><br><span class="line">	      usermod -c <span class="string">&quot;hr tom&quot;</span> tom</span><br><span class="line">一步完成：useradd -g users -c <span class="string">&quot;hr tom&quot;</span> tom</span><br><span class="line"></span><br><span class="line">设置tom用户的密码</span><br><span class="line">passwd tom</span><br><span class="line"></span><br><span class="line">修改tom用户的登陆名为tomcat</span><br><span class="line">usermod -l tomcat tom</span><br><span class="line"></span><br><span class="line">将tomcat添加到sys和root组中</span><br><span class="line">usermod -G sys,root tomcat</span><br><span class="line"></span><br><span class="line">查看tomcat的组信息</span><br><span class="line">groups tomcat</span><br><span class="line"></span><br><span class="line">添加一个<span class="keyword">jerry用户并设置密码</span></span><br><span class="line"><span class="keyword"></span>useradd <span class="keyword">jerry</span></span><br><span class="line"><span class="keyword"></span>passwd <span class="keyword">jerry</span></span><br><span class="line"><span class="keyword"></span></span><br><span class="line">添加一个交america的组</span><br><span class="line">groupadd america</span><br><span class="line"></span><br><span class="line">将<span class="keyword">jerry添加到america组中</span></span><br><span class="line"><span class="keyword"></span>usermod -g america <span class="keyword">jerry</span></span><br><span class="line"><span class="keyword"></span></span><br><span class="line">将tomcat用户从root组和sys组删除</span><br><span class="line">gpasswd -d tomcat root</span><br><span class="line">gpasswd -d tomcat sys</span><br><span class="line"></span><br><span class="line">将america组名修改为am</span><br><span class="line">groupmod -n am america</span><br><span class="line"><span class="number">12345678910111213141516171819202122232425262728293031323334</span></span><br></pre></td></tr></table></figure><h3 id="权限">权限</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">创建a.txt和b.txt文件，将他们设为其拥有者和所在组可写入，但其他以外的人则不可写入:</span><br><span class="line"><span class="built_in">chmod</span> ug+w,o-w a.txt b.txt</span><br><span class="line"></span><br><span class="line">创建c.txt文件所有人都可以写和执行</span><br><span class="line"><span class="built_in">chmod</span> a=wx c.txt 或<span class="built_in">chmod</span> 666 c.txt</span><br><span class="line"></span><br><span class="line">将/hadoop目录下的所有文件与子目录皆设为任何人可读取</span><br><span class="line"><span class="built_in">chmod</span> -R a+r /hadoop</span><br><span class="line"></span><br><span class="line">将/hadoop目录下的所有文件与子目录的拥有者设为root，用户拥有组为<span class="built_in">users</span></span><br><span class="line"><span class="built_in">chown</span> -R root:<span class="built_in">users</span> /hadoop</span><br><span class="line"></span><br><span class="line">将当前目录下的所有文件与子目录的用户皆设为hadoop，组设为<span class="built_in">users</span></span><br><span class="line"><span class="built_in">chown</span> -R hadoop:<span class="built_in">users</span> *</span><br><span class="line">1234567891011121314</span><br></pre></td></tr></table></figure><h3 id="帮助文档">帮助文档</h3><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">1.内部命令：echo</span><br><span class="line">查看内部命令帮助：<span class="keyword">help</span> echo 或者 <span class="keyword">man</span> echo</span><br><span class="line"></span><br><span class="line">2.外部命令：<span class="keyword">ls</span></span><br><span class="line">查看外部命令帮助：<span class="keyword">ls</span> --<span class="keyword">help</span> 或者 <span class="keyword">man</span> <span class="keyword">ls</span> 或者 info <span class="keyword">ls</span></span><br><span class="line"></span><br><span class="line">3.<span class="keyword">man</span>文档的类型(1~9)</span><br><span class="line"><span class="keyword">man</span> 7 <span class="keyword">man</span></span><br><span class="line"><span class="keyword">man</span> 5 passwd</span><br><span class="line"></span><br><span class="line">4.快捷键：</span><br><span class="line">ctrl + c：停止进程</span><br><span class="line">ctrl + <span class="keyword">l</span>：清屏</span><br><span class="line">ctrl + r：搜索历史命令</span><br><span class="line">ctrl + q：退出</span><br><span class="line"></span><br><span class="line">5.善于用<span class="keyword">tab</span>键</span><br><span class="line">1234567891011121314151617</span><br></pre></td></tr></table></figure><p>文件相关命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line">1.进入到用户根目录</span><br><span class="line"><span class="built_in">cd</span> ~ 或者 <span class="built_in">cd</span></span><br><span class="line"><span class="built_in">cd</span> ~hadoop</span><br><span class="line">回到原来路径</span><br><span class="line"><span class="built_in">cd</span> -</span><br><span class="line"></span><br><span class="line">2.查看文件详情</span><br><span class="line"><span class="built_in">stat</span> a.txt</span><br><span class="line"></span><br><span class="line">3.移动</span><br><span class="line"><span class="built_in">mv</span> a.txt /ect/</span><br><span class="line">改名</span><br><span class="line"><span class="built_in">mv</span> b.txt a.txt</span><br><span class="line">移动并改名</span><br><span class="line"><span class="built_in">mv</span> a.txt ../b.txt</span><br><span class="line"></span><br><span class="line">4拷贝并改名</span><br><span class="line"><span class="built_in">cp</span> a.txt /etc/b.txt</span><br><span class="line"></span><br><span class="line">5.vi撤销修改</span><br><span class="line">ctrl + u (undo)</span><br><span class="line">恢复</span><br><span class="line">ctrl + r (redo)</span><br><span class="line"></span><br><span class="line">6.名令设置别名(重启后无效)</span><br><span class="line"><span class="built_in">alias</span> ll=<span class="string">&quot;ls -l&quot;</span></span><br><span class="line">取消</span><br><span class="line"><span class="built_in">unalias</span> ll</span><br><span class="line"></span><br><span class="line">7.如果想让别名重启后仍然有效需要修改</span><br><span class="line">vi ~/.bashrc</span><br><span class="line"></span><br><span class="line">8.添加用户</span><br><span class="line">useradd hadoop</span><br><span class="line">passwd hadoop</span><br><span class="line"></span><br><span class="line">9创建多个文件</span><br><span class="line"><span class="built_in">touch</span> a.txt b.txt</span><br><span class="line"><span class="built_in">touch</span> /home/&#123;a.txt,b.txt&#125;</span><br><span class="line"></span><br><span class="line">10.将一个文件的内容复制到里另一个文件中</span><br><span class="line"><span class="built_in">cat</span> a.txt &gt; b.txt</span><br><span class="line">追加内容</span><br><span class="line"><span class="built_in">cat</span> a.txt &gt;&gt; b.txt </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">11.将a.txt 与b.txt设为其拥有者和其所属同一个组者可写入，但其他以外的人则不可写入:</span><br><span class="line"><span class="built_in">chmod</span> ug+w,o-w a.txt b.txt</span><br><span class="line"></span><br><span class="line"><span class="built_in">chmod</span> a=wx c.txt</span><br><span class="line"></span><br><span class="line">12.将当前目录下的所有文件与子目录皆设为任何人可读取:</span><br><span class="line"><span class="built_in">chmod</span> -R a+r *</span><br><span class="line"></span><br><span class="line">13.将a.txt的用户拥有者设为<span class="built_in">users</span>,组的拥有者设为jessie:</span><br><span class="line"><span class="built_in">chown</span> <span class="built_in">users</span>:jessie a.txt</span><br><span class="line"></span><br><span class="line">14.将当前目录下的所有文件与子目录的用户的使用者为lamport,组拥有者皆设为<span class="built_in">users</span>，</span><br><span class="line"><span class="built_in">chown</span> -R lamport:<span class="built_in">users</span> *</span><br><span class="line"></span><br><span class="line">15.将所有的java语言程式拷贝至finished子目录中:</span><br><span class="line"><span class="built_in">cp</span> *.java finished</span><br><span class="line"></span><br><span class="line">16.将目前目录及其子目录下所有扩展名是java的文件列出来。</span><br><span class="line">find -name <span class="string">&quot;*.java&quot;</span></span><br><span class="line">查找当前目录下扩展名是java 的文件</span><br><span class="line">find -name *.java</span><br><span class="line"></span><br><span class="line">17.删除当前目录下扩展名是java的文件</span><br><span class="line"><span class="built_in">rm</span> -f *.java</span><br><span class="line">12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970</span><br></pre></td></tr></table></figure><h3 id="VIM">VIM</h3><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">i</span><br><span class="line">a/A</span><br><span class="line">o/O</span><br><span class="line">r + ?替换</span><br><span class="line"></span><br><span class="line"><span class="section">0:文件当前行的开头</span></span><br><span class="line"><span class="section">$:文件当前行的末尾</span></span><br><span class="line"><span class="section">G:文件的最后一行开头</span></span><br><span class="line">1 + G到第一行 </span><br><span class="line">9 + G到第九行 = :9</span><br><span class="line"></span><br><span class="line"><span class="section">dd:删除一行</span></span><br><span class="line">3dd：删除3行</span><br><span class="line"><span class="section">yy:复制一行</span></span><br><span class="line"><span class="section">3yy:复制3行</span></span><br><span class="line"><span class="section">p:粘贴</span></span><br><span class="line"><span class="section">u:undo</span></span><br><span class="line">ctrl + r:redo</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;a剪切板a</span></span><br><span class="line"><span class="string">&quot;</span>b剪切板b</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;ap粘贴剪切板a的内容</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">每次进入vi就有行号</span></span><br><span class="line"><span class="string">vi ~/.vimrc</span></span><br><span class="line"><span class="string">set nu</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">:w a.txt另存为</span></span><br><span class="line"><span class="string">:w &gt;&gt; a.txt内容追加到a.txt</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">:e!恢复到最初状态</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">:1,$s/hadoop/root/g 将第一行到追后一行的hadoop替换为root</span></span><br><span class="line"><span class="string">:1,$s/hadoop/root/c 将第一行到追后一行的hadoop替换为root(有提示)</span></span><br><span class="line"><span class="string">1234567891011121314151617181920212223242526272829303132333435</span></span><br></pre></td></tr></table></figure><h3 id="查找">查找</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">1.查找可执行的命令：</span><br><span class="line"><span class="built_in">which</span> <span class="built_in">ls</span></span><br><span class="line"></span><br><span class="line">2.查找可执行的命令和帮助的位置：</span><br><span class="line">whereis <span class="built_in">ls</span></span><br><span class="line"></span><br><span class="line">3.查找文件(需要更新库:updatedb)</span><br><span class="line">locate hadoop.txt</span><br><span class="line"></span><br><span class="line">4.从某个文件夹开始查找</span><br><span class="line">find / -name <span class="string">&quot;hadooop*&quot;</span></span><br><span class="line">find / -name <span class="string">&quot;hadooop*&quot;</span> -<span class="built_in">ls</span></span><br><span class="line"></span><br><span class="line">5.查找并删除</span><br><span class="line">find / -name <span class="string">&quot;hadooop*&quot;</span> -ok <span class="built_in">rm</span> &#123;&#125; \;</span><br><span class="line">find / -name <span class="string">&quot;hadooop*&quot;</span> -<span class="built_in">exec</span> <span class="built_in">rm</span> &#123;&#125; \;</span><br><span class="line"></span><br><span class="line">6.查找用户为hadoop的文件</span><br><span class="line">find /usr -user hadoop -<span class="built_in">ls</span></span><br><span class="line"></span><br><span class="line">7.查找用户为hadoop并且(-a)拥有组为root的文件</span><br><span class="line">find /usr -user hadoop -a -group root -<span class="built_in">ls</span></span><br><span class="line"></span><br><span class="line">8.查找用户为hadoop或者(-o)拥有组为root并且是文件夹类型的文件</span><br><span class="line">find /usr -user hadoop -o -group root -a -<span class="built_in">type</span> d</span><br><span class="line"></span><br><span class="line">9.查找权限为777的文件</span><br><span class="line">find / -perm -777 -<span class="built_in">type</span> d -<span class="built_in">ls</span></span><br><span class="line"></span><br><span class="line">10.显示命令历史</span><br><span class="line"><span class="built_in">history</span></span><br><span class="line"></span><br><span class="line">11.grep</span><br><span class="line">grep hadoop /etc/password</span><br><span class="line">12345678910111213141516171819202122232425262728293031323334</span><br></pre></td></tr></table></figure><h3 id="打包与压缩">打包与压缩</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>.gzip压缩</span><br><span class="line">gzip <span class="selector-tag">a</span><span class="selector-class">.txt</span></span><br><span class="line"></span><br><span class="line"><span class="number">2</span>.解压</span><br><span class="line">gunzip <span class="selector-tag">a</span><span class="selector-class">.txt</span><span class="selector-class">.gz</span></span><br><span class="line">gzip -d <span class="selector-tag">a</span><span class="selector-class">.txt</span><span class="selector-class">.gz</span></span><br><span class="line"></span><br><span class="line"><span class="number">3</span>.bzip2压缩</span><br><span class="line">bzip2 <span class="selector-tag">a</span></span><br><span class="line"></span><br><span class="line"><span class="number">4</span>.解压</span><br><span class="line">bunzip2 <span class="selector-tag">a</span><span class="selector-class">.bz2</span></span><br><span class="line">bzip2 -d <span class="selector-tag">a</span><span class="selector-class">.bz2</span></span><br><span class="line"></span><br><span class="line"><span class="number">5</span>.将当前目录的文件打包</span><br><span class="line">tar -cvf bak<span class="selector-class">.tar</span> .</span><br><span class="line">将/etc/password追加文件到bak.tar中(<span class="attribute">r</span>)</span><br><span class="line">tar -rvf bak<span class="selector-class">.tar</span> /etc/password</span><br><span class="line"></span><br><span class="line"><span class="number">6</span>.解压</span><br><span class="line">tar -xvf bak<span class="selector-class">.tar</span></span><br><span class="line"></span><br><span class="line"><span class="number">7</span>.打包并压缩gzip</span><br><span class="line">tar -zcvf <span class="selector-tag">a</span><span class="selector-class">.tar</span><span class="selector-class">.gz</span></span><br><span class="line"></span><br><span class="line"><span class="number">8</span>.解压缩</span><br><span class="line">tar -zxvf <span class="selector-tag">a</span><span class="selector-class">.tar</span><span class="selector-class">.gz</span></span><br><span class="line">解压到/usr/下</span><br><span class="line">tar -zxvf <span class="selector-tag">a</span><span class="selector-class">.tar</span><span class="selector-class">.gz</span> -C /usr</span><br><span class="line"></span><br><span class="line"><span class="number">9</span>.查看压缩包内容</span><br><span class="line">tar -ztvf <span class="selector-tag">a</span><span class="selector-class">.tar</span><span class="selector-class">.gz</span></span><br><span class="line"></span><br><span class="line">zip/unzip</span><br><span class="line"></span><br><span class="line"><span class="number">10</span>.打包并压缩成bz2</span><br><span class="line">tar -jcvf <span class="selector-tag">a</span><span class="selector-class">.tar</span><span class="selector-class">.bz2</span></span><br><span class="line"></span><br><span class="line"><span class="number">11</span>.解压bz2</span><br><span class="line">tar -jxvf <span class="selector-tag">a</span><span class="selector-class">.tar</span><span class="selector-class">.bz2</span></span><br><span class="line"><span class="number">12345678910111213141516171819202122232425262728293031323334353637383940</span></span><br></pre></td></tr></table></figure><h3 id="正则表达式">正则表达式</h3><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">规则：</span><br><span class="line">.  : 任意一个字符</span><br><span class="line">a* : 任意多个a(零个或多个a)</span><br><span class="line">a? : 零个或一个a</span><br><span class="line">a+ : 一个或多个a</span><br><span class="line">.* : 任意多个任意字符</span><br><span class="line">\. : 转义.</span><br><span class="line">\&lt;h.*p\&gt; ：以h开头，p结尾的一个单词</span><br><span class="line">o\&#123;<span class="number">2</span>\&#125; : o重复两次</span><br><span class="line"></span><br><span class="line"><span class="keyword">grep</span> <span class="string">&#x27;^i.\&#123;18\&#125;n$&#x27;</span> <span class="regexp">/usr/</span>share<span class="regexp">/dict/</span>words</span><br><span class="line"></span><br><span class="line">查找不是以#开头的行</span><br><span class="line"><span class="keyword">grep</span> -v <span class="string">&#x27;^#&#x27;</span> a.txt | <span class="keyword">grep</span> -v <span class="string">&#x27;^$&#x27;</span> </span><br><span class="line"></span><br><span class="line">以h或r开头的</span><br><span class="line"><span class="keyword">grep</span> <span class="string">&#x27;^[hr]&#x27;</span> <span class="regexp">/etc/</span>passwd</span><br><span class="line"></span><br><span class="line">不是以h和r开头的</span><br><span class="line"><span class="keyword">grep</span> <span class="string">&#x27;^[^hr]&#x27;</span> <span class="regexp">/etc/</span>passwd</span><br><span class="line"></span><br><span class="line">不是以h到r开头的</span><br><span class="line"><span class="keyword">grep</span> <span class="string">&#x27;^[^h-r]&#x27;</span> <span class="regexp">/etc/</span>passwd</span><br><span class="line"><span class="number">1234567891011121314151617181920212223</span></span><br></pre></td></tr></table></figure><h3 id="输入输出重定向">输入输出重定向</h3><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>.新建一个文件</span><br><span class="line">touch <span class="keyword">a</span>.txt</span><br><span class="line">&gt; <span class="keyword">b</span>.txt</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>.错误重定向:<span class="number">2</span>&gt;</span><br><span class="line"><span class="keyword">find</span> /etc -name zhaoxing.txt <span class="number">2</span>&gt; error.txt</span><br><span class="line"></span><br><span class="line"><span class="number">3</span>.将正确或错误的信息都输入到<span class="built_in">log</span>.txt中</span><br><span class="line"><span class="keyword">find</span> /etc -name passwd &gt; /tmp/<span class="built_in">log</span>.txt <span class="number">2</span>&gt;&amp;<span class="number">1</span> </span><br><span class="line"><span class="keyword">find</span> /etc -name passwd &amp;&gt; /tmp/<span class="built_in">log</span>.txt</span><br><span class="line"></span><br><span class="line"><span class="number">4</span>.追加&gt;&gt;</span><br><span class="line"></span><br><span class="line"><span class="number">5</span>.将小写转为大写（输入重定向）</span><br><span class="line"><span class="keyword">tr</span> <span class="string">&quot;a-z&quot;</span> <span class="string">&quot;A-Z&quot;</span> &lt; /etc/passwd</span><br><span class="line"></span><br><span class="line"><span class="number">6</span>.自动创建文件</span><br><span class="line"><span class="keyword">cat</span> &gt; <span class="built_in">log</span>.txt &lt;&lt; EXIT</span><br><span class="line">&gt; ccc</span><br><span class="line">&gt; ddd</span><br><span class="line">&gt; EXI</span><br><span class="line"></span><br><span class="line"><span class="number">7</span>.查看/etc下的文件有多少个？</span><br><span class="line"><span class="keyword">ls</span> -<span class="keyword">l</span> /etc/ | <span class="keyword">grep</span> <span class="string">&#x27;^d&#x27;</span> | wc -<span class="keyword">l</span></span><br><span class="line"></span><br><span class="line"><span class="number">8</span>.查看/etc下的文件有多少个，并将文件详情输入到result.txt中</span><br><span class="line"><span class="keyword">ls</span> -<span class="keyword">l</span> /etc/ | <span class="keyword">grep</span> <span class="string">&#x27;^d&#x27;</span> | tee result.txt | wc -<span class="keyword">l</span></span><br><span class="line"><span class="number">123456789101112131415161718192021222324252627</span></span><br></pre></td></tr></table></figure><h3 id="进程控制">进程控制</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">1.查看用户最近登录情况</span><br><span class="line">last</span><br><span class="line">lastlog</span><br><span class="line"></span><br><span class="line">2.查看硬盘使用情况</span><br><span class="line"><span class="built_in">df</span></span><br><span class="line"></span><br><span class="line">3.查看文件大小</span><br><span class="line"><span class="built_in">du</span></span><br><span class="line"></span><br><span class="line">4.查看内存使用情况</span><br><span class="line">free</span><br><span class="line"></span><br><span class="line">5.查看文件系统</span><br><span class="line">/proc</span><br><span class="line"></span><br><span class="line">6.查看日志</span><br><span class="line"><span class="built_in">ls</span> /var/log/</span><br><span class="line"></span><br><span class="line">7.查看系统报错日志</span><br><span class="line"><span class="built_in">tail</span> /var/log/messages</span><br><span class="line"></span><br><span class="line">8.查看进程</span><br><span class="line">top</span><br><span class="line"></span><br><span class="line">9.结束进程</span><br><span class="line"><span class="built_in">kill</span> 1234</span><br><span class="line"><span class="built_in">kill</span> -9 4333</span><br><span class="line">12345678910111213141516171819202122232425262728</span><br></pre></td></tr></table></figure><h3 id="其他命令">其他命令</h3><h4 id="远程文件复制：scp">远程文件复制：scp</h4><p>scp 命令用于 Linux 之间复制文件和目录，scp是 secure copy 的缩写是linux系统下基于ssh登陆进行安全的远程文件拷贝命令。</p><p>scp 是加密的，<a target="_blank" rel="noopener" href="https://xiaoxiaoming.xyz/linux/linux-comm-rcp.html">rcp</a> 是不加密的，scp 是 rcp 的加强版。</p><p>使用scp命令要确保使用的用户具有可读取远程服务器相应文件的权限，否则scp命令是无法起作用的。</p><p>从本地复制到远程命令格式：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">复制文件</span><br><span class="line">scp local_file remote_username<span class="keyword">@remote</span>_<span class="attribute">ip</span>:remote_folder </span><br><span class="line">或者 </span><br><span class="line">scp local_file remote_username<span class="keyword">@remote</span>_<span class="attribute">ip</span>:remote_file </span><br><span class="line">或者 </span><br><span class="line">scp local_file remote_<span class="attribute">ip</span>:remote_folder </span><br><span class="line">或者 </span><br><span class="line">scp local_file remote_<span class="attribute">ip</span>:remote_file</span><br><span class="line"></span><br><span class="line">复制文件夹</span><br><span class="line">scp -r local_folder remote_username<span class="keyword">@remote</span>_<span class="attribute">ip</span>:remote_folder </span><br><span class="line">或者 </span><br><span class="line">scp -r local_folder remote_<span class="attribute">ip</span>:remote_folder </span><br><span class="line"><span class="number">12345678910111213</span></span><br></pre></td></tr></table></figure><p>实例：</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">scp <span class="regexp">/home/</span>space<span class="regexp">/music/</span><span class="number">1</span>.mp3 root<span class="meta">@xiaoxiaoming</span>.xyz:<span class="regexp">/home/</span>root<span class="regexp">/others/</span>music </span><br><span class="line">scp <span class="regexp">/home/</span>space<span class="regexp">/music/</span><span class="number">1</span>.mp3 root<span class="meta">@xiaoxiaoming</span>.xyz:<span class="regexp">/home/</span>root<span class="regexp">/others/</span>music<span class="operator">/</span><span class="number">001</span>.mp3 </span><br><span class="line">scp <span class="regexp">/home/</span>space<span class="regexp">/music/</span><span class="number">1</span>.mp3 xiaoxiaoming.xyz:<span class="regexp">/home/</span>root<span class="regexp">/others/</span>music </span><br><span class="line">scp <span class="regexp">/home/</span>space<span class="regexp">/music/</span><span class="number">1</span>.mp3 xiaoxiaoming.xyz:<span class="regexp">/home/</span>root<span class="regexp">/others/</span>music<span class="operator">/</span><span class="number">001</span>.mp3</span><br><span class="line"></span><br><span class="line">scp <span class="operator">-</span>r <span class="regexp">/home/</span>space<span class="regexp">/music/</span> root<span class="meta">@xiaoxiaoming</span>.xyz:<span class="regexp">/home/</span>root<span class="regexp">/others/</span> </span><br><span class="line">scp <span class="operator">-</span>r <span class="regexp">/home/</span>space<span class="regexp">/music/</span> xiaoxiaoming.xyz:<span class="regexp">/home/</span>root<span class="regexp">/others/</span> </span><br><span class="line"><span class="number">1234567</span></span><br></pre></td></tr></table></figure><p>从远程复制到本地：</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">scp root<span class="meta">@xiaoxiaoming</span>.xyz:<span class="regexp">/home/</span>root<span class="regexp">/others/</span>music <span class="regexp">/home/</span>space<span class="regexp">/music/</span><span class="number">1</span>.mp3 </span><br><span class="line">scp <span class="operator">-</span>r xiaoxiaoming.xyz:<span class="regexp">/home/</span>root<span class="regexp">/others/</span> <span class="regexp">/home/</span>space<span class="regexp">/music/</span></span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure><p>-P 参数来设置命令的端口号：</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#scp 命令使用端口号 4588</span></span><br><span class="line">scp -P <span class="number">4588</span> remote<span class="symbol">@xiaoxiaoming</span>.xyz:/usr/<span class="keyword">local</span>/<span class="built_in">sin</span>.sh /home/administrator</span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure><h4 id="locate查找">locate查找</h4><p>locate命令会去保存文档和目录名称的数据库内，查找文件或目录。</p><p>一般情况我们只需要输入<code>locate your_file_name</code> 即可查找指定文件。</p><p><strong>参数：</strong></p><ul class="lvl-0"><li class="lvl-2"><p>-d或–database= 配置locate指令使用的数据库。locate指令预设的数据库位于/var/lib/mlocate目录里，文档名为mlocate.db。</p></li></ul><p>查找passwd文件，输入以下命令：</p><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">locate</span> passwd</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>locate与find的区别: find 是去硬盘找，locate 只在/var/lib/slocate资料库中找。</p><p>locate的速度比find快，它并不是真的查找，而是查数据库，一般文件数据库在/var/lib/mlocate/mlocate.db中，所以locate的查找并不是实时的，而是以数据库的更新为准，一般是系统自己维护，也可以手工升级数据库 ，命令为：</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">updatedb</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><h4 id="which命令">which命令</h4><p>which查找$PATH中设置命令及安装文件目录所在位置</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">python<span class="variable">@ubuntu</span><span class="symbol">:/var/lib/mlocate</span><span class="variable">$ </span>which locate</span><br><span class="line">/usr/bin/locate</span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure><h4 id="echo">echo</h4><p>常见用法：</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">python<span class="variable">@ubuntu</span><span class="symbol">:~</span><span class="variable">$ </span>echo -e <span class="string">&quot;hello\t\t world！&quot;</span>  解析转义字符</span><br><span class="line">hello            world！</span><br><span class="line">python<span class="variable">@ubuntu</span><span class="symbol">:~</span><span class="variable">$ </span>echo -E <span class="string">&quot;hello\t\t world！&quot;</span>  不解析转义字符</span><br><span class="line">hello\t\t world！</span><br><span class="line">python<span class="variable">@ubuntu</span><span class="symbol">:~</span><span class="variable">$ </span>echo <span class="variable">$a</span>  输出环境变量</span><br><span class="line">b</span><br><span class="line"><span class="number">123456</span></span><br></pre></td></tr></table></figure><h4 id="设置或显示环境变量：export">设置或显示环境变量：export</h4><p>在 shell 中执行程序时，shell 会提供一组环境变量。export 可新增，修改或删除环境变量，供后续执行的程序使用。export 的效力仅限于该次登陆操作。</p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export <span class="comment">[-fnp]</span><span class="comment">[变量名称]</span>=<span class="comment">[变量设置值]</span></span><br><span class="line">1</span><br></pre></td></tr></table></figure><p><strong>参数说明</strong>：</p><ul class="lvl-0"><li class="lvl-2"><p>-f 　代表[变量名称]中为函数名称。</p></li><li class="lvl-2"><p>-n 　删除指定的变量。变量实际上并未删除，只是不会输出到后续指令的执行环境中。</p></li><li class="lvl-2"><p>-p 　列出所有的shell赋予程序的环境变量。</p></li></ul><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># <span class="keyword">export</span> MYENV=<span class="number">7</span> <span class="comment">//定义环境变量并赋值</span></span><br><span class="line"># <span class="keyword">export</span> -p <span class="comment">//列出当前的环境变量</span></span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure><h4 id="修改主机名-ip地址">修改主机名&amp;ip地址</h4><p>显示主机名：hostname</p><p>临时修改：hostname xxx</p><p><strong>永久修改</strong></p><p>对于Ubuntu 系统</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">vim</span> /etc/<span class="built_in">hostname</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>对于centos系统</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim <span class="regexp">/etc/</span>sysconfig/network</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>在此配置文件中添加一条HOSTNAME=node1</p><p>针对centos7系统，可以使用如下命令</p><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">hostnamectl</span> <span class="built_in">set-hostname</span> <span class="string">xxx</span></span><br><span class="line"><span class="string">1</span></span><br></pre></td></tr></table></figure><p>一般需要重开shell甚至重启操作系统才能生效。</p><p><strong>修改IP地址</strong></p><p>ifconfig eth0 192.168.12.22(重启后无效)</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim <span class="regexp">/etc/</span>sysconfig<span class="regexp">/network-scripts/i</span>fcfg-eth0</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><h4 id="mount挂载">mount挂载</h4><p>mount 挂载外部存储设备到文件系统中</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> /mnt/cdrom 创建一个目录，用来挂载</span><br><span class="line">mount -t iso9660 -o ro /dev/cdrom /mnt/cdrom/     </span><br><span class="line">12</span><br></pre></td></tr></table></figure><p>将设备/dev/cdrom挂载到 挂载点 ： /mnt/cdrom中</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">umount <span class="regexp">/mnt/</span>cdrom</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><h4 id="ssh免密登陆">ssh免密登陆</h4><p>假如 A 要登陆 B<br>在A上操作：首先生成密钥对</p><figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen (提示时，直接回车即可)</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>再将A自己的公钥拷贝并追加到B的授权列表文件authorized_keys中</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssh-<span class="keyword">copy</span>-<span class="built_in">id</span> B</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><h3 id="批量添加用户">批量添加用户</h3><h4 id="与用户账号有关的系统文件">与用户账号有关的系统文件</h4><p>完成用户管理的工作本质都是对有关的系统文件进行修改，这些系统文件包括/etc/passwd, /etc/shadow, /etc/group等。</p><p><strong>/etc/passwd记录用户的基本属性</strong></p><p>它的内容类似下面的例子：</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">＃ cat <span class="keyword">/etc/</span>passwd</span><br><span class="line"><span class="symbol"></span></span><br><span class="line"><span class="symbol">root:</span>x:<span class="number">0</span>:<span class="number">0</span>:Superuser:/:</span><br><span class="line"><span class="symbol">daemon:</span>x:<span class="number">1</span>:<span class="number">1</span>:System daemons:/etc:</span><br><span class="line"><span class="symbol">bin:</span>x:<span class="number">2</span>:<span class="number">2</span>:Owner of system commands:/bin:</span><br><span class="line"><span class="symbol">sys:</span>x:<span class="number">3</span>:<span class="number">3</span>:Owner of system files:<span class="keyword">/usr/</span>sys:</span><br><span class="line"><span class="symbol">adm:</span>x:<span class="number">4</span>:<span class="number">4</span>:System accounting:<span class="keyword">/usr/</span>adm:</span><br><span class="line"><span class="symbol">uucp:</span>x:<span class="number">5</span>:<span class="number">5</span>:UUCP administrator:<span class="keyword">/usr/</span>lib/uucp:</span><br><span class="line"><span class="symbol">auth:</span>x:<span class="number">7</span>:<span class="number">21</span>:Authentication administrator:<span class="keyword">/tcb/</span>files/auth:</span><br><span class="line"><span class="symbol">cron:</span>x:<span class="number">9</span>:<span class="number">16</span>:Cron daemon:<span class="keyword">/usr/</span>spool/cron:</span><br><span class="line"><span class="symbol">listen:</span>x:<span class="number">37</span>:<span class="number">4</span>:Network daemon:<span class="keyword">/usr/</span>net/nls:</span><br><span class="line"><span class="symbol">lp:</span>x:<span class="number">71</span>:<span class="number">18</span>:Printer administrator:<span class="keyword">/usr/</span>spool/lp:</span><br><span class="line"><span class="symbol">sam:</span>x:<span class="number">200</span>:<span class="number">50</span>:Sam san:<span class="keyword">/home/</span>sam:<span class="keyword">/bin/</span>sh</span><br><span class="line"><span class="number">12345678910111213</span></span><br></pre></td></tr></table></figure><p>/etc/passwd中一行记录对应着一个用户，每行记录又被冒号(:)分隔为7个字段，其格式和具体含义如下：</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">用户名:口令:用户标识号:组标识号:注释性描述:主目录:登录<span class="keyword">Shell</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash">1</span></span><br></pre></td></tr></table></figure><p><strong>用户名：</strong></p><p>通常长度不超过8个字符，由大小写字母和/或数字组成，不能有冒号(😃。登录名中不能有冒号(😃，因为冒号在这里是分隔符。</p><p>为了兼容起见，登录名中最好不要包含点字符(.)，并且不使用连字符(-)和加号(+)打头。</p><p><strong>口令：</strong></p><p>本身存放用户口令的加密串，但现在许多Linux 系统都使用了shadow技术，把真正的加密后的用户口令字存放到/etc/shadow文件中，而/etc/passwd文件的口令字段中只存放一个特殊的字符，例如“x”或者“*”。</p><p><strong>用户标识号：</strong></p><p>是一个整数，系统内部用它来标识用户。一般情况下它与用户名是一一对应的，如果几个用户名对应的用户标识号是一样的，系统内部将把它们视为同一个用户，但是它们可以有不同的口令、不同的主目录以及不同的登录Shell等。</p><p>通常用户标识号的取值范围是0～65 535。0是超级用户root的标识号，1～99由系统保留，作为管理账号，普通用户的标识号从100开始。</p><p><strong>组标识号：</strong></p><p>记录用户所属的用户组，对应着/etc/group文件中的一条记录。</p><p><strong>注释性描述：</strong></p><p>一段任意编写的注释，创建账户时可以通过<code>useradd -c 用户名</code>的<code>-c</code>参数指定。</p><p><strong>主目录：</strong></p><p>用户的起始工作目录，用户在登录到系统之后所处的目录。</p><p><strong>登录Shell：</strong></p><p>用户登录后，要启动一个进程，负责将用户的操作传给内核，这个进程是用户登录到系统后运行的命令解释器或某个特定的程序，即Shell。</p><p>Shell是用户与Linux系统之间的接口。Linux的Shell有许多种，每种都有不同的特点。常用的有sh(Bourne Shell), csh(C Shell), ksh(Korn Shell), tcsh(TENEX/TOPS-20 type C Shell), bash(Bourne Again Shell)等。</p><p>可以通过usermod的<code>-s</code>参数为用户指定某个Shell。如果useradd不通过<code>-s</code>参数指定shell，那么系统使用bash为默认的登录Shell，即这个字段的值为/bin/bash。</p><p>为用户的登录指定特定的Shell可以限制用户只能运行指定的应用程序，在该应用程序运行结束后，用户就自动退出了系统。不过大部分Linux系统要求只有在系统中登记过的shell才能出现在这个字段中。</p><p><strong>伪用户（pseudo users）</strong></p><p>这些用户的登陆shell为/usr/sbin/nologin，即不能登录。它们的存在主要是方便系统管理，满足相应的系统进程对文件属主的要求。</p><p>常见的伪用户如下所示：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">bin 拥有可执行的用户命令文件 </span><br><span class="line">sys 拥有系统文件 </span><br><span class="line">adm 拥有帐户文件 </span><br><span class="line">uucp UUCP使用 </span><br><span class="line"><span class="built_in">lp</span> <span class="built_in">lp</span>或lpd子系统使用 </span><br><span class="line">nobody NFS使用</span><br><span class="line"><span class="number">123456</span></span><br></pre></td></tr></table></figure><p>还有许多标准的伪用户，例如：audit, cron, mail, usenet等，它们也都各自为相关的进程和文件所需要。</p><p><strong>/etc/shadow</strong></p><p>对安全性要求较高的Linux系统都把/etc/passwd文件中的口令字段保存在/etc/shadow文件中，超级用户才拥有该文件读权限。</p><p>/etc/shadow中的记录行与/etc/passwd中的一一对应，它由pwconv命令根据/etc/passwd中的数据自动产生</p><p>字段是：</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">登录名:加密口令:最后一次修改时间:最小时间间隔:最大时间间隔:警告时间:不活动时间:失效时间:标志</span></span><br><span class="line">1</span><br></pre></td></tr></table></figure><ol><li class="lvl-3"><p>&quot;登录名&quot;是与/etc/passwd文件中的登录名相一致的用户账号</p></li><li class="lvl-3"><p>&quot;口令&quot;字段存放的是加密后的用户口令字，长度为13个字符。如果为空，则对应用户没有口令，登录时不需要口令；如果含有不属于集合 { ./0-9A-Za-z }中的字符，则对应的用户不能登录。</p></li><li class="lvl-3"><p>&quot;最后一次修改时间&quot;表示的是从某个时刻起，到用户最后一次修改口令时的天数。大部分linux系统的时间起点是1970年1月1日。</p></li><li class="lvl-3"><p>&quot;最小时间间隔&quot;指的是两次修改口令之间所需的最小天数。</p></li><li class="lvl-3"><p>&quot;最大时间间隔&quot;指的是口令保持有效的最大天数。</p></li><li class="lvl-3"><p>&quot;警告时间&quot;字段表示的是从系统开始警告用户到用户密码正式失效之间的天数。</p></li><li class="lvl-3"><p>&quot;不活动时间&quot;表示的是用户没有登录活动但账号仍能保持有效的最大天数。</p></li><li class="lvl-3"><p>&quot;失效时间&quot;字段给出的是一个绝对的天数，如果使用了这个字段，那么就给出相应账号的生存期。期满后，该账号就不再是一个合法的账号，也就不能再用来登录了。</p></li></ol><p>下面是/etc/shadow的一个例子：</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">＃ cat /etc/shadow</span><br><span class="line"></span><br><span class="line"><span class="symbol">root:</span><span class="symbol">Dnakfw28zf38w:</span><span class="number">8764</span><span class="symbol">:</span><span class="number">0</span><span class="symbol">:</span><span class="number">168</span><span class="symbol">:</span><span class="number">7</span>:::</span><br><span class="line"><span class="symbol">daemon:</span>*::<span class="number">0</span><span class="symbol">:</span><span class="number">0</span>::::</span><br><span class="line"><span class="symbol">bin:</span>*::<span class="number">0</span><span class="symbol">:</span><span class="number">0</span>::::</span><br><span class="line"><span class="symbol">sys:</span>*::<span class="number">0</span><span class="symbol">:</span><span class="number">0</span>::::</span><br><span class="line"><span class="symbol">adm:</span>*::<span class="number">0</span><span class="symbol">:</span><span class="number">0</span>::::</span><br><span class="line"><span class="symbol">uucp:</span>*::<span class="number">0</span><span class="symbol">:</span><span class="number">0</span>::::</span><br><span class="line"><span class="symbol">nuucp:</span>*::<span class="number">0</span><span class="symbol">:</span><span class="number">0</span>::::</span><br><span class="line"><span class="symbol">auth:</span>*::<span class="number">0</span><span class="symbol">:</span><span class="number">0</span>::::</span><br><span class="line"><span class="symbol">cron:</span>*::<span class="number">0</span><span class="symbol">:</span><span class="number">0</span>::::</span><br><span class="line"><span class="symbol">listen:</span>*::<span class="number">0</span><span class="symbol">:</span><span class="number">0</span>::::</span><br><span class="line"><span class="symbol">lp:</span>*::<span class="number">0</span><span class="symbol">:</span><span class="number">0</span>::::</span><br><span class="line"><span class="symbol">sam:</span><span class="symbol">EkdiSECLWPdSa:</span><span class="number">9740</span><span class="symbol">:</span><span class="number">0</span><span class="symbol">:</span><span class="number">0</span>::::</span><br><span class="line"><span class="number">1234567891011121314</span></span><br></pre></td></tr></table></figure><p><strong>/etc/group记录用户组信息</strong></p><p>每个用户都属于某个用户组；一个组中可以有多个用户，一个用户也可以属于不同的组。</p><p>当一个用户同时是多个组中的成员时，在/etc/passwd文件中记录的是用户所属的主组，也就是登录时所属的默认组，而其他组称为附加组。</p><p>用户要访问属于附加组的文件时，必须首先使用newgrp命令使自己成为所要访问的组中的成员。</p><p>用户组的所有信息都存放在/etc/group文件中，字段有：</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">组名:口令:组标识号:组内用户列表</span></span><br><span class="line">1</span><br></pre></td></tr></table></figure><ol><li class="lvl-3"><p>&quot;组名&quot;是用户组的名称，由字母或数字构成。与/etc/passwd中的登录名一样，组名不应重复。</p></li><li class="lvl-3"><p>&quot;口令&quot;字段存放的是用户组加密后的口令字。一般Linux 系统的用户组都没有口令，即这个字段一般为空，或者是*。</p></li><li class="lvl-3"><p>&quot;组标识号&quot;与用户标识号类似，也是一个整数，被系统内部用来标识组。</p></li><li class="lvl-3"><p>&quot;组内用户列表&quot;是属于这个组的所有用户的列表，不同用户之间用逗号(,)分隔。这个用户组可能是用户的主组，也可能是附加组。</p></li></ol><p>/etc/group文件的一个例子如下：</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">root::<span class="number">0</span><span class="symbol">:root</span></span><br><span class="line">bin::<span class="number">2</span><span class="symbol">:root</span>,bin</span><br><span class="line">sys::<span class="number">3</span><span class="symbol">:root</span>,uucp</span><br><span class="line">adm::<span class="number">4</span><span class="symbol">:root</span>,adm</span><br><span class="line">daemon::<span class="number">5</span><span class="symbol">:root</span>,daemon</span><br><span class="line">lp::<span class="number">7</span><span class="symbol">:root</span>,lp</span><br><span class="line">users::<span class="number">20</span><span class="symbol">:root</span>,sam</span><br><span class="line"><span class="number">1234567</span></span><br></pre></td></tr></table></figure><h4 id="实操">实操</h4><p><strong>先编辑一个文本用户文件</strong></p><p>每一列按照<code>/etc/passwd</code>密码文件的格式书写，要注意每个用户的用户名、UID、宿主目录都不可以相同，其中密码栏可以留做空白或输入x号。一个范例文件user.txt内容如下：</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">user001::<span class="number">601</span><span class="symbol">:</span><span class="number">100</span><span class="symbol">:user</span><span class="symbol">:/home/user001</span><span class="symbol">:/bin/bash</span></span><br><span class="line">user002::<span class="number">602</span><span class="symbol">:</span><span class="number">100</span><span class="symbol">:user</span><span class="symbol">:/home/user002</span><span class="symbol">:/bin/bash</span></span><br><span class="line">user003::<span class="number">603</span><span class="symbol">:</span><span class="number">100</span><span class="symbol">:user</span><span class="symbol">:/home/user003</span><span class="symbol">:/bin/bash</span></span><br><span class="line">user004::<span class="number">604</span><span class="symbol">:</span><span class="number">100</span><span class="symbol">:user</span><span class="symbol">:/home/user004</span><span class="symbol">:/bin/bash</span></span><br><span class="line">user005::<span class="number">605</span><span class="symbol">:</span><span class="number">100</span><span class="symbol">:user</span><span class="symbol">:/home/user005</span><span class="symbol">:/bin/bash</span></span><br><span class="line">user006::<span class="number">606</span><span class="symbol">:</span><span class="number">100</span><span class="symbol">:user</span><span class="symbol">:/home/user006</span><span class="symbol">:/bin/bash</span></span><br><span class="line"><span class="number">123456</span></span><br></pre></td></tr></table></figure><p><strong>执行<code>/usr/sbin/newusers</code>命令</strong></p><p>需要root权限：</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># newusers &lt; user.txt</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>可以执行命令 <code>vipw</code> 或 <code>vi /etc/passwd</code> 检查 <code>/etc/passwd</code> 文件是否已经出现这些用户的数据，并且用户的宿主目录是否已经创建。</p><p><strong>取消 <code>shadow password</code> 功能</strong></p><p>将 <code>/etc/shadow</code> 产生的 <code>shadow</code> 密码解码，然后回写到 <code>/etc/passwd</code> 中，并将<code>/etc/shadow</code>的<code>shadow</code>密码栏删掉。这是为了方便下一步的密码转换工作，即先取消 <code>shadow password</code> 功能。</p><p>执行<code>/usr/sbin/pwunconv</code>命令:</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># pwunconv</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p><strong>编辑每个用户的密码对照文件</strong></p><p>格式为：</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">用户名:密码</span></span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>实例文件 <code>passwd.txt</code> 内容如下：</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">user001</span>:<span class="number">123456</span></span><br><span class="line"><span class="attribute">user002</span>:<span class="number">123456</span></span><br><span class="line"><span class="attribute">user003</span>:<span class="number">123456</span></span><br><span class="line"><span class="attribute">user004</span>:<span class="number">123456</span></span><br><span class="line"><span class="attribute">user005</span>:<span class="number">123456</span></span><br><span class="line"><span class="attribute">user006</span>:<span class="number">123456</span></span><br><span class="line"><span class="attribute">123456</span></span><br></pre></td></tr></table></figure><p><strong>执行 <code>/usr/sbin/chpasswd</code>命令</strong></p><p>需要root权限：</p><p>创建用户密码，<code>chpasswd</code> 会将经过 <code>/usr/bin/passwd</code> 命令编码过的密码写入 <code>/etc/passwd</code> 的密码栏。</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># chpasswd &lt; passwd.txt</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p><strong>将密码编码为 <code>shadow password</code></strong></p><p>执行命令 <code>/usr/sbin/pwconv</code> 将密码编码为 <code>shadow password</code>，并将结果写入 <code>/etc/shadow</code>。</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># pwconv</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>这样就完成了大量用户的创建了，之后您可以到/home下检查这些用户宿主目录的权限设置是否都正确，并登录验证用户密码是否正确。</p><p><strong>完整步骤</strong></p><p>先准备好用户文件user和密码文件passwd</p><p>然后运行：</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">newusers &lt; <span class="keyword">user</span></span><br><span class="line">pwunconv</span><br><span class="line">chpasswd &lt; passwd</span><br><span class="line">pwconv</span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure><h3 id="crontab的使用">crontab的使用</h3><p>crontab命令是cron table的简写，它是cron的配置文件，也可以叫它作业列表。</p><p>相关配置文件如下：</p><ul class="lvl-0"><li class="lvl-2"><p>/var/spool/cron/ 目录下存放的是每个用户包括root的crontab任务，每个任务以创建者的名字命名</p></li><li class="lvl-2"><p>/etc/crontab 这个文件负责调度各种管理和维护任务。</p></li><li class="lvl-2"><p>/etc/cron.d/ 这个目录用来存放任何要执行的crontab文件或脚本。</p></li><li class="lvl-2"><p>还可以把脚本放在/etc/cron.hourly、/etc/cron.daily、/etc/cron.weekly、/etc/cron.monthly目录中，让它每小时/天/星期、月执行一次。</p></li></ul><p>命令格式：</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">crontab [ -u <span class="keyword">user</span> <span class="title">] &#123; -l</span> | -r | -e &#125;</span><br><span class="line">//省略用户表表示操作当前用户的crontab</span><br><span class="line">    -e      (编辑工作表)</span><br><span class="line">    -l      (列出工作表里的命令)</span><br><span class="line">    -r      (删除工作表)</span><br><span class="line"><span class="number">12345</span></span><br></pre></td></tr></table></figure><p><strong>crontab -e</strong>进入当前用户的工作表编辑，是常见的vim界面。每行是一条命令。</p><p>crontab的命令构成为 时间+动作，其时间有<strong>分、时、日、月、周</strong>五种，操作符有</p><ul class="lvl-0"><li class="lvl-2"><p>***** 取值范围内的所有数字</p></li><li class="lvl-2"><p><strong>/</strong> 每过多少个数字</p></li><li class="lvl-2"><p><strong>-</strong> 从X到Z</p></li><li class="lvl-2"><p>**，**散列数字</p></li></ul><p>基本格式 :</p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">f1</span>	<span class="built_in">f2</span>	<span class="built_in">f3</span>	<span class="built_in">f4</span>	<span class="built_in">f5</span>	command</span><br><span class="line">分	时	日	月	周	命令 </span><br><span class="line">第<span class="number">1</span>列表示分钟<span class="number">0</span>～<span class="number">59</span> 每分钟用*或者 */<span class="number">1</span>表示 </span><br><span class="line">第<span class="number">2</span>列表示小时<span class="number">0</span>～<span class="number">23</span>（<span class="number">0</span>表示<span class="number">0</span>点） </span><br><span class="line">第<span class="number">3</span>列表示日期<span class="number">1</span>～<span class="number">31</span> </span><br><span class="line">第<span class="number">4</span>列表示月份<span class="number">1</span>～<span class="number">12</span> </span><br><span class="line">第<span class="number">5</span>列标识号星期<span class="number">0</span>～<span class="number">6</span>（<span class="number">0</span>表示星期天） </span><br><span class="line">第<span class="number">6</span>列要运行的命令</span><br><span class="line"><span class="number">12345678</span></span><br></pre></td></tr></table></figure><p><img src="/images/loading.jpeg" data-original="/posts/2c8b313c//99fb8a619138438d007b738d8630fbdc.jpeg" alt="img"></p><ul class="lvl-0"><li class="lvl-2"><p>其中 f1 是表示分钟，f2 表示小时，f3 表示一个月份中的第几日，f4 表示月份，f5 表示一个星期中的第几天。command表示要执行的命令。</p></li><li class="lvl-2"><p>当 f1 为 * 时表示每分钟都要执行 program，f2 为 * 时表示每小时都要执行程序，以此类推</p></li><li class="lvl-2"><p>当 f1 为 a-b 时表示从第 a 分钟到第 b 分钟这段时间内要执行，f2 为 a-b 时表示从第 a 到第 b 小时都要执行，以此类推</p></li><li class="lvl-2"><p>当 f1 为 */n 时表示每 n 分钟个时间间隔执行一次，f2 为 */n 表示每 n 小时个时间间隔执行一次，以此类推</p></li><li class="lvl-2"><p>当 f1 为 a, b, c,… 时表示第 a, b, c,… 分钟要执行，f2 为 a, b, c,… 时表示第 a, b, c…个小时要执行，以此类推</p></li></ul><p>在 12 月内, 每天的早上 6 点到 12 点，每隔 3 个小时 0 分钟执行一次 /usr/bin/backup</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">0 </span><span class="number">6</span>-<span class="number">12</span>/<span class="number">3</span> * <span class="number">12</span> * /<span class="keyword">usr</span>/bin/backup</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>周一到周五每天下午 5:00 寄一封信给 <a href="mailto:alex@domain.name">alex@domain.name</a></p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">0 </span><span class="number">17</span> * * <span class="number">1</span>-<span class="number">5</span> mail -s <span class="string">&quot;hi&quot;</span> alex@domain.<span class="keyword">name</span> &lt; /tmp/maildata</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>每月每天的午夜 0 点 20 分, 2 点 20 分, 4 点 20 分…执行 echo “haha”</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">20 </span><span class="number">0</span>-<span class="number">23</span>/<span class="number">2</span> * * * echo <span class="string">&quot;haha&quot;</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>示例1：</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">45</span> <span class="number">4</span> <span class="number">1</span>,<span class="number">10</span>,<span class="number">22</span> <span class="operator">*</span> <span class="operator">*</span> <span class="regexp">/etc/</span><span class="keyword">init</span>.d<span class="operator">/</span>smb restart 每月<span class="number">1</span><span class="operator">、</span><span class="number">10</span><span class="operator">、</span><span class="number">22</span>日的<span class="number">4</span> : <span class="number">45</span>重启smb</span><br><span class="line"></span><br><span class="line"><span class="number">10</span> <span class="number">1</span> <span class="operator">*</span> <span class="operator">*</span> <span class="number">6</span>,<span class="number">0</span> <span class="regexp">/etc/</span><span class="keyword">init</span>.d<span class="operator">/</span>smb restart  每周六<span class="operator">、</span>周日的<span class="number">1</span> : <span class="number">10</span>重启smb</span><br><span class="line"></span><br><span class="line"><span class="number">0</span>,<span class="number">30</span> <span class="number">18</span><span class="operator">-</span><span class="number">23</span> <span class="operator">*</span> <span class="operator">*</span> <span class="operator">*</span> <span class="regexp">/etc/</span><span class="keyword">init</span>.d<span class="operator">/</span>smb restart  每天<span class="number">18</span> : <span class="number">00</span>至<span class="number">23</span> : <span class="number">00</span>之间每隔<span class="number">30</span>分钟重启smb</span><br><span class="line"></span><br><span class="line"><span class="number">0</span> <span class="number">23</span> <span class="operator">*</span> <span class="operator">*</span> <span class="number">6</span> <span class="regexp">/etc/</span><span class="keyword">init</span>.d<span class="operator">/</span>smb restart  每星期六的晚上<span class="number">11</span> : <span class="number">00</span> pm重启smb</span><br><span class="line"></span><br><span class="line"><span class="operator">*</span> <span class="operator">*/</span><span class="number">1</span> <span class="operator">*</span> <span class="operator">*</span> <span class="operator">*</span> <span class="regexp">/etc/</span><span class="keyword">init</span>.d<span class="operator">/</span>smb restart  每一小时重启smb</span><br><span class="line"></span><br><span class="line"><span class="operator">*</span> <span class="number">23</span><span class="operator">-</span><span class="number">7</span><span class="regexp">/1 * * * /</span>etc<span class="regexp">/init.d/</span>smb restart  晚上<span class="number">11</span>点到早上<span class="number">7</span>点之间，每隔一小时重启smb</span><br><span class="line"><span class="number">1234567891011</span></span><br></pre></td></tr></table></figure><p>示例2：</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">0 </span>*/<span class="number">2</span> * * * /sbin/service httpd restart  每两个小时重启一次apache </span><br><span class="line"></span><br><span class="line"><span class="symbol">50 </span><span class="number">7</span> * * * /sbin/service sshd start  每天<span class="number">7</span>：<span class="number">50</span>开启ssh服务 </span><br><span class="line"></span><br><span class="line"><span class="symbol">50 </span><span class="number">22</span> * * * /sbin/service sshd <span class="keyword">stop</span>  每天<span class="number">22</span>：<span class="number">50</span>关闭ssh服务 </span><br><span class="line"></span><br><span class="line"><span class="symbol">0 </span><span class="number">0</span> <span class="number">1</span>,<span class="number">15</span> * * fsck /home  每月<span class="number">1</span>号和<span class="number">15</span>号检查/home 磁盘 </span><br><span class="line"></span><br><span class="line"><span class="symbol">1 </span>* * * * /home/bruce/backup  每小时的第一分执行 /home/bruce/backup这个文件 </span><br><span class="line"></span><br><span class="line"><span class="symbol">00 </span><span class="number">03</span> * * <span class="number">1</span>-<span class="number">5</span> find /home <span class="string">&quot;*.xxx&quot;</span> -mtime +<span class="number">4</span> -exec rm &#123;&#125; \;  每周一至周五<span class="number">3</span>点钟，在目录/home中，查找文件名为*.xxx的文件，并删除<span class="number">4</span>天前的文件。</span><br><span class="line"></span><br><span class="line"><span class="symbol">30 </span><span class="number">6</span> */<span class="number">10</span> * * ls  每月的<span class="number">1</span>、<span class="number">11</span>、<span class="number">21</span>、<span class="number">31</span>日是的<span class="number">6</span>：<span class="number">30</span>执行一次ls命令</span><br><span class="line"><span class="number">12345678910111213</span></span><br></pre></td></tr></table></figure><p><strong>环境变量问题：</strong></p><p>有时创建了一个crontab，但是这个任务却无法自动执行，而手动执行这个任务却没有问题，这种情况一般是由于在crontab文件中没有配置环境变量引起的。</p><p>所以注意如下3点：</p><p>1）脚本中涉及文件路径时写全局路径；</p><p>2）脚本执行要用到java或其他环境变量时，通过source命令引入环境变量，如：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> start_cbp.sh</span><br><span class="line"><span class="comment">#!/bin/sh</span></span><br><span class="line"><span class="built_in">source</span> /etc/profile</span><br><span class="line"><span class="built_in">export</span> RUN_CONF=/home/d139/conf/platform/cbp/cbp_jboss.conf</span><br><span class="line">/usr/local/jboss-4.0.5/bin/run.sh -c mev &amp;</span><br><span class="line">12345</span><br></pre></td></tr></table></figure><p>3）当手动执行脚本OK，但是crontab死活不执行时，可以尝试在crontab中直接引入环境变量解决问题。如：</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">0 </span>* * * * . /etc/profile;/bin/sh /var/www/java/audit_no_count/bin/restart_audit.sh</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><h2 id="特殊权限">特殊权限</h2><p>linux共12位权限，除了9位基础权限还有3个特殊权限。</p><h3 id="三种特殊的权限">三种特殊的权限</h3><h4 id="SetUID-suid">SetUID(suid)</h4><p><strong>命令功能：</strong> **临时使用命令的属主权限执行该命令。**即如果文件有suid权限时，那么普通用户去执行该文件时，会以该文件的所属用户的身份去执行。</p><p>SetUID（简写suid）：会在属主权限位的执行权限上写个s。 如果该属主权限位上有执行权限，则会在属主权限位的执行权限上写个s（小写）； 如果该属主权限位上没有执行权限，则会在属主权限位的执行权限上写个S（大写）。</p><p>suid数字权限是4000,设置方法：</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">方式<span class="number">1</span>：</span><br><span class="line">[root<span class="symbol">@centos7</span> ~]<span class="meta"># chmod u+s filename</span></span><br><span class="line">方式<span class="number">2</span>：</span><br><span class="line">[root<span class="symbol">@centos7</span> ~]<span class="meta"># chmod 4755 filename</span></span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure><p>查看passwd命令的权限</p><figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">`[root@localhost ftl]``# ll /usr/bin/passwd ` `问题： ``passwd``文件的属组是root,表示只有root用户可以访问的文件，为什么普通用户依然可以使用该命令更改自己的密码？``答案：当普通用户[omd]使用``passwd``命令的时候，系统看到``passwd``命令文件的属性有大写s后，表示这个命令的属主权限被omd用户获得,也就是omd用户获得文件``/etc/shadow``的root的rwx权限`</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>由于<code>passwd</code>具有s权限，普通用户使用该命令的时候，就会以该命令的属主身份root执行该命令，于是能够顺利修改普通用户不具备修改权限的<code>/etc/shadow</code>文件。</p><p>希望普通用户user1可以删除某个自己没有权限删除的文件的操作方法：</p><ul class="lvl-0"><li class="lvl-2"><p>sudo给user1授权rm权限</p></li><li class="lvl-2"><p>rm设置suid</p></li><li class="lvl-2"><p>修改被删除文件上级目录的权限</p></li></ul><p><strong>SetUID（简称suid）总结：</strong></p><ol><li class="lvl-3"><p>让普通用户对可执行的二进制文件，临时拥有二进制文件的属主权限；</p></li><li class="lvl-3"><p>如果设置的二进制文件没有执行权限，那么suid的权限显示就是S（大写字母S）；</p></li><li class="lvl-3"><p>特殊权限suid仅对二进制可执行程序有效，其他文件或目录则无效。</p></li><li class="lvl-3"><p>suid极其危险，如果给vim或者rm命令设置了setUID，那么任何文件都能编辑或者删除了，相当于有root权限了。</p></li></ol><h4 id="setGID（sgid）">setGID（sgid）</h4><p>**命令功能：**使用sgid可以使得多个用户之间共享一个目录的所有文件变得简单。当某个目录设置了sgid后，在该目录中新建的文件不在是创建该文件的默认所属组。</p><p>如果该属组权限位上有执行权限，则会在属组主权限位的执行权限上写个s（小写字母）； 如果该属组权限位上没有执行权限，则会在属组主权限位的执行权限上写个S（大写字母S）。</p><p>write命令的权限：</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@VM_0_9_centos ~]# ll <span class="regexp">/bin/</span><span class="keyword">write</span> </span><br><span class="line">-rwxr-sr-x <span class="number">1</span> root tty <span class="number">19544</span> Aug  <span class="number">9</span> <span class="number">11</span>:<span class="number">10</span> <span class="regexp">/bin/</span><span class="keyword">write</span></span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure><p>sgid数字权限是2000，设置方法：</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">方式<span class="number">1</span>：</span><br><span class="line">[root<span class="symbol">@VM_0_9_centos</span> ~]<span class="meta"># chmod 2755 test/</span></span><br><span class="line">方式<span class="number">2</span>：</span><br><span class="line">[root<span class="symbol">@VM_0_9_centos</span> ~]<span class="meta"># chmod g+s test/</span></span><br><span class="line"></span><br><span class="line">[root<span class="symbol">@VM_0_9_centos</span> ~]<span class="meta"># ll -d test/</span></span><br><span class="line">drwxr-sr-x <span class="number">2</span> root root <span class="number">4096</span> Nov <span class="number">22</span> <span class="number">21</span>:<span class="number">02</span> test/</span><br><span class="line"><span class="number">1234567</span></span><br></pre></td></tr></table></figure><p>在设置SetGID的文件夹创建文件的属组是父目录的属组：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@VM_0_9_centos ~]# <span class="built_in">cd</span> <span class="built_in">test</span>/</span><br><span class="line">[root@VM_0_9_centos <span class="built_in">test</span>]# su aaa</span><br><span class="line">[aaa@VM_0_9_centos <span class="built_in">test</span>]$ <span class="built_in">touch</span> bbb</span><br><span class="line">[aaa@VM_0_9_centos <span class="built_in">test</span>]$ ll</span><br><span class="line">-rw-rw-r-- 1 aaa  root 0 Nov 22 21:14 bbb</span><br><span class="line">12345</span><br></pre></td></tr></table></figure><h4 id="sticky-sbit-粘滞位">sticky(sbit)粘滞位</h4><p>**命令功能：**粘滞位，只对目录有效，对某目录设置粘滞位后，普通用户就算有w权限也只能删除该目录下自己建立的文件，而不能删除其他用户建立的文件。</p><p>如果该其他用户权限位上有执行权限，则会在其他用户权限位的执行权限上写个t（小写）； 如果该其它用户权限位上没有执行权限，则会在其他用户权限位的执行权限上写个T（大写）。</p><p>系统中存在的/tmp目录是经典的粘滞位目录，谁都有写权限，因此安全成问题，常常是木马第一手跳板。</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[aaa<span class="meta">@VM_0_9_centos</span> <span class="operator">~</span>]$ ll <span class="operator">-</span>d <span class="regexp">/tmp/</span> </span><br><span class="line">drwxrwxrwt. <span class="number">9</span> root root <span class="number">4096</span> <span class="type">Nov</span> <span class="number">22</span> <span class="number">21</span>:<span class="number">15</span> <span class="regexp">/tmp/</span></span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure><p>sbit数字权限是1000，设置方法：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">方法1：</span><br><span class="line">[root@VM_0_9_centos ~]# <span class="built_in">chmod</span> 1755 <span class="built_in">test</span>/</span><br><span class="line">方法2：</span><br><span class="line">[root@VM_0_9_centos ~]# <span class="built_in">chmod</span> o+t <span class="built_in">test</span>/ </span><br><span class="line">查看权限：</span><br><span class="line">[root@VM_0_9_centos ~]# ll -d <span class="built_in">test</span>/    </span><br><span class="line">drwxr-xr-t 2 root root 4096 Nov 22 21:15 <span class="built_in">test</span>/</span><br><span class="line">1234567</span><br></pre></td></tr></table></figure><h3 id="chattr权限">chattr权限</h3><p>chattr概述：凌驾于r、w、x、suid、sgid之上的权限。</p><h4 id="lsattr：查看特殊权限">lsattr：查看特殊权限</h4><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="variable">@VM_0_9_centos</span> ~]<span class="comment"># lsattr /etc/passwd</span></span><br><span class="line">-------------e-- <span class="regexp">/etc/passwd</span></span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure><h4 id="chattr：设置特殊权限">chattr：设置特殊权限</h4><table><thead><tr><th>权限说明</th><th></th></tr></thead><tbody><tr><td>-i</td><td>锁定文件，不能编辑，不能修改，不能删除，不能移动，可以执行</td></tr><tr><td>-a</td><td>仅可以追加文件，不能编辑，不能删除，不能移动，可以执行</td></tr></tbody></table><p>防止系统中某个关键文件被修改：</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="variable">@VM_0_9_centos</span> ~]<span class="comment"># chattr +i /etc/fstab</span></span><br><span class="line">[root<span class="variable">@VM_0_9_centos</span> ~]<span class="comment"># lsattr /etc/fstab   </span></span><br><span class="line">----i--------e-- <span class="regexp">/etc/fstab</span></span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure><p>让某个文件只能往里面追加内容，不能删除，一些日志文件适用于这种操作：</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="symbol">@VM_0_9_centos</span> ~]<span class="meta"># chattr +a user_act.log</span></span><br><span class="line">[root<span class="symbol">@VM_0_9_centos</span> ~]<span class="meta"># lsattr user_act.log </span></span><br><span class="line">-----a-------e-- user_act.<span class="built_in">log</span></span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure><h3 id="掩码umask">掩码umask</h3><h4 id="umask的作用">umask的作用</h4><p>umask值用于设置用户在创建文件时的默认权限，当我们在系统中创建目录或文件时，目录或文件所具有的默认权限就是由umask值决定的。</p><p>对于root用户，系统默认的umask值是0022；对于普通用户，系统默认的umask值是0002。执行umask命令可以查看当前用户的umask值。</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="symbol">@VM_0_9_centos</span> ~]<span class="meta"># umask</span></span><br><span class="line"><span class="number">0022</span></span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure><h4 id="umask是如何改变新文件的权限">umask是如何改变新文件的权限</h4><p>umask值一共有4组数字，其中第1组数字用于定义特殊权限，一般不予考虑，与一般权限有关的是后3组数字。</p><p>默认情况下，对于目录，用户所能拥有的最大权限是777；对于文件，用户所能拥有的最大权限是目录的最大权限去掉执行权限，即666。因为x执行权限对于目录是必须的，没有执行权限就无法进入目录，而对于文件则不必默认赋予x执行权限。</p><p>对于root用户，他的umask值是022。当root用户创建目录时，默认的权限就是用最大权限777去掉相应位置的umask值权限，即对于所有者不必去掉任何权限，对于所属组要去掉w权限，对于其他用户也要去掉w权限，所以目录的默认权限就是755；当root用户创建文件时，默认的权限则是用最大权限666去掉相应位置的umask值，即文件的默认权限是644。</p><p>通过umask命令可以修改umask值，比如将umask值设为0077。</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="symbol">@VM_0_9_centos</span> ~]<span class="meta"># umask 0077</span></span><br><span class="line">[root<span class="symbol">@VM_0_9_centos</span> ~]<span class="meta"># umask</span></span><br><span class="line"><span class="number">0077</span></span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure><h4 id="永久修改umask">永久修改umask</h4><p>umask命令只能临时修改umask值，系统重启之后umask将还原成默认值。如果要永久修改umask值，可修改<code>/etc/bashrc</code>或<code>/etc/profile</code>文件。</p><p>例如要将默认umask值设置为027，那么可以在文件中增加一行<code>umask 027</code>。</p><h2 id="linux软件安装">linux软件安装</h2><h3 id="Ubuntu软件安装与卸载">Ubuntu软件安装与卸载</h3><h4 id="更新Ubuntu软件下载地址">更新Ubuntu软件下载地址</h4><p>开源软件镜像站 ：<a target="_blank" rel="noopener" href="https://mirrors.tuna.tsinghua.edu.cn/help/ubuntu/">https://mirrors.tuna.tsinghua.edu.cn/help/ubuntu/</a></p><p>Ubuntu 的软件源配置文件是 <code>/etc/apt/sources.list</code>。将系统自带的该文件做个备份，将该文件替换为下面内容，即可使用 TUNA 的软件源镜像。</p><p>ubuntu版本: 16.04 LTS</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># 默认注释了源码镜像以提高 apt update 速度，如有需要可自行取消注释</span></span><br><span class="line">deb https<span class="punctuation">:</span><span class="comment">//mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial main restricted universe multiverse</span></span><br><span class="line"><span class="meta"># deb-src https:<span class="comment">//mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial main restricted universe multiverse</span></span></span><br><span class="line">deb https<span class="punctuation">:</span><span class="comment">//mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial-updates main restricted universe multiverse</span></span><br><span class="line"><span class="meta"># deb-src https:<span class="comment">//mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial-updates main restricted universe multiverse</span></span></span><br><span class="line">deb https<span class="punctuation">:</span><span class="comment">//mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial-backports main restricted universe multiverse</span></span><br><span class="line"><span class="meta"># deb-src https:<span class="comment">//mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial-backports main restricted universe multiverse</span></span></span><br><span class="line">deb https<span class="punctuation">:</span><span class="comment">//mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial-security main restricted universe multiverse</span></span><br><span class="line"><span class="meta"># deb-src https:<span class="comment">//mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial-security main restricted universe multiverse</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta"># 预发布软件源，不建议启用</span></span><br><span class="line"><span class="meta"># deb https:<span class="comment">//mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial-proposed main restricted universe multiverse</span></span></span><br><span class="line"><span class="meta"># deb-src https:<span class="comment">//mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial-proposed main restricted universe multiverse</span></span></span><br><span class="line"><span class="number">12345678910111213</span></span><br></pre></td></tr></table></figure><p>然后</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> <span class="built_in">cp</span> /etc/apt/sources.list /etc/apt/sources.list.backup</span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>再sudo vim /etc/apt/sources.list修改为以上内容</p><h4 id="Ubuntu软件操作的相关命令">Ubuntu软件操作的相关命令</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-<span class="built_in">get</span> update  更新源</span><br><span class="line">sudo apt-<span class="built_in">get</span> install package 安装包</span><br><span class="line">sudo apt-<span class="built_in">get</span> <span class="built_in">remove</span> package 删除包</span><br><span class="line">sudo apt-cache search package 搜索软件包</span><br><span class="line">sudo apt-cache show package  获取包的相关信息，如说明、大小、版本等</span><br><span class="line">sudo apt-<span class="built_in">get</span> install package --reinstall   重新安装包</span><br><span class="line">sudo apt-<span class="built_in">get</span> -f install   修复安装</span><br><span class="line">sudo apt-<span class="built_in">get</span> <span class="built_in">remove</span> package --purge 删除包，包括配置文件等</span><br><span class="line">sudo apt-<span class="built_in">get</span> build-dep package 安装相关的编译环境</span><br><span class="line">sudo apt-<span class="built_in">get</span><span class="built_in"> upgrade </span>更新已安装的包</span><br><span class="line">sudo apt-<span class="built_in">get</span> dist-upgrade 升级系统</span><br><span class="line">sudo apt-cache depends package 了解使用该包依赖那些包</span><br><span class="line">sudo apt-cache rdepends package 查看该包被哪些包依赖</span><br><span class="line">sudo apt-<span class="built_in">get</span> source package  下载该包的源代码</span><br><span class="line">sudo apt-<span class="built_in">get</span> clean &amp;&amp; sudo apt-<span class="built_in">get</span> autoclean 清理无用的包</span><br><span class="line">sudo apt-<span class="built_in">get</span> check 检查是否有损坏的依赖</span><br><span class="line">12345678910111213141516</span><br></pre></td></tr></table></figure><h3 id="yum安装命令">yum安装命令</h3><p>yum（ Yellow dog Updater, Modified）是一个在Fedora和RedHat以及SUSE中的Shell前端软件包管理器。</p><p>基於RPM包管理，能够从指定的服务器自动下载RPM包并且安装，可以自动处理依赖性关系，并且一次安装所有依赖的软体包，无须繁琐地一次次下载、安装。</p><p>yum提供了查找、安装、删除某一个、一组甚至全部软件包的命令，而且命令简洁而又好记。</p><h4 id="更新国内yum源">更新国内yum源</h4><p>网易（163）yum源是国内最好的yum源之一 ，无论是速度还是软件版本，都非常的不错。</p><p>将yum源设置为163 yum，可以提升软件包安装和更新的速度，同时避免一些常见软件版本无法找到。</p><p>首先备份/etc/yum.repos.d/CentOS-Base.repo</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mv /etc/yum<span class="selector-class">.repos</span>.d/CentOS-Base<span class="selector-class">.repo</span> /etc/yum<span class="selector-class">.repos</span>.d/CentOS-Base<span class="selector-class">.repo</span><span class="selector-class">.backup</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>下载对应版本 repo 文件, 放入 /etc/yum.repos.d/</p><ul class="lvl-0"><li class="lvl-2"><p><a target="_blank" rel="noopener" href="http://mirrors.163.com/.help/CentOS5-Base-163.repo">CentOS5</a> ：<a target="_blank" rel="noopener" href="http://mirrors.163.com/.help/CentOS5-Base-163.repo">http://mirrors.163.com/.help/CentOS5-Base-163.repo</a></p></li><li class="lvl-2"><p><a target="_blank" rel="noopener" href="http://mirrors.163.com/.help/CentOS6-Base-163.repo">CentOS6</a> ：<a target="_blank" rel="noopener" href="http://mirrors.163.com/.help/CentOS6-Base-163.repo">http://mirrors.163.com/.help/CentOS6-Base-163.repo</a></p></li><li class="lvl-2"><p><a target="_blank" rel="noopener" href="http://mirrors.163.com/.help/CentOS7-Base-163.repo">CentOS7</a> ：<a target="_blank" rel="noopener" href="http://mirrors.163.com/.help/CentOS7-Base-163.repo">http://mirrors.163.com/.help/CentOS7-Base-163.repo</a></p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget http://mirrors.163.com/.help/CentOS7-Base-163.repo</span><br><span class="line"><span class="built_in">mv</span> CentOS7-Base-163.repo /etc/yum.repos.d/CentOS-Base.repo</span><br><span class="line">12</span><br></pre></td></tr></table></figure><p>运行以下命令生成缓存</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum clean <span class="keyword">all</span></span><br><span class="line">yum makecache</span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure><p>除了网易之外，国内还有其他不错的 yum 源，比如中科大和搜狐。</p><p>中科大的 yum 源，安装方法查看：<a target="_blank" rel="noopener" href="https://lug.ustc.edu.cn/wiki/mirrors/help/centos">https://lug.ustc.edu.cn/wiki/mirrors/help/centos</a></p><p>sohu 的 yum 源安装方法查看: <a target="_blank" rel="noopener" href="http://mirrors.sohu.com/help/centos.html">http://mirrors.sohu.com/help/centos.html</a></p><h4 id="yum常用命令">yum常用命令</h4><p>yum 语法：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum <span class="selector-attr">[options]</span> <span class="selector-attr">[command]</span> <span class="selector-attr">[package ...]</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>选项：</p><ul class="lvl-0"><li class="lvl-2"><p>**options：**可选，选项包括-h（帮助），-y（当安装过程提示选择全部为&quot;yes&quot;），-q（不显示安装的过程）等等。</p></li><li class="lvl-2"><p>**command：**要进行的操作。</p></li><li class="lvl-2"><p>**package：**操作的对象。</p></li></ul><p>实例：</p><ul class="lvl-0"><li class="lvl-2"><p>列出所有可更新的软件清单命令：<code>yum check-update</code></p></li><li class="lvl-2"><p>更新所有软件命令：<code>yum update</code></p></li><li class="lvl-2"><p>仅安装指定的软件命令：<code>yum install &lt;package_name&gt;</code></p></li><li class="lvl-2"><p>仅更新指定的软件命令：<code>yum update &lt;package_name&gt;</code></p></li><li class="lvl-2"><p>显示包信息：<code>yum info &lt;package_name&gt;</code></p></li><li class="lvl-2"><p>列出所有可安裝的软件清单命令：<code>yum list</code></p></li><li class="lvl-2"><p>删除软件包命令：<code>yum remove &lt;package_name&gt;</code></p></li><li class="lvl-2"><p>查找软件包 命令：<code>yum search &lt;keyword&gt;</code></p></li><li class="lvl-2"><p>清除缓存命令:</p><ul class="lvl-2"><li class="lvl-4">yum clean packages: 清除缓存目录下的软件包</li><li class="lvl-4">yum clean headers: 清除缓存目录下的 headers</li><li class="lvl-4">yum clean oldheaders: 清除缓存目录下旧的 headers</li><li class="lvl-4">yum clean, yum clean all (= yum clean packages; yum clean oldheaders) :清除缓存目录下的软件包及旧的headers</li></ul></li></ul><h4 id="yum在线安装MySQL5-7">yum在线安装MySQL5.7</h4><p>Step1: 检测系统是否自带安装mysql</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum list installed <span class="string">| grep mysql</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>Step2: 删除系统自带的mysql及其依赖</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum -y <span class="built_in">remove</span> mysql-libs.x86_64</span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>Step3: 给CentOS添加rpm源，并且选择较新的源</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">wget dev.mysql.com<span class="operator">/</span><span class="keyword">get</span><span class="operator">/</span>mysql<span class="operator">-</span>community<span class="operator">-</span><span class="keyword">release</span><span class="operator">-</span>el7<span class="number">-5.</span>noarch.rpm</span><br><span class="line">yum localinstall mysql<span class="operator">-</span>community<span class="operator">-</span><span class="keyword">release</span><span class="operator">-</span>el7<span class="number">-5.</span>noarch.rpm</span><br><span class="line">yum repolist <span class="keyword">all</span> <span class="operator">|</span> grep mysql</span><br><span class="line">yum<span class="operator">-</span>config<span class="operator">-</span>manager <span class="comment">--disable mysql55-community</span></span><br><span class="line">yum<span class="operator">-</span>config<span class="operator">-</span>manager <span class="comment">--disable mysql56-community</span></span><br><span class="line">yum<span class="operator">-</span>config<span class="operator">-</span>manager <span class="comment">--enable mysql57-community-dmr</span></span><br><span class="line">yum repolist enabled <span class="operator">|</span> grep mysql</span><br><span class="line"><span class="number">1234567</span></span><br></pre></td></tr></table></figure><p>Step4:安装mysql 服务器</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum install mysql-community-<span class="keyword">server</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>Step5: 启动mysql</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">service mysqld <span class="literal">start</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>grep “password” /var/log/mysqld.log(查看临时密码)</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> <span class="keyword">PASSWORD</span> = <span class="keyword">PASSWORD</span>(<span class="string">&#x27;your new password&#x27;</span>);</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span> <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> <span class="keyword">PASSWORD</span> EXPIRE NEVER;</span><br><span class="line">flush <span class="keyword">privileges</span>;</span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure><p>默认的要求必须的设置格式：<br><strong>包含数字、小写或大写字母以及特殊字符</strong></p><p>默认的要求必须的设置格式：<br><strong>包含数字、小写或大写字母以及特殊字符</strong></p><p>如果不想复杂，可以使用以下方式</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> global <span class="attribute">validate_password_policy</span>=0;</span><br><span class="line"><span class="built_in">set</span> global <span class="attribute">validate_password_length</span>=1;</span><br><span class="line">12</span><br></pre></td></tr></table></figure><p>Step6: 查看mysql是否自启动,并且设置开启自启动</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># chkconfig --list | grep mysqld</span></span><br><span class="line"><span class="meta"># chkconfig mysqld on</span></span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure><p>Step7: mysql安全设置</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">mysql_secure_installation</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><h4 id="rpm">rpm</h4><p>RPM是Red Hat公司随Redhat Linux推出了一个软件包管理器，通过它能够更加轻松容易地实现软件的安装。</p><p>常见用法：</p><ul class="lvl-0"><li class="lvl-2"><p>rpm -ivh &lt;rpm包名&gt; 安装软件</p></li><li class="lvl-2"><p>rpm -e &lt;rpm包名&gt; 卸载安装</p></li><li class="lvl-2"><p>rpm -qi &lt;rpm包名&gt; 显示软件安装信息</p></li><li class="lvl-2"><p>rpm -qa | grep xxx 查询软件是否安装（包括相关依赖）</p></li><li class="lvl-2"><p>rpm -Uvh &lt;rpm包名&gt; 升级一个rpm</p></li></ul><p>具体参数详解：<br>-i, --install 安装包<br>-v, --verbose 列出更多详细信息，安装进度<br>-h, --hash 安装时列出hash标记 (与 -v连用)<br>-e, --erase 卸载安装包<br>-U, --upgrade=+ 升级包<br>–replacepkge 无论软件包是否已被安装，都强行安装软件包<br>–test 安装测试，并不实际安装<br>–nodeps 忽略软件包的依赖关系强行安装<br>–force 忽略软件包及文件的冲突<br>-q,–query:<br>-a, --all 查询/校验所有的安装包<br>-p, --package 查询/校验一个安装文件<br>-l, --list 列出安装文件<br>-d, --docfiles 列出所有文档文件<br>-f, --file 查询/校验安装包中所包含的文件</p><p>安装软件：</p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># rpm -hvi dejagnu<span class="number">-1.4</span><span class="number">.2</span><span class="number">-10.</span>noarch.rpm </span><br><span class="line">警告：dejagnu<span class="number">-1.4</span><span class="number">.2</span><span class="number">-10.</span>noarch.rpm: V3 DSA 签名：NOKEY, key ID db42a60e</span><br><span class="line">准备...           </span><br><span class="line">########################################### [<span class="number">100</span>%]</span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure><p>显示软件安装信息：</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># rpm -qi dejagnu<span class="string">-1</span>.4.2<span class="string">-10</span>.noarch.rpm</span><br><span class="line"></span><br><span class="line">【第1次更新 教程、类似命令关联】</span><br><span class="line">123</span><br></pre></td></tr></table></figure><h3 id="Linux的基本配置">Linux的基本配置</h3><p>1.修改主机名</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/sysconfig<span class="built_in">/network</span></span><br><span class="line"><span class="built_in"></span><span class="attribute">NETWORKING</span>=<span class="literal">yes</span></span><br><span class="line"><span class="attribute">HOSTNAME</span>=hadoop1</span><br><span class="line">123</span><br></pre></td></tr></table></figure><p>2.修改ip地址</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/sysconfig/network-scripts/ifcfg-eth0</span><br><span class="line"><span class="attribute">DEVICE</span>=eth0</span><br><span class="line"><span class="attribute">TYPE</span>=Ethernet</span><br><span class="line"><span class="attribute">ONBOOT</span>=<span class="literal">yes</span></span><br><span class="line"><span class="attribute">BOOTPROTO</span>=static</span><br><span class="line"><span class="attribute">IPADDR</span>=192.168.100.101</span><br><span class="line"><span class="attribute">NETMASK</span>=255.255.255.0</span><br><span class="line"><span class="built_in"></span></span><br><span class="line"><span class="built_in">service network </span>restart</span><br><span class="line">123456789</span><br></pre></td></tr></table></figure><p>3.修改ip地址和主机名的映射关系</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/hosts</span><br><span class="line"><span class="number">127.0.0.1</span>   localhost localhost.localdomain localhost4 localhost4.localdomain4</span><br><span class="line">::<span class="number">1</span>         localhost localhost.localdomain localhost6 localhost6.localdomain6</span><br><span class="line"><span class="number">192.168.100.101</span> hadoop1</span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure><p>4.关闭iptables并设置其开机启动/不启动</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">service</span> iptables stop</span><br><span class="line">chkconfig iptables <span class="literal">on</span></span><br><span class="line">chkconfig iptables <span class="literal">off</span></span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure><h4 id="安装JDK">安装JDK</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">1.上传jdk-7u45-linux-x64.tar.gz到Linux上</span><br><span class="line">2.解压jdk到/usr/local目录</span><br><span class="line">tar -zxvf jdk-7u45-linux-x64.tar.gz -C /usr/local/</span><br><span class="line">3.设置环境变量，在/etc/profile文件最后追加相关内容(技巧r:!<span class="built_in">pwd</span>)</span><br><span class="line">vi /etc/profile</span><br><span class="line"><span class="built_in">export</span> JAVA_HOME=/usr/local/jdk1.7.0_45</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$JAVA_HOME</span>/bin</span><br><span class="line">4.刷新环境变量</span><br><span class="line"><span class="built_in">source</span> /etc/profile</span><br><span class="line">5.测试java命令是否可用</span><br><span class="line">java -version</span><br><span class="line">1234567891011</span><br></pre></td></tr></table></figure><h4 id="制作本地YUM源">制作本地YUM源</h4><p>上传CentOS-6.7-x86_64-bin-DVD1.iso到服务器</p><p>将CentOS-6.7-x86_64-bin-DVD1.iso镜像挂载到某个目录:</p><figure class="highlight pony"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir /<span class="keyword">var</span>/<span class="meta">iso</span></span><br><span class="line">mount -o loop <span class="type">CentOS</span><span class="number">-6.7</span>-x86_64-bin-<span class="type">DVD1</span>.<span class="meta">iso</span> /<span class="keyword">var</span>/<span class="meta">iso</span></span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure><p>安装并启动Apache服务器：</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum <span class="keyword">install</span> -y httpd</span><br><span class="line">service httpd start</span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure><p>使用浏览器访问<a target="_blank" rel="noopener" href="http://192.168.100.101">http://192.168.100.101</a>（如果访问不通，检查防火墙是否开启了80端口或关闭防火墙）</p><p>将YUM源配置到httpd中：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cp -<span class="attribute">r</span> /<span class="selector-tag">var</span>/iso/ /<span class="selector-tag">var</span>/www/<span class="selector-tag">html</span>/CentOS-<span class="number">6.7</span></span><br><span class="line">umount /<span class="selector-tag">var</span>/iso</span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure><p>在浏览器中访问<a target="_blank" rel="noopener" href="http://192.168.100.101/CentOS-6.7/">http://192.168.100.101/CentOS-6.7/</a></p><p><img src="/images/loading.jpeg" data-original="/posts/2c8b313c//5c1df1e303458b97c3fcde9babdec6c8.jpeg" alt="img"></p><p><strong>配置使用YUM源：</strong></p><p>备份原有的YUM源的配置文件</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cd</span> <span class="string">/etc/yum.repos.d/</span></span><br><span class="line">rename <span class="string">.repo</span> <span class="string">.repo.bak</span> *</span><br><span class="line">12</span><br></pre></td></tr></table></figure><p>修改YUM源配置文件</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">vi CentOS-Local.repo</span><br><span class="line">[base]</span><br><span class="line"><span class="attribute">name</span>=CentOS-Local</span><br><span class="line"><span class="attribute">baseurl</span>=http://192.168.100.101/CentOS-6.7</span><br><span class="line"><span class="attribute">gpgcheck</span>=1</span><br><span class="line"><span class="attribute">enabled</span>=1   #很重要，1才启用</span><br><span class="line"><span class="attribute">gpgkey</span>=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-6</span><br><span class="line">1234567</span><br></pre></td></tr></table></figure><p>重建yum缓存</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#清除yum缓存文件，重新新建</span></span><br><span class="line">yum clean all <span class="meta">&amp;&amp; yum makecache</span></span><br><span class="line"><span class="meta">#列出可用的YUM源</span></span><br><span class="line">yum repolist</span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure><p><strong>rpm包生成yum源目录</strong></p><p>如果已经下载好了rpm包，可以自行制作一个yum源（yum仓库）。将下载的rpm包上传到centos服务器上（比如/data/rpm目录下），然后进入存放rpm包的目录，执行以下命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">cd</span> /data/rpm</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">createrepo .</span></span><br><span class="line">12</span><br></pre></td></tr></table></figure><p>这样，rpm包存放的目录就可以作为yum源目录使用。如果提示找不到createrepo命令，可以使用yum install createrepo安装该程序。</p><h2 id="Shell编程">Shell编程</h2><p>这里说的Shell 脚本（shell script），是在Linux 环境下运行的脚本程序</p><p>Shell 编程跟 JavaScript、php 编程一样，只要有一个能编写代码的文本编辑器和一个能解释执行的脚本解释器就可以了。</p><p>Linux 的 Shell 种类众多，常见的有：</p><ul class="lvl-0"><li class="lvl-2"><p>Bourne Shell（/usr/bin/sh或/bin/sh）</p></li><li class="lvl-2"><p>Bourne Again Shell（/bin/bash）</p></li><li class="lvl-2"><p>C Shell（/usr/bin/csh）</p></li><li class="lvl-2"><p>K Shell（/usr/bin/ksh）</p></li><li class="lvl-2"><p>Shell for Root（/sbin/sh）</p></li><li class="lvl-2"><p>……</p></li></ul><p>Bash是大多数Linux 系统默认的 Shell，本文也仅关注Bash Shell。</p><p>在一般情况下，并不区分 Bourne Shell 和 Bourne Again Shell，所以，像 <strong>#!/bin/sh</strong>，它同样也可以改为 <strong>#!/bin/bash</strong>。</p><p><strong>#!</strong> 告诉系统其后路径所指定的程序即是解释此脚本文件的 Shell 程序。</p><h3 id="入门">入门</h3><h4 id="运行Shell脚本">运行Shell脚本</h4><p>编写shell脚本：</p><figure class="highlight d"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vi test.sh</span><br><span class="line"></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">echo <span class="string">&quot;Hello World !&quot;</span></span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure><p><strong>#!</strong> 是一个约定的标记，它告诉系统这个脚本需要什么解释器来执行，即使用哪一种 Shell。</p><p>echo 命令用于向窗口输出文本。</p><p>运行 Shell 脚本有两种方法：</p><p><strong>1、作为可执行程序</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> +x ./test.sh  <span class="comment">#使脚本具有执行权限</span></span><br><span class="line">./test.sh  <span class="comment">#执行脚本</span></span><br><span class="line">12</span><br></pre></td></tr></table></figure><p>默认情况下，一定要写成 <strong>./test.sh</strong>，而不是 <strong><a target="_blank" rel="noopener" href="http://test.sh">test.sh</a></strong>，运行其它二进制的程序也一样。</p><p>除非将当前目录.加入到PATH环境变量中，配置方法：</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /etc<span class="built_in">/profile</span></span><br><span class="line"><span class="built_in"></span>加入一行</span><br><span class="line"><span class="built_in">export</span> <span class="attribute">PATH</span>=<span class="variable">$PATH</span>:.</span><br><span class="line">保存之后，执行</span><br><span class="line">source /etc<span class="built_in">/profile</span></span><br><span class="line"><span class="built_in"></span>12345</span><br></pre></td></tr></table></figure><p><strong>2、作为解释器参数</strong></p><p>直接运行解释器，其参数就是 shell 脚本的文件名：</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/bin/<span class="keyword">sh</span> <span class="keyword">test</span>.<span class="keyword">sh</span></span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>这种方式运行的脚本，不需要在第一行指定解释器信息，写了也没用。</p><h4 id="编写一个快捷创建shell脚本的命令">编写一个快捷创建shell脚本的命令</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">test</span> -z <span class="variable">$1</span>;<span class="keyword">then</span></span><br><span class="line">  newfile=<span class="string">&quot;./script_`date +%m%d_%s`&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  newfile=<span class="variable">$1</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$newfile</span></span><br><span class="line"><span class="keyword">if</span>  ! grep <span class="string">&quot;^#!&quot;</span> <span class="variable">$newfile</span> &amp;&gt;/dev/null; <span class="keyword">then</span></span><br><span class="line"><span class="built_in">cat</span> &gt;&gt; <span class="variable">$newfile</span> &lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string">#!/bin/bash</span></span><br><span class="line"><span class="string"># Author:</span></span><br><span class="line"><span class="string"># Date &amp; Time: `date +&quot;%F %T&quot;`</span></span><br><span class="line"><span class="string">#Description:</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">vim +5 <span class="variable">$newfile</span></span><br><span class="line"><span class="built_in">chmod</span> +x <span class="variable">$newfile</span></span><br><span class="line">1234567891011121314151617</span><br></pre></td></tr></table></figure><p>将以上内容编写好之后保存为shell文件，然后执行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> u+x shell</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">mv</span> shell /usr/bin/</span><br><span class="line">12</span><br></pre></td></tr></table></figure><h4 id="echo命令">echo命令</h4><p>Shell 的 echo 指令与 PHP 的 echo 指令类似，都是用于字符串的输出。命令格式：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> <span class="keyword">string</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>显示普通字符串:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;It is a test&quot;</span></span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>这里的双引号完全可以省略，以下命令与上面实例效果一致：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> It is a <span class="built_in">test</span></span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>显示转义字符:</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo <span class="string">&quot;\&quot;</span>It <span class="keyword">is</span> a test\<span class="string">&quot;&quot;</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>结果将是:</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;It is a test&quot;</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>同样，双引号也可以省略</p><p>read 命令从标准输入中读取一行,并把输入行的每个字段的值指定给 shell 变量</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"><span class="built_in">read</span> name </span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$name</span> It is a test&quot;</span></span><br><span class="line">123</span><br></pre></td></tr></table></figure><p>以上代码保存为 <a target="_blank" rel="noopener" href="http://test.sh">test.sh</a>，name 接收标准输入的变量，结果将是:</p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@www ~]<span class="comment"># sh test.sh</span></span><br><span class="line">OK                     <span class="comment">#标准输入</span></span><br><span class="line">OK It <span class="keyword">is</span> a test        <span class="comment">#输出</span></span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure><h5 id="显示换行">显示换行</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;OK! \n&quot;</span> <span class="comment"># -e 开启转义</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;It is a test&quot;</span></span><br><span class="line">12</span><br></pre></td></tr></table></figure><p>输出结果：</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">OK!</span><br><span class="line"></span><br><span class="line">It <span class="keyword">is</span> a test</span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure><h5 id="显示不换行">显示不换行</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;OK! \c&quot;</span> <span class="comment"># -e 开启转义 \c 不换行</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;It is a test&quot;</span></span><br><span class="line">123</span><br></pre></td></tr></table></figure><p>输出结果：</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">OK! It <span class="keyword">is</span> a test</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><h4 id="printf-命令">printf 命令</h4><p>printf 命令的语法：</p><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">printf  <span class="keyword">format</span>-<span class="keyword">string</span>  [arguments...]</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p><strong>参数说明：</strong></p><ul class="lvl-0"><li class="lvl-2"><p><strong>format-string:</strong> 为格式控制字符串</p></li><li class="lvl-2"><p><strong>arguments:</strong> 为参数列表。</p></li></ul><p>实例如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"> </span><br><span class="line"><span class="built_in">printf</span> <span class="string">&quot;%-10s %-8s %-4s\n&quot;</span> 姓名 性别 体重kg  </span><br><span class="line"><span class="built_in">printf</span> <span class="string">&quot;%-10s %-8s %-4.2f\n&quot;</span> 郭靖 男 66.1234 </span><br><span class="line"><span class="built_in">printf</span> <span class="string">&quot;%-10s %-8s %-4.2f\n&quot;</span> 杨过 男 48.6543 </span><br><span class="line"><span class="built_in">printf</span> <span class="string">&quot;%-10s %-8s %-4.2f\n&quot;</span> 郭芙 女 47.9876 </span><br><span class="line">123456</span><br></pre></td></tr></table></figure><p>执行脚本，输出结果如下所示：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">姓名</span>     <span class="string">性别</span>   <span class="string">体重kg</span></span><br><span class="line"><span class="string">郭靖</span>     <span class="string">男</span>      <span class="number">66.12</span></span><br><span class="line"><span class="string">杨过</span>     <span class="string">男</span>      <span class="number">48.65</span></span><br><span class="line"><span class="string">郭芙</span>     <span class="string">女</span>      <span class="number">47.99</span></span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure><ul class="lvl-0"><li class="lvl-2"><p>%s %c %d %f都是格式替代符</p></li><li class="lvl-2"><p>%-10s 指一个宽度为10个字符（-表示左对齐，没有则表示右对齐），任何字符都会被显示在10个字符宽的字符内，如果不足则自动以空格填充，超过也会将内容全部显示出来。</p></li><li class="lvl-2"><p>%-4.2f 指格式化为小数，其中.2指保留2位小数。</p></li></ul><p>printf的转义序列：</p><table><thead><tr><th>序列</th><th>说明</th></tr></thead><tbody><tr><td>\a</td><td>警告字符，通常为ASCII的BEL字符</td></tr><tr><td>\b</td><td>后退</td></tr><tr><td>\c</td><td>抑制（不显示）输出结果中任何结尾的换行字符（只在%b格式指示符控制下的参数字符串中有效），而且，任何留在参数里的字符、任何接下来的参数以及任何留在格式字符串中的字符，都被忽略</td></tr><tr><td>\f</td><td>换页（formfeed）</td></tr><tr><td>\n</td><td>换行</td></tr><tr><td>\r</td><td>回车（Carriage return）</td></tr><tr><td>\t</td><td>水平制表符</td></tr><tr><td>\v</td><td>垂直制表符</td></tr><tr><td>\</td><td>一个字面上的反斜杠字符</td></tr><tr><td>\ddd</td><td>表示1到3位数八进制值的字符。仅在格式字符串中有效</td></tr><tr><td>\0ddd</td><td>表示1到3位的八进制值字符</td></tr></tbody></table><p>例子：</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">python<span class="variable">@ubuntu</span><span class="symbol">:~/test</span><span class="variable">$ </span>printf <span class="string">&quot;a string, no processing:&lt;%s&gt;\n&quot;</span> <span class="string">&quot;A\nB&quot;</span></span><br><span class="line">a string, no <span class="symbol">processing:</span>&lt;A\nB&gt;</span><br><span class="line">python<span class="variable">@ubuntu</span><span class="symbol">:~/test</span><span class="variable">$ </span>printf <span class="string">&quot;a string, no processing:&lt;%b&gt;\n&quot;</span> <span class="string">&quot;A\nB&quot;</span></span><br><span class="line">a string, no <span class="symbol">processing:</span>&lt;A</span><br><span class="line">B&gt;</span><br><span class="line">python<span class="variable">@ubuntu</span><span class="symbol">:~/test</span><span class="variable">$ </span>printf <span class="string">&quot;www.runoob.com \a&quot;</span></span><br><span class="line">www.runoob.com python<span class="variable">@ubuntu</span><span class="symbol">:~/test</span><span class="variable">$ </span></span><br><span class="line"><span class="number">1234567</span></span><br></pre></td></tr></table></figure><h4 id="Shell-注释">Shell 注释</h4><p>以 <strong>#</strong> 开头的行就是注释，会被解释器忽略：</p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#--------------------------------------------</span><br><span class="line"># 这是一个注释</span><br><span class="line"># author：菜鸟教程</span><br><span class="line"># site：www.taobao.com</span><br><span class="line"># slogan：学的不仅是技术，更是梦想！</span><br><span class="line">#--------------------------------------------</span><br><span class="line">##### 用户配置区 开始 #####</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line"># 这里可以添加脚本描述信息</span><br><span class="line"># </span><br><span class="line">#</span><br><span class="line">##### 用户配置区 结束  #####</span><br><span class="line"><span class="number">12345678910111213</span></span><br></pre></td></tr></table></figure><p>多行注释还可以使用以下格式：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">:&lt;&lt;<span class="string">EOF</span></span><br><span class="line"><span class="string">注释内容...</span></span><br><span class="line"><span class="string">注释内容...</span></span><br><span class="line"><span class="string">注释内容...</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line">12345</span><br></pre></td></tr></table></figure><p>EOF 也可以使用其他符号:</p><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">:&lt;&lt;&#x27;</span><br><span class="line">注释内容...</span><br><span class="line">注释内容...</span><br><span class="line">注释内容...</span><br><span class="line">&#x27;</span><br><span class="line"></span><br><span class="line">:&lt;&lt;!</span><br><span class="line">注释内容...</span><br><span class="line">注释内容...</span><br><span class="line">注释内容...</span><br><span class="line">!</span><br><span class="line"><span class="number">1234567891011</span></span><br></pre></td></tr></table></figure><h3 id="Shell变量">Shell变量</h3><h4 id="定义变量">定义变量</h4><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">your_name<span class="operator">=</span><span class="string">&quot;taobao.com&quot;</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>变量名的命名须遵循如下规则：</p><ul class="lvl-0"><li class="lvl-2"><p>命名只能使用英文字母，数字和下划线，首个字符不能以数字开头。</p></li><li class="lvl-2"><p>中间不能有空格，可以使用下划线（_）。</p></li><li class="lvl-2"><p>不能使用标点符号。</p></li><li class="lvl-2"><p>不能使用bash里的关键字（可用help命令查看保留关键字）。</p></li></ul><h4 id="使用变量">使用变量</h4><p>在变量名前面加美元符号即可，如：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">your_name=<span class="string">&quot;qinjx&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$your_name</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;your_name&#125;</span></span><br><span class="line">123</span><br></pre></td></tr></table></figure><p>加花括号可以帮助解释器识别变量的边界，比如：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> skill <span class="keyword">in</span> Ada Coffe Action Java; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;I am good at <span class="variable">$&#123;skill&#125;</span>Script&quot;</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">123</span><br></pre></td></tr></table></figure><h4 id="只读变量">只读变量</h4><p>使用 readonly 命令可以将变量定义为只读变量，只读变量的值不能被改变。</p><p>下面的例子尝试更改只读变量，结果报错：</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">python<span class="variable">@ubuntu</span><span class="symbol">:~/shell</span><span class="variable">$ </span>myUrl=<span class="string">&quot;http://www.google.com&quot;</span></span><br><span class="line">python<span class="variable">@ubuntu</span><span class="symbol">:~/shell</span><span class="variable">$ </span>readonly myUrl</span><br><span class="line">python<span class="variable">@ubuntu</span><span class="symbol">:~/shell</span><span class="variable">$ </span>myUrl=<span class="string">&quot;http://www.baidu.com&quot;</span></span><br><span class="line">-<span class="symbol">bash:</span> <span class="symbol">myUrl:</span> 只读变量</span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure><h4 id="删除变量">删除变量</h4><p>使用 unset 命令可以删除变量，但不能删除只读变量：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line">myUrl=<span class="string">&quot;http://www.baidu.com&quot;</span></span><br><span class="line"><span class="built_in">unset</span> myUrl</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$myUrl</span></span><br><span class="line">1234</span><br></pre></td></tr></table></figure><h4 id="变量类型">变量类型</h4><p>运行shell时，会同时存在三种变量：</p><ul class="lvl-0"><li class="lvl-2"><p><strong>1) 局部变量</strong> 局部变量在脚本或命令中定义，仅在当前shell实例中有效，其他shell启动的程序不能访问局部变量。</p></li><li class="lvl-2"><p><strong>2) 环境变量</strong> 所有的程序，包括shell启动的程序，都能访问环境变量，有些程序需要环境变量来保证其正常运行。必要的时候shell脚本也可以定义环境变量。</p></li><li class="lvl-2"><p><strong>3) shell变量</strong> shell变量是由shell程序设置的特殊变量。shell变量中有一部分是环境变量，有一部分是局部变量，这些变量保证了shell的正常运行</p></li></ul><h3 id="Shell-函数">Shell 函数</h3><p>shell中函数的定义格式如下：</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[ <span class="keyword">function</span> <span class="title">]</span> funname [()]</span><br><span class="line">&#123;</span><br><span class="line">    action;</span><br><span class="line">    [<span class="keyword">return</span> <span class="type">int</span>;]</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">12345</span></span><br></pre></td></tr></table></figure><p>说明：</p><ul class="lvl-0"><li class="lvl-2"><p>1、可以带function fun() 定义，也可以直接fun() 定义,不带任何参数。</p></li><li class="lvl-2"><p>2、参数返回，可以显示加：return 返回，如果不加，将以最后一条命令运行结果，作为返回值。 return后跟数值n(0-255)</p></li></ul><p>示例：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">funWithReturn</span></span>()&#123;</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;这个函数会对输入的两个数字进行相加运算...&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;输入第一个数字: &quot;</span></span><br><span class="line">    <span class="built_in">read</span> aNum</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;输入第二个数字: &quot;</span></span><br><span class="line">    <span class="built_in">read</span> anotherNum</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;两个数字分别为 <span class="variable">$aNum</span> 和 <span class="variable">$anotherNum</span> !&quot;</span></span><br><span class="line">    <span class="built_in">return</span> $((<span class="variable">$aNum</span>+<span class="variable">$anotherNum</span>))</span><br><span class="line">&#125;</span><br><span class="line">funWithReturn</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;输入的两个数字之和为 $? !&quot;</span></span><br><span class="line">12345678910111213</span><br></pre></td></tr></table></figure><p>输出，类似下面：</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">这个函数会对输入的两个数字进行相加运算...</span><br><span class="line">输入第一个数字: </span><br><span class="line">1</span><br><span class="line">输入第二个数字: </span><br><span class="line">2</span><br><span class="line">两个数字分别为<span class="number"> 1 </span>和<span class="number"> 2 </span>!</span><br><span class="line">输入的两个数字之和为<span class="number"> 3 </span>!</span><br><span class="line">1234567</span><br></pre></td></tr></table></figure><p>函数返回值在调用该函数后通过 $? 来获得。</p><p>注意：所有函数在使用前必须定义。这意味着必须将函数放在脚本开始部分，直至shell解释器首次发现它时，才可以使用。调用函数仅使用其函数名即可。</p><p>在Shell中，调用函数时可以向其传递参数。在函数体内部，通过 <code>$n</code> 的形式来获取参数的值，例如，<code>$1</code>表示第一个参数，<code>$2</code>表示第二个参数…</p><p>带参数的函数示例：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">funWithParam</span></span>()&#123;</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;第一个参数为 <span class="variable">$1</span> !&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;第二个参数为 <span class="variable">$2</span> !&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;第十个参数为 <span class="variable">$10</span> !&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;第十个参数为 <span class="variable">$&#123;10&#125;</span> !&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;第十一个参数为 <span class="variable">$&#123;11&#125;</span> !&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;参数总数有 <span class="variable">$#</span> 个!&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;作为一个字符串输出所有参数 $* !&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">funWithParam 1 2 3 4 5 6 7 8 9 34 73</span><br><span class="line">123456789101112</span><br></pre></td></tr></table></figure><p>输出结果：</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">第一个参数为<span class="number"> 1 </span>!</span><br><span class="line">第二个参数为<span class="number"> 2 </span>!</span><br><span class="line">第十个参数为<span class="number"> 10 </span>!</span><br><span class="line">第十个参数为<span class="number"> 34 </span>!</span><br><span class="line">第十一个参数为<span class="number"> 73 </span>!</span><br><span class="line">参数总数有<span class="number"> 11 </span>个!</span><br><span class="line">作为一个字符串输出所有参数<span class="number"> 1 </span>2<span class="number"> 3 </span>4<span class="number"> 5 </span>6<span class="number"> 7 </span>8<span class="number"> 9 </span>34<span class="number"> 73 </span>!</span><br><span class="line">1234567</span><br></pre></td></tr></table></figure><p>当n&gt;=10时，需要使用<code>$&#123;n&#125;</code>来获取参数。</p><p>另外，还有几个特殊字符用来处理参数：</p><table><thead><tr><th>参数处理</th><th>说明</th></tr></thead><tbody><tr><td>$#</td><td>传递到脚本的参数个数</td></tr><tr><td>$*</td><td>以一个单字符串显示所有向脚本传递的参数</td></tr><tr><td>$$</td><td>脚本运行的当前进程ID号</td></tr><tr><td>$!</td><td>后台运行的最后一个进程的ID号</td></tr><tr><td>$@</td><td>与$*相同，但是使用时加引号，并在引号中返回每个参数。</td></tr><tr><td>$-</td><td>显示Shell使用的当前选项，与set命令功能相同。</td></tr><tr><td>$?</td><td>显示最后命令的退出状态。0表示没有错误，其他任何值表明有错误。</td></tr></tbody></table><h3 id="文件包含">文件包含</h3><p>Shell 文件包含的语法格式如下：</p><figure class="highlight tcl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">. <span class="keyword">filename</span>   # 注意点号(.)和文件名中间有一空格</span><br><span class="line">或</span><br><span class="line"><span class="keyword">source</span> <span class="keyword">filename</span></span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure><p><strong>实例</strong></p><p>创建两个 shell 脚本文件。</p><p><a target="_blank" rel="noopener" href="http://test1.sh">test1.sh</a> 代码如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">url=<span class="string">&quot;http://www.baidu.com&quot;</span></span><br><span class="line">123</span><br></pre></td></tr></table></figure><p><a target="_blank" rel="noopener" href="http://test2.sh">test2.sh</a> 代码如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#使用 . 号来引用test1.sh 文件</span></span><br><span class="line">. ./test1.sh</span><br><span class="line"><span class="comment"># 或者使用以下包含文件代码</span></span><br><span class="line"><span class="comment"># source ./test1.sh</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;url地址：<span class="variable">$url</span>&quot;</span></span><br><span class="line">12345678</span><br></pre></td></tr></table></figure><p>接下来，我们为 <a target="_blank" rel="noopener" href="http://test2.sh">test2.sh</a> 添加可执行权限并执行：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">chmod</span> +x test2.sh</span> </span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">./test2.sh</span> </span><br><span class="line">url地址：http://www.baidu.com</span><br><span class="line">123</span><br></pre></td></tr></table></figure><blockquote><p>**注：**被包含的文件 <a target="_blank" rel="noopener" href="http://test1.sh">test1.sh</a> 不需要可执行权限。</p></blockquote><h3 id="shell数据类型">shell数据类型</h3><h4 id="字符串">字符串</h4><p>字符串可以用单引号，也可以用双引号，也可以不用引号。</p><p>单引号：</p><figure class="highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">str=<span class="symbol">&#x27;this</span> <span class="keyword">is</span> a <span class="built_in">string</span>&#x27;</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>单引号字符串的限制：</p><ul class="lvl-0"><li class="lvl-2"><p>单引号里的任何字符都会原样输出，单引号字符串中的变量是无效的；</p></li><li class="lvl-2"><p>单引号字串中不能出现单独一个的单引号（对单引号使用转义符后也不行），但可成对出现，作为字符串拼接使用。</p></li></ul><p>双引号：</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">your_name</span>=<span class="string">&#x27;taobao&#x27;</span></span><br><span class="line"><span class="attribute">str</span>=<span class="string">&quot;Hello, I know you are \&quot;<span class="variable">$your_name</span>\&quot;! \n&quot;</span></span><br><span class="line">echo -e <span class="variable">$str</span></span><br><span class="line">123</span><br></pre></td></tr></table></figure><p>输出结果为：</p><figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Hello,</span> I know you are <span class="string">&quot;taobao&quot;</span>! </span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>双引号的优点：</p><ul class="lvl-0"><li class="lvl-2"><p>双引号里可以有变量</p></li><li class="lvl-2"><p>双引号里可以出现转义字符</p></li></ul><p>拼接字符串：</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">your_name</span>=<span class="string">&quot;taobao&quot;</span></span><br><span class="line"><span class="comment"># 使用双引号拼接</span></span><br><span class="line"><span class="attribute">greeting</span>=<span class="string">&quot;hello, &quot;</span><span class="variable">$your_name</span><span class="string">&quot; !&quot;</span></span><br><span class="line"><span class="attribute">greeting_1</span>=<span class="string">&quot;hello, <span class="variable">$&#123;your_name&#125;</span> !&quot;</span></span><br><span class="line">echo <span class="variable">$greeting</span>  <span class="variable">$greeting_1</span></span><br><span class="line"><span class="comment"># 使用单引号拼接</span></span><br><span class="line"><span class="attribute">greeting_2</span>=<span class="string">&#x27;hello, &#x27;</span><span class="variable">$your_name</span><span class="string">&#x27; !&#x27;</span></span><br><span class="line"><span class="attribute">greeting_3</span>=<span class="string">&#x27;hello, $&#123;your_name&#125; !&#x27;</span></span><br><span class="line">echo <span class="variable">$greeting_2</span>  <span class="variable">$greeting_3</span></span><br><span class="line">123456789</span><br></pre></td></tr></table></figure><p>输出结果为：</p><figure class="highlight erlang-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hello, taobao ! hello, taobao !</span><br><span class="line">hello, taobao ! hello, $&#123;your_name&#125; !</span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure><p><strong>获取字符串长度<code>$&#123;#s&#125;</code></strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">string=<span class="string">&quot;abcd&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;#string&#125;</span> <span class="comment">#输出 4</span></span><br><span class="line">12</span><br></pre></td></tr></table></figure><p><strong>截取字符串${s:n1:n2}</strong></p><p>以下实例从字符串第 <strong>2</strong> 个字符开始截取 <strong>4</strong> 个字符：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">string</span>=<span class="string">&quot;taobao is a great site&quot;</span></span><br><span class="line"><span class="keyword">echo</span> $&#123;<span class="keyword">string</span>:<span class="number">1</span>:<span class="number">4</span>&#125; <span class="comment"># 输出 unoo</span></span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure><p><strong>查找字符出现的位置<code>expr index</code></strong></p><p>查找字符 <strong>i</strong> 或 <strong>o</strong> 的位置(哪个字母先出现就计算哪个)：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">string=<span class="string">&quot;taobao is a great site&quot;</span></span><br><span class="line"><span class="built_in">echo</span> `<span class="built_in">expr</span> index <span class="string">&quot;<span class="variable">$string</span>&quot;</span> io`  <span class="comment"># 输出 3</span></span><br><span class="line">12</span><br></pre></td></tr></table></figure><p><strong>注意：</strong> 以上脚本中 <strong>`</strong> 是反引号，而不是单引号 <strong>'</strong>。</p><h4 id="数组">数组</h4><p>bash支持一维数组（不支持多维数组），并且没有限定数组的大小。</p><p>数组元素的下标由 0 开始编号。</p><h5 id="定义数组">定义数组</h5><p>在 Shell 中，用括号来表示数组，数组元素用&quot;空格&quot;符号分割开。定义数组的一般形式为：</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">array_name<span class="operator">=</span>(value0 value1 value2 value3)</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>或者</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">array_name<span class="operator">=</span>(</span><br><span class="line">value0</span><br><span class="line">value1</span><br><span class="line">value2</span><br><span class="line">value3</span><br><span class="line">)</span><br><span class="line"><span class="number">123456</span></span><br></pre></td></tr></table></figure><p>或单独定义数组的各个分量：</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">array_name[<span class="number">0</span>]<span class="operator">=</span>value0</span><br><span class="line">array_name[<span class="number">1</span>]<span class="operator">=</span>value1</span><br><span class="line">array_name[n]<span class="operator">=</span>valuen</span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure><p>可以不使用连续的下标，而且下标的范围没有限制。</p><h5 id="读取数组">读取数组</h5><p>读取数组元素值的一般格式是：</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">valuen</span>=<span class="variable">$&#123;array_name[n]&#125;</span></span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>例子：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">my_array=(A B <span class="string">&quot;C&quot;</span> D)</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;第一个元素为: <span class="variable">$&#123;my_array[0]&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;第二个元素为: <span class="variable">$&#123;my_array[1]&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;第三个元素为: <span class="variable">$&#123;my_array[2]&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;第四个元素为: <span class="variable">$&#123;my_array[3]&#125;</span>&quot;</span></span><br><span class="line">12345678</span><br></pre></td></tr></table></figure><p>执行脚本，输出结果如下所示：</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ chmod +x test.sh </span><br><span class="line">$ ./test.sh</span><br><span class="line"><span class="section">第一个元素为: A</span></span><br><span class="line"><span class="section">第二个元素为: B</span></span><br><span class="line"><span class="section">第三个元素为: C</span></span><br><span class="line"><span class="section">第四个元素为: D</span></span><br><span class="line">123456</span><br></pre></td></tr></table></figure><p>使用 <code>@</code>或<code>*</code> 符号可以获取数组中的所有元素，例如：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;array_name[@]&#125;</span></span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>例子：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">my_array[0]=A</span><br><span class="line">my_array[1]=B</span><br><span class="line">my_array[2]=C</span><br><span class="line">my_array[3]=D</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;数组的元素为: <span class="variable">$&#123;my_array[*]&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;数组的元素为: <span class="variable">$&#123;my_array[@]&#125;</span>&quot;</span></span><br><span class="line">123456789</span><br></pre></td></tr></table></figure><p>执行脚本，输出结果如下所示：</p><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> <span class="variable">chmod</span> <span class="operator">+</span><span class="variable">x</span> <span class="variable">test</span><span class="operator">.</span><span class="variable">sh</span> </span><br><span class="line"><span class="variable">$</span> <span class="operator">./</span><span class="variable">test</span><span class="operator">.</span><span class="variable">sh</span></span><br><span class="line">数组的元素为<span class="operator">:</span> <span class="variable">A</span> <span class="variable">B</span> <span class="built_in">C</span> <span class="built_in">D</span></span><br><span class="line">数组的元素为<span class="operator">:</span> <span class="variable">A</span> <span class="variable">B</span> <span class="built_in">C</span> <span class="built_in">D</span></span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure><h5 id="获取数组的长度">获取数组的长度</h5><p>获取数组长度的方法与获取字符串长度的方法相同，例如：</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 取得数组元素的个数</span></span><br><span class="line">length=<span class="variable">$&#123;</span><span class="comment">#array_name[@]&#125;</span></span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line">length=<span class="variable">$&#123;</span><span class="comment">#array_name[*]&#125;</span></span><br><span class="line"><span class="comment"># 取得数组单个元素的长度</span></span><br><span class="line">lengthn=<span class="variable">$&#123;</span><span class="comment">#array_name[n]&#125;</span></span><br><span class="line"><span class="number">123456</span></span><br></pre></td></tr></table></figure><p>例子：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">my_array[0]=A</span><br><span class="line">my_array[1]=B</span><br><span class="line">my_array[2]=C</span><br><span class="line">my_array[3]=D</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;数组元素个数为: <span class="variable">$&#123;#my_array[*]&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;数组元素个数为: <span class="variable">$&#123;#my_array[@]&#125;</span>&quot;</span></span><br><span class="line">123456789</span><br></pre></td></tr></table></figure><p>执行脚本，输出结果如下所示：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">chmod</span> +x test.sh</span> </span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">./test.sh</span></span><br><span class="line">数组元素个数为: 4</span><br><span class="line">数组元素个数为: 4</span><br><span class="line">1234</span><br></pre></td></tr></table></figure><h4 id="Shell传递参数">Shell传递参数</h4><p>执行 Shell 脚本时，向脚本传递参数，脚本内获取参数的格式为：<strong>$n</strong>。</p><p><strong>n</strong> 代表一个数字，1 为执行脚本的第一个参数，2 为执行脚本的第二个参数，以此类推……</p><p><strong>$0</strong> 为执行的文件名</p><p>test.sh文件内容如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">vi test.sh</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Shell 传递参数实例！&quot;</span>;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;执行的文件名：<span class="variable">$0</span>&quot;</span>;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;第一个参数为：<span class="variable">$1</span>&quot;</span>;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;第二个参数为：<span class="variable">$2</span>&quot;</span>;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;第三个参数为：<span class="variable">$3</span>&quot;</span>;</span><br><span class="line">12345678</span><br></pre></td></tr></table></figure><p>运行结果：</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">python@ubuntu:~/<span class="keyword">test</span>$ <span class="keyword">sh</span> <span class="keyword">test</span>.<span class="keyword">sh</span> 1 2 3</span><br><span class="line"><span class="keyword">Shell</span> 传递参数实例！</span><br><span class="line">执行的文件名：<span class="keyword">test</span>.<span class="keyword">sh</span></span><br><span class="line">第一个参数为：1</span><br><span class="line">第二个参数为：2</span><br><span class="line">第三个参数为：3</span><br><span class="line">123456</span><br></pre></td></tr></table></figure><p>参数获取：</p><table><thead><tr><th>参数处理</th><th>说明</th></tr></thead><tbody><tr><td>$#</td><td>传递到脚本的参数个数</td></tr><tr><td><code>$*</code></td><td>传递的参数作为一个字符串显示</td></tr><tr><td>$$</td><td>脚本运行的当前进程ID号</td></tr><tr><td>$!</td><td>后台运行的最后一个进程的ID号</td></tr><tr><td><code>$@</code></td><td>与<code>$*</code>相同，但是使用时加引号</td></tr><tr><td>$?</td><td>显示最后命令的退出状态。0表示没有错误，其他任何值表明有错误。</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;参数个数为：<span class="variable">$#</span>&quot;</span>;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;$*传递的参数作为一个字符串显示：$*&quot;</span>;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$@</span>传递的参数作为一个字符串显示：<span class="variable">$@</span>&quot;</span>;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;脚本运行的当前进程ID号：$$&quot;</span>;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;后台运行的最后一个进程的ID号：$!&quot;</span>;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;$?&quot;</span></span><br><span class="line">12345678</span><br></pre></td></tr></table></figure><p>执行脚本，输出结果如下所示：</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">python<span class="variable">@ubuntu</span><span class="symbol">:~/test</span><span class="variable">$ </span>./test.sh <span class="number">1</span> <span class="number">2</span> <span class="number">3</span></span><br><span class="line">参数个数为：<span class="number">3</span></span><br><span class="line"><span class="number">1</span> <span class="number">2</span> <span class="number">3</span>传递的参数作为一个字符串显示：<span class="number">1</span> <span class="number">2</span> <span class="number">3</span></span><br><span class="line"><span class="number">1</span> <span class="number">2</span> <span class="number">3</span>传递的参数作为一个字符串显示：<span class="number">1</span> <span class="number">2</span> <span class="number">3</span></span><br><span class="line">脚本运行的当前进程<span class="title class_">ID</span>号：<span class="number">5059</span></span><br><span class="line">后台运行的最后一个进程的<span class="title class_">ID</span>号：</span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="number">1234567</span></span><br></pre></td></tr></table></figure><p><code>$*</code>与<code>$@</code>的区别：</p><ul class="lvl-0"><li class="lvl-2"><p>只有在双引号中体现出来。假设在脚本运行时写了三个参数 1、2、3，，则<code>$*</code> 等价于 “1 2 3”（传递了一个参数），而<code>$@</code>等价于 “1” “2” “3”（传递了三个参数）。</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;-- \&quot;\$*\&quot; 演示 ---&quot;</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="string">&quot;$*&quot;</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;-- \&quot;\$@\&quot; 演示 ---&quot;</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="string">&quot;<span class="variable">$@</span>&quot;</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;-- \$* 演示 ---&quot;</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $*; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;-- \$@ 演示 ---&quot;</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="variable">$@</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">123456789101112131415161718192021</span><br></pre></td></tr></table></figure><p>执行脚本，输出结果如下所示：</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">python<span class="variable">@ubuntu</span><span class="symbol">:~/test</span><span class="variable">$ </span>sh test <span class="number">1</span> <span class="number">2</span> <span class="number">3</span></span><br><span class="line">-- <span class="string">&quot;$*&quot;</span> 演示 ---</span><br><span class="line"><span class="number">1</span> <span class="number">2</span> <span class="number">3</span></span><br><span class="line">-- <span class="string">&quot;$@&quot;</span> 演示 ---</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line">-- <span class="variable">$*</span> 演示 ---</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line">-- <span class="variable">$@</span> 演示 ---</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">123456789101112131415</span></span><br></pre></td></tr></table></figure><h3 id="Shell基本运算符">Shell基本运算符</h3><p>Shell 和其他编程语言一样，支持多种运算符，包括：</p><ul class="lvl-0"><li class="lvl-2"><p>算数运算符</p></li><li class="lvl-2"><p>关系运算符</p></li><li class="lvl-2"><p>布尔运算符</p></li><li class="lvl-2"><p>字符串运算符</p></li><li class="lvl-2"><p>文件测试运算符</p></li></ul><p>原生bash不支持简单的数学运算，但是可以通过其他命令来实现，例如 awk 和 expr，expr 最常用。</p><p>expr 是一款表达式计算工具，使用它能完成表达式的求值操作。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">val=`<span class="built_in">expr</span> 2 + 2`</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;两数之和为 : <span class="variable">$val</span>&quot;</span></span><br><span class="line">1234</span><br></pre></td></tr></table></figure><p>执行脚本，输出结果如下所示：</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">两数之和为 : 4</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>两点注意：</p><ul class="lvl-0"><li class="lvl-2"><p>表达式和运算符之间要有空格，例如 2+2 是不对的，必须写成 2 + 2。</p></li><li class="lvl-2"><p>完整的表达式要被 <code></code> 包含，这个字符是<strong>反引号</strong>在 Esc 键下边。</p></li></ul><h4 id="算术运算符">算术运算符</h4><p>下表列出了常用的算术运算符，假定变量 a 为 10，变量 b 为 20：</p><table><thead><tr><th>运算符</th><th>说明</th><th>举例</th></tr></thead><tbody><tr><td>+</td><td>加法</td><td><code>expr $a + $b</code> 结果为 30。</td></tr><tr><td>-</td><td>减法</td><td><code>expr $a - $b</code> 结果为 -10。</td></tr><tr><td>*</td><td>乘法</td><td><code>expr $a \* $b</code> 结果为 200。</td></tr><tr><td>/</td><td>除法</td><td><code>expr $b / $a</code> 结果为 2。</td></tr><tr><td>%</td><td>取余</td><td><code>expr $b % $a</code> 结果为 0。</td></tr><tr><td>=</td><td>赋值</td><td>a=$b 将把变量 b 的值赋给 a。</td></tr><tr><td>==</td><td>相等。用于比较两个数字，相同则返回 true。</td><td><code>[ $a == $b ]</code> 返回 false。</td></tr><tr><td>!=</td><td>不相等。用于比较两个数字，不相同则返回 true。</td><td><code>[ $a != $b ]</code> 返回 true。</td></tr></tbody></table><p>算术运算符实例如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">a=10</span><br><span class="line">b=20</span><br><span class="line"></span><br><span class="line">val=`<span class="built_in">expr</span> <span class="variable">$a</span> + <span class="variable">$b</span>`</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;a + b : <span class="variable">$val</span>&quot;</span></span><br><span class="line"></span><br><span class="line">val=`<span class="built_in">expr</span> <span class="variable">$a</span> - <span class="variable">$b</span>`</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;a - b : <span class="variable">$val</span>&quot;</span></span><br><span class="line"></span><br><span class="line">val=`<span class="built_in">expr</span> <span class="variable">$a</span> \* <span class="variable">$b</span>`</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;a * b : <span class="variable">$val</span>&quot;</span></span><br><span class="line"></span><br><span class="line">val=`<span class="built_in">expr</span> <span class="variable">$b</span> / <span class="variable">$a</span>`</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;b / a : <span class="variable">$val</span>&quot;</span></span><br><span class="line"></span><br><span class="line">val=`<span class="built_in">expr</span> <span class="variable">$b</span> % <span class="variable">$a</span>`</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;b % a : <span class="variable">$val</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$a</span> == <span class="variable">$b</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;a 等于 b&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$a</span> != <span class="variable">$b</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;a 不等于 b&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">12345678910111213141516171819202122232425262728</span><br></pre></td></tr></table></figure><p>执行脚本，输出结果如下所示：</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">a</span> + <span class="selector-tag">b</span> : <span class="number">30</span></span><br><span class="line"><span class="selector-tag">a</span> <span class="selector-tag">-</span> <span class="selector-tag">b</span> : <span class="selector-tag">-10</span></span><br><span class="line"><span class="selector-tag">a</span> * <span class="selector-tag">b</span> : <span class="number">200</span></span><br><span class="line"><span class="selector-tag">b</span> / <span class="selector-tag">a</span> : <span class="number">2</span></span><br><span class="line"><span class="selector-tag">b</span> % <span class="selector-tag">a</span> : <span class="number">0</span></span><br><span class="line"><span class="selector-tag">a</span> 不等于 <span class="selector-tag">b</span></span><br><span class="line"><span class="number">123456</span></span><br></pre></td></tr></table></figure><p><strong>注意：</strong></p><ul class="lvl-0"><li class="lvl-2"><p>乘号(*)前边必须加反斜杠<code>\</code>才能实现乘法运算；</p></li><li class="lvl-2"><p>if…then…fi 是条件语句，后续将会讲解。</p></li><li class="lvl-2"><p>在 MAC 中 shell 的 expr 语法是：<strong>$((表达式))</strong>，此处表达式中的 “*” 不需要转义符号 <code>\</code> 。</p></li></ul><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">let <span class="attribute">varName</span>=算术表达式</span><br><span class="line"><span class="attribute">varName</span>=$[算术表达式]</span><br><span class="line"><span class="attribute">varName</span>=$((算术表达式))</span><br><span class="line">123</span><br></pre></td></tr></table></figure><h4 id="关系运算符">关系运算符</h4><p>关系运算符只支持数字，不支持字符串，除非字符串的值是数字。</p><p>下表列出了常用的关系运算符，假定变量 a 为 10，变量 b 为 20：</p><table><thead><tr><th>运算符</th><th>说明</th><th>举例</th></tr></thead><tbody><tr><td>-eq</td><td>检测两个数是否相等，相等返回 true。</td><td><code>[ $a -eq $b ]</code> 返回 false。</td></tr><tr><td>-ne</td><td>检测两个数是否不相等，不相等返回 true。</td><td><code>[ $a -ne $b ]</code> 返回 true。</td></tr><tr><td>-gt</td><td>检测左边的数是否大于右边的，如果是，则返回 true。</td><td><code>[ $a -gt $b ]</code> 返回 false。</td></tr><tr><td>-lt</td><td>检测左边的数是否小于右边的，如果是，则返回 true。</td><td><code>[ $a -lt $b ]</code> 返回 true。</td></tr><tr><td>-ge</td><td>检测左边的数是否大于等于右边的，如果是，则返回 true。</td><td><code>[ $a -ge $b ]</code>返回 false。</td></tr><tr><td>-le</td><td>检测左边的数是否小于等于右边的，如果是，则返回 true。</td><td><code>[ $a -le $b ]</code> 返回 true。</td></tr></tbody></table><p>关系运算符实例如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">a=10</span><br><span class="line">b=20</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$a</span> -eq <span class="variable">$b</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> -eq <span class="variable">$b</span> : a 等于 b&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> -eq <span class="variable">$b</span>: a 不等于 b&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$a</span> -ne <span class="variable">$b</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> -ne <span class="variable">$b</span>: a 不等于 b&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> -ne <span class="variable">$b</span> : a 等于 b&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$a</span> -gt <span class="variable">$b</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> -gt <span class="variable">$b</span>: a 大于 b&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> -gt <span class="variable">$b</span>: a 不大于 b&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$a</span> -lt <span class="variable">$b</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> -lt <span class="variable">$b</span>: a 小于 b&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> -lt <span class="variable">$b</span>: a 不小于 b&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$a</span> -ge <span class="variable">$b</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> -ge <span class="variable">$b</span>: a 大于或等于 b&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> -ge <span class="variable">$b</span>: a 小于 b&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$a</span> -le <span class="variable">$b</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> -le <span class="variable">$b</span>: a 小于或等于 b&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> -le <span class="variable">$b</span>: a 大于 b&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">1234567891011121314151617181920212223242526272829303132333435363738394041</span><br></pre></td></tr></table></figure><p>执行脚本，输出结果如下所示：</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">10 </span>-eq <span class="number">20</span>: a 不等于 b</span><br><span class="line"><span class="symbol">10 </span>-ne <span class="number">20</span>: a 不等于 b</span><br><span class="line"><span class="symbol">10 </span>-gt <span class="number">20</span>: a 不大于 b</span><br><span class="line"><span class="symbol">10 </span>-lt <span class="number">20</span>: a 小于 b</span><br><span class="line"><span class="symbol">10 </span>-ge <span class="number">20</span>: a 小于 b</span><br><span class="line"><span class="symbol">10 </span>-le <span class="number">20</span>: a 小于或等于 b</span><br><span class="line"><span class="number">123456</span></span><br></pre></td></tr></table></figure><h4 id="布尔运算符">布尔运算符</h4><p>下表列出了常用的布尔运算符，假定变量 a 为 10，变量 b 为 20：</p><table><thead><tr><th>运算符</th><th>说明</th><th>举例</th></tr></thead><tbody><tr><td>!</td><td>非运算，表达式为 true 则返回 false，否则返回 true。</td><td><code>[ ! false ]</code> 返回 true。</td></tr><tr><td>-o</td><td>或运算，有一个表达式为 true 则返回 true。</td><td><code>[ $a -lt 20 -o $b -gt 100 ]</code> 返回 true。</td></tr><tr><td>-a</td><td>与运算，两个表达式都为 true 才返回 true。</td><td><code>[ $a -lt 20 -a $b -gt 100 ]</code> 返回 false。</td></tr></tbody></table><p>布尔运算符实例如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">a=10</span><br><span class="line">b=20</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$a</span> != <span class="variable">$b</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> != <span class="variable">$b</span> : a 不等于 b&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> == <span class="variable">$b</span>: a 等于 b&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$a</span> -lt 100 -a <span class="variable">$b</span> -gt 15 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> 小于 100 且 <span class="variable">$b</span> 大于 15 : 返回 true&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> 小于 100 且 <span class="variable">$b</span> 大于 15 : 返回 false&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$a</span> -lt 100 -o <span class="variable">$b</span> -gt 100 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> 小于 100 或 <span class="variable">$b</span> 大于 100 : 返回 true&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> 小于 100 或 <span class="variable">$b</span> 大于 100 : 返回 false&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$a</span> -lt 5 -o <span class="variable">$b</span> -gt 100 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> 小于 5 或 <span class="variable">$b</span> 大于 100 : 返回 true&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> 小于 5 或 <span class="variable">$b</span> 大于 100 : 返回 false&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">1234567891011121314151617181920212223242526272829</span><br></pre></td></tr></table></figure><p>执行脚本，输出结果如下所示：</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">10 </span>!= <span class="number">20</span> : a 不等于 b</span><br><span class="line"><span class="symbol">10 </span>小于 <span class="number">100</span> 且 <span class="number">20</span> 大于 <span class="number">15</span> : 返回 true</span><br><span class="line"><span class="symbol">10 </span>小于 <span class="number">100</span> 或 <span class="number">20</span> 大于 <span class="number">100</span> : 返回 true</span><br><span class="line"><span class="symbol">10 </span>小于 <span class="number">5</span> 或 <span class="number">20</span> 大于 <span class="number">100</span> : 返回 false</span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure><h4 id="逻辑运算符">逻辑运算符</h4><p>以下介绍 Shell 的逻辑运算符，假定变量 a 为 10，变量 b 为 20:</p><table><thead><tr><th>运算符</th><th>说明</th><th>举例</th></tr></thead><tbody><tr><td>&amp;&amp;</td><td>逻辑的 AND</td><td><code>[[ $a -lt 100 &amp;&amp; $b -gt 100 ]]</code> 返回 false</td></tr><tr><td>||</td><td>逻辑的 OR</td><td>`[[ $a -lt 100</td></tr></tbody></table><p>逻辑运算符实例如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">a=10</span><br><span class="line">b=20</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [[ <span class="variable">$a</span> -lt 100 &amp;&amp; <span class="variable">$b</span> -gt 100 ]]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;返回 true&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;返回 false&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [[ <span class="variable">$a</span> -lt 100 || <span class="variable">$b</span> -gt 100 ]]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;返回 true&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;返回 false&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">123456789101112131415161718</span><br></pre></td></tr></table></figure><p>执行脚本，输出结果如下所示：</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">返回 <span class="literal">false</span></span><br><span class="line">返回 <span class="literal">true</span></span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure><h4 id="字符串运算符">字符串运算符</h4><p>下表列出了常用的字符串运算符，假定变量 a 为 “abc”，变量 b 为 “efg”：</p><table><thead><tr><th>运算符</th><th>说明</th><th>举例</th></tr></thead><tbody><tr><td>=</td><td>检测两个字符串是否相等，相等返回 true。</td><td><code>[ $a = $b ]</code> 返回 false。</td></tr><tr><td>!=</td><td>检测两个字符串是否相等，不相等返回 true。</td><td><code>[ $a != $b ]</code> 返回 true。</td></tr><tr><td>-z</td><td>检测字符串长度是否为0，为0返回 true。</td><td><code>[ -z $a ]</code> 返回 false。</td></tr><tr><td>-n</td><td>检测字符串长度是否为0，不为0返回 true。</td><td><code>[ -n &quot;$a&quot; ]</code> 返回 true。</td></tr><tr><td>$</td><td>检测字符串是否为空，不为空返回 true。</td><td><code>[ $a ]</code> 返回 true。</td></tr></tbody></table><p>字符串运算符实例如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">a=<span class="string">&quot;abc&quot;</span></span><br><span class="line">b=<span class="string">&quot;efg&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$a</span> = <span class="variable">$b</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> = <span class="variable">$b</span> : a 等于 b&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> = <span class="variable">$b</span>: a 不等于 b&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$a</span> != <span class="variable">$b</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> != <span class="variable">$b</span> : a 不等于 b&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> != <span class="variable">$b</span>: a 等于 b&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ -z <span class="variable">$a</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;-z <span class="variable">$a</span> : 字符串长度为 0&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;-z <span class="variable">$a</span> : 字符串长度不为 0&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ -n <span class="string">&quot;<span class="variable">$a</span>&quot;</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;-n <span class="variable">$a</span> : 字符串长度不为 0&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;-n <span class="variable">$a</span> : 字符串长度为 0&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$a</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> : 字符串不为空&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> : 字符串为空&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">1234567891011121314151617181920212223242526272829303132333435</span><br></pre></td></tr></table></figure><p>执行脚本，输出结果如下所示：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">abc</span> <span class="string">=</span> <span class="attr">efg:</span> <span class="string">a</span> <span class="string">不等于</span> <span class="string">b</span></span><br><span class="line"><span class="string">abc</span> <span class="type">!=</span> <span class="attr">efg :</span> <span class="string">a</span> <span class="string">不等于</span> <span class="string">b</span></span><br><span class="line"><span class="string">-z</span> <span class="attr">abc :</span> <span class="string">字符串长度不为</span> <span class="number">0</span></span><br><span class="line"><span class="string">-n</span> <span class="attr">abc :</span> <span class="string">字符串长度不为</span> <span class="number">0</span></span><br><span class="line"><span class="attr">abc :</span> <span class="string">字符串不为空</span></span><br><span class="line"><span class="number">12345</span></span><br></pre></td></tr></table></figure><h4 id="文件测试运算符">文件测试运算符</h4><p>文件测试运算符用于检测 Unix 文件的各种属性。</p><p>属性检测描述如下：</p><table><thead><tr><th>操作符</th><th>说明</th><th>举例</th></tr></thead><tbody><tr><td>-b file</td><td>检测文件是否是块设备文件，如果是，则返回 true。</td><td>[ -b $file ] 返回 false。</td></tr><tr><td>-c file</td><td>检测文件是否是字符设备文件，如果是，则返回 true。</td><td>[ -c $file ] 返回 false。</td></tr><tr><td>-d file</td><td>检测文件是否是目录，如果是，则返回 true。</td><td>[ -d $file ] 返回 false。</td></tr><tr><td>-f file</td><td>检测文件是否是普通文件（既不是目录，也不是设备文件），如果是，则返回 true。</td><td>[ -f $file ] 返回 true。</td></tr><tr><td>-g file</td><td>检测文件是否设置了 SGID 位，如果是，则返回 true。</td><td>[ -g $file ] 返回 false。</td></tr><tr><td>-k file</td><td>检测文件是否设置了粘着位(Sticky Bit)，如果是，则返回 true。</td><td>[ -k $file ] 返回 false。</td></tr><tr><td>-p file</td><td>检测文件是否是有名管道，如果是，则返回 true。</td><td>[ -p $file ] 返回 false。</td></tr><tr><td>-u file</td><td>检测文件是否设置了 SUID 位，如果是，则返回 true。</td><td>[ -u $file ] 返回 false。</td></tr><tr><td>-r file</td><td>检测文件是否可读，如果是，则返回 true。</td><td>[ -r $file ] 返回 true。</td></tr><tr><td>-w file</td><td>检测文件是否可写，如果是，则返回 true。</td><td>[ -w $file ] 返回 true。</td></tr><tr><td>-x file</td><td>检测文件是否可执行，如果是，则返回 true。</td><td>[ -x $file ] 返回 true。</td></tr><tr><td>-s file</td><td>检测文件是否为空（文件大小是否大于0），不为空返回 true。</td><td>[ -s $file ] 返回 true。</td></tr><tr><td>-e file</td><td>检测文件（包括目录）是否存在，如果是，则返回 true。</td><td>[ -e $file ] 返回 true。</td></tr></tbody></table><p>其他检查符：</p><ul class="lvl-0"><li class="lvl-2"><p><strong>-S</strong>: 判断某文件是否 socket。</p></li><li class="lvl-2"><p><strong>-L</strong>: 检测文件是否存在并且是一个符号链接。</p></li></ul><p>变量 file 表示文件 <strong>/var/www/runoob/test.sh</strong>，它的大小为 100 字节，具有 <strong>rwx</strong> 权限。下面的代码，将检测该文件的各种属性：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">file=<span class="string">&quot;/var/www/runoob/test.sh&quot;</span></span><br><span class="line"><span class="keyword">if</span> [ -r <span class="variable">$file</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;文件可读&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;文件不可读&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ -w <span class="variable">$file</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;文件可写&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;文件不可写&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ -x <span class="variable">$file</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;文件可执行&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;文件不可执行&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ -f <span class="variable">$file</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;文件为普通文件&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;文件为特殊文件&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ -d <span class="variable">$file</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;文件是个目录&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;文件不是个目录&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ -s <span class="variable">$file</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;文件不为空&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;文件为空&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ -e <span class="variable">$file</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;文件存在&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;文件不存在&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">123456789101112131415161718192021222324252627282930313233343536373839404142434445</span><br></pre></td></tr></table></figure><p>执行脚本，输出结果如下所示：</p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">文件可读</span><br><span class="line">文件可写</span><br><span class="line">文件可执行</span><br><span class="line">文件为普通文件</span><br><span class="line">文件不是个目录</span><br><span class="line">文件不为空</span><br><span class="line">文件存在</span><br><span class="line"><span class="number">1234567</span></span><br></pre></td></tr></table></figure><h3 id="test命令">test命令</h3><p>Shell中的 test 命令用于检查某个条件是否成立，它可以进行数值、字符和文件三个方面的测试。</p><h4 id="数值测试">数值测试</h4><table><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>-eq</td><td>等于则为真</td></tr><tr><td>-ne</td><td>不等于则为真</td></tr><tr><td>-gt</td><td>大于则为真</td></tr><tr><td>-ge</td><td>大于等于则为真</td></tr><tr><td>-lt</td><td>小于则为真</td></tr><tr><td>-le</td><td>小于等于则为真</td></tr></tbody></table><p>实例演示：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">num1=100</span><br><span class="line">num2=100</span><br><span class="line"><span class="keyword">if</span> <span class="built_in">test</span> $[num1] -eq $[num2]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&#x27;两个数相等！&#x27;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&#x27;两个数不相等！&#x27;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">12345678</span><br></pre></td></tr></table></figure><p>输出结果：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">两个数相等！</span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>代码中的 [] 执行基本的算数运算，如：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">a=5</span><br><span class="line">b=6</span><br><span class="line"></span><br><span class="line">result=$[a+b] <span class="comment"># 注意等号两边不能有空格</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;result 为： <span class="variable">$result</span>&quot;</span></span><br><span class="line">1234567</span><br></pre></td></tr></table></figure><p>结果为:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">result</span> 为： <span class="number">11</span></span><br><span class="line"><span class="attribute">1</span></span><br></pre></td></tr></table></figure><h4 id="字符串测试">字符串测试</h4><table><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>=</td><td>等于则为真</td></tr><tr><td>!=</td><td>不相等则为真</td></tr><tr><td>-z 字符串</td><td>字符串的长度为零则为真</td></tr><tr><td>-n 字符串</td><td>字符串的长度不为零则为真</td></tr></tbody></table><p>实例演示：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">num1=<span class="string">&quot;ru1noob&quot;</span></span><br><span class="line">num2=<span class="string">&quot;runoob&quot;</span></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">test</span> <span class="variable">$num1</span> = <span class="variable">$num2</span></span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&#x27;两个字符串相等!&#x27;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&#x27;两个字符串不相等!&#x27;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">12345678</span><br></pre></td></tr></table></figure><p>输出结果：</p><figure class="highlight erlang-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">两个字符串不相等!</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><h4 id="文件测试">文件测试</h4><table><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>-e 文件名</td><td>如果文件存在则为真</td></tr><tr><td>-r 文件名</td><td>如果文件存在且可读则为真</td></tr><tr><td>-w 文件名</td><td>如果文件存在且可写则为真</td></tr><tr><td>-x 文件名</td><td>如果文件存在且可执行则为真</td></tr><tr><td>-s 文件名</td><td>如果文件存在且至少有一个字符则为真</td></tr><tr><td>-d 文件名</td><td>如果文件存在且为目录则为真</td></tr><tr><td>-f 文件名</td><td>如果文件存在且为普通文件则为真</td></tr><tr><td>-c 文件名</td><td>如果文件存在且为字符型特殊文件则为真</td></tr><tr><td>-b 文件名</td><td>如果文件存在且为块特殊文件则为真</td></tr></tbody></table><p>实例演示：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /bin</span><br><span class="line"><span class="keyword">if</span> <span class="built_in">test</span> -e ./bash</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&#x27;文件已存在!&#x27;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&#x27;文件不存在!&#x27;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">1234567</span><br></pre></td></tr></table></figure><p>输出结果：</p><figure class="highlight erlang-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">文件已存在!</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>另外，Shell还提供了与( -a )、或( -o )、非( ! )三个逻辑操作符用于将测试条件连接起来，其优先级为：“!“最高，”-a&quot;次之，”-o&quot;最低。例如：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /bin</span><br><span class="line"><span class="keyword">if</span> <span class="built_in">test</span> -e ./notFile -o -e ./bash</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&#x27;至少有一个文件存在!&#x27;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&#x27;两个文件都不存在&#x27;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">1234567</span><br></pre></td></tr></table></figure><p>输出结果：</p><figure class="highlight erlang-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">至少有一个文件存在!</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><h3 id="Shell-流程控制">Shell 流程控制</h3><h4 id="if-else判断语句">if else判断语句</h4><p>if 语句语法格式：</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> condition</span><br><span class="line">then</span><br><span class="line">    <span class="keyword">command</span>1 </span><br><span class="line">    <span class="keyword">command</span>2</span><br><span class="line">    <span class="string">...</span></span><br><span class="line">    <span class="keyword">command</span>N </span><br><span class="line">fi</span><br><span class="line">1234567</span><br></pre></td></tr></table></figure><p>写成一行（适用于终端命令提示符）：</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">if</span> [ $(ps -ef | grep -c <span class="string">&quot;ssh&quot;</span>) -gt <span class="number">1</span> ]; <span class="attribute">then</span> echo <span class="string">&quot;true&quot;</span>; <span class="attribute">fi</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>if else 语法格式：</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> condition</span><br><span class="line">then</span><br><span class="line">    <span class="keyword">command</span>1 </span><br><span class="line">    <span class="keyword">command</span>2</span><br><span class="line">    <span class="string">...</span></span><br><span class="line">    <span class="keyword">command</span>N</span><br><span class="line">else</span><br><span class="line">    <span class="keyword">command</span></span><br><span class="line">fi</span><br><span class="line">123456789</span><br></pre></td></tr></table></figure><p>if else-if else 语法格式：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> condition1</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    command1</span><br><span class="line"><span class="keyword">elif</span> condition2 </span><br><span class="line"><span class="keyword">then</span> </span><br><span class="line">    command2</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    commandN</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">123456789</span><br></pre></td></tr></table></figure><p>以下实例判断两个变量是否相等：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">a=10</span><br><span class="line">b=20</span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$a</span> == <span class="variable">$b</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;a 等于 b&quot;</span></span><br><span class="line"><span class="keyword">elif</span> [ <span class="variable">$a</span> -gt <span class="variable">$b</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;a 大于 b&quot;</span></span><br><span class="line"><span class="keyword">elif</span> [ <span class="variable">$a</span> -lt <span class="variable">$b</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;a 小于 b&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;没有符合的条件&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">1234567891011121314</span><br></pre></td></tr></table></figure><p>输出结果：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">a</span> 小于 <span class="selector-tag">b</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>if else语句经常与test命令结合使用，如下所示：</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">num1=<span class="symbol">$</span>[<span class="number">2</span>*<span class="number">3</span>]</span><br><span class="line">num2=<span class="symbol">$</span>[<span class="number">1</span>+<span class="number">5</span>]</span><br><span class="line"><span class="keyword">if</span> test <span class="symbol">$</span>[num1] -<span class="keyword">eq</span> <span class="symbol">$</span>[num2]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    echo <span class="string">&#x27;两个数字相等!&#x27;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    echo <span class="string">&#x27;两个数字不相等!&#x27;</span></span><br><span class="line">fi</span><br><span class="line"><span class="number">12345678</span></span><br></pre></td></tr></table></figure><p>输出结果：</p><figure class="highlight erlang-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">两个数字相等!</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><h4 id="for循环">for循环</h4><p>for循环一般格式为：</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">for var in item1 item2 <span class="string">...</span> itemN</span><br><span class="line">do</span><br><span class="line">    <span class="keyword">command</span>1</span><br><span class="line">    <span class="keyword">command</span>2</span><br><span class="line">    <span class="string">...</span></span><br><span class="line">    <span class="keyword">command</span>N</span><br><span class="line">done</span><br><span class="line">1234567</span><br></pre></td></tr></table></figure><p>写成一行：</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">for var in item1 item2 <span class="string">...</span> itemN; do <span class="keyword">command</span>1; <span class="keyword">command</span>2… done;</span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>例如，顺序输出当前列表中的数字：</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">for</span> loop in <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span></span><br><span class="line"><span class="attribute">do</span></span><br><span class="line">    <span class="attribute">echo</span> <span class="string">&quot;The value is: $loop&quot;</span></span><br><span class="line"><span class="attribute">done</span></span><br><span class="line"><span class="attribute">1234</span></span><br></pre></td></tr></table></figure><p>输出结果：</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">The value <span class="keyword">is</span>: <span class="number">1</span></span><br><span class="line">The value <span class="keyword">is</span>: <span class="number">2</span></span><br><span class="line">The value <span class="keyword">is</span>: <span class="number">3</span></span><br><span class="line">The value <span class="keyword">is</span>: <span class="number">4</span></span><br><span class="line">The value <span class="keyword">is</span>: <span class="number">5</span></span><br><span class="line"><span class="number">12345</span></span><br></pre></td></tr></table></figure><p>顺序输出字符串中的字符：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> str <span class="keyword">in</span> <span class="string">&#x27;This is a string&#x27;</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$str</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">1234</span><br></pre></td></tr></table></figure><p>输出结果：</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">This <span class="keyword">is</span> a <span class="built_in">string</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><h4 id="while循环">while循环</h4><p>while循环格式为：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> condition</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">command</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">1234</span><br></pre></td></tr></table></figure><p>示例：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">int=1</span><br><span class="line"><span class="keyword">while</span>(( <span class="variable">$int</span>&lt;=<span class="number">5</span> ))</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$int</span></span><br><span class="line">    <span class="built_in">let</span> <span class="string">&quot;int++&quot;</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">1234567</span><br></pre></td></tr></table></figure><p>运行脚本，输出：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">12345</span><br></pre></td></tr></table></figure><p>while循环可用于读取键盘信息。下面的例子中，输入信息被设置为变量FILM，按<code>Ctrl-D</code>结束循环。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;按下 &lt;CTRL-D&gt; 退出&#x27;</span></span><br><span class="line"><span class="built_in">echo</span> -n <span class="string">&#x27;输入你最喜欢的网站名: &#x27;</span></span><br><span class="line"><span class="keyword">while</span> <span class="built_in">read</span> FILM</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;是的！<span class="variable">$FILM</span> 是一个好网站&quot;</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">123456</span><br></pre></td></tr></table></figure><p>运行脚本，输出类似下面：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">按下 <span class="tag">&lt;<span class="name">CTRL-D</span>&gt;</span> 退出</span><br><span class="line">输入你最喜欢的网站名:淘宝</span><br><span class="line">是的！淘宝 是一个好网站</span><br><span class="line">123</span><br></pre></td></tr></table></figure><h4 id="无限循环">无限循环</h4><p>无限循环语法格式：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> :</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">command</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">1234</span><br></pre></td></tr></table></figure><p>或者</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> <span class="literal">true</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">command</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">1234</span><br></pre></td></tr></table></figure><p>或者</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">for (( <span class="comment">; ; ))</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><h4 id="until-循环">until 循环</h4><p>until 循环执行一系列命令直至条件为 true 时停止。</p><p>until 循环与 while 循环在处理方式上刚好相反。</p><p>一般 while 循环优于 until 循环，但在某些时候—也只是极少数情况下，until 循环更加有用。</p><p>until 语法格式:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">until</span> condition</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">command</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">1234</span><br></pre></td></tr></table></figure><p>condition 一般为条件表达式，如果返回值为 false，则继续执行循环体内的语句，否则跳出循环。</p><p>以下实例我们使用 until 命令来输出 0 ~ 9 的数字：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">a=0</span><br><span class="line"></span><br><span class="line"><span class="keyword">until</span> [ ! <span class="variable">$a</span> -lt 10 ]</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="variable">$a</span></span><br><span class="line">   a=`<span class="built_in">expr</span> <span class="variable">$a</span> + 1`</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">123456789</span><br></pre></td></tr></table></figure><p>运行结果：</p><p>输出结果为：</p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="number">6</span></span><br><span class="line"><span class="number">7</span></span><br><span class="line"><span class="number">8</span></span><br><span class="line"><span class="number">9</span></span><br><span class="line"><span class="number">12345678910</span></span><br></pre></td></tr></table></figure><h4 id="case">case</h4><p>Shell case语句为多选择语句。可以用case语句匹配一个值与一个模式，如果匹配成功，执行相匹配的命令。case语句格式如下：</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">case 值 in</span><br><span class="line">模式1)</span><br><span class="line">    <span class="keyword">command</span>1</span><br><span class="line">    <span class="keyword">command</span>2</span><br><span class="line">    <span class="string">...</span></span><br><span class="line">    <span class="keyword">command</span>N</span><br><span class="line">    ;;</span><br><span class="line">模式2）</span><br><span class="line">    <span class="keyword">command</span>1</span><br><span class="line">    <span class="keyword">command</span>2</span><br><span class="line">    <span class="string">...</span></span><br><span class="line">    <span class="keyword">command</span>N</span><br><span class="line">    ;;</span><br><span class="line">esac</span><br><span class="line">1234567891011121314</span><br></pre></td></tr></table></figure><p>下面的脚本提示输入1到4，与每一种模式进行匹配：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;输入 1 到 4 之间的数字:&#x27;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;你输入的数字为:&#x27;</span></span><br><span class="line"><span class="built_in">read</span> aNum</span><br><span class="line"><span class="keyword">case</span> <span class="variable">$aNum</span> <span class="keyword">in</span></span><br><span class="line">    1)  <span class="built_in">echo</span> <span class="string">&#x27;你选择了 1&#x27;</span></span><br><span class="line">    ;;</span><br><span class="line">    2)  <span class="built_in">echo</span> <span class="string">&#x27;你选择了 2&#x27;</span></span><br><span class="line">    ;;</span><br><span class="line">    3)  <span class="built_in">echo</span> <span class="string">&#x27;你选择了 3&#x27;</span></span><br><span class="line">    ;;</span><br><span class="line">    4)  <span class="built_in">echo</span> <span class="string">&#x27;你选择了 4&#x27;</span></span><br><span class="line">    ;;</span><br><span class="line">    *)  <span class="built_in">echo</span> <span class="string">&#x27;你没有输入 1 到 4 之间的数字&#x27;</span></span><br><span class="line">    ;;</span><br><span class="line"><span class="keyword">esac</span></span><br><span class="line">123456789101112131415</span><br></pre></td></tr></table></figure><p>输入不同的内容，会有不同的结果，例如：</p><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">输入 1 到 4 之间的数字</span><span class="punctuation">:</span></span><br><span class="line"><span class="attribute">你输入的数字为</span><span class="punctuation">:</span></span><br><span class="line">3</span><br><span class="line">你选择了 3</span><br><span class="line">1234</span><br></pre></td></tr></table></figure><h4 id="跳出循环">跳出循环</h4><p>在循环过程中，有时候需要在未达到循环结束条件时强制跳出循环，Shell使用两个命令来实现该功能：break和continue。</p><p>break命令允许跳出所有循环（终止执行后面的所有循环）。</p><p>下面的例子中，脚本进入死循环直至用户输入数字大于5。要跳出这个循环，返回到shell提示符下，需要使用break命令。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="keyword">while</span> :</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> -n <span class="string">&quot;输入 1 到 5 之间的数字:&quot;</span></span><br><span class="line">    <span class="built_in">read</span> aNum</span><br><span class="line">    <span class="keyword">case</span> <span class="variable">$aNum</span> <span class="keyword">in</span></span><br><span class="line">        1|2|3|4|5) <span class="built_in">echo</span> <span class="string">&quot;你输入的数字为 <span class="variable">$aNum</span>!&quot;</span></span><br><span class="line">        ;;</span><br><span class="line">        *) <span class="built_in">echo</span> <span class="string">&quot;你输入的数字不是 1 到 5 之间的! 游戏结束&quot;</span></span><br><span class="line">            <span class="built_in">break</span></span><br><span class="line">        ;;</span><br><span class="line">    <span class="keyword">esac</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">12345678910111213</span><br></pre></td></tr></table></figure><p>执行以上代码，输出结果为：</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">输入<span class="number"> 1 </span>到<span class="number"> 5 </span>之间的数字:3</span><br><span class="line">你输入的数字为 3!</span><br><span class="line">输入<span class="number"> 1 </span>到<span class="number"> 5 </span>之间的数字:7</span><br><span class="line">你输入的数字不是<span class="number"> 1 </span>到<span class="number"> 5 </span>之间的! 游戏结束</span><br><span class="line">1234</span><br></pre></td></tr></table></figure><p>continue命令与break命令类似，只有一点差别，它不会跳出所有循环，仅仅跳出当前循环。</p><h3 id="Shell输入-输出重定向">Shell输入/输出重定向</h3><p>重定向命令列表如下：</p><table><thead><tr><th>命令</th><th>说明</th></tr></thead><tbody><tr><td>command &gt; file</td><td>将输出重定向到 file。</td></tr><tr><td>command &lt; file</td><td>将输入重定向到 file。</td></tr><tr><td>command &gt;&gt; file</td><td>将输出以追加的方式重定向到 file。</td></tr><tr><td>n &gt; file</td><td>将文件描述符为 n 的文件重定向到 file。</td></tr><tr><td>n &gt;&gt; file</td><td>将文件描述符为 n 的文件以追加的方式重定向到 file。</td></tr><tr><td>n &gt;&amp; m</td><td>将输出文件 m 和 n 合并。</td></tr><tr><td>n &lt;&amp; m</td><td>将输入文件 m 和 n 合并。</td></tr><tr><td>&lt;&lt; tag</td><td>将开始标记 tag 和结束标记 tag 之间的内容作为输入。</td></tr></tbody></table><blockquote><p>需要注意的是文件描述符 0 通常是标准输入（STDIN），1 是标准输出（STDOUT），2 是标准错误输出（STDERR）。</p></blockquote><hr><h4 id="输出重定向">输出重定向</h4><p>重定向一般通过在命令间插入特定的符号来实现。特别的，这些符号的语法如下所示:</p><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">comma<span class="symbol">nd1</span> &gt; file<span class="number">1</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>上面这个命令执行command1然后将输出的内容存入file1。</p><p>注意任何file1内的已经存在的内容将被新内容替代。如果要将新内容添加在文件末尾，请使用&gt;&gt;操作符。</p><p>输出重定向会覆盖文件内容：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> <span class="string">&quot;www.baidu.com&quot;</span> &gt; <span class="built_in">users</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> <span class="built_in">users</span></span></span><br><span class="line">www.baidu.com</span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash">1234</span></span><br></pre></td></tr></table></figure><p>如果不希望文件内容被覆盖，可以使用 &gt;&gt; 追加到文件末尾，例如：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> <span class="string">&quot;www.baidu.com&quot;</span> &gt;&gt; <span class="built_in">users</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> <span class="built_in">users</span></span></span><br><span class="line">www.baidu.com</span><br><span class="line">www.baidu.com</span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash">12345</span></span><br></pre></td></tr></table></figure><h4 id="输入重定向">输入重定向</h4><p>和输出重定向一样，Unix 命令也可以从文件获取输入，语法为：</p><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">comma<span class="symbol">nd1</span> &lt; file<span class="number">1</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>这样，本来需要从键盘获取输入的命令会转移到文件读取内容。</p><p>注意：输出重定向是大于号(&gt;)，输入重定向是小于号(&lt;)。</p><p>统计 users 文件的行数,执行以下命令：</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">python<span class="variable">@ubuntu</span><span class="symbol">:~/test</span><span class="variable">$ </span>wc -l test </span><br><span class="line"><span class="number">4</span> test</span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure><p>也可以将输入重定向到 users 文件：</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">python<span class="variable">@ubuntu</span><span class="symbol">:~/test</span><span class="variable">$ </span>wc -l &lt;test</span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure><p>注意：上面两个例子的结果不同：第一个例子，会输出文件名；第二个不会，因为它仅仅知道从标准输入读取内容。</p><p>同时替换输入和输出，执行command1，从文件infile读取内容，然后将输出写入到outfile中:</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">command1 &lt; <span class="keyword">infile</span> &gt; <span class="keyword">outfile</span></span><br><span class="line">1</span><br></pre></td></tr></table></figure><h4 id="重定向深入讲解">重定向深入讲解</h4><p>一般情况下，每个 Unix/Linux 命令运行时都会打开三个文件：</p><ul class="lvl-0"><li class="lvl-2"><p>标准输入文件(stdin)：stdin的文件描述符为0，Unix程序默认从stdin读取数据。</p></li><li class="lvl-2"><p>标准输出文件(stdout)：stdout 的文件描述符为1，Unix程序默认向stdout输出数据。</p></li><li class="lvl-2"><p>标准错误文件(stderr)：stderr的文件描述符为2，Unix程序会向stderr流中写入错误信息。</p></li></ul><p>默认情况下，command &gt; file 将 stdout 重定向到 file，command &lt; file 将stdin 重定向到 file。</p><p>如果希望 stderr 重定向到 file，可以这样写：</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="keyword">command</span> <span class="number">2</span> &gt; <span class="keyword">file</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>如果希望 stderr 追加到 file 文件末尾，可以这样写：</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="keyword">command</span> <span class="number">2</span> &gt;&gt; <span class="keyword">file</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p><strong>2</strong> 表示标准错误文件(stderr)。</p><p>如果希望将 stdout 和 stderr 合并后重定向到 file，可以这样写：</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="keyword">command</span> &gt; <span class="keyword">file</span> <span class="number">2</span>&gt;&amp;<span class="number">1</span></span><br><span class="line">或者</span><br><span class="line">$ <span class="keyword">command</span> &gt;&gt; <span class="keyword">file</span> <span class="number">2</span>&gt;&amp;<span class="number">1</span></span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure><p>如果希望对 stdin 和 stdout 都重定向，可以这样写：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">command</span> &lt; file1 &gt;file2</span></span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>command 命令将 stdin 重定向到 file1，将 stdout 重定向到 file2。</p><h4 id="Here-Document">Here Document</h4><p>Here Document 是 Shell 中的一种特殊的重定向方式，用来将输入重定向到一个交互式 Shell 脚本或程序。</p><p>它的基本的形式如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">command</span> &lt;&lt; <span class="string">delimiter</span></span><br><span class="line"><span class="string">    document</span></span><br><span class="line"><span class="string">delimiter</span></span><br><span class="line">123</span><br></pre></td></tr></table></figure><p>它的作用是将两个 delimiter 之间的内容(document) 作为输入传递给 command。</p><p>注意：结尾的delimiter 一定要顶格写，前面不能有任何字符，后面也不能有任何字符，包括空格和 tab 缩进。</p><p>在命令行中通过 wc -l 命令计算 Here Document 的行数：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">wc</span> -l &lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string">    欢迎来到</span></span><br><span class="line"><span class="string">    菜鸟教程</span></span><br><span class="line"><span class="string">    www.runoob.com</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line">3          <span class="comment"># 输出结果为 3 行</span></span><br><span class="line">$</span><br><span class="line">1234567</span><br></pre></td></tr></table></figure><h4 id="dev-null-文件">/dev/null 文件</h4><p>如果希望执行某个命令，但又不希望在屏幕上显示输出结果，那么可以将输出重定向到 /dev/null：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">command</span> &gt; /dev/null</span></span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>/dev/null 是一个特殊的文件，写入到它的内容都会被丢弃；如果尝试从该文件读取内容，那么什么也读不到。但是 /dev/null 文件非常有用，将命令的输出重定向到它，会起到&quot;禁止输出&quot;的效果。</p><p>如果希望屏蔽 stdout 和 stderr，可以这样写：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">command</span> &gt; /dev/null 2&gt;&amp;1</span></span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>0 是标准输入（STDIN），1 是标准输出（STDOUT），2 是标准错误输出（STDERR）。</p><h3 id="实例">实例</h3><h4 id="杨辉三角：">杨辉三角：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">test</span> -z <span class="variable">$1</span>) ;<span class="keyword">then</span> </span><br><span class="line"> <span class="built_in">read</span> -p <span class="string">&quot;Input high Int Lines:&quot;</span> high </span><br><span class="line"><span class="keyword">else</span> </span><br><span class="line"> high=<span class="variable">$1</span> </span><br><span class="line"><span class="keyword">fi</span> </span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">test</span> -z <span class="variable">$2</span>) ;<span class="keyword">then</span> </span><br><span class="line"> space=4</span><br><span class="line"><span class="keyword">else</span> </span><br><span class="line"> space=<span class="variable">$2</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">printspace</span></span>()&#123;</span><br><span class="line">  <span class="comment">#空位填充</span></span><br><span class="line">  <span class="keyword">for</span>((z=<span class="number">1</span>;z&lt;=<span class="variable">$1</span>;z++));<span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> -n <span class="string">&quot; &quot;</span></span><br><span class="line">  <span class="keyword">done</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">a[0]=1     </span><br><span class="line"><span class="keyword">for</span>((i=<span class="number">0</span>;i&lt;=high;i++));<span class="keyword">do</span></span><br><span class="line">  <span class="comment">#产生当前列数据数组</span></span><br><span class="line">  <span class="keyword">for</span> ((j=<span class="variable">$i</span>;j&gt;<span class="number">0</span>;j--));<span class="keyword">do</span> </span><br><span class="line">    ((a[<span class="variable">$j</span>]+=a[<span class="variable">$j</span>-<span class="number">1</span>])) </span><br><span class="line">  <span class="keyword">done</span></span><br><span class="line">  printspace $(((<span class="variable">$high</span>-<span class="variable">$i</span>)*<span class="variable">$space</span>/<span class="number">2</span>))</span><br><span class="line">  <span class="keyword">for</span> ((j=<span class="number">0</span>;j&lt;=<span class="variable">$i</span>;j++));<span class="keyword">do</span></span><br><span class="line">    num=$((<span class="variable">$space</span>-<span class="variable">$&#123;#a[$j]&#125;</span>))</span><br><span class="line">    printspace $((<span class="variable">$num</span>/<span class="number">2</span>))</span><br><span class="line">    <span class="built_in">echo</span> -n <span class="variable">$&#123;a[$j]&#125;</span></span><br><span class="line">    printspace $((<span class="variable">$num</span>-<span class="variable">$num</span>/<span class="number">2</span>))</span><br><span class="line">  <span class="keyword">done</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">1234567891011121314151617181920212223242526272829303132333435</span><br></pre></td></tr></table></figure><h4 id="sum-max">sum()&amp;max():</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;shell的函数返回值只能为0~255的整数，高位自动丢弃&quot;</span></span><br><span class="line"><span class="function"><span class="title">sum</span></span>()&#123;</span><br><span class="line"> <span class="built_in">sum</span>=0</span><br><span class="line"> <span class="keyword">for</span> i <span class="keyword">in</span> <span class="variable">$@</span></span><br><span class="line"> <span class="keyword">do</span></span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">test</span> <span class="variable">$i</span> -ne <span class="variable">$1</span>;<span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> -n <span class="string">&quot;+&quot;</span></span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line">  <span class="built_in">echo</span> -n <span class="string">&quot;<span class="variable">$i</span>&quot;</span></span><br><span class="line">  <span class="built_in">sum</span>=$((<span class="variable">$sum</span>+<span class="variable">$i</span>))</span><br><span class="line"> <span class="keyword">done</span></span><br><span class="line"> <span class="built_in">echo</span> <span class="string">&quot;=<span class="variable">$sum</span>&quot;</span></span><br><span class="line"> <span class="built_in">return</span> $((<span class="variable">$sum</span>))</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">sum</span> <span class="variable">$@</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;‘sum()’函数返回值：&quot;</span>$?</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">max</span></span>()&#123;</span><br><span class="line"> max=0</span><br><span class="line"> <span class="keyword">for</span> i <span class="keyword">in</span> <span class="variable">$@</span>;<span class="keyword">do</span></span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">test</span> <span class="variable">$i</span> -ge <span class="variable">$max</span>;<span class="keyword">then</span></span><br><span class="line">    max=<span class="variable">$i</span></span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line"> <span class="keyword">done</span></span><br><span class="line"> <span class="built_in">echo</span> <span class="string">&quot;参数最大值：<span class="variable">$max</span>&quot;</span></span><br><span class="line"> <span class="built_in">return</span> $((<span class="variable">$max</span>))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">max <span class="variable">$@</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;‘max()’函数返回值：&quot;</span>$?</span><br><span class="line"></span><br><span class="line">12345678910111213141516171819202122232425262728293031323334</span><br></pre></td></tr></table></figure><h4 id="99乘法表：">99乘法表：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> &#123;1..9&#125;;<span class="keyword">do</span></span><br><span class="line"> <span class="keyword">for</span>((j=<span class="number">1</span>;j&lt;=i;j++));<span class="keyword">do</span></span><br><span class="line">  <span class="built_in">echo</span> -en <span class="string">&quot;<span class="variable">$i</span>*<span class="variable">$j</span>=<span class="subst">$(($i*$j)</span>)\t&quot;</span></span><br><span class="line"> <span class="keyword">done</span></span><br><span class="line"> <span class="built_in">echo</span> <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> a <span class="keyword">in</span> &#123;1..9&#125;;<span class="keyword">do</span></span><br><span class="line">    <span class="keyword">for</span> b <span class="keyword">in</span> &#123;0..9&#125;;<span class="keyword">do</span></span><br><span class="line">        <span class="keyword">for</span> c <span class="keyword">in</span> &#123;0..9&#125;;<span class="keyword">do</span></span><br><span class="line">            number1=$((a*<span class="number">100</span>+b*<span class="number">10</span>+c))</span><br><span class="line">            number2=$((a**<span class="number">3</span>+b**<span class="number">3</span>+c**<span class="number">3</span>))</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">test</span> <span class="variable">$number1</span> -eq <span class="variable">$number2</span>; <span class="keyword">then</span></span><br><span class="line">                <span class="built_in">echo</span> <span class="string">&quot;Found number <span class="variable">$number1</span>&quot;</span></span><br><span class="line">            <span class="keyword">fi</span></span><br><span class="line">        <span class="keyword">done</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">1234567891011121314151617181920</span><br></pre></td></tr></table></figure><h2 id="文本编辑命令">文本编辑命令</h2><h3 id="cut命令">cut命令</h3><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">选项与参数：</span><br><span class="line"><span class="deletion">-d  ：后面接分隔字符。与 -f 一起使用；</span></span><br><span class="line"><span class="deletion">-f  ：依据 -d 的分隔字符将一段信息分割成为数段，用 -f 取出第几段的意思；</span></span><br><span class="line"><span class="deletion">-c  ：以字符 (characters) 的单位取出固定字符区间；</span></span><br><span class="line">1234</span><br></pre></td></tr></table></figure><p>cut以行为单位，根据分隔符把行分成若干列，这样就可以指定选取哪些列了。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cut</span> -d <span class="string">&#x27;分隔字符&#x27;</span> -f 选取的列数</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$PATH</span>|<span class="built_in">cut</span> -d <span class="string">&#x27;:&#x27;</span> -f 2  	--选取第2列</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$PATH</span>|<span class="built_in">cut</span> -d <span class="string">&#x27;:&#x27;</span> -f 3,5  	--选取第3列和第5列</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$PATH</span>|<span class="built_in">cut</span> -d <span class="string">&#x27;:&#x27;</span> -f 3-5  	--选取第3列到第5列</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$PATH</span>|<span class="built_in">cut</span> -d <span class="string">&#x27;:&#x27;</span> -f 3-   	--选取第3列到最后1列</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$PATH</span>|<span class="built_in">cut</span> -d <span class="string">&#x27;:&#x27;</span> -f 1-3,5	--选取第1到第3列还有第5列</span><br><span class="line">123456</span><br></pre></td></tr></table></figure><p>只显示/etc/passwd的用户和shell：</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#cat /etc/passwd | cut -d <span class="string">&#x27;:&#x27;</span> -f 1,7 </span></span><br><span class="line"><span class="symbol">root:</span><span class="keyword">/bin/</span>bash</span><br><span class="line"><span class="symbol">daemon:</span><span class="keyword">/bin/</span>sh</span><br><span class="line"><span class="symbol">bin:</span><span class="keyword">/bin/</span>sh</span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure><h3 id="sed命令">sed命令</h3><p>sed 可依照脚本的指令来处理、编辑文本文件。</p><p>Sed 主要用来自动编辑一个或多个文件、简化对文件的反复操作、编写转换程序等。</p><p>语法:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sed [-e<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-handlebars"><span class="language-xml">][-f<span class="tag">&lt;<span class="name">script文件</span>&gt;</span>][文本文件]</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">1</span></span></span><br></pre></td></tr></table></figure><p><strong>参数说明</strong>：</p><ul class="lvl-0"><li class="lvl-2"><p><code>-e &lt;script&gt;</code>以指定的script来处理输入的文本文件。</p></li><li class="lvl-2"><p><code>-f&lt;script文件&gt;</code>以指定的script文件来处理输入的文本文件。</p></li><li class="lvl-2"><p><code>-n</code>仅显示script处理后的结果，一般跟p动作搭配使用。</p></li><li class="lvl-2"><p><code>-i</code>使用处理后的结果修改文件。</p></li></ul><p><strong>动作说明</strong>：</p><ul class="lvl-0"><li class="lvl-2"><p>a：在指定行后面插入内容</p></li><li class="lvl-2"><p>i：在指定行前面插入内容</p></li><li class="lvl-2"><p>d：删除指定行</p></li><li class="lvl-2"><p>c ：替换指定行</p></li><li class="lvl-2"><p>p ：打印指定行的数据，通常需要跟<code>-n</code>选项搭配使用</p></li><li class="lvl-2"><p>s ：替换指定字符，兼容vim的替换语法，例如 1,20s/old/new/g</p></li></ul><h4 id="元字符集">元字符集</h4><p>sed支持一般的正则表达式，下面是支持的正则语法：<code>^</code>行的开始 如：/^sed/匹配所有以sed开头的行。<code>$</code>行的结束 如：/sed$/匹配所有以sed结尾的行。<code>.</code>匹配一个非换行符的任意字符 如：/s.d/匹配s后接一个任意字符，然后是d。<code>*</code>匹配零或多个字符 如：/*sed/匹配所有模板是一个或多个空格后紧跟sed的行。<code>[]</code>匹配一个指定范围内的字符，如<code>/[Ss]ed/</code>匹配sed和Sed。<code>[^]</code>匹配一个不在指定范围内的字符，如：<code>/[^A-RT-Z]ed/</code>匹配不包含A-R和T-Z的一个字母开头，紧跟ed的行。<code>\(..\)</code>保存匹配的字符，如s/(love)able/\1rs，loveable被替换成lovers。<code>&amp;</code>保存搜索字符用来替换其他字符，如<code>s/love/**&amp;**/</code>，love这成<code>**love**</code>。<code>\&lt;</code>单词的开始，如:/&lt;love/匹配包含以love开头的单词的行。<code>\&gt;</code>单词的结束，如/love&gt;/匹配包含以love结尾的单词的行。<code>x\+</code>重复字符x，至少1次，如：<code>/o\+/</code>匹配至少有1个o的行。<code>x\&#123;m\&#125;</code>重复字符x，m次，如：<code>/o\&#123;5\&#125;/</code>匹配包含5个o的行。<code>x\&#123;m,\&#125;</code>重复字符x,至少m次，如：<code>/o\&#123;5,\&#125;/</code>匹配至少有5个o的行。<code>x\&#123;m,n\&#125;</code>重复字符x，至少m次，不多于n次，如：<code>/o\&#123;5,10\&#125;/</code>匹配5-10个o的行。</p><h4 id="a-i-在指定行位置添加行">a|i:在指定行位置添加行</h4><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">python<span class="variable">@xxx</span><span class="symbol">:~/test</span><span class="variable">$ </span>cat testfile              </span><br><span class="line"> <span class="title class_">LINUX</span>!  </span><br><span class="line"> <span class="title class_">Linux</span> is a free unix-type opterating system.  </span><br><span class="line"> <span class="title class_">This</span> is a linux testfile!  </span><br><span class="line"> <span class="title class_">Linux</span> test </span><br><span class="line"></span><br><span class="line">python<span class="variable">@xxx</span><span class="symbol">:~/test</span><span class="variable">$ </span>sed -e <span class="number">2</span>a\newline testfile </span><br><span class="line"> <span class="title class_">LINUX</span>!  </span><br><span class="line"> <span class="title class_">Linux</span> is a free unix-type opterating system.  </span><br><span class="line">newline</span><br><span class="line"> <span class="title class_">This</span> is a linux testfile!  </span><br><span class="line"> <span class="title class_">Linux</span> test </span><br><span class="line"> </span><br><span class="line"><span class="number">12345678910111213</span></span><br></pre></td></tr></table></figure><p>默认情况下<code>-e</code>参数可以省略：</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">python<span class="variable">@xxx</span><span class="symbol">:~/test</span><span class="variable">$ </span>cat testfile|sed <span class="string">&#x27;2a\newline&#x27;</span></span><br><span class="line"> <span class="title class_">LINUX</span>!  </span><br><span class="line"> <span class="title class_">Linux</span> is a free unix-type opterating system.  </span><br><span class="line">newline</span><br><span class="line"> <span class="title class_">This</span> is a linux testfile!  </span><br><span class="line"> <span class="title class_">Linux</span> test </span><br><span class="line"></span><br><span class="line">python<span class="variable">@xxx</span><span class="symbol">:~/test</span><span class="variable">$ </span>sed <span class="string">&#x27;2a newline&#x27;</span> testfile</span><br><span class="line"> <span class="title class_">LINUX</span>!  </span><br><span class="line"> <span class="title class_">Linux</span> is a free unix-type opterating system.  </span><br><span class="line">newline</span><br><span class="line"> <span class="title class_">This</span> is a linux testfile!  </span><br><span class="line"> <span class="title class_">Linux</span> test </span><br><span class="line"><span class="number">12345678910111213</span></span><br></pre></td></tr></table></figure><script>中的内容最好用单引号括起来，如果脚本内容不存在空白字符也可以省略单引号。

在第二行之前添加一行：

<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">python<span class="variable">@xxx</span><span class="symbol">:~/test</span><span class="variable">$ </span>sed <span class="string">&#x27;2i newline&#x27;</span> testfile </span><br><span class="line"> <span class="title class_">LINUX</span>!  </span><br><span class="line">newline</span><br><span class="line"> <span class="title class_">Linux</span> is a free unix-type opterating system.  </span><br><span class="line"> <span class="title class_">This</span> is a linux testfile!  </span><br><span class="line"> <span class="title class_">Linux</span> test </span><br><span class="line"><span class="number">123456</span></span><br></pre></td></tr></table></figure>

最后一行加入 `# This is a test`:

<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">python<span class="variable">@xxx</span><span class="symbol">:~/test</span><span class="variable">$ </span>sed <span class="string">&#x27;$a # This is a test&#x27;</span> testfile </span><br><span class="line"> <span class="title class_">LINUX</span>!  </span><br><span class="line"> <span class="title class_">Linux</span> is a free unix-type opterating system.  </span><br><span class="line"> <span class="title class_">This</span> is a linux testfile!  </span><br><span class="line"> <span class="title class_">Linux</span> test </span><br><span class="line"><span class="comment"># This is a test</span></span><br><span class="line"><span class="number">123456</span></span><br></pre></td></tr></table></figure>

同时添加多行：

<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">python<span class="variable">@xxx</span><span class="symbol">:~/test</span><span class="variable">$ </span>cat testfile|sed <span class="string">&#x27;2a\newline1\</span></span><br><span class="line"><span class="string">&gt; newline2&#x27;</span></span><br><span class="line"> <span class="title class_">LINUX</span>!  </span><br><span class="line"> <span class="title class_">Linux</span> is a free unix-type opterating system.  </span><br><span class="line">newline1</span><br><span class="line">newline2</span><br><span class="line"> <span class="title class_">This</span> is a linux testfile!  </span><br><span class="line"> <span class="title class_">Linux</span> test </span><br><span class="line"><span class="number">12345678</span></span><br></pre></td></tr></table></figure>

#### d:删除指定行

将 /etc/passwd 的内容列出行号，并将第 2~5 行删除！

<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="variable">@www</span> ~]<span class="comment"># nl /etc/passwd | sed &#x27;2,5d&#x27;</span></span><br><span class="line"><span class="number">1</span> <span class="symbol">root:</span><span class="symbol">x:</span><span class="number">0</span><span class="symbol">:</span><span class="number">0</span><span class="symbol">:root</span><span class="symbol">:/root</span><span class="symbol">:/bin/bash</span></span><br><span class="line"><span class="number">6</span> <span class="symbol">sync:</span><span class="symbol">x:</span><span class="number">5</span><span class="symbol">:</span><span class="number">0</span><span class="symbol">:sync</span><span class="symbol">:/sbin</span><span class="symbol">:/bin/sync</span></span><br><span class="line"><span class="number">7</span> <span class="symbol">shutdown:</span><span class="symbol">x:</span><span class="number">6</span><span class="symbol">:</span><span class="number">0</span><span class="symbol">:shutdown</span><span class="symbol">:/sbin</span><span class="symbol">:/sbin/shutdown</span></span><br><span class="line">.....(后面省略).....</span><br><span class="line"><span class="number">12345</span></span><br></pre></td></tr></table></figure>

只删除第2行：

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">nl</span> /etc/passwd | sed <span class="string">&#x27;2d&#x27;</span> </span><br><span class="line">1</span><br></pre></td></tr></table></figure>

删除第3到最后一行：

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">nl</span> /etc/passwd | sed <span class="string">&#x27;3,$d&#x27;</span> </span><br><span class="line">1</span><br></pre></td></tr></table></figure>

删除/etc/passwd所有包含`/usr/sbin/nologin`的行，其他行输出：

<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">python<span class="variable">@xxx</span><span class="symbol">:~/test</span><span class="variable">$ </span>nl /etc/passwd | sed  <span class="string">&#x27;/\/usr\/sbin\/nologin/d&#x27;</span></span><br><span class="line"><span class="number">1</span>  <span class="symbol">root:</span><span class="symbol">x:</span><span class="number">0</span><span class="symbol">:</span><span class="number">0</span><span class="symbol">:root</span><span class="symbol">:/root</span><span class="symbol">:/bin/bash</span></span><br><span class="line"><span class="number">5</span>  <span class="symbol">sync:</span><span class="symbol">x:</span><span class="number">4</span><span class="symbol">:</span><span class="number">65534</span><span class="symbol">:sync</span><span class="symbol">:/bin</span><span class="symbol">:/bin/sync</span></span><br><span class="line"><span class="number">19</span>  systemd-<span class="symbol">timesync:</span><span class="symbol">x:</span><span class="number">100</span><span class="symbol">:</span><span class="number">102</span><span class="symbol">:systemd</span> <span class="title class_">Time</span> <span class="title class_">Synchronization</span>,,,<span class="symbol">:/run/systemd</span><span class="symbol">:/bin/false</span></span><br><span class="line"><span class="number">20</span>  systemd-<span class="symbol">network:</span><span class="symbol">x:</span><span class="number">101</span><span class="symbol">:</span><span class="number">103</span><span class="symbol">:systemd</span> <span class="title class_">Network</span> <span class="title class_">Management</span>,,,<span class="symbol">:/run/systemd/netif</span><span class="symbol">:/bin/false</span></span><br><span class="line">....下面忽略</span><br><span class="line"><span class="number">123456</span></span><br></pre></td></tr></table></figure>

#### c:替换指定行

将第2-5行的内容替换成为『No 2-5 number』：

<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">python<span class="variable">@xxx</span><span class="symbol">:~/test</span><span class="variable">$ </span>nl /etc/passwd | sed <span class="string">&#x27;2,5c No 2-5 number&#x27;</span></span><br><span class="line"><span class="number">1</span>  <span class="symbol">root:</span><span class="symbol">x:</span><span class="number">0</span><span class="symbol">:</span><span class="number">0</span><span class="symbol">:root</span><span class="symbol">:/root</span><span class="symbol">:/bin/bash</span></span><br><span class="line"><span class="title class_">No</span> <span class="number">2</span><span class="number">-5</span> number</span><br><span class="line"><span class="number">6</span>  <span class="symbol">games:</span><span class="symbol">x:</span><span class="number">5</span><span class="symbol">:</span><span class="number">60</span><span class="symbol">:games</span><span class="symbol">:/usr/games</span><span class="symbol">:/usr/sbin/nologin</span></span><br><span class="line">.....(后面省略).....</span><br><span class="line"><span class="number">12345</span></span><br></pre></td></tr></table></figure>

#### p:仅显示指定行

不加`-n`选项时，除了输出匹配行，还同时会输出所有行，所以需要加`-n`选项。

仅列出 /etc/passwd 文件内的第 5-7 行：

<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">python<span class="variable">@xxx</span><span class="symbol">:~/test</span><span class="variable">$ </span>nl /etc/passwd | sed -n <span class="string">&#x27;5,7p&#x27;</span></span><br><span class="line"><span class="number">5</span>  <span class="symbol">sync:</span><span class="symbol">x:</span><span class="number">4</span><span class="symbol">:</span><span class="number">65534</span><span class="symbol">:sync</span><span class="symbol">:/bin</span><span class="symbol">:/bin/sync</span></span><br><span class="line"><span class="number">6</span>  <span class="symbol">games:</span><span class="symbol">x:</span><span class="number">5</span><span class="symbol">:</span><span class="number">60</span><span class="symbol">:games</span><span class="symbol">:/usr/games</span><span class="symbol">:/usr/sbin/nologin</span></span><br><span class="line"><span class="number">7</span>  <span class="symbol">man:</span><span class="symbol">x:</span><span class="number">6</span><span class="symbol">:</span><span class="number">12</span><span class="symbol">:man</span><span class="symbol">:/var/cache/man</span><span class="symbol">:/usr/sbin/nologin</span></span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure>

搜索 /etc/passwd有root关键字的行：

<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">python<span class="variable">@xxx</span><span class="symbol">:~/test</span><span class="variable">$ </span>cat /etc/passwd | sed -n <span class="string">&#x27;/root/p&#x27;</span>  </span><br><span class="line"><span class="symbol">root:</span><span class="symbol">x:</span><span class="number">0</span><span class="symbol">:</span><span class="number">0</span><span class="symbol">:root</span><span class="symbol">:/root</span><span class="symbol">:/bin/bash</span></span><br><span class="line">python<span class="variable">@xxx</span><span class="symbol">:~/test</span><span class="variable">$ </span>sed -n <span class="string">&#x27;/root/p&#x27;</span> /etc/passwd      </span><br><span class="line"><span class="symbol">root:</span><span class="symbol">x:</span><span class="number">0</span><span class="symbol">:</span><span class="number">0</span><span class="symbol">:root</span><span class="symbol">:/root</span><span class="symbol">:/bin/bash</span></span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure>

打印/etc/passwd有以root和bin开头之间的行：

<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">python<span class="variable">@xxx</span><span class="symbol">:~/test</span><span class="variable">$ </span>cat /etc/passwd | sed -n <span class="string">&#x27;/^root/,/^bin/p&#x27;</span></span><br><span class="line"><span class="symbol">root:</span><span class="symbol">x:</span><span class="number">0</span><span class="symbol">:</span><span class="number">0</span><span class="symbol">:root</span><span class="symbol">:/root</span><span class="symbol">:/bin/bash</span></span><br><span class="line"><span class="symbol">daemon:</span><span class="symbol">x:</span><span class="number">1</span><span class="symbol">:</span><span class="number">1</span><span class="symbol">:daemon</span><span class="symbol">:/usr/sbin</span><span class="symbol">:/usr/sbin/nologin</span></span><br><span class="line"><span class="symbol">bin:</span><span class="symbol">x:</span><span class="number">2</span><span class="symbol">:</span><span class="number">2</span><span class="symbol">:bin</span><span class="symbol">:/bin</span><span class="symbol">:/usr/sbin/nologin</span></span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure>

打印从第五行开始到第一个包含以`/var/mail`开始的行之间的所有行：

<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">python<span class="variable">@xxx</span><span class="symbol">:~/test</span><span class="variable">$ </span>nl /etc/passwd | sed -n <span class="string">&#x27;5,\/var\/mail/p&#x27;</span>   </span><br><span class="line">     <span class="number">5</span>  <span class="symbol">sync:</span><span class="symbol">x:</span><span class="number">4</span><span class="symbol">:</span><span class="number">65534</span><span class="symbol">:sync</span><span class="symbol">:/bin</span><span class="symbol">:/bin/sync</span></span><br><span class="line">     <span class="number">6</span>  <span class="symbol">games:</span><span class="symbol">x:</span><span class="number">5</span><span class="symbol">:</span><span class="number">60</span><span class="symbol">:games</span><span class="symbol">:/usr/games</span><span class="symbol">:/usr/sbin/nologin</span></span><br><span class="line">     <span class="number">7</span>  <span class="symbol">man:</span><span class="symbol">x:</span><span class="number">6</span><span class="symbol">:</span><span class="number">12</span><span class="symbol">:man</span><span class="symbol">:/var/cache/man</span><span class="symbol">:/usr/sbin/nologin</span></span><br><span class="line">     <span class="number">8</span>  <span class="symbol">lp:</span><span class="symbol">x:</span><span class="number">7</span><span class="symbol">:</span><span class="number">7</span><span class="symbol">:lp</span><span class="symbol">:/var/spool/lpd</span><span class="symbol">:/usr/sbin/nologin</span></span><br><span class="line">     <span class="number">9</span>  <span class="symbol">mail:</span><span class="symbol">x:</span><span class="number">8</span><span class="symbol">:</span><span class="number">8</span><span class="symbol">:mail</span><span class="symbol">:/var/mail</span><span class="symbol">:/usr/sbin/nologin</span></span><br><span class="line"><span class="number">123456</span></span><br></pre></td></tr></table></figure>

#### s:字符串替换

语法：

<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">sed</span> <span class="string">&#x27;s/要被取代的字串/新的字串/g&#x27;</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>

不论什么字符，紧跟着s命令的都被认为是新的分隔符.

`sed 's#10#100#g'`表示把所有10替换成100，“#”在这里是分隔符，代替了默认的“/”分隔符。

提取本机所有的ip地址：

<figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">[root@VM_0_9_centos ~]</span># ifconfig | grep &#x27;inet &#x27;</span><br><span class="line">        inet <span class="number">172</span>.<span class="number">16</span>.<span class="number">0</span>.<span class="number">9</span>  netmask <span class="number">255</span>.<span class="number">255</span>.<span class="number">240</span>.<span class="number">0</span>  broadcast <span class="number">172</span>.<span class="number">16</span>.<span class="number">15</span>.<span class="number">255</span></span><br><span class="line">        inet <span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>  netmask <span class="number">255</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">0</span></span><br><span class="line"><span class="string">[root@VM_0_9_centos ~]</span># ifconfig | grep &#x27;inet &#x27;|sed &#x27;s/^<span class="string">[^0-9]</span>*\(<span class="string">[0-9\.]</span>*\).*$/\<span class="number">1</span>/g&#x27;</span><br><span class="line"><span class="number">172.16.0.9</span></span><br><span class="line"><span class="number">127.0.0.1</span></span><br><span class="line"><span class="number">123456</span></span><br></pre></td></tr></table></figure>

对于以root和bin开头之间的行，每行的末尾添加sed test：

<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">python<span class="variable">@xxx</span><span class="symbol">:~/test</span><span class="variable">$ </span>cat /etc/passwd | sed <span class="string">&#x27;/^root/,/^bin/s/$/--sed test/&#x27;</span>  </span><br><span class="line"><span class="symbol">root:</span><span class="symbol">x:</span><span class="number">0</span><span class="symbol">:</span><span class="number">0</span><span class="symbol">:root</span><span class="symbol">:/root</span><span class="symbol">:/bin/bash--sed</span> test</span><br><span class="line"><span class="symbol">daemon:</span><span class="symbol">x:</span><span class="number">1</span><span class="symbol">:</span><span class="number">1</span><span class="symbol">:daemon</span><span class="symbol">:/usr/sbin</span><span class="symbol">:/usr/sbin/nologin--sed</span> test</span><br><span class="line"><span class="symbol">bin:</span><span class="symbol">x:</span><span class="number">2</span><span class="symbol">:</span><span class="number">2</span><span class="symbol">:bin</span><span class="symbol">:/bin</span><span class="symbol">:/usr/sbin/nologin--sed</span> test</span><br><span class="line"><span class="symbol">sys:</span><span class="symbol">x:</span><span class="number">3</span><span class="symbol">:</span><span class="number">3</span><span class="symbol">:sys</span><span class="symbol">:/dev</span><span class="symbol">:/usr/sbin/nologin</span></span><br><span class="line"><span class="number">12345</span></span><br></pre></td></tr></table></figure>

#### y:单字符替换

跟s一样也用于替换，不过s替换的是整体，y替换的是每一字母对应的单个字母

把data中的第一行至第三行中的a替换成A，b替换成B，c替换成C：

<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">sed</span> &#x27;<span class="number">1</span>,<span class="number">3</span>y/abc/ABC/&#x27; data </span><br><span class="line"><span class="attribute">1</span></span><br></pre></td></tr></table></figure>

示例：

<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">python<span class="variable">@ubuntu</span><span class="symbol">:~/test</span><span class="variable">$ </span>echo <span class="string">&quot;123&quot;</span> | sed <span class="string">&#x27;y/13/34/&#x27;</span> </span><br><span class="line"><span class="number">324</span></span><br><span class="line">python<span class="variable">@ubuntu</span><span class="symbol">:~/test</span><span class="variable">$ </span>echo <span class="string">&quot;axxbxxcxx&quot;</span> | sed <span class="string">&#x27;y/abc/123/&#x27;</span></span><br><span class="line"><span class="number">1</span>xx2xx3xx</span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure>

#### `hHgG`模式空间&保持空间

h命令是将当前模式空间中内容覆盖至保持空间，H命令是将当前模式空间中的内容追加至保持空间

g命令是将当前保持空间中内容覆盖至模式空间，G命令是将当前保持空间中的内容追加至模式空间

模拟tac命令：

<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">python@ubuntu:~/<span class="keyword">test</span>$ <span class="keyword">cat</span> <span class="keyword">log</span>.txt </span><br><span class="line">2 this is a <span class="keyword">test</span></span><br><span class="line">3 Are you like awk</span><br><span class="line">This&#x27;s a <span class="keyword">test</span></span><br><span class="line">10 There are orange,apple,mongo</span><br><span class="line">python@ubuntu:~/<span class="keyword">test</span>$ <span class="keyword">cat</span> <span class="keyword">log</span>.txt |sed &#x27;1!<span class="keyword">G</span>;<span class="keyword">h</span>;$!<span class="keyword">d</span>&#x27;</span><br><span class="line">10 There are orange,apple,mongo</span><br><span class="line">This&#x27;s a <span class="keyword">test</span></span><br><span class="line">3 Are you like awk</span><br><span class="line">2 this is a <span class="keyword">test</span></span><br><span class="line">12345678910</span><br></pre></td></tr></table></figure>

1!G第1行不 执行“G”命令，从第2行开始执行。

$!d，最后一行不删除（保留最后1行）

下图P表示模式空间，H代表保持空间：

![img](【Linux】总结/91dbc444c51cbbae15cad1803b3c078b.png)

递增序列：

<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">python<span class="variable">@ubuntu</span><span class="symbol">:~/test</span><span class="variable">$ </span>seq <span class="number">3</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line">python<span class="variable">@ubuntu</span><span class="symbol">:~/test</span><span class="variable">$ </span>seq <span class="number">3</span>|sed <span class="string">&#x27;H;g&#x27;</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">12345678910111213</span></span><br></pre></td></tr></table></figure>

#### 多次指定`-e`选项进行多点编辑

删除/etc/passwd第三行到末尾的数据，并把bash替换为blueshell：

<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">nl /etc/passwd | sed -e <span class="string">&#x27;3,$d&#x27;</span> -e <span class="string">&#x27;s/bash/blueshell/&#x27;</span></span><br><span class="line"><span class="number">1</span>  <span class="symbol">root:</span><span class="symbol">x:</span><span class="number">0</span><span class="symbol">:</span><span class="number">0</span><span class="symbol">:root</span><span class="symbol">:/root</span><span class="symbol">:/bin/blueshell</span></span><br><span class="line"><span class="number">2</span>  <span class="symbol">daemon:</span><span class="symbol">x:</span><span class="number">1</span><span class="symbol">:</span><span class="number">1</span><span class="symbol">:daemon</span><span class="symbol">:/usr/sbin</span><span class="symbol">:/bin/sh</span></span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure>

删除一个文件以#开头的行和空行：

<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">python<span class="variable">@xxx</span><span class="symbol">:~/test</span><span class="variable">$ </span>nl abc -ba</span><br><span class="line">     <span class="number">1</span></span><br><span class="line">     <span class="number">2</span>  b</span><br><span class="line">     <span class="number">3</span>  a</span><br><span class="line">     <span class="number">4</span></span><br><span class="line">     <span class="number">5</span>  <span class="comment"># aaaa</span></span><br><span class="line">     <span class="number">6</span></span><br><span class="line">     <span class="number">7</span>  ddd</span><br><span class="line">     <span class="number">8</span></span><br><span class="line">     <span class="number">9</span>  <span class="comment"># sss</span></span><br><span class="line">    <span class="number">10</span>  eeee</span><br><span class="line">    <span class="number">11</span></span><br><span class="line">python<span class="variable">@xxx</span><span class="symbol">:~/test</span><span class="variable">$ </span>sed -e <span class="string">&#x27;/^#/d&#x27;</span> -e <span class="string">&#x27;/^$/d&#x27;</span> abc</span><br><span class="line">b</span><br><span class="line">a</span><br><span class="line">ddd</span><br><span class="line">eeee</span><br><span class="line"><span class="number">1234567891011121314151617</span></span><br></pre></td></tr></table></figure>

也可以通过`;`实现

<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">python<span class="variable">@ubuntu</span><span class="symbol">:~/test</span><span class="variable">$ </span>nl /etc/passwd | sed <span class="string">&#x27;3,$d;s/bash/blueshell/&#x27;</span></span><br><span class="line">     <span class="number">1</span>  <span class="symbol">root:</span><span class="symbol">x:</span><span class="number">0</span><span class="symbol">:</span><span class="number">0</span><span class="symbol">:root</span><span class="symbol">:/root</span><span class="symbol">:/bin/blueshell</span></span><br><span class="line">     <span class="number">2</span>  <span class="symbol">daemon:</span><span class="symbol">x:</span><span class="number">1</span><span class="symbol">:</span><span class="number">1</span><span class="symbol">:daemon</span><span class="symbol">:/usr/sbin</span><span class="symbol">:/usr/sbin/nologin</span></span><br><span class="line">python<span class="variable">@ubuntu</span><span class="symbol">:~/test</span><span class="variable">$ </span>sed <span class="string">&#x27;/^#/d;/^$/d&#x27;</span> abc</span><br><span class="line">b</span><br><span class="line">a</span><br><span class="line">ddd</span><br><span class="line">eeee</span><br><span class="line"><span class="number">12345678</span></span><br></pre></td></tr></table></figure>

#### 选项`-i`直接修改文件内容

默认情况下sed命令仅仅只是将处理结果显示在控制台，加`-i`选项则会修改文件内容。

将 regular_express.txt 内每一行结尾若为 . 则换成 !

<figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@www ~]# cat regular_express.txt </span><br><span class="line">taobao.</span><br><span class="line">google.</span><br><span class="line">taobao.</span><br><span class="line">facebook.</span><br><span class="line">zhihu-</span><br><span class="line">weibo-</span><br><span class="line">[root@www ~]# sed -i <span class="string">&#x27;s/\.$/\!/g&#x27;</span> regular_express.txt</span><br><span class="line">[root@www ~]# cat regular_express.txt </span><br><span class="line">taobao!</span><br><span class="line">google!</span><br><span class="line">taobao!</span><br><span class="line">facebook!</span><br><span class="line">zhihu-</span><br><span class="line">weibo-</span><br><span class="line"><span class="number">123456789101112131415</span></span><br></pre></td></tr></table></figure>

### awk命令

AWK是一种处理文本文件的语言，是一个强大的文本分析工具。

之所以叫AWK是因为其取了三位创始人 Alfred Aho，Peter Weinberger, 和 Brian Kernighan 的 Family Name 的首字符。

语法：

<figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">awk [选项参数] <span class="string">&#x27;script&#x27;</span> <span class="keyword">var</span>=value <span class="keyword">file</span>(s)</span><br><span class="line">或</span><br><span class="line">awk [选项参数] -f scriptfile <span class="keyword">var</span>=value <span class="keyword">file</span>(s)</span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure>

**选项参数说明：**

- -F fs or --field-separator fs
   指定输入文件折分隔符，fs是一个字符串或者是一个正则表达式，如-F:。
- -v var=value or --asign var=value
   赋值一个用户定义变量。
- -f scripfile or --file scriptfile
   从脚本文件中读取awk命令。

#### 基本用法

<figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;&#123;[pattern] action&#125;&#x27;</span> <span class="keyword">file</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>

每行按空格或TAB分割，输出文本中的1、4列：

<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">python<span class="variable">@ubuntu</span><span class="symbol">:~/test</span><span class="variable">$ </span>cat log.txt </span><br><span class="line"><span class="number">2</span> this is a test</span><br><span class="line"><span class="number">3</span> <span class="title class_">Are</span> you like awk</span><br><span class="line"><span class="title class_">This</span><span class="string">&#x27;s a test</span></span><br><span class="line"><span class="string">10 There are orange,apple,mongo</span></span><br><span class="line"><span class="string">python@ubuntu:~/test$ awk &#x27;</span>&#123;print <span class="variable">$1</span>,<span class="variable">$4</span>&#125;<span class="string">&#x27; log.txt</span></span><br><span class="line"><span class="string">2 a</span></span><br><span class="line"><span class="string">3 like</span></span><br><span class="line"><span class="string">This&#x27;</span>s </span><br><span class="line"><span class="number">10</span> orange,apple,mongo</span><br><span class="line"><span class="number">12345678910</span></span><br></pre></td></tr></table></figure>

格式化输出：

<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">python<span class="variable">@ubuntu</span><span class="symbol">:~/test</span><span class="variable">$ </span>awk <span class="string">&#x27;&#123;printf &quot;%-8s %-10s\n&quot;,$1,$4&#125;&#x27;</span> log.txt</span><br><span class="line"><span class="number">2</span>        a         </span><br><span class="line"><span class="number">3</span>        like      </span><br><span class="line"><span class="title class_">This</span><span class="string">&#x27;s             </span></span><br><span class="line"><span class="string">1234</span></span><br></pre></td></tr></table></figure>

##### `-F`指定分割字符

<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">awk</span> -F  <span class="comment">#-F相当于内置变量FS, 指定分割字符</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>

使用:分割,取/etc/passwd文件每个用户对应shell：

<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">python<span class="meta">@ubuntu</span>:<span class="operator">~/</span>test$ awk <span class="operator">-</span><span class="type">F</span>: &#x27;&#123;print <span class="variable">$1</span>,<span class="variable">$7</span>&#125;&#x27;  <span class="regexp">/etc/</span>passwd </span><br><span class="line">root <span class="regexp">/bin/</span>bash</span><br><span class="line">daemon <span class="regexp">/usr/</span>sbin<span class="operator">/</span>nologin</span><br><span class="line">bin <span class="regexp">/usr/</span>sbin<span class="operator">/</span>nologin</span><br><span class="line">sys <span class="regexp">/usr/</span>sbin<span class="operator">/</span>nologin</span><br><span class="line">sync <span class="regexp">/bin/</span>sync</span><br><span class="line"># 或者使用内建变量</span><br><span class="line">python<span class="meta">@ubuntu</span>:<span class="operator">~/</span>test$ awk &#x27;<span class="type">BEGIN</span>&#123;<span class="type">FS</span><span class="operator">=</span><span class="string">&quot;:&quot;</span>&#125; &#123;print <span class="variable">$1</span>,<span class="variable">$7</span>&#125;&#x27;  <span class="regexp">/etc/</span>passwd  </span><br><span class="line">root <span class="regexp">/bin/</span>bash</span><br><span class="line">daemon <span class="regexp">/usr/</span>sbin<span class="operator">/</span>nologin</span><br><span class="line">bin <span class="regexp">/usr/</span>sbin<span class="operator">/</span>nologin</span><br><span class="line"><span class="number">1234567891011</span></span><br></pre></td></tr></table></figure>

同时使用:和/l两个分隔符分割/etc/passwd文件

<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">python<span class="variable">@ubuntu</span><span class="symbol">:~/test</span><span class="variable">$ </span>awk -F <span class="string">&#x27;[:\/]&#x27;</span> <span class="string">&#x27;&#123;print $1,$7&#125;&#x27;</span>  /etc/passwd      </span><br><span class="line">root root</span><br><span class="line">daemon usr</span><br><span class="line">bin bin</span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure>

##### `-v`设置变量

<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">awk</span> -v  <span class="comment"># 设置变量</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>

例子：

<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">python</span>@ubuntu:~/test$ cat log.txt </span><br><span class="line"><span class="attribute">2</span> this is a test</span><br><span class="line"><span class="attribute">3</span> Are you like awk</span><br><span class="line"><span class="attribute">This</span>&#x27;s a test</span><br><span class="line"><span class="attribute">10</span> There are orange,apple,mongo</span><br><span class="line"><span class="attribute">python</span>@ubuntu:~/test$ awk -va=<span class="number">1</span> &#x27;&#123;print $<span class="number">1</span>,$<span class="number">1</span>+a&#125;&#x27; log.txt</span><br><span class="line"><span class="attribute">2</span> <span class="number">3</span></span><br><span class="line"><span class="attribute">3</span> <span class="number">4</span></span><br><span class="line"><span class="attribute">This</span>&#x27;s <span class="number">1</span></span><br><span class="line"><span class="attribute">10</span> <span class="number">11</span></span><br><span class="line"><span class="attribute">python</span>@ubuntu:~/test$ awk -va=<span class="number">1</span> -vb=s &#x27;&#123;print $<span class="number">1</span>,$<span class="number">1</span>+a,$<span class="number">1</span>b&#125;&#x27; log.txt</span><br><span class="line"><span class="attribute">2</span> <span class="number">3</span> <span class="number">2</span>s</span><br><span class="line"><span class="attribute">3</span> <span class="number">4</span> <span class="number">3</span>s</span><br><span class="line"><span class="attribute">This</span>&#x27;s <span class="number">1</span> This&#x27;ss</span><br><span class="line"><span class="attribute">10</span> <span class="number">11</span> <span class="number">10</span>s</span><br><span class="line"><span class="attribute">123456789101112131415</span></span><br></pre></td></tr></table></figure>

##### `-f`指定awk脚本

<figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml">awk -f </span><span class="template-variable">&#123;awk脚本&#125;</span><span class="language-xml"> </span><span class="template-variable">&#123;文件名&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">1</span></span><br></pre></td></tr></table></figure>

脚本模块：

- BEGIN{ 这里面放的是执行前的语句 }
- END {这里面放的是处理完所有的行后要执行的语句 }
- {这里面放的是处理每一行时要执行的语句}

假设有这么一个文件（学生成绩表）：

<figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ cat score.txt</span><br><span class="line">Marry  <span class="number"> 2143 </span>78<span class="number"> 84 </span>77</span><br><span class="line">Jack   <span class="number"> 2321 </span>66<span class="number"> 78 </span>45</span><br><span class="line">Tom    <span class="number"> 2122 </span>48<span class="number"> 77 </span>71</span><br><span class="line">Mike   <span class="number"> 2537 </span>87<span class="number"> 97 </span>95</span><br><span class="line">Bob    <span class="number"> 2415 </span>40<span class="number"> 57 </span>62</span><br><span class="line">123456</span><br></pre></td></tr></table></figure>

awk脚本如下：

<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">$ cat cal.awk</span><br><span class="line"><span class="comment">#!/bin/awk -f</span></span><br><span class="line"><span class="comment">#运行前</span></span><br><span class="line">BEGIN &#123;</span><br><span class="line">    math = <span class="number">0</span></span><br><span class="line">    english = <span class="number">0</span></span><br><span class="line">    computer = <span class="number">0</span></span><br><span class="line"> </span><br><span class="line">    <span class="keyword">printf</span> <span class="string">&quot;NAME    NO.   MATH  ENGLISH  COMPUTER   TOTAL\n&quot;</span></span><br><span class="line">    <span class="keyword">printf</span> <span class="string">&quot;---------------------------------------------\n&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#运行中</span></span><br><span class="line">&#123;</span><br><span class="line">    math+=<span class="variable">$3</span></span><br><span class="line">    english+=<span class="variable">$4</span></span><br><span class="line">    computer+=<span class="variable">$5</span></span><br><span class="line">    <span class="keyword">printf</span> <span class="string">&quot;<span class="variable">%-</span>6s <span class="variable">%-</span>6s <span class="variable">%4d</span> <span class="variable">%8d</span> <span class="variable">%8d</span> <span class="variable">%8d</span>\n&quot;</span>, <span class="variable">$1</span>,<span class="variable">$2</span>,<span class="variable">$3</span>,<span class="variable">$4</span>,<span class="variable">$5</span>,<span class="variable">$3</span>+<span class="variable">$4</span>+<span class="variable">$5</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#运行后</span></span><br><span class="line">END &#123;</span><br><span class="line">    <span class="keyword">printf</span> <span class="string">&quot;---------------------------------------------\n&quot;</span></span><br><span class="line">    <span class="keyword">printf</span> <span class="string">&quot;  TOTAL:<span class="variable">%10d</span> <span class="variable">%8d</span> <span class="variable">%8d</span> \n&quot;</span>, math, english, computer</span><br><span class="line">    <span class="keyword">printf</span> <span class="string">&quot;AVERAGE:<span class="variable">%10</span>.2f <span class="variable">%8</span>.2f <span class="variable">%8</span>.2f\n&quot;</span>, math/NR, english/NR, computer/NR</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">123456789101112131415161718192021222324</span></span><br></pre></td></tr></table></figure>

我们来看一下执行结果：

<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ awk -f cal.awk score.txt</span><br><span class="line"><span class="section">NAME    NO.   MATH  ENGLISH  COMPUTER   TOTAL</span></span><br><span class="line"><span class="section">---------------------------------------------</span></span><br><span class="line">Marry  2143     78       84       77      239</span><br><span class="line">Jack   2321     66       78       45      189</span><br><span class="line">Tom    2122     48       77       71      196</span><br><span class="line">Mike   2537     87       97       95      279</span><br><span class="line"><span class="section">Bob    2415     40       57       62      159</span></span><br><span class="line"><span class="section">---------------------------------------------</span></span><br><span class="line"><span class="code">  TOTAL:       319      393      350</span></span><br><span class="line">AVERAGE:     63.80    78.60    70.00</span><br><span class="line">1234567891011</span><br></pre></td></tr></table></figure>

#### AWK工作原理

AWK 工作流程可分为三个部分：

- 读输入文件之前执行的代码段（由BEGIN关键字标识）。
- 主循环执行输入文件的代码段。
- 读输入文件之后的代码段（由END关键字标识）。

命令结构:

<figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml">awk &#x27;BEGIN</span><span class="template-variable">&#123; commands &#125;</span><span class="language-xml"> pattern</span><span class="template-variable">&#123; commands &#125;</span><span class="language-xml"> END</span><span class="template-variable">&#123; commands &#125;</span><span class="language-xml">&#x27;</span></span><br><span class="line"><span class="language-xml">1</span></span><br></pre></td></tr></table></figure>

下面的流程图描述出了 AWK 的工作流程：

![img](【Linux】总结/d45d394db034998c8059e647e321a13d.png)

- 1、通过关键字 BEGIN 执行 BEGIN 块的内容，即 BEGIN 后花括号 **{}** 的内容。
- 2、完成 BEGIN 块的执行，开始执行body块。
- 3、读入有 **\n** 换行符分割的记录。
- 4、将记录按指定的域分隔符划分域，填充域，**$0** 则表示所有域(即一行内容)，                                             **1                               ∗                               ∗                               表                               示                               第                               一                               个                               域                               ，                               ∗                               ∗                                      1\** 表示第一个域，\**                        1∗∗表示第一个域，∗∗n** 表示第 n 个域。
- 5、依次执行各 BODY 块，pattern 部分匹配该行内容成功后，才会执行 awk-commands 的内容。
- 6、循环读取并执行各行直到文件结束，完成body块执行。
- 7、开始 END 块执行，END 块可以输出最终结果。

##### 运算符

| 运算符                  | 描述                             |
| ----------------------- | -------------------------------- |
| = += -= *= /= %= ^= **= | 赋值                             |
| ?:                      | C条件表达式                      |
| \|\|                    | 逻辑或                           |
| &&                      | 逻辑与                           |
| ~ 和 !~                 | 匹配正则表达式和不匹配正则表达式 |
| < <= > >= != ==         | 关系运算符                       |
| 空格                    | 连接                             |
| + -                     | 加，减                           |
| * / %                   | 乘，除与求余                     |
| + - !                   | 一元加，减和逻辑非               |
| ^ ***                   | 求幂                             |
| ++ –                    | 增加或减少，作为前缀或后缀       |
| $                       | 字段引用                         |
| in                      | 数组成员                         |

**过滤第一列大于2的行**

<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ awk &#x27;$1&gt;2&#x27; <span class="built_in">log</span>.txt    <span class="meta">#命令</span></span><br><span class="line"><span class="number">3</span> Are you like awk</span><br><span class="line">This&#x27;s a test</span><br><span class="line">10 There are orange,apple,mongo</span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure>

**过滤第一列等于2的行**

<figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ awk <span class="string">&#x27;<span class="variable">$1</span>==2 &#123;print <span class="variable">$1</span>,<span class="variable">$3</span>&#125;&#x27;</span> log.txt    <span class="comment">#命令</span></span><br><span class="line"><span class="comment">#输出</span></span><br><span class="line"><span class="number">2</span> is</span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure>

**过滤第一列大于2并且第二列等于’Are’的行**

<figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ awk <span class="string">&#x27;<span class="variable">$1</span>&gt;2 &amp;&amp; <span class="variable">$2</span>==&quot;Are&quot; &#123;print <span class="variable">$1</span>,<span class="variable">$2</span>,<span class="variable">$3</span>&#125;&#x27;</span> log.txt    <span class="comment">#命令</span></span><br><span class="line"><span class="comment">#输出</span></span><br><span class="line"><span class="number">3</span> Are you</span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure>

**内建变量**

| 变量        | 描述                                                       |
| ----------- | ---------------------------------------------------------- |
| $n          | 当前记录的第n个字段，字段间由FS分隔                        |
| $0          | 完整的输入记录                                             |
| ARGC        | 命令行参数的数目                                           |
| ARGIND      | 命令行中当前文件的位置(从0开始算)                          |
| ARGV        | 包含命令行参数的数组                                       |
| CONVFMT     | 数字转换格式(默认值为%.6g)ENVIRON环境变量关联数组          |
| ERRNO       | 最后一个系统错误的描述                                     |
| FIELDWIDTHS | 字段宽度列表(用空格键分隔)                                 |
| FILENAME    | 当前文件名                                                 |
| FNR         | 各文件分别计数的行号                                       |
| FS          | 字段分隔符(默认是任何空格)                                 |
| IGNORECASE  | 如果为真，则进行忽略大小写的匹配                           |
| NF          | 一条记录的字段的数目                                       |
| NR          | 已经读出的记录数，就是行号，从1开始                        |
| OFMT        | 数字的输出格式(默认值是%.6g)                               |
| OFS         | 输出记录分隔符（输出换行符），输出时用指定的符号代替换行符 |
| ORS         | 输出记录分隔符(默认值是一个换行符)                         |
| RLENGTH     | 由match函数所匹配的字符串的长度                            |
| RS          | 记录分隔符(默认是一个换行符)                               |
| RSTART      | 由match函数所匹配的字符串的第一个位置                      |
| SUBSEP      | 数组下标分隔符(默认值是/034)                               |

格式化变量说明：

- %s 输出字符串
- %i 输出整数
- %f 输出浮点数

%-5s 格式为左对齐且宽度为5的字符串代替（-表示左对齐），不使用则是又对齐。
 %-4.2f 格式为左对齐宽度为4，保留两位小数。

<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">python@ubuntu:~/test$ awk &#x27;BEGIN&#123;printf <span class="string">&quot;%4s %4s %4s %4s %4s %4s %4s %4s %4s\n&quot;</span>,<span class="string">&quot;FILENAME&quot;</span>,<span class="string">&quot;ARGC&quot;</span>,<span class="string">&quot;FNR&quot;</span>,<span class="string">&quot;FS&quot;</span>,<span class="string">&quot;NF&quot;</span>,<span class="string">&quot;NR&quot;</span>,<span class="string">&quot;OFS&quot;</span>,<span class="string">&quot;ORS&quot;</span>,<span class="string">&quot;RS&quot;</span>;printf <span class="string">&quot;---------------------------------------------\n&quot;</span>&#125; &#123;printf <span class="string">&quot;%4s %4s %4s %4s %4s %4s %4s %4s %4s\n&quot;</span>,FILENAME,ARGC,FNR,FS,NF,NR,OFS,ORS,RS&#125;&#x27;  <span class="built_in">log</span>.txt</span><br><span class="line">FILENAME ARGC  FNR   FS   NF   NR  OFS  ORS   RS</span><br><span class="line"><span class="comment">---------------------------------------------</span></span><br><span class="line"><span class="built_in">log</span>.txt    <span class="number">2</span>    <span class="number">1</span>         <span class="number">5</span>    <span class="number">1</span>         </span><br><span class="line"><span class="built_in">log</span>.txt    <span class="number">2</span>    <span class="number">2</span>         <span class="number">5</span>    <span class="number">2</span>         </span><br><span class="line"><span class="built_in">log</span>.txt    <span class="number">2</span>    <span class="number">3</span>         <span class="number">3</span>    <span class="number">3</span>          </span><br><span class="line"><span class="built_in">log</span>.txt    <span class="number">2</span>    <span class="number">4</span>         <span class="number">4</span>    <span class="number">4</span>         </span><br><span class="line"></span><br><span class="line">python@ubuntu:~/test$ awk -F: &#x27;BEGIN&#123;printf <span class="string">&quot;%4s %4s %4s %4s %4s %4s %4s %4s %4s\n&quot;</span>,<span class="string">&quot;FILENAME&quot;</span>,<span class="string">&quot;ARGC&quot;</span>,<span class="string">&quot;FNR&quot;</span>,<span class="string">&quot;FS&quot;</span>,<span class="string">&quot;NF&quot;</span>,<span class="string">&quot;NR&quot;</span>,<span class="string">&quot;OFS&quot;</span>,<span class="string">&quot;ORS&quot;</span>,<span class="string">&quot;RS&quot;</span>;printf <span class="string">&quot;---------------------------------------------\n&quot;</span>&#125; &#123;printf <span class="string">&quot;%4s %4s %4s %4s %4s %4s %4s %4s %4s\n&quot;</span>,FILENAME,ARGC,FNR,FS,NF,NR,OFS,ORS,RS&#125;&#x27;  <span class="built_in">log</span>.txt</span><br><span class="line">FILENAME ARGC  FNR   FS   NF   NR  OFS  ORS   RS</span><br><span class="line"><span class="comment">---------------------------------------------</span></span><br><span class="line"><span class="built_in">log</span>.txt    <span class="number">2</span>    <span class="number">1</span>    :    <span class="number">1</span>    <span class="number">1</span>         </span><br><span class="line"><span class="built_in">log</span>.txt    <span class="number">2</span>    <span class="number">2</span>    :    <span class="number">1</span>    <span class="number">2</span>         </span><br><span class="line"><span class="built_in">log</span>.txt    <span class="number">2</span>    <span class="number">3</span>    :    <span class="number">1</span>    <span class="number">3</span>         </span><br><span class="line"><span class="built_in">log</span>.txt    <span class="number">2</span>    <span class="number">4</span>    :    <span class="number">1</span>    <span class="number">4</span>    </span><br><span class="line"><span class="number">123456789101112131415</span></span><br></pre></td></tr></table></figure>

##### 输出顺序号 NR, 匹配文本行号

<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">python</span>@ubuntu:~/test$ awk &#x27;&#123;print NR,FNR,$<span class="number">1</span>,$<span class="number">2</span>,$<span class="number">3</span>&#125;&#x27; log.txt</span><br><span class="line"><span class="attribute">1</span> <span class="number">1</span> <span class="number">2</span> this is</span><br><span class="line"><span class="attribute">2</span> <span class="number">2</span> <span class="number">3</span> Are you</span><br><span class="line"><span class="attribute">3</span> <span class="number">3</span> This&#x27;s a test</span><br><span class="line"><span class="attribute">4</span> <span class="number">4</span> <span class="number">10</span> There are</span><br><span class="line"><span class="attribute">12345</span></span><br></pre></td></tr></table></figure>

##### 指定输出分割符

<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">python<span class="variable">@ubuntu</span><span class="symbol">:~/test</span><span class="variable">$ </span>cat log.txt </span><br><span class="line"><span class="number">2</span> this is a test</span><br><span class="line"><span class="number">3</span> <span class="title class_">Are</span> you like awk</span><br><span class="line"><span class="title class_">This</span><span class="string">&#x27;s a test</span></span><br><span class="line"><span class="string">10 There are orange,apple,mongo</span></span><br><span class="line"><span class="string">python@ubuntu:~/test$ awk &#x27;</span>&#123;print <span class="variable">$1</span>,<span class="variable">$2</span>,<span class="variable">$5</span>&#125;<span class="string">&#x27; OFS=&quot; $ &quot;  log.txt</span></span><br><span class="line"><span class="string">2 $ this $ test</span></span><br><span class="line"><span class="string">3 $ Are $ awk</span></span><br><span class="line"><span class="string">This&#x27;</span>s <span class="variable">$ </span>a <span class="variable">$ </span></span><br><span class="line"><span class="number">10</span> <span class="variable">$ </span><span class="title class_">There</span> <span class="variable">$ </span></span><br><span class="line"><span class="number">12345678910</span></span><br></pre></td></tr></table></figure>

##### 忽略大小写

<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">$ awk &#x27;BEGIN&#123;IGNORECASE=1&#125; /this/&#x27; log.txt</span></span><br><span class="line"><span class="section">---------------------------------------------</span></span><br><span class="line">2 this is a test</span><br><span class="line">This&#x27;s a test</span><br><span class="line">1234</span><br></pre></td></tr></table></figure>

#### 正则字符串匹配

**~ 表示模式开始。// 中是模式。**

输出第二列包含 “th”，并打印第二列与第四列：

<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">python<span class="meta">@ubuntu</span>:~/test$ awk <span class="string">&#x27;<span class="subst">$2</span> ~ /th/ &#123;print <span class="subst">$2</span>,<span class="subst">$4</span>&#125;&#x27;</span> log.txt</span><br><span class="line"><span class="keyword">this</span> a</span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure>

输出包含"re"的行：

<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">python<span class="variable">@ubuntu</span><span class="symbol">:~/test</span><span class="variable">$ </span>awk <span class="string">&#x27;/re/&#x27;</span> log.txt</span><br><span class="line"><span class="number">3</span> <span class="title class_">Are</span> you like awk</span><br><span class="line"><span class="number">10</span> <span class="title class_">There</span> are orange,apple,mongo</span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure>

**!表示取反**

输出第二列不包含 “th”，并打印第二列与第四列：

<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">python<span class="variable">@ubuntu</span><span class="symbol">:~/test</span><span class="variable">$ </span>awk <span class="string">&#x27;$2 !~ /th/ &#123;print $2,$4&#125;&#x27;</span> log.txt</span><br><span class="line"><span class="title class_">Are</span> like</span><br><span class="line">a </span><br><span class="line"><span class="title class_">There</span> orange,apple,mongo</span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure>

输出不包含"re"的行：

<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">python<span class="variable">@ubuntu</span><span class="symbol">:~/test</span><span class="variable">$ </span>awk <span class="string">&#x27;!/re/&#x27;</span> log.txt</span><br><span class="line"><span class="number">2</span> this is a test</span><br><span class="line"><span class="title class_">This</span><span class="string">&#x27;s a test</span></span><br><span class="line"><span class="string">123</span></span><br></pre></td></tr></table></figure>

#### 一些实例

**计算文件大小**

<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">$ ls -l *.txt | awk &#x27;&#123;sum+=$6&#125; END &#123;print sum&#125;&#x27;</span></span><br><span class="line"><span class="section">--------------------------------------------------</span></span><br><span class="line">666581</span><br><span class="line">123</span><br></pre></td></tr></table></figure>

**从文件中找出长度大于80的行**

<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;length&gt;80&#x27; <span class="built_in">log</span>.txt</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>

**打印九九乘法表**

<figure class="highlight scilab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">seq <span class="number">9</span> | sed <span class="string">&#x27;H;g&#x27;</span> | awk -v RS=<span class="string">&#x27;&#x27;</span> <span class="string">&#x27;&#123;for(i=1;i&lt;=NF;i++)printf(&quot;</span>%dx%d=%d<span class="literal">%s</span><span class="string">&quot;, i, NR, i*NR, i==NR?&quot;</span>\n<span class="string">&quot;:&quot;</span>\t<span class="string">&quot;)&#125;&#x27;</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>

**访问日志分析**

日志格式

<figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">python@ubuntu:~/test$ head access.log -n1</span><br><span class="line"><span class="number">42.236.10.75</span> <span class="string">&quot;changtou.xiaoxiaoming.xyz&quot;</span> <span class="string">[14/Oct/2019:12:47:18 +0800]</span> <span class="string">&quot;<span class="keyword">GET</span> /logo/8@3x.png HTTP/1.1&quot;</span> <span class="number">200</span> <span class="number">26053</span> <span class="string">&quot;https://changtou.xiaoxiaoming.xyz/&quot;</span> <span class="string">&quot;Mozilla/5.0 (Linux; U; Android 8.1.0; zh-CN; EML-AL00 Build/HUAWEIEML-AL00) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/57.0.2987.108 baidu.sogo.uc.UCBrowser/11.9.4.974 UWS/2.13.1.48 Mobile Safari/537.36 AliApp(DingTalk/4.5.11) com.alibaba.android.rimet/10487439 Channel/227200 language/zh-CN&quot;</span> <span class="string">&quot;42.236.10.75&quot;</span> rt=<span class="string">&quot;0.000&quot;</span> uct=<span class="string">&quot;-&quot;</span> uht=<span class="string">&quot;-&quot;</span> urt=<span class="string">&quot;-&quot;</span></span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure>

示例：

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">1.数据清洗</span><br><span class="line">awk <span class="string">&#x27;($6 ~ /.html/) &amp;&amp; ($8 ~ /200/)  &#123;print $0&#125;&#x27;</span> access.log &gt; clean.log</span><br><span class="line"></span><br><span class="line">2.统计PV</span><br><span class="line">python@ubuntu:~/test$ awk <span class="string">&#x27;&#123;print $0&#125;&#x27;</span>  clean.log | <span class="built_in">wc</span> -l</span><br><span class="line">700</span><br><span class="line">python@ubuntu:~/test$ <span class="built_in">cut</span> -d <span class="string">&#x27; &#x27;</span> -f 1 clean.log|<span class="built_in">wc</span> -l    </span><br><span class="line">700</span><br><span class="line"></span><br><span class="line">3:UV</span><br><span class="line">python@ubuntu:~/test$ awk <span class="string">&#x27;&#123;print $1&#125;&#x27;</span>  clean.log |<span class="built_in">sort</span>|<span class="built_in">uniq</span>| <span class="built_in">wc</span> -l</span><br><span class="line">155</span><br><span class="line">python@ubuntu:~/test$ <span class="built_in">cut</span> -d <span class="string">&#x27; &#x27;</span> -f 1 clean.log|<span class="built_in">sort</span>|<span class="built_in">uniq</span>| <span class="built_in">wc</span> -l</span><br><span class="line">155</span><br><span class="line"></span><br><span class="line">4:获取每天访问网站最多的前10名用户</span><br><span class="line">awk <span class="string">&#x27;&#123;print $1&#125;&#x27;</span> clean.log|<span class="built_in">sort</span>|<span class="built_in">uniq</span> -c|<span class="built_in">sort</span> -k 1nr|<span class="built_in">head</span></span><br><span class="line">或</span><br><span class="line"><span class="built_in">cut</span> -d <span class="string">&#x27; &#x27;</span> -f 1 clean.log|<span class="built_in">sort</span>|<span class="built_in">uniq</span> -c|<span class="built_in">sort</span> -k 1nr|<span class="built_in">head</span></span><br><span class="line">12345678910111213141516171819</span><br></pre></td></tr></table></figure>

### awk编程

#### 条件语句IF&ELSE

IF 条件语句语法格式如下：

<figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">if</span> <span class="params">(condition)</span></span></span><br><span class="line"><span class="function">    <span class="title">action</span></span></span><br><span class="line"><span class="function">12</span></span><br></pre></td></tr></table></figure>

也可以使用花括号来执行一组操作：

<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (condition)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">action</span>-<span class="number">1</span></span><br><span class="line">    <span class="keyword">action</span>-<span class="number">1</span></span><br><span class="line">    .</span><br><span class="line">    .</span><br><span class="line">    <span class="keyword">action</span>-n</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">12345678</span></span><br></pre></td></tr></table></figure>

判断数字是奇数还是偶数：

<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">python<span class="variable">@ubuntu</span><span class="symbol">:~/test</span><span class="variable">$ </span>awk <span class="string">&#x27;BEGIN &#123;num = 10; if (num % 2 == 0) printf &quot;%d 是偶数\n&quot;, num &#125;&#x27;</span></span><br><span class="line"><span class="number">10</span> 是偶数</span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure>

IF - ELSE 条件语句语法格式如下：

<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (condition)</span><br><span class="line">    <span class="keyword">action</span>-<span class="number">1</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="keyword">action</span>-<span class="number">2</span></span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure>

在条件语句 condition 为 true 时只需 action-1，否则执行 action-2。

<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">python<span class="variable">@ubuntu</span><span class="symbol">:~/test</span><span class="variable">$ </span>awk <span class="string">&#x27;BEGIN &#123;</span></span><br><span class="line"><span class="string">&gt;     num = 11; </span></span><br><span class="line"><span class="string">&gt;     if (num % 2 == 0) printf &quot;%d 是偶数\n&quot;, num; </span></span><br><span class="line"><span class="string">&gt;     else printf &quot;%d 是奇数\n&quot;, num </span></span><br><span class="line"><span class="string">&gt; &#125;&#x27;</span></span><br><span class="line"><span class="number">11</span> 是奇数</span><br><span class="line">python<span class="variable">@ubuntu</span><span class="symbol">:~/test</span><span class="variable">$ </span>awk <span class="string">&#x27;BEGIN &#123;num = 11; if (num % 2 == 0) printf &quot;%d 是偶数\n&quot;, num; else printf &quot;%d 是奇数\n&quot;, num &#125;&#x27;</span></span><br><span class="line"><span class="number">11</span> 是奇数</span><br><span class="line"><span class="number">12345678</span></span><br></pre></td></tr></table></figure>

可以创建多个 IF - ELSE 格式的判断语句来实现多个条件的判断：

<figure class="highlight cos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ awk &#x27;BEGIN &#123;</span><br><span class="line">a=<span class="number">30</span><span class="comment">;</span></span><br><span class="line"><span class="keyword">if</span> (a==<span class="number">10</span>)</span><br><span class="line">  <span class="keyword">print</span> <span class="string">&quot;a = 10&quot;</span><span class="comment">;</span></span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (a == <span class="number">20</span>)</span><br><span class="line">  <span class="keyword">print</span> <span class="string">&quot;a = 20&quot;</span><span class="comment">;</span></span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (a == <span class="number">30</span>)</span><br><span class="line">  <span class="keyword">print</span> <span class="string">&quot;a = 30&quot;</span><span class="comment">;</span></span><br><span class="line">&#125;&#x27;</span><br><span class="line"><span class="number">123456789</span></span><br></pre></td></tr></table></figure>

输出结果：

<figure class="highlight node-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">python@ubuntu:~/test$ awk &#x27;BEGIN &#123;</span><br><span class="line"><span class="meta prompt_">&gt;</span> <span class="language-javascript">a=<span class="number">30</span>;</span></span><br><span class="line"><span class="meta prompt_">&gt;</span> <span class="language-javascript"><span class="keyword">if</span> (a==<span class="number">10</span>)</span></span><br><span class="line"><span class="meta prompt_">&gt;</span> <span class="language-javascript">  print <span class="string">&quot;a = 10&quot;</span>;</span></span><br><span class="line"><span class="meta prompt_">&gt;</span> <span class="language-javascript"><span class="keyword">else</span> <span class="keyword">if</span> (a == <span class="number">20</span>)</span></span><br><span class="line"><span class="meta prompt_">&gt;</span> <span class="language-javascript">  print <span class="string">&quot;a = 20&quot;</span>;</span></span><br><span class="line"><span class="meta prompt_">&gt;</span> <span class="language-javascript"><span class="keyword">else</span> <span class="keyword">if</span> (a == <span class="number">30</span>)</span></span><br><span class="line"><span class="meta prompt_">&gt;</span> <span class="language-javascript">  print <span class="string">&quot;a = 30&quot;</span>;</span></span><br><span class="line"><span class="meta prompt_">&gt;</span> <span class="language-javascript">&#125;<span class="string">&#x27;</span></span></span><br><span class="line">a = 30</span><br><span class="line">12345678910</span><br></pre></td></tr></table></figure>

#### 循环语句For&While

For 循环的语法如下：

<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">for (initialisation<span class="comment">; condition; increment/decrement)</span></span><br><span class="line">    action</span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure>

下面的例子使用 For 循环输出数字 1 至 5：

<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">python<span class="variable">@ubuntu</span><span class="symbol">:~/test</span><span class="variable">$ </span>awk <span class="string">&#x27;BEGIN &#123; for (i = 1; i &lt;= 5; ++i) print i &#125;&#x27;</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="number">123456</span></span><br></pre></td></tr></table></figure>

While 循环的语法如下：

<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (condition)</span><br><span class="line">    <span class="keyword">action</span></span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure>

下面是使用 While 循环输出数字 1 到 5 的例子：

<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">python<span class="variable">@ubuntu</span><span class="symbol">:~/test</span><span class="variable">$ </span>awk <span class="string">&#x27;BEGIN &#123;i = 1; while (i &lt; 6) &#123; print i; ++i &#125; &#125;&#x27;</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="number">123456</span></span><br></pre></td></tr></table></figure>

在下面的示例子中，当计算的和大于 50 的时候使用 break 结束循环：

<figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ awk &#x27;BEGIN &#123;</span><br><span class="line">   <span class="built_in">sum</span> = <span class="number">0</span>; <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">20</span>; ++i) &#123; </span><br><span class="line">      <span class="built_in">sum</span> += i; <span class="keyword">if</span> (<span class="built_in">sum</span> &gt; <span class="number">50</span>) <span class="built_in">break</span>; <span class="keyword">else</span> <span class="built_in">print</span> <span class="string">&quot;Sum =&quot;</span>, <span class="built_in">sum</span> </span><br><span class="line">   &#125; </span><br><span class="line">&#125;&#x27;</span><br><span class="line"><span class="number">12345</span></span><br></pre></td></tr></table></figure>

输出结果为：

<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">python@ubuntu:~/test$ awk &#x27;BEGIN &#123;</span></span><br><span class="line">&gt;    sum = 0; for (i = 0; i &lt; 20; ++i) &#123; </span><br><span class="line">&gt;       sum += i; if (sum &gt; 50) break; <span class="keyword">else</span> print <span class="string">&quot;Sum =&quot;</span>, sum </span><br><span class="line">&gt;    &#125; </span><br><span class="line">&gt; &#125;&#x27;</span><br><span class="line">Sum = 0</span><br><span class="line">Sum = 1</span><br><span class="line">Sum = 3</span><br><span class="line">Sum = 6</span><br><span class="line">Sum = 10</span><br><span class="line">Sum = 15</span><br><span class="line">Sum = 21</span><br><span class="line">Sum = 28</span><br><span class="line">Sum = 36</span><br><span class="line">Sum = 45</span><br><span class="line">123456789101112131415</span><br></pre></td></tr></table></figure>

Continue 语句用于在循环体内部结束本次循环，从而直接进入下一次循环迭代。

下面的例子输出 1 到 20 之间的偶数：

<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">python<span class="variable">@ubuntu</span><span class="symbol">:~/test</span><span class="variable">$ </span>awk <span class="string">&#x27;BEGIN &#123;for (i = 1; i &lt;= 20; ++i) &#123;if (i % 2 == 0) print i ; else continue&#125; &#125;&#x27;</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">6</span></span><br><span class="line"><span class="number">8</span></span><br><span class="line"><span class="number">10</span></span><br><span class="line"><span class="number">12</span></span><br><span class="line"><span class="number">14</span></span><br><span class="line"><span class="number">16</span></span><br><span class="line"><span class="number">18</span></span><br><span class="line"><span class="number">20</span></span><br><span class="line"><span class="number">1234567891011</span></span><br></pre></td></tr></table></figure>

Exit 用于结束脚本程序的执行。

该函数接受一个整数作为参数表示 AWK 进程结束状态。 如果没有提供该参数，其默认状态为 0。

下面例子中当和大于 50 时结束 AWK 程序。

<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ awk &#x27;BEGIN &#123;</span><br><span class="line">   <span class="keyword">sum</span> = 0; <span class="keyword">for</span> (i = 0; i &lt; 20; ++i) &#123;</span><br><span class="line">      <span class="keyword">sum</span> += i; <span class="keyword">if</span> (<span class="keyword">sum</span> &gt; 50) <span class="keyword">exit</span>(10); <span class="keyword">else</span> <span class="keyword">print</span> <span class="string">&quot;Sum =&quot;</span>, <span class="keyword">sum</span> </span><br><span class="line">   &#125; </span><br><span class="line">&#125;&#x27;</span><br><span class="line">12345</span><br></pre></td></tr></table></figure>

输出结果为：

<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">python@ubuntu:~/test$ awk &#x27;BEGIN &#123;</span></span><br><span class="line">&gt;    sum = 0; for (i = 0; i &lt; 20; ++i) &#123;</span><br><span class="line">&gt;       sum += i; if (sum &gt; 50) exit(10); <span class="keyword">else</span> print <span class="string">&quot;Sum =&quot;</span>, sum </span><br><span class="line">&gt;    &#125; </span><br><span class="line">&gt; &#125;&#x27;</span><br><span class="line">Sum = 0</span><br><span class="line">Sum = 1</span><br><span class="line">Sum = 3</span><br><span class="line">Sum = 6</span><br><span class="line">Sum = 10</span><br><span class="line">Sum = 15</span><br><span class="line">Sum = 21</span><br><span class="line">Sum = 28</span><br><span class="line">Sum = 36</span><br><span class="line">Sum = 45</span><br><span class="line"><span class="section">python@ubuntu:~/test$ echo <span class="variable">$?</span></span></span><br><span class="line">10</span><br><span class="line">1234567891011121314151617</span><br></pre></td></tr></table></figure>

#### awk数组

AWK的数组底层数据结构是散列表，索引可以是数字或字符串。

数组使用的语法格式：

<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">array_name[index]<span class="operator">=</span>value</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>

创建数组并访问数组元素：

<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ awk <span class="symbol">&#x27;BEGIN</span> &#123;</span><br><span class="line">sites[<span class="string">&quot;taobao&quot;</span>]=<span class="string">&quot;www.taobao.com&quot;</span>;</span><br><span class="line">sites[<span class="string">&quot;google&quot;</span>]=<span class="string">&quot;www.google.com&quot;</span></span><br><span class="line">print sites[<span class="string">&quot;taobao&quot;</span>] <span class="string">&quot;\n&quot;</span> sites[<span class="string">&quot;google&quot;</span>]</span><br><span class="line">&#125;&#x27;</span><br><span class="line"><span class="number">12345</span></span><br></pre></td></tr></table></figure>

删除数组元素语法格式：

<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> array_name[<span class="keyword">index</span>]</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>

下面的例子中，数组中的 google 元素被删除（删除命令没有输出）：

<figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ awk &#x27;BEGIN &#123;</span><br><span class="line">sites[<span class="string">&quot;taobao&quot;</span>]=<span class="string">&quot;www.taobao.com&quot;</span>;</span><br><span class="line">sites[<span class="string">&quot;google&quot;</span>]=<span class="string">&quot;www.google.com&quot;</span></span><br><span class="line"><span class="built_in">delete</span> sites[<span class="string">&quot;google&quot;</span>];</span><br><span class="line"><span class="built_in">print</span> sites[<span class="string">&quot;google&quot;</span>]</span><br><span class="line">&#125;&#x27;</span><br><span class="line"><span class="number">123456</span></span><br></pre></td></tr></table></figure>

AWK 本身不支持多维数组，不过我们可以很容易地使用一维数组模拟实现多维数组。

如下示例为一个 3x3 的三维数组：

<figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">100 </span><span class="number">200</span> <span class="number">300</span></span><br><span class="line"><span class="symbol">400 </span><span class="number">500</span> <span class="number">600</span></span><br><span class="line"><span class="symbol">700 </span><span class="number">800</span> <span class="number">900</span></span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure>

以上实例中，`array[0][0]` 存储 100，`array[0][1]` 存储 200 ，依次类推。为了在 `array[0][0]` 处存储 100, 可以使用字符串0,0 作为索引： array[“0,0”] = 100。

下面是模拟二维数组的例子：

<figure class="highlight golo"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">$ awk &#x27;BEGIN &#123;</span><br><span class="line"><span class="keyword">array</span>[<span class="string">&quot;0,0&quot;</span>] = <span class="number">100</span>;</span><br><span class="line"><span class="keyword">array</span>[<span class="string">&quot;0,1&quot;</span>] = <span class="number">200</span>;</span><br><span class="line"><span class="keyword">array</span>[<span class="string">&quot;0,2&quot;</span>] = <span class="number">300</span>;</span><br><span class="line"><span class="keyword">array</span>[<span class="string">&quot;1,0&quot;</span>] = <span class="number">400</span>;</span><br><span class="line"><span class="keyword">array</span>[<span class="string">&quot;1,1&quot;</span>] = <span class="number">500</span>;</span><br><span class="line"><span class="keyword">array</span>[<span class="string">&quot;1,2&quot;</span>] = <span class="number">600</span>;</span><br><span class="line"><span class="comment"># 输出数组元素</span></span><br><span class="line"><span class="keyword">print</span> <span class="string">&quot;array[0,0] = &quot;</span> <span class="keyword">array</span>[<span class="string">&quot;0,0&quot;</span>];</span><br><span class="line"><span class="keyword">print</span> <span class="string">&quot;array[0,1] = &quot;</span> <span class="keyword">array</span>[<span class="string">&quot;0,1&quot;</span>];</span><br><span class="line"><span class="keyword">print</span> <span class="string">&quot;array[0,2] = &quot;</span> <span class="keyword">array</span>[<span class="string">&quot;0,2&quot;</span>];</span><br><span class="line"><span class="keyword">print</span> <span class="string">&quot;array[1,0] = &quot;</span> <span class="keyword">array</span>[<span class="string">&quot;1,0&quot;</span>];</span><br><span class="line"><span class="keyword">print</span> <span class="string">&quot;array[1,1] = &quot;</span> <span class="keyword">array</span>[<span class="string">&quot;1,1&quot;</span>];</span><br><span class="line"><span class="keyword">print</span> <span class="string">&quot;array[1,2] = &quot;</span> <span class="keyword">array</span>[<span class="string">&quot;1,2&quot;</span>];</span><br><span class="line">&#125;&#x27;</span><br><span class="line"><span class="number">123456789101112131415</span></span><br></pre></td></tr></table></figure>

执行上面的命令可以得到如下结果：

<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">array</span>[<span class="number">0</span>,<span class="number">0</span>] = <span class="number">100</span></span><br><span class="line"><span class="attribute">array</span>[<span class="number">0</span>,<span class="number">1</span>] = <span class="number">200</span></span><br><span class="line"><span class="attribute">array</span>[<span class="number">0</span>,<span class="number">2</span>] = <span class="number">300</span></span><br><span class="line"><span class="attribute">array</span>[<span class="number">1</span>,<span class="number">0</span>] = <span class="number">400</span></span><br><span class="line"><span class="attribute">array</span>[<span class="number">1</span>,<span class="number">1</span>] = <span class="number">500</span></span><br><span class="line"><span class="attribute">array</span>[<span class="number">1</span>,<span class="number">2</span>] = <span class="number">600</span></span><br><span class="line"><span class="attribute">123456</span></span><br></pre></td></tr></table></figure>

在数组上可以执行很多操作，比如，使用 asort 完成数组元素的排序，或者使用 asorti 实现数组索引的排序等等。

#### AWK 用户自定义函数

自定义函数的语法格式为：

<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">function_name</span><span class="params">(argument1, argument2, <span class="rest_arg">...)</span></span></span><br><span class="line"><span class="rest_arg"><span class="params">&#123;</span></span></span><br><span class="line"><span class="rest_arg"><span class="params">    function</span> body</span></span><br><span class="line"><span class="params">&#125;</span></span><br><span class="line"><span class="params">1234</span></span><br></pre></td></tr></table></figure>

以下实例实现了两个简单函数，它们分别返回两个数值中的最小值和最大值。

文件 functions.awk 代码如下：

<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 返回最小值</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">find_min</span>(<span class="params">num1, num2</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (num1 &lt; num2)</span><br><span class="line">    <span class="keyword">return</span> num1</span><br><span class="line">  <span class="keyword">return</span> num2</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 返回最大值</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">find_max</span>(<span class="params">num1, num2</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (num1 &gt; num2)</span><br><span class="line">    <span class="keyword">return</span> num1</span><br><span class="line">  <span class="keyword">return</span> num2</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 主函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">main</span>(<span class="params">num1, num2</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="comment"># 查找最小值</span></span><br><span class="line">  result = <span class="title function_ invoke__">find_min</span>(<span class="number">10</span>, <span class="number">20</span>)</span><br><span class="line">  <span class="keyword">print</span> <span class="string">&quot;Minimum =&quot;</span>, result</span><br><span class="line"></span><br><span class="line">  <span class="comment"># 查找最大值</span></span><br><span class="line">  result = <span class="title function_ invoke__">find_max</span>(<span class="number">10</span>, <span class="number">20</span>)</span><br><span class="line">  <span class="keyword">print</span> <span class="string">&quot;Maximum =&quot;</span>, result</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 脚本从这里开始执行</span></span><br><span class="line">BEGIN &#123;</span><br><span class="line">  <span class="title function_ invoke__">main</span>(<span class="number">10</span>, <span class="number">20</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">1234567891011121314151617181920212223242526272829303132</span></span><br></pre></td></tr></table></figure>

执行 functions.awk 文件，可以得到如下的结果：

<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ awk -f functions.awk </span><br><span class="line">Minimum = 10</span><br><span class="line">Maximum = 20</span><br><span class="line">123</span><br></pre></td></tr></table></figure>

#### AWK 内置函数

AWK 内置函数主要有以下几种：

- 算数函数
- 字符串函数
- 时间函数
- 位操作函数
- 其它函数

#### 算数函数

| **函数名**      | **说明**                                                     | **实例**                                                     |
| --------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| atan2( y, x )   | 返回 y/x 的反正切。                                          | `$ awk 'BEGIN { PI = 3.14159265 x = -10 y = 10 result = atan2 (y,x) * 180 / PI; printf "The arc tangent for (x=%f, y=%f) is %f degrees\n", x, y,  result }'`输出结果为：`The arc tangent for (x=-10.000000, y=10.000000) is 135.000000 degrees` |
| cos( x )        | 返回 x 的余弦；x 是弧度。                                    | `$ awk 'BEGIN { PI = 3.14159265 param = 60 result = cos(param * PI /  180.0); printf "The cosine of %f degrees is %f.\n", param, result }'`输出结果为：`The cosine of 60.000000 degrees is 0.500000.` |
| sin( x )        | 返回 x 的正弦；x 是弧度。                                    | `$ awk 'BEGIN { PI = 3.14159265 param = 30.0 result = sin(param * PI /180) printf "The sine of %f degrees is %f.\n", param, result }'`输出结果为：`The sine of 30.000000 degrees is 0.500000.` |
| exp( x )        | 返回 x 幂函数。                                              | `$ awk 'BEGIN { param = 5 result = exp(param); printf "The exponential value of %f is %f.\n", param, result }'`输出结果为：`The exponential value of 5.000000 is 148.413159.` |
| log( x )        | 返回 x 的自然对数。                                          | `$ awk 'BEGIN { param = 5.5 result = log (param) printf "log(%f) = %f\n", param, result }'`输出结果为：`log(5.500000) = 1.704748` |
| sqrt( x )       | 返回 x 平方根。                                              | `$ awk 'BEGIN { param = 1024.0 result = sqrt(param) printf "sqrt(%f) = %f\n", param, result }'`输出结果为：`sqrt(1024.000000) = 32.000000` |
| int( x )        | 返回 x 的截断至整数的值。                                    | `$ awk 'BEGIN { param = 5.12345 result = int(param) print "Truncated value =", result }'`输出结果为：`Truncated value = 5` |
| rand( )         | 返回任意数字 n，其中 0 <= n < 1。                            | `$ awk 'BEGIN { print "Random num1 =" , rand() print "Random num2 =" , rand() print "Random num3 =" , rand() }'`输出结果为：`Random num1 = 0.237788 Random num2 = 0.291066 Random num3 = 0.845814` |
| srand( [Expr] ) | 将 rand 函数的种子值设置为 Expr 参数的值，或如果省略 Expr 参数则使用某天的时间。返回先前的种子值。 | `$ awk 'BEGIN { param = 10 printf "srand() = %d\n", srand() printf "srand(%d) = %d\n", param, srand(param) }'`输出结果为：`srand() = 1 srand(10) = 1417959587` |

##### 字符串函数

| **函数**                            | **说明**                                                     | **实例**                                                     |
| ----------------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| gsub( Ere, Repl, [ In ] )           | gsub 是全局替换( global substitution )的缩写。除了正则表达式所有具体值被替代这点，它和 sub 函数完全一样地执行。 | `$ awk 'BEGIN { str = "Hello, World" print "String before replacement = "  str gsub("World", "Jerry", str) print "String after replacement = " str  }'`输出结果为：`String before replacement = Hello, World String after replacement = Hello, Jerry` |
| sub(regex,sub,string)               | sub 函数执行一次子串替换。它将第一次出现的子串用 regex 替换。第三个参数是可选的，默认为 $0。 | `$ awk 'BEGIN { str = "Hello, World" print "String before replacement = "  str sub("World", "Jerry", str) print "String after replacement = " str  }'`输出结果为：`String before replacement = Hello, World String after replacement = Hello, Jerry` |
| substr(str, start, l)               | substr 函数返回 str 字符串中从第 start 个字符开始长度为 l 的子串。如果没有指定 l 的值，返回 str 从第 start 个字符开始的后缀子串。 | `$ awk 'BEGIN { str = "Hello, World !!!" subs = substr(str, 1, 5) print "Substring = " subs }'`输出结果为：`Substring = Hello` |
| index( String1, String2 )           | 在由 String1 参数指定的字符串（其中有出现 String2 指定的参数）中，返回位置，从 1 开始编号。如果 String2 参数不在 String1 参数中出现，则返回 0（零）。 | `$ awk 'BEGIN { str = "One Two Three" subs = "Two" ret = index(str, subs)  printf "Substring \"%s\" found at %d location.\n", subs, ret }'`输出结果为：`Substring "Two" found at 5 location.` |
| length [(String)]                   | 返回 String 参数指定的字符串的长度（字符形式）。如果未给出 String 参数，则返回整个记录的长度（$0 记录变量）。 | `$ awk 'BEGIN { str = "Hello, World !!!" print "Length = ", length(str) }'`输出结果为：`Substring "Two" found at 5 location.` |
| blength [(String)]                  | 返回 String 参数指定的字符串的长度（以字节为单位）。如果未给出 String 参数，则返回整个记录的长度（$0 记录变量）。 |                                                              |
| substr( String, M, [ N ] )          | 返回具有 N 参数指定的字符数量子串。子串从 String 参数指定的字符串取得，其字符以 M 参数指定的位置开始。M 参数指定为将 String  参数中的第一个字符作为编号 1。如果未指定 N 参数，则子串的长度将是 M 参数指定的位置到 String 参数的末尾 的长度。 | `$ awk 'BEGIN { str = "Hello, World !!!" subs = substr(str, 1, 5) print "Substring = " subs }'`输出结果为：`Substring = Hello` |
| match( String, Ere )                | 在 String 参数指定的字符串（Ere 参数指定的扩展正则表达式出现在其中）中返回位置（字符形式），从 1 开始编号，或如果 Ere  参数不出现，则返回 0（零）。RSTART 特殊变量设置为返回值。RLENGTH  特殊变量设置为匹配的字符串的长度，或如果未找到任何匹配，则设置为 -1（负一）。 | `$  awk 'BEGIN { str = "One Two Three" subs = "Two" ret = match(str, subs)  printf "Substring \"%s\" found at %d location.\n", subs, ret }'`输出结果为：`Substring "Two" found at 5 location.` |
| split( String, A, [Ere] )           | 将 String 参数指定的参数分割为数组元素 A[1], A[2], . . ., A[n]，并返回 n 变量的值。此分隔可以通过 Ere  参数指定的扩展正则表达式进行，或用当前字段分隔符（FS 特殊变量）来进行（如果没有给出 Ere  参数）。除非上下文指明特定的元素还应具有一个数字值，否则 A 数组中的元素用字符串值来创建。 | `$ awk 'BEGIN { str = "One,Two,Three,Four" split(str, arr, ",") print  "Array contains following values" for (i in arr) { print arr[i] } }'`输出结果为：`Array contains following values One Two Three Four` |
| tolower( String )                   | 返回 String 参数指定的字符串，字符串中每个大写字符将更改为小写。大写和小写的映射由当前语言环境的 LC_CTYPE 范畴定义。 | `$ awk 'BEGIN { str = "HELLO, WORLD !!!" print "Lowercase string = " tolower(str) }'`输出结果为：`Lowercase string = hello, world !!!` |
| toupper( String )                   | 返回 String 参数指定的字符串，字符串中每个小写字符将更改为大写。大写和小写的映射由当前语言环境的 LC_CTYPE 范畴定义。 | `$ awk 'BEGIN { str = "hello, world !!!" print "Uppercase string = " toupper(str) }'`输出结果为：`Uppercase string = HELLO, WORLD !!!` |
| sprintf(Format, Expr, Expr, . . . ) | 根据 Format 参数指定的 printf 子例程格式字符串来格式化 Expr 参数指定的表达式并返回最后生成的字符串。 | `$ awk 'BEGIN { str = sprintf("%s", "Hello, World !!!") print str }'`输出结果为：`Hello, World !!!` |
| strtonum(str)                       | strtonum 将字符串 str 转换为数值。 如果字符串以 0 开始，则将其当作十进制数；如果字符串以 0x 或 0X 开始，则将其当作十六进制数；否则，将其当作浮点数。 | `$ awk 'BEGIN { print "Decimal num = " strtonum("123") print "Octal num = " strtonum("0123") print "Hexadecimal num = " strtonum("0x123") }'`输出结果为：`Decimal num = 123 Octal num = 83 Hexadecimal num = 291` |

**注：****Ere** 部分可以是正则表达式。

**1、gsub、sub 使用**

<figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ awk &#x27;BEGIN&#123;<span class="built_in">info</span>=<span class="string">&quot;this is a test2012test!&quot;</span>;gsub(/[<span class="number">0</span>-<span class="number">9</span>]+/,<span class="string">&quot;||&quot;</span>,<span class="built_in">info</span>);print <span class="built_in">info</span>&#125;&#x27;</span><br><span class="line">this is a test||test!</span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure>

**2、查找字符串（index 使用）**

使用了三元运算符: **表达式 ? 动作1 : 动作2**

<figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ awk &#x27;BEGIN&#123;<span class="built_in">info</span>=<span class="string">&quot;this is a test2012test!&quot;</span>;print <span class="built_in">index</span>(<span class="built_in">info</span>,<span class="string">&quot;11111&quot;</span>)?<span class="string">&quot;ok&quot;</span><span class="symbol">:</span><span class="string">&quot;no found&quot;</span>;&#125;&#x27;</span><br><span class="line">no found</span><br><span class="line">$ awk &#x27;BEGIN&#123;<span class="built_in">info</span>=<span class="string">&quot;this is a test2012test!&quot;</span>;print <span class="built_in">index</span>(<span class="built_in">info</span>,<span class="string">&quot;is&quot;</span>)?<span class="string">&quot;ok&quot;</span><span class="symbol">:</span><span class="string">&quot;no found&quot;</span>;&#125;&#x27;</span><br><span class="line">ok</span><br><span class="line">$ awk &#x27;BEGIN&#123;<span class="built_in">info</span>=<span class="string">&quot;this is a test2012test!&quot;</span>;print <span class="built_in">index</span>(<span class="built_in">info</span>,<span class="string">&quot;test&quot;</span>)?<span class="string">&quot;ok&quot;</span><span class="symbol">:</span><span class="string">&quot;no found&quot;</span>;&#125;&#x27;</span><br><span class="line">ok</span><br><span class="line"><span class="number">123456</span></span><br></pre></td></tr></table></figure>

**3、正则表达式匹配查找(match 使用）**

<figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ awk &#x27;BEGIN&#123;<span class="built_in">info</span>=<span class="string">&quot;this is a test2012test!&quot;</span>;print <span class="built_in">match</span>(<span class="built_in">info</span>,/[<span class="number">0</span>-<span class="number">9</span>]+/)?<span class="string">&quot;ok&quot;</span><span class="symbol">:</span><span class="string">&quot;no found&quot;</span>;&#125;&#x27;</span><br><span class="line">ok</span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure>

**4、截取字符串(substr使用）**

从第 4 个 字符开始，截取 10 个长度字符串。

<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ awk &#x27;BEGIN&#123;info=<span class="string">&quot;this is a test2012test!&quot;</span>;<span class="keyword">print</span> <span class="built_in">substr</span>(info,4,10);&#125;&#x27;</span><br><span class="line">s is a <span class="keyword">tes</span></span><br><span class="line">12</span><br></pre></td></tr></table></figure>

**5、字符串分割（split使用）**

<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ awk &#x27;BEGIN&#123;info=<span class="string">&quot;this is a test&quot;</span>;<span class="keyword">split</span>(info,<span class="keyword">tA</span>,<span class="string">&quot; &quot;</span>);<span class="keyword">print</span> <span class="built_in">length</span>(<span class="keyword">tA</span>);<span class="keyword">for</span>(k <span class="keyword">in</span> <span class="keyword">tA</span>)&#123;<span class="keyword">print</span> k,<span class="keyword">tA</span>[k];&#125;&#125;&#x27;</span><br><span class="line">4</span><br><span class="line">2 is</span><br><span class="line">3 a</span><br><span class="line">4 <span class="keyword">test</span></span><br><span class="line">1 this</span><br><span class="line">123456</span><br></pre></td></tr></table></figure>

分割 info，将 info 字符串使用空格切分为动态数组 tA。注意 awk for …in 循环，是一个无序的循环。 并不是从数组下标 1…n ，因此使用时候需要特别注意。

##### 时间函数

| **函数名**                         | **说明**                                                     | **实例**                                                     |
| ---------------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| mktime( YYYY MM DD HH MM SS[ DST]) | 生成时间格式                                                 | `$ awk 'BEGIN { print "Number of seconds since the Epoch = " mktime("2014 12 14 30 20 10") }'`输出结果为：`Number of seconds since the Epoch = 1418604610` |
| strftime([format [, timestamp]])   | 格式化时间输出，将时间戳转为时间字符串 具体格式，见下表.     | `$ awk 'BEGIN { print strftime("Time = %m/%d/%Y %H:%M:%S", systime()) }'`输出结果为：`Time = 12/14/2014 22:08:42` |
| systime()                          | 得到时间戳,返回从1970年1月1日开始到当前时间(不计闰年)的整秒数 | `awk 'BEGIN{now=systime();print now}'`输出结果为：`1343210982` |

strftime 日期和时间格式说明符:

| 序号 | 描述                                                         |
| ---- | ------------------------------------------------------------ |
| %a   | 星期缩写(Mon-Sun)。                                          |
| %A   | 星期全称（Monday-Sunday）。                                  |
| %b   | 月份缩写（Jan）。                                            |
| %B   | 月份全称（January）。                                        |
| %c   | 本地日期与时间。                                             |
| %C   | 年份中的世纪部分，其值为年份整除100。                        |
| %d   | 十进制日期(01-31)                                            |
| %D   | 等价于 %m/%d/%y.                                             |
| %e   | 日期，如果只有一位数字则用空格补齐                           |
| %F   | 等价于 %Y-%m-%d，这也是 ISO 8601 标准日期格式。              |
| %g   | ISO8610 标准周所在的年份模除 100（00-99)。比如，1993 年 1 月 1 日属于 1992 年的第 53 周。所以，虽然它是 1993 年第 1 天，但是其　ISO8601 标准周所在年份却是 1992。同样，尽管 1973 年 12 月 31 日属于 1973 年但是它却属于  1994 年的第一周。所以 1973 年 12 月 31 日的 ISO8610　标准周所在的年是 1974 而不是 1973。 |
| %G   | ISO 标准周所在年份的全称。                                   |
| %h   | 等价于 %b.                                                   |
| %H   | 用十进制表示的 24 小时格式的小时(00-23)                      |
| %I   | 用十进制表示的 12 小时格式的小时（00-12）                    |
| %j   | 一年中的第几天（001-366）                                    |
| %m   | 月份（01-12）                                                |
| %M   | 分钟数（00-59)                                               |
| %n   | 换行符 (ASCII LF)                                            |
| %p   | 十二进制表示法（AM/PM）                                      |
| %r   | 十二进制表示法的时间（等价于 %I:%M:%S %p）。                 |
| %R   | 等价于 %H:%M。                                               |
| %S   | 时间的秒数值（00-60）                                        |
| %t   | 制表符 (tab)                                                 |
| %T   | 等价于 %H:%M:%S。                                            |
| %u   | 以数字表示的星期(1-7),1 表示星期一。                         |
| %U   | 一年中的第几个星期（第一个星期天作为第一周的开始），00-53    |
| %V   | 一年中的第几个星期（第一个星期一作为第一周的开始），01-53。  |
| %w   | 以数字表示的星期（0-6），0表示星期日 。                      |
| %W   | 十进制表示的一年中的第几个星期（第一个星期一作为第一周的开始），00-53。 |
| %x   | 本地日期表示                                                 |
| %X   | 本地时间表示                                                 |
| %y   | 年份模除 100。                                               |
| %Y   | 十进制表示的完整年份。                                       |
| %z   | 时区，表示格式为+HHMM（例如，格式要求生成的 RFC 822或者 RFC 1036 时间头） |
| %Z   | 时区名称或缩写，如果时区待定则无输出。                       |

##### 位操作函数

| **函数名** | **说明**     | **实例**                                                     |
| ---------- | ------------ | ------------------------------------------------------------ |
| and        | 位与操作。   | `$ awk 'BEGIN { num1 = 10 num2 = 6 printf "(%d AND %d) = %d\n", num1, num2, and(num1, num2) }'`输出结果为：`(10 AND 6) = 2` |
| compl      | 按位求补。   | `$ awk 'BEGIN { num1 = 10 printf "compl(%d) = %d\n", num1, compl(num1) }'`输出结果为：`compl(10) = 9007199254740981` |
| lshift     | 左移位操作   | `$ awk 'BEGIN { num1 = 10 printf "lshift(%d) by 1 = %d\n", num1, lshift(num1, 1) }'`输出结果为：`lshift(10) by 1 = 20` |
| rshift     | 右移位操作   | `$ awk 'BEGIN { num1 = 10 printf "rshift(%d) by 1 = %d\n", num1, rshift(num1, 1) }'`输出结果为：`rshift(10) by 1 = 5` |
| or         | 按位或操作   | `$ awk 'BEGIN { num1 = 10 num2 = 6 printf "(%d OR %d) = %d\n", num1, num2, or(num1, num2) }'`输出结果为：`(10 OR 6) = 14` |
| xor        | 按位异或操作 | `$ awk 'BEGIN { num1 = 10 num2 = 6 printf "(%d XOR %d) = %d\n", num1, num2, xor(num1, num2) }'`输出结果为：`(10 bitwise xor 6) = 12` |

##### 其他函数

| **函数名**  | **说明**                                                     | **实例**                                                     |
| ----------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| close(expr) | 关闭管道的文件                                               | `$ awk 'BEGIN { cmd = "tr [a-z] [A-Z]" print "hello, world !!!" |& cmd close(cmd, "to") cmd |& getline out print out; close(cmd); }'`输出结果为：`HELLO, WORLD !!!`第一条语句 cmd = “tr [a-z] [A-Z]” 在　AWK 中建立了一个双向的通信通道。第二条语句 print 为 tr  命令提供输入。&\| 表示双向通信。第三条语句 close(cmd, “to”) 完成执行后关闭 to 进程。第四条语句 cmd  \|& getline out 使用 getline 函数将输出存储到 out 变量中。接下来的输出语句打印输出的内容，最后 close  函数关闭 cmd。 |
| delete      | 用于从数组中删除元素                                         | `$ awk 'BEGIN { arr[0] = "One" arr[1] = "Two" arr[2] = "Three" arr[3] =  "Four" print "Array elements before delete operation:" for (i in arr) {  print arr[i] } delete arr[0] delete arr[1] print "Array elements after  delete operation:" for (i in arr) { print arr[i] } }'`输出结果为：`Array elements before delete operation: One Two Three Four Array elements after delete operation: Three Four` |
| exit        | 终止脚本执行，它可以接受可选的参数 expr 传递 AWK 返回状态。  | `$ awk 'BEGIN { print "Hello, World !!!" exit 10 print "AWK never executes this statement." }'`输出结果为：`Hello, World !!!` |
| flush       | 刷新打开文件或管道的缓冲区                                   |                                                              |
| getline     | 读入下一行                                                   | 使用 getline 从文件 marks.txt 中读入一行并输出：`$ awk '{getline; print $0}' marks.txt`，AWK 从文件 marks.txt 中读入一行存储到变量 0 中。在下一条语句中，我们使用 getline 读入下一行。因此AWK读入第二行并存储到 0 中。最后，AWK 使用 print 输出第二行的内容。这个过程一直到文件结束。 |
| next        | 停止处理当前记录，并且进入到下一条记录的处理过程。           | 当模式串匹配成功后程序并不执行任何操作：`$ awk '{if ($0 ~/Shyam/) next; print $0}' marks.txt` |
| nextfile    | 停止处理当前文件，从下一个文件第一个记录开始处理。           | 首先创建两个文件。 file1.txt 内容如下:`file1:str1 file1:str2 file1:str3 file1:str4`文件 file2.txt 内容如下：`file2:str1 file2:str2 file2:str3 file2:str4`现在我们来测试 nextfile 函数。`$ awk '{ if ($0 ~ /file1:str2/) nextfile; print $0 }' file1.txt file2.txt`输出结果为：`file1:str1 file2:str1 file2:str2 file2:str3 file2:str4` |
| return      | 从用户自定义的函数中返回值。请注意，如果没有指定返回值，那么的返回值是未定义的。 | 创建文件 functions.awk，内容如下：`function addition(num1, num2) { result = num1 + num2 return result } BEGIN { res = addition(10, 20) print "10 + 20 = " res }`执行该文件：`$ awk -f functions.awk 10 + 20 = 30` |
| system      | 执行特定的命令然后返回其退出状态。返回值为 0 表示命令执行成功；非 0 表示命令执行失败。 | `$ awk 'BEGIN { ret = system("date"); print "Return value = " ret }'`输出结果为：`Sun Dec 21 23:16:07 IST 2014 Return value = 0` |

## vim全套笔记

### VIM快速复习

#### 什么是 vim？

Vim是从 vi 发展出来的一个文本编辑器。代码补完、编译及错误跳转等方便编程的功能特别丰富，在程序员中被广泛使用。vim 的官方网站 ([http://www.vim.org](http://www.vim.org/))

vim 键盘图：

![img](【Linux】总结/11de8c1d4c8385c025ede918e03b6a86.gif)

基本上vi可以分为三种状态：

- 命令模式（command mode)
- 插入模式（Insert mode)
- 底行模式（last line mode)

#### 按:冒号即可进入last line mode

<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">:set</span> nu 列出行号</span><br><span class="line"><span class="symbol">:set</span> nonu	取消行号</span><br><span class="line"><span class="symbol">:</span><span class="comment">#7 跳到文件中的第7行</span></span><br><span class="line">/keyword 查找字符  按n向下</span><br><span class="line"><span class="string">?k</span>eyword 查找字符  按N向下</span><br><span class="line"><span class="symbol">:n1</span>,n2/word1/word2/gc  替换指定范围单词，c表示提示</span><br><span class="line"><span class="symbol">:w</span> 保存文件</span><br><span class="line"><span class="symbol">:w</span> filename 以指定的文件名另存</span><br><span class="line"><span class="symbol">:n1</span>,n2 w [filename]	将 n1 到 n2行另存</span><br><span class="line"><span class="symbol">:r</span> [filename]	读入另一个文件加到光标所在行后面</span><br><span class="line"><span class="symbol">:</span>! ls /home  在vi当中察看ls输出信息！</span><br><span class="line"><span class="symbol">:q</span>离开vi</span><br><span class="line"><span class="symbol">:wq</span> 和 <span class="symbol">:ZZ</span> 和 <span class="symbol">:x</span> 保存并退出vi</span><br><span class="line">!强制执行</span><br><span class="line"><span class="symbol">:%</span> s/^<span class="regexp">/#/g</span> 来在全部内容的行首添加 <span class="comment"># 号注释</span></span><br><span class="line"><span class="symbol">:</span><span class="number">1</span>,<span class="number">10</span> s/^<span class="regexp">/#/g</span> 在<span class="number">1</span>~<span class="number">10</span> 行首添加 <span class="comment"># 号注释  </span></span><br><span class="line"><span class="number">12345678910111213141516</span></span><br></pre></td></tr></table></figure>

#### 从command mode进入Insert mode

按i在当前位置编辑
 按a在当前位置的下一个字符编辑
 按o插入新行，从行首开始编辑
 按R(Replace mode)：R会一直取代光标所在的文字，直到按下 ESC为止；(常用)

#### 按ESC键退回command mode

h←j↓k↑l→前面加数字移动指定的行数或字符数
 1、翻页bu上下整页，ud上下半页

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ctrl+<span class="selector-tag">b</span>：上移一页。</span><br><span class="line">ctrl+f：下移一页。</span><br><span class="line">ctrl+u：上移半页。</span><br><span class="line">ctrl+d：下移半页。</span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure>

2、行定位

<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">7gg</span>或<span class="number">7</span>G：定位第<span class="number">7</span>行首字符。(可能只在Vim中有效)</span><br><span class="line"><span class="attribute">G</span>：移动到文章的最后。</span><br><span class="line"><span class="attribute">7H</span>:当前屏幕的第<span class="number">7</span>行行首</span><br><span class="line"><span class="attribute">M</span>：当前屏幕中间行的行首</span><br><span class="line"><span class="attribute">7L</span>:当前屏幕的倒数第<span class="number">7</span>行行首</span><br><span class="line"><span class="attribute">12345</span></span><br></pre></td></tr></table></figure>

3、当前行定位

<figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$：</span>移动到光标所在行的“行尾”。</span><br><span class="line"><span class="number">0</span>或^：移动到光标所在行的“行首”</span><br><span class="line">w：光标跳到下个单词的开头</span><br><span class="line">e：光标跳到下个单词的字尾</span><br><span class="line">b：光标回到上个单词的开头</span><br><span class="line"><span class="number">12345</span></span><br></pre></td></tr></table></figure>

4、编辑

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">x</span>：剪切当前字符</span><br><span class="line"><span class="number">7</span>x：剪切从当前位置起<span class="number">7</span>个字符</span><br><span class="line">大写的<span class="attribute">X</span>，表示从前面一个字符开始往前计算</span><br><span class="line"><span class="selector-tag">dd</span>：剪切光标所在行。</span><br><span class="line"><span class="number">7</span>dd：从光标所在行开始剪切<span class="number">7</span>行</span><br><span class="line">d7G	删除光标所在到第<span class="number">7</span>行的所有数据</span><br><span class="line">yw：复制当前单词</span><br><span class="line"><span class="number">7</span>yw：复制从当前位置起<span class="number">7</span>个单词</span><br><span class="line">yy：复制当前行</span><br><span class="line"><span class="number">6</span>yy：从当前行起向下复制<span class="number">6</span>行</span><br><span class="line">y7G	复制游标所在列到第<span class="number">7</span>列的所有数据</span><br><span class="line"><span class="selector-tag">p</span>：粘贴</span><br><span class="line">u：撤销</span><br><span class="line">ctrl+<span class="attribute">r</span>：取消撤销</span><br><span class="line">cw：删除当前单词(从光标位置开始计算)，并进入插入模式</span><br><span class="line">c7w：删除<span class="number">7</span>个单词并进入插入模式</span><br><span class="line"><span class="number">12345678910111213141516</span></span><br></pre></td></tr></table></figure>

#### 多行编辑，vim支持，vi不支持

按ctrl+V进入块模式，上下键选中快，按大写G选择到末尾，上下左右键移动选择位置
 按大写I进去编辑模式，输入要插入的字符，编辑完成按ESC退出
 选中要替换的字符后，按c键全部会删除，然后输入要插入的字符，编辑完成按ESC退出
 选中要替删除的字符后，按delete键，则会全部删除

按shift+V可进入行模式，对指定行操作

#### vim练习

1、创建目录/tmp/test，将/etc/man.config复制到该目录下

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">mkdir</span> -p /tmp/test</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">cp</span> /etc/man.config /tmp/test/</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">cd</span> /tmp/test/</span></span><br><span class="line">12345</span><br></pre></td></tr></table></figure>

2、用vim编辑man.config文件：

<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim man.config</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>

3、设置显示行号； 移动到第58行，向右移动40个字符，查看双引号内的是什么目录；

<figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">：<span class="keyword">set</span> nu</span><br><span class="line">58G 或<span class="comment">58gg</span> </span><br><span class="line">40-&gt; 或40空格 目录为：/dir/bin/foo </span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure>

4、移动到第一行，并向下查找“bzip2”这个字符串，它在第几行；

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">移动到最后一行，并向上查找该字符串；</span><br><span class="line">gg 或1G</span><br><span class="line">/bzip 137行 ?bzip2</span><br><span class="line">123</span><br></pre></td></tr></table></figure>

5、将50行到100行之间的man更改为MAN，并且 逐个挑选 是否需要修改；

<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">若在挑选过程中一直按y，结果会在最后一行出现改变了几个<span class="built_in">man</span>?</span><br><span class="line">:<span class="number">50</span>,<span class="number">100</span>s/<span class="built_in">man</span>/<span class="built_in">MAN</span>/<span class="built_in">gc</span> <span class="number">25</span>次替换</span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure>

6、修改完后，突然反悔了，要全部复原，有哪些方法？

<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">一直按u键	</span><br><span class="line">或者</span><br><span class="line"><span class="symbol">:q!</span>强制不保存退出后，再重新打开该文件</span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure>

7、复制65到73这9行的内容（含有MANPATH_MAP），并且粘贴到最后一行之后；

<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">65gg</span>或<span class="number">65</span>G到该行后，<span class="number">9</span>yy,G 移动到最后一行，p粘贴</span><br><span class="line"><span class="attribute">1</span></span><br></pre></td></tr></table></figure>

8、21行到42行之间开头为#符号的批注数据不要了，如何删除；

<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">21G</span>到该行 <span class="number">22</span>dd</span><br><span class="line"><span class="attribute">1</span></span><br></pre></td></tr></table></figure>

9、将这个文件另存为man.test.config的文件

<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">:w <span class="keyword">man</span>.<span class="keyword">test</span>.config</span><br><span class="line">1</span><br></pre></td></tr></table></figure>

10、到第27行，并且删除15个字符，结果出现的第一个字符是什么？

<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">27gg</span> 后<span class="number">15</span>x</span><br><span class="line"><span class="attribute">1</span></span><br></pre></td></tr></table></figure>

11、在第一行新增一行，在该行内输入“I am a student ”

<figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">gg</span>到第一行 <span class="built_in">O</span>输入即可 说明：<span class="variable">o</span>是在当前行之后插入一行，<span class="built_in">O</span>是在当前行之前插入一行</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>

12、保存并退出

<figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">:wq</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>

### vi/vim的三种模式

vi/vim主要分为三种模式，分别是**命令模式（Command mode）**，**输入模式（Insert mode）\**和\**底线命令模式（Last line mode）**。

![img](【Linux】总结/1cee092565d316d1462ddbf987fbc6e1.png)

这三种模式的作用分别是：

#### 命令模式

用户刚刚启动 vi/vim，便进入了命令模式。 任何时候，不管用户处于何种模式，只要按一下ESC键，即可使Vi进入命令模式；

此状态下敲击键盘动作会被Vim识别为命令，输入`:` 可切换到**底线命令模式**，以在最底一行输入命令。

若想要编辑文本：启动Vim，进入了命令模式，按下i，切换到输入模式。

#### 输入模式

在命令模式下输入插入命令i、附加命令a 、打开命令o、修改命令c、取代命令r或替换命令s都可以进入文本输入模式。在该模式下，用户输入的任何字符都被Vi当做文件内容保存起来，并将其显示在屏幕上。在文本输入过程中，若想回到命令模式下，按键ESC即可。

#### 底行模式

在命令模式下按下:（英文冒号）就进入了底行命令模式。

底线命令模式可以输入单个或多个字符的命令，可用的命令非常多。

在底线命令模式中，基本的命令有（已经省略了冒号）：

- q 退出程序
- w 保存文件

按ESC键可随时退出底线命令模式。

### vim基础操作

#### 进入输入模式(Insert mode)

![1574384484673](【Linux】总结/90d3f3acdaa32af011e62e7be564f47c.png)

- i: 插入光标前一个字符
- I: 插入行首
- a: 插入光标后一个字符
- A: 插入行未
- o: 向下新开一行,插入行首
- O: 向上新开一行,插入行首

在进入输入模式后， vi 画面的左下角处会出现『–INSERT–』的字样

#### 进入替换模式(Replace mode)

- r : 只会取代光标所在的那一个字符一次
- R: 会一直取代光标所在的文字，直到按下ESC为止

在进入输入模式后， vi 画面的左下角处会出现『–REPLACE–』的字样

#### 命令模式下常用命令

##### 移动光标

| 移动光标的方法                                     |                                                              |
| -------------------------------------------------- | ------------------------------------------------------------ |
| h 或 向左箭头键(←)                                 | 光标向左移动一个字符                                         |
| j 或 向下箭头键(↓)                                 | 光标向下移动一个字符                                         |
| k 或 向上箭头键(↑)                                 | 光标向上移动一个字符                                         |
| l 或 向右箭头键(→)                                 | 光标向右移动一个字符                                         |
| 向下移动 30 行，可以使用 “30j” 或 “30↓” 的组合按键 |                                                              |
| [Ctrl] + [f]                                       | 屏幕『向下』移动一页，相当于 [Page Down]按键 (常用)          |
| [Ctrl] + [b]                                       | 屏幕『向上』移动一页，相当于 [Page Up] 按键 (常用)           |
| [Ctrl] + [d]                                       | 屏幕『向下』移动半页                                         |
| [Ctrl] + [u]                                       | 屏幕『向上』移动半页                                         |
| +                                                  | 光标移动到非空格符的下一行                                   |
| -                                                  | 光标移动到非空格符的上一行                                   |
| n                                                  | 表示空格光标向右移动这一行的 n 个字符。例如 20 则光标会向后面移动 20 个字符距离。 |
| 0 或功能键[Home]                                   | 这是数字『 0 』：移动到这一行的最前面字符处 (常用)           |
| $ 或功能键[End]                                    | 移动到这一行的最后面字符处(常用)                             |
| H                                                  | 光标移动到这个屏幕的最上方那一行的第一个字符                 |
| M                                                  | 光标移动到这个屏幕的中央那一行的第一个字符                   |
| L                                                  | 光标移动到这个屏幕的最下方那一行的第一个字符                 |
| G                                                  | 移动到这个文档的最后一行(常用)                               |
| nG                                                 | n 为数字。移动到这个文件的第 n 行。例如 20G 则会移动到这个文件的第 20 行(可配合 :set nu) |
| gg                                                 | 移动到这个文档的第一行，相当于 1G                            |
| n                                                  | n 为数字。光标向下移动 n 行(常用)                            |

##### 删除操作

| 删除操作 | 删除后会添加到剪切板，相当于剪切                             |
| -------- | ------------------------------------------------------------ |
| x, X     | x为向后删除一个字符 (相当于 [del] 按键)， X为向前删除一个字符(相当于 [backspace] ) |
| nx       | n 为数字，连续向后删除 n 个字符。例如10x表示连续删除 10 个字符。 |
| dd       | 删除光标所在的一整行(常用)                                   |
| ndd      | n 为数字。删除光标所在的向下 n 行，例如 20dd 则是删除 20 行  |
| d1G      | 删除光标所在行到首行的所有数据                               |
| dG       | 删除光标所在行到最后一行的所有数据                           |
| d$       | 删除光标所在位置到该行的最后一个字符                         |
| d0       | 删除光标所在位置到该行的最前面一个字符                       |

##### 撤销&复原&重复

| 撤销&复原 |                                        |
| --------- | -------------------------------------- |
| u         | 撤销操作，相对于普通编辑器里面的ctrl+z |
| Ctrl+r    | 恢复操作，相对于普通编辑器里面的ctrl+y |
| .         | 就是小数点！可重复前一个动作           |

##### 复制&粘贴

| 复制&粘贴 |                                                             |
| --------- | ----------------------------------------------------------- |
| yy        | 复制光标所在行                                              |
| nyy       | n 为数字。复制光标所在的向下 n 行，例如 20yy 则是复制 20 行 |
| y1G       | 复制光标所在行到第一行的所有数据                            |
| yG        | 复制光标所在行到最后一行的所有数据                          |
| y0        | 复制光标所在的那个字符到该行行首的所有数据                  |
| y$        | 复制光标所在的那个字符到该行行尾的所有数据                  |
| p, P      | p 为将已复制的数据在光标下一行贴上，P 则为贴在光标上一行！  |

##### 合成行

- J: 将光标所在行与下一行的数据结合成同一行

##### 搜索

| 搜索  |                                                              |
| ----- | ------------------------------------------------------------ |
| /word | 向光标之下寻找一个名称为 word 的字符串。                     |
| ?word | 向光标之上寻找一个字符串名称为 word 的字符串。               |
| n     | 代表重复前一个搜寻的动作，根据前面输入的/word还是?word向下或向上搜索下一个匹配的字符串。 |
| N     | 表示反向搜索，与n的搜索方向相反。                            |

##### 替换

| 替换                                           |                                                              |
| ---------------------------------------------- | ------------------------------------------------------------ |
| :n1,n2s/word1/word2/g                          | 在第 n1 与 n2 行之间寻找word1并替换为word2！比如『:100,200s/vbird/VBIRD/g』表示在100到200行之间将vbird替换为VBIRD |
| `:1,$s/word1/word2/g` 或 `:%s/word1/word2/g`   | $表示最后一行，%s表示所有行。                                |
| `:1,$s/word1/word2/gc` 或 `:%s/word1/word2/gc` | gc中的c表示取代前显示提示字符给用户确认 (confirm) ！         |

#### 底行命令模式的常用操作

| 底行命令模式                                    |                                                              |
| ----------------------------------------------- | ------------------------------------------------------------ |
| :w                                              | 保存编辑数据                                                 |
| :w!                                             | 若文件属性为『只读』时，强制写入该文件。不过，到底能不能写入， 还是跟你对该文件的文件权限有关啊！ |
| :q                                              | 离开 vi                                                      |
| :q!                                             | 若曾修改过文件，又不想储存，使用 ! 为强制离开不储存文件。    |
| 惊叹号 (!) 在 vi 当中，常常具有『强制』的意思～ |                                                              |
| :wq                                             | 储存后离开，若为 :wq! 则为强制储存后离开                     |
| ZZ                                              | 若文件没有更动，则不储存离开，若文件已经被更动过，则储存后离开！ |
| :w [filename]                                   | 另存为                                                       |
| :r [filename]                                   | 将另一个文件『filename』的数据加到光标所在行后面             |
| :n1,n2 w [filename]                             | 将 n1 到 n2 行的内容储存成 filename 这个文件。               |
| :! command                                      | 暂时离开 vi 到指令行模式下执行 command 的显示结果！例如 『:! ls /home』即可在 vi 当中察看 /home 底下以 ls 输出的文件信息！ |
| :set nu                                         | 会在每一行的前缀显示该行的行号                               |
| :set nonu                                       | 取消行号显示                                                 |

示例：

<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">将当前路径插入到光标的下一行</span><br><span class="line"><span class="symbol">:r!pwd</span></span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure>

#### 可视模式

v 进入字符可视化模式： 文本选择是以字符为单位的。
 V 进入行可视化模式： 文本选择是以行为单位的。
 Ctrl+v 进入块可视化模式 ： 选择一个矩形内的文本。

可视模式下可进行如下操作：

| 可视模式操作 |                                                |
| ------------ | ---------------------------------------------- |
| A            | 在选定的部分后面插入内容                       |
| I            | 在选定的部分前面插入内容                       |
| d            | 删除选定的部分                                 |
| c            | 删除选定的部分并进入插入模式（有批量替换效果） |
| r            | 把选定的部分全部替换为指定的单个字符           |
| `>>`         | 向右缩进一个单位，更适合行可视化模式           |
| `<<`         | 向左缩进一个单位，更适合行可视化模式           |
| `gu`         | 选中区域转为小写                               |
| `gU`         | 选中区域转为大写                               |
| `g~`         | 大小写互调                                     |

可视模式下，选中的区域是由两个端点来界定的（一个在左上角，一个在右下角），在默认情况下只可以控制右下角的端点，而使用`o`按键则可以在左上角和右下角之间切换控制端点。

## Linux系统启动过程

Linux系统的启动过程可以分为5个阶段：

- 内核的引导。
- 运行 init。
- 系统初始化。
- 建立终端 。
- 用户登录系统。

------

### 加载内核

当计算机打开电源后，首先是BIOS开机自检，按照BIOS中设置的启动设备（通常是硬盘）来启动。

操作系统接管硬件以后，首先读入 /boot 目录下的内核文件。

![img](【Linux】总结/1dbe9c625b5fe87278c65952f7c6736a.png)

### 启动初始化进程init

内核文件加载以后，就开始运行第一个程序 /sbin/init，它的作用是初始化系统环境。

init程序首先是需要读取配置文件/etc/inittab。

> CentOS 各版本init配置文件的位置：
>
> - **SysV:** init, CentOS 5之前, 配置文件： /etc/inittab。
> - **Upstart:** init,CentOS 6, 配置文件： /etc/inittab, /etc/init/*.conf。
> - **Systemd：** systemd, CentOS 7,配置文件： /usr/lib/systemd/system、 /etc/systemd/system。

![1574411888879](【Linux】总结/738b4978d388849ac7518211f8cc564c.png)

由于init是第一个运行的程序，它的进程编号（pid）就是1。其他所有进程都从它衍生，都是它的子进程。

### 确定运行级别

许多程序需要开机启动。它们在Windows叫做"服务"（service），在Linux就叫做"守护进程"（daemon）。

init进程的一大任务，就是去运行这些开机启动的程序。

但是，不同的场合需要启动不同的程序，比如用作服务器时，需要启动Apache，用作桌面就不需要。

Linux允许为不同的场合，分配不同的开机启动程序，这就叫做"运行级别"（runlevel）。也就是说，启动时根据"运行级别"，确定要运行哪些程序。

![1574411922140](【Linux】总结/bd1879efce8431f6e4f2e8267497e91c.png)

Linux系统有7个运行级别(runlevel)：

- 运行级别0：系统停机状态，系统默认运行级别不能设为0，否则不能正常启动
- 运行级别1：单用户工作状态，root权限，用于系统维护，禁止远程登陆
- 运行级别2：多用户状态(没有NFS)
- 运行级别3：完全的多用户状态(有NFS)，登陆后进入控制台命令行模式
- 运行级别4：系统未使用，保留
- 运行级别5：X11控制台，登陆后进入图形GUI模式
- 运行级别6：系统正常关闭并重启，默认运行级别不能设为6，否则不能正常启动

可以使用运行级别执行关机或重启：

<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">init</span> <span class="number">0</span>	关机</span><br><span class="line"><span class="attribute">init</span> <span class="number">6</span>	重启</span><br><span class="line"><span class="attribute">12</span></span><br></pre></td></tr></table></figure>

### 加载开机启动程序

在init的配置文件中有这么一行： `si::sysinit:/etc/rc.d/rc.sysinit`它调用执行了/etc/rc.d/rc.sysinit，而rc.sysinit是一个bash shell的脚本，它主要是完成一些系统初始化的工作，rc.sysinit是每一个运行级别都要首先运行的重要脚本。

它主要完成的工作有：激活交换分区，检查磁盘，加载硬件模块以及其它一些需要优先执行任务。

<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">l5:</span><span class="number">5</span><span class="symbol">:wait</span><span class="symbol">:/etc/rc</span>.d/rc <span class="number">5</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>

这一行表示以5为参数运行/etc/rc.d/rc，/etc/rc.d/rc是一个Shell脚本，它接受5作为参数，去执行/etc/rc.d/rc5.d/目录下的所有的rc启动脚本，/etc/rc.d/rc5.d/目录中的这些启动脚本实际上都是一些连接文件，而不是真正的rc启动脚本，真正的rc启动脚本实际上都是放在/etc/rc.d/init.d/目录下。

而这些rc启动脚本有着类似的用法，它们一般能接受start、stop、restart、status等参数。

/etc/rc.d/rc5.d/中的rc启动脚本通常是K或S开头的连接文件，对于以 S 开头的启动脚本，将以start参数来运行。

而如果发现存在相应的脚本也存在K打头的连接，而且已经处于运行态了(以/var/lock/subsys/下的文件作为标志)，则将首先以stop为参数停止这些已经启动了的守护进程，然后再重新运行。

这样做是为了保证是当init改变运行级别时，所有相关的守护进程都将重启。

至于在每个运行级中将运行哪些守护进程，用户可以通过chkconfig或setup中的"System Services"来自行设定。

![1574413056057](【Linux】总结/7cee4633821586e191c96ed958888671.png)

### 用户登录

一般来说，用户的登录方式有三种：

- （1）命令行登录
- （2）ssh登录
- （3）图形界面登录

![1574413193850](【Linux】总结/ee92be977534d532ff7f7dd73799dc67.png)

对于运行级别为5的图形方式用户来说，他们的登录是通过一个图形化的登录界面。登录成功后可以直接进入 KDE、Gnome 等窗口管理器。

而本文主要讲的还是文本方式登录的情况：当我们看到mingetty的登录界面时，我们就可以输入用户名和密码来登录系统了。

Linux 的账号验证程序是login，login会接收mingetty传来的用户名作为用户名参数。

然后login会对用户名进行分析：如果用户名不是root，且存在 /etc/nologin 文件，login 将输出 nologin 文件的内容，然后退出。

这通常用来系统维护时防止非root用户登录。只有/etc/securetty中登记了的终端才允许 root 用户登录，如果不存在这个文件，则root用户可以在任何终端上登录。

/etc/usertty文件用于对用户作出附加访问限制，如果不存在这个文件，则没有其他限制。

### 图形模式与文字模式的切换方式

Linux预设提供了六个命令窗口终端机让我们来登录。

默认我们登录的就是第一个窗口，也就是tty1，这个六个窗口分别为tty1,tty2 … tty6，你可以按下Ctrl + Alt + F1 ~ F6 来切换它们。

如果你安装了图形界面，默认情况下是进入图形界面的，此时你就可以按Ctrl + Alt + F1 ~ F6来进入其中一个命令窗口界面。

当你进入命令窗口界面后再返回图形界面只要按下Ctrl + Alt + F7 就回来了。

如果你用的vmware 虚拟机，命令窗口切换的快捷键为 Alt + Space + F1~F6. 如果你在图形界面下请按Alt + Shift + Ctrl + F1~F6 切换至命令窗口。

### login shell

![1574413231936](【Linux】总结/872c2da6d598914d7f05730635b2f8f4.png)

shell，简单说就是命令行界面，让用户可以直接与操作系统对话。用户登录时打开的shell，就叫做login shell。

（1）命令行登录：首先读入 /etc/profile，这是对所有用户都有效的配置；然后依次寻找下面三个文件，这是针对当前用户的配置。

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">~/.bash_profile</span><br><span class="line">~/.bash_login</span><br><span class="line">~/.profile</span><br><span class="line">123</span><br></pre></td></tr></table></figure>

需要注意的是，这三个文件只要有一个存在，就不再读入后面的文件了。比如，要是 ~/.bash_profile 存在，就不会再读入后面两个文件了。

（2）ssh登录：与第一种情况完全相同。

（3）图形界面登录：只加载 /etc/profile 和 /.profile。也就是说，/.bash_profile 不管有没有，都不会运行。

### Linux关机

<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">sync </span>将数据由内存同步到硬盘中。</span><br><span class="line"></span><br><span class="line"><span class="keyword">shutdown </span>关机指令，你可以man <span class="keyword">shutdown </span>来看一下帮助文档。例如你可以运行如下命令关机：</span><br><span class="line"><span class="keyword">shutdown </span>–h <span class="number">10</span> <span class="string">&#x27;This server will shutdown after 10 mins&#x27;</span> 计算机将在<span class="number">10</span>分钟后关机，并且显示信息在登陆用户的当前屏幕中。</span><br><span class="line"><span class="keyword">shutdown </span>–h now 立马关机</span><br><span class="line"><span class="keyword">shutdown </span>–h <span class="number">20</span>:<span class="number">25</span> 系统会在今天<span class="number">20</span>:<span class="number">25</span>关机</span><br><span class="line"><span class="keyword">shutdown </span>–h +<span class="number">10</span> 十分钟后关机</span><br><span class="line"><span class="keyword">shutdown </span>–r now 系统立马重启</span><br><span class="line"><span class="keyword">shutdown </span>–r +<span class="number">10</span> 系统十分钟后重启</span><br><span class="line">reboot 就是重启，等同于 <span class="keyword">shutdown </span>–r now</span><br><span class="line">halt 关闭系统，等同于<span class="keyword">shutdown </span>–h now 和 poweroff</span><br><span class="line"><span class="number">1234567891011</span></span><br></pre></td></tr></table></figure>

最后总结一下，不管是重启系统还是关闭系统，首先要运行**sync**命令，把内存中的数据写到磁盘中。

关机的命令有 **shutdown –h now halt poweroff** 和 **init 0** , 重启系统的命令有 **shutdown –r now reboot init 6**。

### 计算机启动的流程

![img](【Linux】总结/02c50cf1205162dd0365613fb883ab8f.png)

boot是bootstrap（鞋带）的缩写，它来自一句谚语：

> “pull oneself up by one’s bootstraps”

字面意思是"拽着鞋带把自己拉起来"，这当然是不可能的事情。最早的时候，工程师们用它来比喻，计算机启动是一个很矛盾的过程：必须先运行程序，然后计算机才能启动，但是计算机不启动就无法运行程序！

早期真的是这样，必须想尽各种办法，把一小段程序装进内存，然后计算机才能正常运行。所以，工程师们把这个过程叫做"拉鞋带"，久而久之就简称为boot了。

计算机的整个启动过程分成四个阶段。

#### 第一阶段：BIOS

上个世纪70年代初，“只读内存”（read-only memory，缩写为ROM）发明，开机程序被刷入ROM芯片，计算机通电后，第一件事就是读取它。

BIOS全称是Basic Input/Output System，即基本输入输出系统，即下图芯片里的程序。

![1574408997299](【Linux】总结/3dc7f4a1ecf351ad1f46804e0e985f4c.png)

**硬件自检**

BIOS程序首先检查，计算机硬件能否满足运行的基本条件，这叫做"硬件自检"（Power-On Self-Test），缩写为[POST](http://en.wikipedia.org/wiki/Power-on_self-test)。

如果硬件出现问题，主板会发出不同含义的[蜂鸣](http://en.wikipedia.org/wiki/Power-on_self-test#Original_IBM_POST_beep_codes)，启动中止。如果没有问题，屏幕就会显示出CPU、内存、硬盘等信息。

![1574409216362](【Linux】总结/cd9cc5ec847de974c916cd5cf3bc9614.png)

**启动顺序**

硬件自检完成后，BIOS把控制权转交给下一阶段的启动程序。

下一阶段的启动程序根据BIOS设置项Boot Sequence（启动顺序）决定，排在前面的设备就是优先转交控制权的设备。

![1574409397609](【Linux】总结/83c7c00552e551c8fa859db5277e7103.png)

#### 第二阶段： 主引加粗样式导记录

BIOS按照"启动顺序"，把控制权转交给排在第一位的储存设备。

这时，计算机读取该设备的第一个扇区，也就是读取最前面的512个字节。如果这512个字节的最后两个字节是0x55和0xAA，表明这个设备可以用于启动；如果不是，表明设备不能用于启动，控制权于是被转交给"启动顺序"中的下一个设备。

这最前面的512个字节，就叫做["主引导记录"](http://en.wikipedia.org/wiki/Master_boot_record)（Master boot record，缩写为MBR）。

**主引导记录组成**

主引导记录由三个部分组成：

> （1） 第1-446字节：调用操作系统的机器码。
>
> （2） 第447-510字节：分区表（Partition table），共64字节。
>
> （3） 第511-512字节：主引导记录签名（0x55和0xAA）。

其中，第二部分"分区表"的作用，是将硬盘分成若干个区。

**分区表**

硬盘分区有很多好处。每个分区可以安装不同的操作系统，"主引导记录"因此必须知道将控制权转交给哪个区。

分区表的长度只有64个字节，里面又分成四项，每项16个字节。所以，一个硬盘最多只能分四个一级分区，又叫做"主分区"。

每个主分区的16个字节，由6个部分组成：

> （1） 第1个字节：如果为0x80，就表示该主分区是激活分区，控制权要转交给这个分区。四个主分区里面只能有一个是激活的。
>
> （2） 第2-4个字节：主分区第一个扇区的物理位置（柱面、磁头、扇区号等等）。
>
> （3） 第5个字节：[主分区类型](http://en.wikipedia.org/wiki/Partition_type)。
>
> （4） 第6-8个字节：主分区最后一个扇区的物理位置。
>
> （5） 第9-12字节：该主分区第一个扇区的逻辑地址。
>
> （6） 第13-16字节：主分区的扇区总数。

最后的四个字节（“主分区的扇区总数”），决定了这个主分区的长度。也就是说，一个主分区的扇区总数最多不超过2的32次方。

如果每个扇区为512个字节，就意味着单个分区最大不超过2TB。再考虑到扇区的逻辑地址也是32位，所以单个硬盘可利用的空间最大也不超过2TB。如果想使用更大的硬盘，只有2个方法：一是提高每个扇区的字节数，二是[增加扇区总数](http://en.wikipedia.org/wiki/GUID_Partition_Table)。

#### 第三阶段：硬盘启动

这时，计算机的控制权就要转交给硬盘的某个分区了，这里又分成三种情况。

**情况A：卷引导记录**

上一节提到，四个主分区里面，只有一个是激活的。计算机会读取激活分区的第一个扇区，叫做["卷引导记录](http://en.wikipedia.org/wiki/Volume_Boot_Record)"（Volume boot record，缩写为VBR）。

"卷引导记录"的主要作用是，告诉计算机，操作系统在这个分区里的位置。然后，计算机就会加载操作系统了。

**情况B：扩展分区和逻辑分区**

随着硬盘越来越大，四个主分区已经不够了，需要更多的分区。但是，分区表只有四项，因此规定有且仅有一个区可以被定义成"扩展分区"（Extended partition）。

所谓"扩展分区"，就是指这个区里面又分成多个区。这种分区里面的分区，就叫做"逻辑分区"（logical partition）。

计算机先读取扩展分区的第一个扇区，叫做["扩展引导记录"](http://en.wikipedia.org/wiki/Extended_partition)（Extended boot record，缩写为EBR）。它里面也包含一张64字节的分区表，但是最多只有两项（也就是两个逻辑分区）。

计算机接着读取第二个逻辑分区的第一个扇区，再从里面的分区表中找到第三个逻辑分区的位置，以此类推，直到某个逻辑分区的分区表只包含它自身为止（即只有一个分区项）。因此，扩展分区可以包含无数个逻辑分区。

但是，似乎很少通过这种方式启动操作系统。如果操作系统确实安装在扩展分区，一般采用下一种方式启动。

**情况C：启动管理器**

在这种情况下，计算机读取"主引导记录"前面446字节的机器码之后，不再把控制权转交给某一个分区，而是运行事先安装的["启动管理器"](http://en.wikipedia.org/wiki/Boot_loader#Modern_boot_loaders)（boot loader），由用户选择启动哪一个操作系统。

Linux环境中的启动管理器例如[Grub](http://en.wikipedia.org/wiki/GNU_GRUB)。

![1574410612420](【Linux】总结/0eba97ff505cb05cb14ea86c7b1fec93.png)

#### 第四阶段：操作系统

控制权转交给操作系统后，操作系统的内核首先被载入内存。

以Linux系统为例，先载入/boot目录下面的kernel。内核加载成功后，第一个运行的程序是/sbin/init。它根据配置文件（Debian系统是/etc/initab）产生init进程。这是Linux启动后的第一个进程，pid进程编号为1，其他进程都是它的后代。

然后，init线程加载系统的各个模块，比如窗口程序和网络程序，直至执行/bin/login程序，跳出登录界面，等待用户输入用户名和密码。

至此，全部启动过程完成。

### 单用户模式修改Centos系统root密码

步骤如下：

重启linux系统

![4_21](【Linux】总结/b4ff39b063d3a2da3580bc94930ed01e.png)

3 秒之内要按一下回车，出现如下界面

![4_22](【Linux】总结/67849db77018ceba958128dde3394dea.png)

按向下方向键移动到第二行，按"e"进入编辑模式

![4_23](【Linux】总结/86c2fc832669cfbe4fad0ff747dddc76.png)

在 第二行最后边输入 single，用空格与前面内容隔开

![4_24](【Linux】总结/e1a541c56549ab770ba103ee88686a9c.png)

回车

![4_25](【Linux】总结/9095c7353ef32c132b4e34c7ba1fdedc.png)

最后按"b"启动，启动后就进入了单用户模式了

![4_26](【Linux】总结/ccbc8027a3d2a1ca079bdc3dd29ee3fd.png)

进入到单用户模式后，就可以使用passwd命令任意更改root密码了：

![4_27](【Linux】总结/7b86f9afd2569841fe290d0d843aa3d7.png)

### 救援模式修改Ubuntu系统root密码

重启，按住shift键，出现如下界面，选中如下选项

![img](【Linux】总结/190138072fab9c55fddac036a934c26d.jpeg)

按回车键进入如下界面，然后选中最新的recovery mode选项

![img](【Linux】总结/02e68b1361efb698209cbe4573ff1158.jpeg)

按e进入如下界面，找到图中红色框的recovery nomodeset并将其删掉，再在这一行的后面输入

<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">quiet splash rw <span class="attribute">init</span>=/bin/bash</span><br><span class="line">1</span><br></pre></td></tr></table></figure>

![img](【Linux】总结/788cbb9e3090ad75aa67cd51011a8633.jpeg)

![img](【Linux】总结/73412c34d5fa9a4b55add0b77ad008d6.jpeg)

接着按F10或者Ctrl+x 后出现如下界面，在命令行内输入passwd后进行修改密码即可

![img](【Linux】总结/e2a2b2f6ce4531eab5bd71d51e4caee1.jpeg)

修改完之后重启系统。

## 虚拟机

### 三种网络模式

**桥接**

在网络网卡上安装了一个桥接协议，让这块网卡处于混杂模式，可以同时连接多个网络的做法。

桥接下，类似于把物理主机虚拟为一个交换机，所有桥接设置的虚拟机连接到这个交换机的一个接口上，物理主机也同样查在这个交换机当中，所以所有桥接下网卡与网卡都是交换模式的，相互可以访问而不干扰。

![img](【Linux】总结/20061909046cf0a4cafbe52ded65acac.jpeg)

**Host-only**（仅与主机通信）

虚拟机使用VMnet1网卡与主机单独组网,主机对于虚拟机相当于路由器

![img](【Linux】总结/5b8910196f03cc08e8e20c7619817a65.jpeg)

**NAT**

虚拟机使用VMnet8网卡与主机单独组网,主机对于虚拟机相当于路由器，VMnet8网卡通过NAT地址转换协议与物理机网卡通信

![img](【Linux】总结/ceb6926bc18279d63927d02d1214e341.jpeg)

![img](【Linux】总结/3a7cb1671fbea88783a3a741a12ab342.jpeg)

### 常见问题

#### 修改静态地址后发现无法ping外网

<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">需要设置网关<span class="built_in"></span></span><br><span class="line"><span class="built_in">route </span><span class="built_in">add</span><span class="built_in"> default </span>gw 192.168.33.1</span><br><span class="line">添加nameserver</span><br><span class="line">vi /etc/resolv.conf</span><br><span class="line">nameserver 192.168.33.1</span><br><span class="line">12345</span><br></pre></td></tr></table></figure>

#### 虚拟机克隆后eth0消失

<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">直接修改  <span class="regexp">/etc/</span>sysconfig<span class="regexp">/network-script/i</span>fcfg-eth0</span><br><span class="line">删掉UUID  HWADDR</span><br><span class="line">配置静态地址</span><br><span class="line">然后：</span><br><span class="line">rm -rf 　<span class="regexp">/etc/u</span>dev<span class="regexp">/rules.d/</span><span class="number">70</span>-persistent-net.rules</span><br><span class="line">然后 reboot</span><br><span class="line"><span class="number">123456</span></span><br></pre></td></tr></table></figure></script></div><div><div><div style="text-align:center;color:#ccc;font-size:14px">-------------本文结束<i class="fa fa-heart"></i>感谢阅读-------------</div></div></div><div class="reward-container"><div>创作不易，您的支持将鼓励我继续创作！</div><button onclick='var qr=document.getElementById("qr");qr.style.display="none"===qr.style.display?"block":"none"'>打赏</button><div id="qr" style="display:none"><div style="display:inline-block"><img src="/images/loading.jpeg" data-original="/images/wechatpay.png" alt="Corazon 微信支付"><p>微信支付</p></div><div style="display:inline-block"><img src="/images/loading.jpeg" data-original="/images/alipay.jpg" alt="Corazon 支付宝"><p>支付宝</p></div></div></div><div><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者： </strong>Corazon</li><li class="post-copyright-link"><strong>本文链接：</strong> <a href="http://mcorazon.top/posts/2c8b313c/" title="【Linux】总结">http://mcorazon.top/posts/2c8b313c/</a></li><li class="post-copyright-license"><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><footer class="post-footer"><div class="post-nav"><div class="post-nav-item"><a href="/posts/5826694d/" rel="prev" title="【Linux】Linux学习"><i class="fa fa-chevron-left"></i> 【Linux】Linux学习</a></div><div class="post-nav-item"></div></div></footer></article></div><div class="comment-button-group"><a class="btn comment-button gitalk">gitalk</a> <a class="btn comment-button valine">valine</a></div><div class="comment-position gitalk"><div class="comments" id="gitalk-container"></div></div><div class="comment-position valine"><div class="comments" id="valine-comments"></div></div><script>(function() {
          let commentButton = document.querySelectorAll('.comment-button');
            commentButton.forEach(element => {
            let commentClass = element.classList[2];
            element.addEventListener('click', () => {
              commentButton.forEach(rmActive => rmActive.classList.remove('active'));
              element.classList.add('active');
              document.querySelectorAll('.comment-position').forEach(rmActive => rmActive.classList.remove('active'));
              document.querySelector(`.comment-position.${commentClass}`).classList.add('active');
              if (CONFIG.comments.storage) {
                localStorage.setItem('comments_active', commentClass);
              }
            });
          });
          let { activeClass } = CONFIG.comments;
          if (CONFIG.comments.storage) {
            activeClass = localStorage.getItem('comments_active') || activeClass;
          }
          if (activeClass) {
            let activeButton = document.querySelector(`.comment-button.${activeClass}`);
            if (activeButton) {
              activeButton.click();
            }
          }
        })();</script><script>window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc">文章目录</li><li class="sidebar-nav-overview">站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%8F%91%E5%B1%95%E5%8F%B2"><span class="nav-number">1.</span> <span class="nav-text">操作系统的发展史</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Unix"><span class="nav-number">1.1.</span> <span class="nav-text">Unix</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Minix"><span class="nav-number">1.2.</span> <span class="nav-text">Minix</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Linux"><span class="nav-number">1.3.</span> <span class="nav-text">Linux</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%8F%91%E5%B1%95"><span class="nav-number">1.4.</span> <span class="nav-text">操作系统的发展</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Minix%E6%B2%A1%E6%9C%89%E7%81%AB%E8%B5%B7%E6%9D%A5%E7%9A%84%E5%8E%9F%E5%9B%A0"><span class="nav-number">1.5.</span> <span class="nav-text">Minix没有火起来的原因</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Linux%E4%BB%8B%E7%BB%8D"><span class="nav-number">2.</span> <span class="nav-text">Linux介绍</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Linux%E5%86%85%E6%A0%B8-%E5%8F%91%E8%A1%8C%E7%89%88"><span class="nav-number">2.1.</span> <span class="nav-text">Linux内核&amp;发行版</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Linux%E5%86%85%E6%A0%B8%E7%89%88%E6%9C%AC"><span class="nav-number">2.1.1.</span> <span class="nav-text">Linux内核版本</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Linux%E5%8F%91%E8%A1%8C%E7%89%88%E6%9C%AC"><span class="nav-number">2.1.2.</span> <span class="nav-text">Linux发行版本</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B1%BBUnix%E7%B3%BB%E7%BB%9F%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84"><span class="nav-number">2.2.</span> <span class="nav-text">类Unix系统目录结构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Linux%E7%9B%AE%E5%BD%95"><span class="nav-number">2.3.</span> <span class="nav-text">Linux目录</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%94%A8%E6%88%B7%E7%9B%AE%E5%BD%95"><span class="nav-number">2.4.</span> <span class="nav-text">用户目录</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C"><span class="nav-number">3.</span> <span class="nav-text">命令行基本操作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95"><span class="nav-number">3.1.</span> <span class="nav-text">命令使用方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E5%B8%AE%E5%8A%A9%E6%96%87%E6%A1%A3"><span class="nav-number">3.2.</span> <span class="nav-text">查看帮助文档</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#help"><span class="nav-number">3.2.1.</span> <span class="nav-text">help</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#man-manual"><span class="nav-number">3.2.2.</span> <span class="nav-text">man(manual)</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#tab%E9%94%AE%E8%87%AA%E5%8A%A8%E8%A1%A5%E5%85%A8"><span class="nav-number">3.3.</span> <span class="nav-text">tab键自动补全</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#history%E6%B8%B8%E8%A7%88%E5%8E%86%E5%8F%B2"><span class="nav-number">3.4.</span> <span class="nav-text">history游览历史</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E8%A1%8C%E4%B8%AD%E7%9A%84ctrl%E7%BB%84%E5%90%88%E9%94%AE"><span class="nav-number">3.5.</span> <span class="nav-text">命令行中的ctrl组合键</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Linux%E5%91%BD%E4%BB%A4"><span class="nav-number">4.</span> <span class="nav-text">Linux命令</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86"><span class="nav-number">4.1.</span> <span class="nav-text">权限管理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%97%E5%87%BA%E7%9B%AE%E5%BD%95%E7%9A%84%E5%86%85%E5%AE%B9%EF%BC%9Als"><span class="nav-number">4.1.1.</span> <span class="nav-text">列出目录的内容：ls</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%98%BE%E7%A4%BAinode%E7%9A%84%E5%86%85%E5%AE%B9%EF%BC%9Astat"><span class="nav-number">4.1.2.</span> <span class="nav-text">显示inode的内容：stat</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E8%AE%BF%E9%97%AE%E6%9D%83%E9%99%90"><span class="nav-number">4.1.3.</span> <span class="nav-text">文件访问权限</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90%EF%BC%9Achmod"><span class="nav-number">4.1.4.</span> <span class="nav-text">修改文件权限：chmod</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E6%96%87%E4%BB%B6%E6%89%80%E6%9C%89%E8%80%85%EF%BC%9Achown"><span class="nav-number">4.1.5.</span> <span class="nav-text">修改文件所有者：chown</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E6%96%87%E4%BB%B6%E6%89%80%E5%B1%9E%E7%BB%84%EF%BC%9Achgrp"><span class="nav-number">4.1.6.</span> <span class="nav-text">修改文件所属组：chgrp</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9%E6%9F%A5%E7%9C%8B"><span class="nav-number">4.2.</span> <span class="nav-text">文件内容查看</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E6%98%BE%E7%A4%BA%EF%BC%9Acat%E3%80%81tac"><span class="nav-number">4.2.1.</span> <span class="nav-text">基本显示：cat、tac</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%98%BE%E7%A4%BA%E8%A1%8C%E5%8F%B7%EF%BC%9Anl"><span class="nav-number">4.2.2.</span> <span class="nav-text">显示行号：nl</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%86%E5%B1%8F%E6%98%BE%E7%A4%BA%EF%BC%9Amore%E3%80%81less"><span class="nav-number">4.2.3.</span> <span class="nav-text">分屏显示：more、less</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%96%E9%A6%96%E5%B0%BEn%E8%A1%8C%EF%BC%9Ahead%E3%80%81tail"><span class="nav-number">4.2.4.</span> <span class="nav-text">取首尾n行：head、tail</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86"><span class="nav-number">4.3.</span> <span class="nav-text">文件管理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BE%93%E5%87%BA%E9%87%8D%E5%AE%9A%E5%90%91%EF%BC%9A"><span class="nav-number">4.3.1.</span> <span class="nav-text">输出重定向：&gt;</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%AE%A1%E9%81%93%EF%BC%9A"><span class="nav-number">4.3.2.</span> <span class="nav-text">管道：|</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B8%85%E5%B1%8F%EF%BC%9Aclear"><span class="nav-number">4.3.3.</span> <span class="nav-text">清屏：clear</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%87%E6%8D%A2%E5%B7%A5%E4%BD%9C%E7%9B%AE%E5%BD%95%EF%BC%9A-cd"><span class="nav-number">4.3.4.</span> <span class="nav-text">切换工作目录： cd</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%98%BE%E7%A4%BA%E5%BD%93%E5%89%8D%E8%B7%AF%E5%BE%84%EF%BC%9Apwd"><span class="nav-number">4.3.5.</span> <span class="nav-text">显示当前路径：pwd</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E7%9B%AE%E5%BD%95%EF%BC%9Amkdir"><span class="nav-number">4.3.6.</span> <span class="nav-text">创建目录：mkdir</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E6%96%87%E4%BB%B6%EF%BC%9Arm"><span class="nav-number">4.3.7.</span> <span class="nav-text">删除文件：rm</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BB%BA%E7%AB%8B%E9%93%BE%E6%8E%A5%E6%96%87%E4%BB%B6%EF%BC%9Aln"><span class="nav-number">4.3.8.</span> <span class="nav-text">建立链接文件：ln</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%96%87%E6%9C%AC%E6%90%9C%E7%B4%A2%EF%BC%9Agrep"><span class="nav-number">4.3.9.</span> <span class="nav-text">文本搜索：grep</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9F%A5%E6%89%BE%E6%96%87%E4%BB%B6%EF%BC%9Afind"><span class="nav-number">4.3.10.</span> <span class="nav-text">查找文件：find</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8B%B7%E8%B4%9D%E6%96%87%E4%BB%B6%EF%BC%9Acp"><span class="nav-number">4.3.11.</span> <span class="nav-text">拷贝文件：cp</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%A7%BB%E5%8A%A8%E6%96%87%E4%BB%B6%EF%BC%9Amv"><span class="nav-number">4.3.12.</span> <span class="nav-text">移动文件：mv</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BD%92%E6%A1%A3%E7%AE%A1%E7%90%86%EF%BC%9Atar"><span class="nav-number">4.3.13.</span> <span class="nav-text">归档管理：tar</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E5%8E%8B%E7%BC%A9%E8%A7%A3%E5%8E%8B%EF%BC%9Agzip%E3%80%81bzip2"><span class="nav-number">4.3.14.</span> <span class="nav-text">文件压缩解压：gzip、bzip2</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E5%8E%8B%E7%BC%A9%E8%A7%A3%E5%8E%8B%EF%BC%9Azip%E3%80%81unzip"><span class="nav-number">4.3.15.</span> <span class="nav-text">文件压缩解压：zip、unzip</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E5%91%BD%E4%BB%A4%E4%BD%8D%E7%BD%AE%EF%BC%9Awhich"><span class="nav-number">4.3.16.</span> <span class="nav-text">查看命令位置：which</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%94%A8%E6%88%B7%E5%92%8C%E7%94%A8%E6%88%B7%E7%BB%84%E7%AE%A1%E7%90%86"><span class="nav-number">4.4.</span> <span class="nav-text">用户和用户组管理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E5%BD%93%E5%89%8D%E7%94%A8%E6%88%B7%EF%BC%9Awhoami"><span class="nav-number">4.4.1.</span> <span class="nav-text">查看当前用户：whoami</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E7%99%BB%E5%BD%95%E7%94%A8%E6%88%B7%EF%BC%9Awho"><span class="nav-number">4.4.2.</span> <span class="nav-text">查看登录用户：who</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%80%E5%87%BA%E7%99%BB%E5%BD%95%E8%B4%A6%E6%88%B7%EF%BC%9A-exit"><span class="nav-number">4.4.3.</span> <span class="nav-text">退出登录账户： exit</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0%E7%94%A8%E6%88%B7%E8%B4%A6%E5%8F%B7%EF%BC%9Auseradd"><span class="nav-number">4.4.4.</span> <span class="nav-text">添加用户账号：useradd</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E7%94%A8%E6%88%B7%EF%BC%9Ausermod"><span class="nav-number">4.4.5.</span> <span class="nav-text">修改用户：usermod</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AE%E7%94%A8%E6%88%B7%E5%AF%86%E7%A0%81%EF%BC%9Apasswd"><span class="nav-number">4.4.6.</span> <span class="nav-text">设置用户密码：passwd</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E7%94%A8%E6%88%B7%EF%BC%9Auserdel"><span class="nav-number">4.4.7.</span> <span class="nav-text">删除用户：userdel</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%87%E6%8D%A2%E7%94%A8%E6%88%B7%EF%BC%9Asu"><span class="nav-number">4.4.8.</span> <span class="nav-text">切换用户：su</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BB%A5root%E8%BA%AB%E4%BB%BD%E6%89%A7%E8%A1%8C%E6%8C%87%E4%BB%A4%EF%BC%9Asudo"><span class="nav-number">4.4.9.</span> <span class="nav-text">以root身份执行指令：sudo</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0%E3%80%81%E5%88%A0%E9%99%A4%E7%BB%84%E8%B4%A6%E5%8F%B7%EF%BC%9Agroupadd%E3%80%81groupdel"><span class="nav-number">4.4.10.</span> <span class="nav-text">添加、删除组账号：groupadd、groupdel</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%94%A8%E6%88%B7%E7%BB%84%E7%AE%A1%E7%90%86%EF%BC%9Agroupmod"><span class="nav-number">4.4.11.</span> <span class="nav-text">用户组管理：groupmod</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86"><span class="nav-number">4.5.</span> <span class="nav-text">系统管理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E5%BD%93%E5%89%8D%E6%97%A5%E5%8E%86%EF%BC%9Acal"><span class="nav-number">4.5.1.</span> <span class="nav-text">查看当前日历：cal</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%98%BE%E7%A4%BA%E6%88%96%E8%AE%BE%E7%BD%AE%E6%97%B6%E9%97%B4%EF%BC%9Adate"><span class="nav-number">4.5.2.</span> <span class="nav-text">显示或设置时间：date</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E7%BD%91%E7%BB%9C%E7%8A%B6%E6%80%81%EF%BC%9Anetstat"><span class="nav-number">4.5.3.</span> <span class="nav-text">查看网络状态：netstat</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E8%BF%9B%E7%A8%8B%E4%BF%A1%E6%81%AF%EF%BC%9Aps"><span class="nav-number">4.5.4.</span> <span class="nav-text">查看进程信息：ps</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BB%A5%E6%A0%91%E7%8A%B6%E5%9B%BE%E6%98%BE%E7%A4%BA%E8%BF%9B%E7%A8%8B%E5%85%B3%E7%B3%BB%EF%BC%9Apstree"><span class="nav-number">4.5.5.</span> <span class="nav-text">以树状图显示进程关系：pstree</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8A%A8%E6%80%81%E6%98%BE%E7%A4%BA%E8%BF%9B%E7%A8%8B%EF%BC%9Atop"><span class="nav-number">4.5.6.</span> <span class="nav-text">动态显示进程：top</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%88%E6%AD%A2%E8%BF%9B%E7%A8%8B%EF%BC%9Akill"><span class="nav-number">4.5.7.</span> <span class="nav-text">终止进程：kill</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%85%B3%E6%9C%BA%E9%87%8D%E5%90%AF%EF%BC%9Areboot%E3%80%81shutdown%E3%80%81init"><span class="nav-number">4.5.8.</span> <span class="nav-text">关机重启：reboot、shutdown、init</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A3%80%E6%B5%8B%E7%A3%81%E7%9B%98%E7%A9%BA%E9%97%B4%EF%BC%9Adf"><span class="nav-number">4.5.9.</span> <span class="nav-text">检测磁盘空间：df</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A3%80%E6%B5%8B%E7%9B%AE%E5%BD%95%E6%89%80%E5%8D%A0%E7%A3%81%E7%9B%98%E7%A9%BA%E9%97%B4%EF%BC%9Adu"><span class="nav-number">4.5.10.</span> <span class="nav-text">检测目录所占磁盘空间：du</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E6%88%96%E9%85%8D%E7%BD%AE%E7%BD%91%E5%8D%A1%E4%BF%A1%E6%81%AF%EF%BC%9Aifconfig"><span class="nav-number">4.5.11.</span> <span class="nav-text">查看或配置网卡信息：ifconfig</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B5%8B%E8%AF%95%E8%BF%9C%E7%A8%8B%E4%B8%BB%E6%9C%BA%E8%BF%9E%E9%80%9A%E6%80%A7%EF%BC%9Aping"><span class="nav-number">4.5.12.</span> <span class="nav-text">测试远程主机连通性：ping</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Linux-%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86"><span class="nav-number">4.6.</span> <span class="nav-text">Linux 磁盘管理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#df"><span class="nav-number">4.6.1.</span> <span class="nav-text">df</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#du"><span class="nav-number">4.6.2.</span> <span class="nav-text">du</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#fdisk"><span class="nav-number">4.6.3.</span> <span class="nav-text">fdisk</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%A3%81%E7%9B%98%E6%A0%BC%E5%BC%8F%E5%8C%96"><span class="nav-number">4.6.4.</span> <span class="nav-text">磁盘格式化</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%A3%81%E7%9B%98%E6%A3%80%E9%AA%8C"><span class="nav-number">4.6.5.</span> <span class="nav-text">磁盘检验</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD%E4%B8%8E%E5%8D%B8%E9%99%A4"><span class="nav-number">4.6.6.</span> <span class="nav-text">磁盘挂载与卸除</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Linux%E7%AE%A1%E9%81%93%E5%91%BD%E4%BB%A4"><span class="nav-number">4.7.</span> <span class="nav-text">Linux管道命令</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#wc-%E7%BB%9F%E8%AE%A1%E5%AD%97%E6%95%B0"><span class="nav-number">4.7.1.</span> <span class="nav-text">wc - 统计字数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#cut-%E5%88%97%E9%80%89%E5%8F%96%E5%91%BD%E4%BB%A4"><span class="nav-number">4.7.2.</span> <span class="nav-text">cut - 列选取命令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#grep-%E8%A1%8C%E9%80%89%E5%8F%96%E5%91%BD%E4%BB%A4"><span class="nav-number">4.7.3.</span> <span class="nav-text">grep - 行选取命令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#sort-%E6%8E%92%E5%BA%8F"><span class="nav-number">4.7.4.</span> <span class="nav-text">sort - 排序</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#uniq-%E5%8E%BB%E9%87%8D"><span class="nav-number">4.7.5.</span> <span class="nav-text">uniq - 去重</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#tee-%E5%90%8C%E6%97%B6%E8%BE%93%E5%87%BA%E5%A4%9A%E4%B8%AA%E6%96%87%E4%BB%B6"><span class="nav-number">4.7.6.</span> <span class="nav-text">tee - 同时输出多个文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#tr-%E6%9B%BF%E6%8D%A2%E6%8C%87%E5%AE%9A%E7%9A%84%E5%AD%97%E7%AC%A6"><span class="nav-number">4.7.7.</span> <span class="nav-text">tr - 替换指定的字符</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#join-%E6%96%87%E4%BB%B6%E6%8C%89%E8%A1%8C%E8%BF%9E%E6%8E%A5"><span class="nav-number">4.7.8.</span> <span class="nav-text">join - 文件按行连接</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#paste-%E5%B0%86%E5%A4%9A%E4%B8%AA%E6%96%87%E4%BB%B6%E5%AF%B9%E5%BA%94%E8%A1%8C%E9%93%BE%E6%8E%A5%E5%9C%A8%E4%B8%80%E8%B5%B7"><span class="nav-number">4.7.9.</span> <span class="nav-text">paste-将多个文件对应行链接在一起</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#split-%E6%96%87%E4%BB%B6%E5%88%87%E5%89%B2"><span class="nav-number">4.7.10.</span> <span class="nav-text">split - 文件切割</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#xargs-%E5%8F%82%E6%95%B0%E4%BB%A3%E6%8D%A2"><span class="nav-number">4.7.11.</span> <span class="nav-text">xargs - 参数代换</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#linux%E5%91%BD%E4%BB%A4%E7%BB%83%E4%B9%A0"><span class="nav-number">5.</span> <span class="nav-text">linux命令练习</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="nav-number">5.1.</span> <span class="nav-text">常用命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B3%BB%E7%BB%9F%E5%91%BD%E4%BB%A4"><span class="nav-number">5.2.</span> <span class="nav-text">系统命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%94%A8%E6%88%B7%E5%92%8C%E7%BB%84"><span class="nav-number">5.3.</span> <span class="nav-text">用户和组</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9D%83%E9%99%90"><span class="nav-number">5.4.</span> <span class="nav-text">权限</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%AE%E5%8A%A9%E6%96%87%E6%A1%A3"><span class="nav-number">5.5.</span> <span class="nav-text">帮助文档</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#VIM"><span class="nav-number">5.6.</span> <span class="nav-text">VIM</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E6%89%BE"><span class="nav-number">5.7.</span> <span class="nav-text">查找</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%89%93%E5%8C%85%E4%B8%8E%E5%8E%8B%E7%BC%A9"><span class="nav-number">5.8.</span> <span class="nav-text">打包与压缩</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="nav-number">5.9.</span> <span class="nav-text">正则表达式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E9%87%8D%E5%AE%9A%E5%90%91"><span class="nav-number">5.10.</span> <span class="nav-text">输入输出重定向</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%9B%E7%A8%8B%E6%8E%A7%E5%88%B6"><span class="nav-number">5.11.</span> <span class="nav-text">进程控制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%B6%E4%BB%96%E5%91%BD%E4%BB%A4"><span class="nav-number">5.12.</span> <span class="nav-text">其他命令</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BF%9C%E7%A8%8B%E6%96%87%E4%BB%B6%E5%A4%8D%E5%88%B6%EF%BC%9Ascp"><span class="nav-number">5.12.1.</span> <span class="nav-text">远程文件复制：scp</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#locate%E6%9F%A5%E6%89%BE"><span class="nav-number">5.12.2.</span> <span class="nav-text">locate查找</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#which%E5%91%BD%E4%BB%A4"><span class="nav-number">5.12.3.</span> <span class="nav-text">which命令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#echo"><span class="nav-number">5.12.4.</span> <span class="nav-text">echo</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AE%E6%88%96%E6%98%BE%E7%A4%BA%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%EF%BC%9Aexport"><span class="nav-number">5.12.5.</span> <span class="nav-text">设置或显示环境变量：export</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E4%B8%BB%E6%9C%BA%E5%90%8D-ip%E5%9C%B0%E5%9D%80"><span class="nav-number">5.12.6.</span> <span class="nav-text">修改主机名&amp;ip地址</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#mount%E6%8C%82%E8%BD%BD"><span class="nav-number">5.12.7.</span> <span class="nav-text">mount挂载</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ssh%E5%85%8D%E5%AF%86%E7%99%BB%E9%99%86"><span class="nav-number">5.12.8.</span> <span class="nav-text">ssh免密登陆</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%89%B9%E9%87%8F%E6%B7%BB%E5%8A%A0%E7%94%A8%E6%88%B7"><span class="nav-number">5.13.</span> <span class="nav-text">批量添加用户</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%8E%E7%94%A8%E6%88%B7%E8%B4%A6%E5%8F%B7%E6%9C%89%E5%85%B3%E7%9A%84%E7%B3%BB%E7%BB%9F%E6%96%87%E4%BB%B6"><span class="nav-number">5.13.1.</span> <span class="nav-text">与用户账号有关的系统文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%9E%E6%93%8D"><span class="nav-number">5.13.2.</span> <span class="nav-text">实操</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#crontab%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="nav-number">5.14.</span> <span class="nav-text">crontab的使用</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%89%B9%E6%AE%8A%E6%9D%83%E9%99%90"><span class="nav-number">6.</span> <span class="nav-text">特殊权限</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%89%E7%A7%8D%E7%89%B9%E6%AE%8A%E7%9A%84%E6%9D%83%E9%99%90"><span class="nav-number">6.1.</span> <span class="nav-text">三种特殊的权限</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#SetUID-suid"><span class="nav-number">6.1.1.</span> <span class="nav-text">SetUID(suid)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#setGID%EF%BC%88sgid%EF%BC%89"><span class="nav-number">6.1.2.</span> <span class="nav-text">setGID（sgid）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#sticky-sbit-%E7%B2%98%E6%BB%9E%E4%BD%8D"><span class="nav-number">6.1.3.</span> <span class="nav-text">sticky(sbit)粘滞位</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#chattr%E6%9D%83%E9%99%90"><span class="nav-number">6.2.</span> <span class="nav-text">chattr权限</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#lsattr%EF%BC%9A%E6%9F%A5%E7%9C%8B%E7%89%B9%E6%AE%8A%E6%9D%83%E9%99%90"><span class="nav-number">6.2.1.</span> <span class="nav-text">lsattr：查看特殊权限</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#chattr%EF%BC%9A%E8%AE%BE%E7%BD%AE%E7%89%B9%E6%AE%8A%E6%9D%83%E9%99%90"><span class="nav-number">6.2.2.</span> <span class="nav-text">chattr：设置特殊权限</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8E%A9%E7%A0%81umask"><span class="nav-number">6.3.</span> <span class="nav-text">掩码umask</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#umask%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="nav-number">6.3.1.</span> <span class="nav-text">umask的作用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#umask%E6%98%AF%E5%A6%82%E4%BD%95%E6%94%B9%E5%8F%98%E6%96%B0%E6%96%87%E4%BB%B6%E7%9A%84%E6%9D%83%E9%99%90"><span class="nav-number">6.3.2.</span> <span class="nav-text">umask是如何改变新文件的权限</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B0%B8%E4%B9%85%E4%BF%AE%E6%94%B9umask"><span class="nav-number">6.3.3.</span> <span class="nav-text">永久修改umask</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#linux%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85"><span class="nav-number">7.</span> <span class="nav-text">linux软件安装</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Ubuntu%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85%E4%B8%8E%E5%8D%B8%E8%BD%BD"><span class="nav-number">7.1.</span> <span class="nav-text">Ubuntu软件安装与卸载</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9B%B4%E6%96%B0Ubuntu%E8%BD%AF%E4%BB%B6%E4%B8%8B%E8%BD%BD%E5%9C%B0%E5%9D%80"><span class="nav-number">7.1.1.</span> <span class="nav-text">更新Ubuntu软件下载地址</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Ubuntu%E8%BD%AF%E4%BB%B6%E6%93%8D%E4%BD%9C%E7%9A%84%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4"><span class="nav-number">7.1.2.</span> <span class="nav-text">Ubuntu软件操作的相关命令</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#yum%E5%AE%89%E8%A3%85%E5%91%BD%E4%BB%A4"><span class="nav-number">7.2.</span> <span class="nav-text">yum安装命令</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9B%B4%E6%96%B0%E5%9B%BD%E5%86%85yum%E6%BA%90"><span class="nav-number">7.2.1.</span> <span class="nav-text">更新国内yum源</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#yum%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="nav-number">7.2.2.</span> <span class="nav-text">yum常用命令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#yum%E5%9C%A8%E7%BA%BF%E5%AE%89%E8%A3%85MySQL5-7"><span class="nav-number">7.2.3.</span> <span class="nav-text">yum在线安装MySQL5.7</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#rpm"><span class="nav-number">7.2.4.</span> <span class="nav-text">rpm</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Linux%E7%9A%84%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE"><span class="nav-number">7.3.</span> <span class="nav-text">Linux的基本配置</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%89%E8%A3%85JDK"><span class="nav-number">7.3.1.</span> <span class="nav-text">安装JDK</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%B6%E4%BD%9C%E6%9C%AC%E5%9C%B0YUM%E6%BA%90"><span class="nav-number">7.3.2.</span> <span class="nav-text">制作本地YUM源</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Shell%E7%BC%96%E7%A8%8B"><span class="nav-number">8.</span> <span class="nav-text">Shell编程</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%A5%E9%97%A8"><span class="nav-number">8.1.</span> <span class="nav-text">入门</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BF%90%E8%A1%8CShell%E8%84%9A%E6%9C%AC"><span class="nav-number">8.1.1.</span> <span class="nav-text">运行Shell脚本</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BC%96%E5%86%99%E4%B8%80%E4%B8%AA%E5%BF%AB%E6%8D%B7%E5%88%9B%E5%BB%BAshell%E8%84%9A%E6%9C%AC%E7%9A%84%E5%91%BD%E4%BB%A4"><span class="nav-number">8.1.2.</span> <span class="nav-text">编写一个快捷创建shell脚本的命令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#echo%E5%91%BD%E4%BB%A4"><span class="nav-number">8.1.3.</span> <span class="nav-text">echo命令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#printf-%E5%91%BD%E4%BB%A4"><span class="nav-number">8.1.4.</span> <span class="nav-text">printf 命令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Shell-%E6%B3%A8%E9%87%8A"><span class="nav-number">8.1.5.</span> <span class="nav-text">Shell 注释</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Shell%E5%8F%98%E9%87%8F"><span class="nav-number">8.2.</span> <span class="nav-text">Shell变量</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%9A%E4%B9%89%E5%8F%98%E9%87%8F"><span class="nav-number">8.2.1.</span> <span class="nav-text">定义变量</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E5%8F%98%E9%87%8F"><span class="nav-number">8.2.2.</span> <span class="nav-text">使用变量</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%AA%E8%AF%BB%E5%8F%98%E9%87%8F"><span class="nav-number">8.2.3.</span> <span class="nav-text">只读变量</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E5%8F%98%E9%87%8F"><span class="nav-number">8.2.4.</span> <span class="nav-text">删除变量</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%98%E9%87%8F%E7%B1%BB%E5%9E%8B"><span class="nav-number">8.2.5.</span> <span class="nav-text">变量类型</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Shell-%E5%87%BD%E6%95%B0"><span class="nav-number">8.3.</span> <span class="nav-text">Shell 函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB"><span class="nav-number">8.4.</span> <span class="nav-text">文件包含</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#shell%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="nav-number">8.5.</span> <span class="nav-text">shell数据类型</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="nav-number">8.5.1.</span> <span class="nav-text">字符串</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%95%B0%E7%BB%84"><span class="nav-number">8.5.2.</span> <span class="nav-text">数组</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Shell%E4%BC%A0%E9%80%92%E5%8F%82%E6%95%B0"><span class="nav-number">8.5.3.</span> <span class="nav-text">Shell传递参数</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Shell%E5%9F%BA%E6%9C%AC%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">8.6.</span> <span class="nav-text">Shell基本运算符</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%AE%97%E6%9C%AF%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">8.6.1.</span> <span class="nav-text">算术运算符</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%85%B3%E7%B3%BB%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">8.6.2.</span> <span class="nav-text">关系运算符</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B8%83%E5%B0%94%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">8.6.3.</span> <span class="nav-text">布尔运算符</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">8.6.4.</span> <span class="nav-text">逻辑运算符</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">8.6.5.</span> <span class="nav-text">字符串运算符</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E6%B5%8B%E8%AF%95%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">8.6.6.</span> <span class="nav-text">文件测试运算符</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#test%E5%91%BD%E4%BB%A4"><span class="nav-number">8.7.</span> <span class="nav-text">test命令</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%95%B0%E5%80%BC%E6%B5%8B%E8%AF%95"><span class="nav-number">8.7.1.</span> <span class="nav-text">数值测试</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%B5%8B%E8%AF%95"><span class="nav-number">8.7.2.</span> <span class="nav-text">字符串测试</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E6%B5%8B%E8%AF%95"><span class="nav-number">8.7.3.</span> <span class="nav-text">文件测试</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Shell-%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6"><span class="nav-number">8.8.</span> <span class="nav-text">Shell 流程控制</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#if-else%E5%88%A4%E6%96%AD%E8%AF%AD%E5%8F%A5"><span class="nav-number">8.8.1.</span> <span class="nav-text">if else判断语句</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#for%E5%BE%AA%E7%8E%AF"><span class="nav-number">8.8.2.</span> <span class="nav-text">for循环</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#while%E5%BE%AA%E7%8E%AF"><span class="nav-number">8.8.3.</span> <span class="nav-text">while循环</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%97%A0%E9%99%90%E5%BE%AA%E7%8E%AF"><span class="nav-number">8.8.4.</span> <span class="nav-text">无限循环</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#until-%E5%BE%AA%E7%8E%AF"><span class="nav-number">8.8.5.</span> <span class="nav-text">until 循环</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#case"><span class="nav-number">8.8.6.</span> <span class="nav-text">case</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%B7%B3%E5%87%BA%E5%BE%AA%E7%8E%AF"><span class="nav-number">8.8.7.</span> <span class="nav-text">跳出循环</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Shell%E8%BE%93%E5%85%A5-%E8%BE%93%E5%87%BA%E9%87%8D%E5%AE%9A%E5%90%91"><span class="nav-number">8.9.</span> <span class="nav-text">Shell输入&#x2F;输出重定向</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BE%93%E5%87%BA%E9%87%8D%E5%AE%9A%E5%90%91"><span class="nav-number">8.9.1.</span> <span class="nav-text">输出重定向</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BE%93%E5%85%A5%E9%87%8D%E5%AE%9A%E5%90%91"><span class="nav-number">8.9.2.</span> <span class="nav-text">输入重定向</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%87%8D%E5%AE%9A%E5%90%91%E6%B7%B1%E5%85%A5%E8%AE%B2%E8%A7%A3"><span class="nav-number">8.9.3.</span> <span class="nav-text">重定向深入讲解</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Here-Document"><span class="nav-number">8.9.4.</span> <span class="nav-text">Here Document</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#dev-null-%E6%96%87%E4%BB%B6"><span class="nav-number">8.9.5.</span> <span class="nav-text">&#x2F;dev&#x2F;null 文件</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9E%E4%BE%8B"><span class="nav-number">8.10.</span> <span class="nav-text">实例</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9D%A8%E8%BE%89%E4%B8%89%E8%A7%92%EF%BC%9A"><span class="nav-number">8.10.1.</span> <span class="nav-text">杨辉三角：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#sum-max"><span class="nav-number">8.10.2.</span> <span class="nav-text">sum()&amp;max():</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#99%E4%B9%98%E6%B3%95%E8%A1%A8%EF%BC%9A"><span class="nav-number">8.10.3.</span> <span class="nav-text">99乘法表：</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%87%E6%9C%AC%E7%BC%96%E8%BE%91%E5%91%BD%E4%BB%A4"><span class="nav-number">9.</span> <span class="nav-text">文本编辑命令</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#cut%E5%91%BD%E4%BB%A4"><span class="nav-number">9.1.</span> <span class="nav-text">cut命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#sed%E5%91%BD%E4%BB%A4"><span class="nav-number">9.2.</span> <span class="nav-text">sed命令</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%85%83%E5%AD%97%E7%AC%A6%E9%9B%86"><span class="nav-number">9.2.1.</span> <span class="nav-text">元字符集</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#a-i-%E5%9C%A8%E6%8C%87%E5%AE%9A%E8%A1%8C%E4%BD%8D%E7%BD%AE%E6%B7%BB%E5%8A%A0%E8%A1%8C"><span class="nav-number">9.2.2.</span> <span class="nav-text">a|i:在指定行位置添加行</span></a></li></ol></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="Corazon" src="/images/006.png"><p class="site-author-name" itemprop="name">Corazon</p><div class="site-description" itemprop="description"><font color="#000000">网络安全从业人员个人博客</font></div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">10</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">1</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">4</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/Corazon-hacker" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Corazon-hacker" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a></span></div><div class="links-of-blogroll motion-element"><div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i> Links</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"><a href="https://www.runoob.com/" title="https:&#x2F;&#x2F;www.runoob.com&#x2F;" rel="noopener" target="_blank">菜鸟教程</a></li><li class="links-of-blogroll-item"><a href="http://c.biancheng.net/sitemap/" title="http:&#x2F;&#x2F;c.biancheng.net&#x2F;sitemap&#x2F;" rel="noopener" target="_blank">C语言中文网</a></li><li class="links-of-blogroll-item"><a href="https://csdiy.wiki/" title="https:&#x2F;&#x2F;csdiy.wiki&#x2F;" rel="noopener" target="_blank">CS自学指南</a></li><li class="links-of-blogroll-item"><a href="https://www.r2coding.com/#/" title="https:&#x2F;&#x2F;www.r2coding.com&#x2F;#&#x2F;" rel="noopener" target="_blank">Road To Coding</a></li><li class="links-of-blogroll-item"><a href="https://hackway.org/docs/cs/intro" title="https:&#x2F;&#x2F;hackway.org&#x2F;docs&#x2F;cs&#x2F;intro" rel="noopener" target="_blank">计算机专业学习路线</a></li></ul></div></div><div class="back-to-top motion-element"><i class="fa fa-arrow-up"></i> <span>0%</span></div><script type="text/javascript" charset="utf-8" src="/js/tagcloud.js"></script><script type="text/javascript" charset="utf-8" src="/js/tagcanvas.js"></script><div class="widget-wrap"><h3 class="widget-title">标签云</h3><div id="myCanvasContainer" class="widget tagcloud"><canvas width="250" height="250" id="resCanvas"><ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/MYSQL/" rel="tag">MYSQL</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/" rel="tag">hexo</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/private/" rel="tag">private</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/typora/" rel="tag">typora</a><span class="tag-list-count">4</span></li></ul></canvas></div></div></div></aside><div id="sidebar-dimmer"></div></div></main></div><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2025</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">Corazon</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-chart-area"></i> </span><span title="站点总字数">204k</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-coffee"></i> </span><span title="站点阅读时长">3:06</span></div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-user"></i> </span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span> </span></span><span class="post-meta-divider">|</span> <span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div></div></footer><script color="0,0,255" opacity="1" zindex="-1" count="99" src="/lib/canvas-nest/canvas-nest.min.js"></script><script src="/lib/anime.min.js"></script><script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/code-unfold.js"></script><script src="/js/local-search.js"></script><script>if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }</script><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.css"><script>NexT.utils.loadComments(document.querySelector('#gitalk-container'), () => {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID    : 'Ov23liioqYUgEl2eGVTc',
      clientSecret: '268a15cf6d039e6e17da820b0bd4824725bbce6d',
      repo        : 'Corazon-hacker.github.io',
      owner       : 'Corazon-hacker',
      admin       : ['Corazon-hacker'],
      id          : '5a5d357a1cd3198bdc8b7465a60777f6',
        language: 'zh-CN',
      distractionFreeMode: true
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
});</script><script>NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : true,
      appId      : '02iDSwDgb06k5K8yx5oSD85t-gzGzoHsz',
      appKey     : 'eA8vZdwW4UasH3SiNapGvXh5',
      placeholder: "你是我一生只会遇见一次的惊喜 ...",
      avatar     : 'monsterid',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : 'zh-cn' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : 'https://02idswdg.lc-cn-n1-shared.com'
    });
  }, window.Valine);
});</script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script><link href="https://cdn.bootcss.com/gitalk/1.4.0/gitalk.min.css" rel="stylesheet"><script src="https://cdn.bootcss.com/gitalk/1.4.0/gitalk.min.js"></script><script src="https://cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.min.js"></script><script type="text/javascript">var gitalk = new Gitalk({
    clientID: '',
    clientSecret: '',
    repo: 'Corazon-hacker.github.io',
    owner: '',
    admin: [''],
    id: md5(location.pathname),   // ISSUE：location.href 限制50个字符 (应该是Issue 内容存数据库的标识， 具体在页面上无感)
    labels: ''.split(',').filter(l => l),  // 需要的 labels需要一个数组，否则会报错
    perPage: ,
    pagerDirection: '',
    createIssueManually: ,
    distractionFreeMode: 
  })
  gitalk.render('gitalk-container')</script><style>[bg-lazy]{background-image:none!important;background-color:#eee!important}</style><script>window.imageLazyLoadSetting={isSPA:!1,preloadRatio:1,processImages:null}</script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})})</script><script>(r=>{r.imageLazyLoadSetting.processImages=t;var a=r.imageLazyLoadSetting.isSPA,o=r.imageLazyLoadSetting.preloadRatio||1,d=i();function i(){var t=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")),e=Array.prototype.slice.call(document.querySelectorAll("[bg-lazy]"));return t.concat(e)}function t(t){(a||t)&&(d=i());for(var e,n=0;n<d.length;n++)0<=(e=(e=d[n]).getBoundingClientRect()).bottom&&0<=e.left&&e.top<=(r.innerHeight*o||document.documentElement.clientHeight*o)&&(()=>{var t,e,a,o,i=d[n];e=function(){d=d.filter(function(t){return i!==t}),r.imageLazyLoadSetting.onImageLoaded&&r.imageLazyLoadSetting.onImageLoaded(i)},(t=i).dataset.loaded||(t.hasAttribute("bg-lazy")?(t.removeAttribute("bg-lazy"),e&&e()):(a=new Image,o=t.getAttribute("data-original"),a.onload=function(){t.src=o,t.removeAttribute("data-original"),t.setAttribute("data-loaded",!0),e&&e()},a.onerror=function(){t.removeAttribute("data-original"),t.setAttribute("data-loaded",!1),t.src=o},t.src!==o&&(a.src=o)))})()}function e(){clearTimeout(t.tId),t.tId=setTimeout(t,500)}t(),document.addEventListener("scroll",e),r.addEventListener("resize",e),r.addEventListener("orientationchange",e)})(this);</script></body></html>