<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.3.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/006.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/6.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Noto Sans SC:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/lib/font-awesome/css/all.min.css"><script src="https://kit.fontawesome.com/b1f8a1a551.js" crossorigin="anonymous"></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css"><script src="/lib/pace/pace.min.js"></script><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"mcorazon.top",root:"/",scheme:"Gemini",version:"7.8.0",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:"default"},back2top:{enable:!0,sidebar:!0,scrollpercent:!0},bookmark:{enable:!1,color:"#00f",save:"manual"},fancybox:!0,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"buttons",active:"gitalk",storage:!0,lazyload:!1,nav:null,activeClass:"gitalk"},algolia:{hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},path:"search.xml"}</script><meta name="description" content="Linux命令                               Linux 磁盘管理 Linux磁盘管理常用三个命令为df、du和fdisk。   df：列出文件系统的整体磁盘使用量   du：检查磁盘空间使用量   fdisk：用于磁盘分区    df 获取硬盘被占用了多少空间，目前还剩下多少空间等信息。 语法： 12df [-ahikHTm] [目录或文件名]1 选项与参数："><meta property="og:type" content="article"><meta property="og:title" content="【Linux】Linux总结"><meta property="og:url" content="http://mcorazon.top/posts/2c8b313c/index.html"><meta property="og:site_name" content="MCorazon"><meta property="og:description" content="Linux命令                               Linux 磁盘管理 Linux磁盘管理常用三个命令为df、du和fdisk。   df：列出文件系统的整体磁盘使用量   du：检查磁盘空间使用量   fdisk：用于磁盘分区    df 获取硬盘被占用了多少空间，目前还剩下多少空间等信息。 语法： 12df [-ahikHTm] [目录或文件名]1 选项与参数："><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://mcorazon.top/posts/2c8b313c//Users/Administrator/Corazon/blog/source/_posts/%E3%80%90Linux%E3%80%91%E6%80%BB%E7%BB%93/91c28994d6fb98e8c35f2eac36880df2.jpeg"><meta property="og:image" content="http://mcorazon.top/posts/2c8b313c//Users/Administrator/Corazon/blog/source/_posts/%E3%80%90Linux%E3%80%91%E6%80%BB%E7%BB%93/99fb8a619138438d007b738d8630fbdc.jpeg"><meta property="og:image" content="http://mcorazon.top/posts/2c8b313c//Users/Administrator/Corazon/blog/source/_posts/%E3%80%90Linux%E3%80%91%E6%80%BB%E7%BB%93/20061909046cf0a4cafbe52ded65acac.jpeg"><meta property="og:image" content="http://mcorazon.top/posts/2c8b313c//Users/Administrator/Corazon/blog/source/_posts/%E3%80%90Linux%E3%80%91%E6%80%BB%E7%BB%93/5b8910196f03cc08e8e20c7619817a65.jpeg"><meta property="og:image" content="http://mcorazon.top/posts/2c8b313c//Users/Administrator/Corazon/blog/source/_posts/%E3%80%90Linux%E3%80%91%E6%80%BB%E7%BB%93/ceb6926bc18279d63927d02d1214e341.jpeg"><meta property="og:image" content="http://mcorazon.top/posts/2c8b313c//Users/Administrator/Corazon/blog/source/_posts/%E3%80%90Linux%E3%80%91%E6%80%BB%E7%BB%93/3a7cb1671fbea88783a3a741a12ab342.jpeg"><meta property="article:published_time" content="2025-02-08T13:53:32.000Z"><meta property="article:modified_time" content="2025-02-20T08:17:28.235Z"><meta property="article:author" content="Corazon"><meta property="article:tag" content="Linux"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="http://mcorazon.top/posts/2c8b313c//Users/Administrator/Corazon/blog/source/_posts/%E3%80%90Linux%E3%80%91%E6%80%BB%E7%BB%93/91c28994d6fb98e8c35f2eac36880df2.jpeg"><link rel="canonical" href="http://mcorazon.top/posts/2c8b313c/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,lang:"zh-CN"}</script><title>【Linux】Linux总结 | MCorazon</title><script type="text/javascript" src="/js/tag/bubble.js"></script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css"></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span><h1 class="site-title">MCorazon</h1><span class="logo-line-after"><i></i></span></a><p class="site-subtitle" itemprop="description"><font color="#ffffff">这个世界总有黑夜<br>但是我们总发着光</font></p></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul id="menu" class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-schedule"><a href="/schedule/" rel="section"><i class="fa fa-calendar fa-fw"></i>日程表</a></li><li class="menu-item menu-item-sitemap"><a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>站点地图</a></li><li class="menu-item menu-item-commonweal"><a href="/commonweal/" rel="section"><i class="fa fa-heartbeat fa-fw"></i>公益 404</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocapitalize="off" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"><div id="no-result"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div></div></div></div></header><div class="reading-progress-bar"></div><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content post posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="http://mcorazon.top/posts/2c8b313c/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/006.png"><meta itemprop="name" content="Corazon"><meta itemprop="description" content="<font color="#000000">网络安全从业人员个人博客</font>"> </span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="MCorazon"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">【Linux】Linux总结</h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2025-02-08 21:53:32" itemprop="dateCreated datePublished" datetime="2025-02-08T21:53:32+08:00">2025-02-08</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2025-02-20 16:17:28" itemprop="dateModified" datetime="2025-02-20T16:17:28+08:00">2025-02-20</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a> </span></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="post-meta-item-text">阅读次数：</span> <span id="busuanzi_value_page_pv"></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>63k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>57 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="Linux命令">Linux命令</h2><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr></tbody></table><h3 id="Linux-磁盘管理">Linux 磁盘管理</h3><p>Linux磁盘管理常用三个命令为df、du和fdisk。</p><ul class="lvl-0"><li class="lvl-2"><p>df：列出文件系统的整体磁盘使用量</p></li><li class="lvl-2"><p>du：检查磁盘空间使用量</p></li><li class="lvl-2"><p>fdisk：用于磁盘分区</p></li></ul><hr><h4 id="df">df</h4><p>获取硬盘被占用了多少空间，目前还剩下多少空间等信息。</p><p>语法：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">df <span class="selector-attr">[-ahikHTm]</span> <span class="selector-attr">[目录或文件名]</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>选项与参数：</p><ul class="lvl-0"><li class="lvl-2"><p>-a ：列出所有的文件系统，包括系统特有的 /proc 等文件系统；</p></li><li class="lvl-2"><p>-k ：以 KBytes 的容量显示各文件系统；</p></li><li class="lvl-2"><p>-m ：以 MBytes 的容量显示各文件系统；</p></li><li class="lvl-2"><p>-h ：以人们较易阅读的 GBytes, MBytes, KBytes 等格式自行显示；</p></li><li class="lvl-2"><p>-H ：以 M=1000K 取代 M=1024K 的进位方式；</p></li><li class="lvl-2"><p>-T ：显示文件系统类型, 连同该 partition 的 filesystem 名称 (例如 ext3) 也列出；</p></li><li class="lvl-2"><p>-i ：不用硬盘容量，而以 inode 的数量来显示</p></li></ul><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="variable">@VM_0_9_centos</span> ~]<span class="comment"># df -hT</span></span><br><span class="line">Filesystem     Type      Size  Used Avail Use% Mounted on</span><br><span class="line"><span class="regexp">/dev/vda</span>1      ext4       <span class="number">50</span>G  <span class="number">4.9</span>G   <span class="number">42</span>G  <span class="number">11</span>% <span class="regexp">/</span></span><br><span class="line"><span class="regexp">devtmpfs       devtmpfs  909M     0  909M   0% /dev</span></span><br><span class="line">tmpfs          tmpfs     <span class="number">920</span>M   <span class="number">24</span>K  <span class="number">920</span>M   <span class="number">1</span>% <span class="regexp">/dev/shm</span></span><br><span class="line">tmpfs          tmpfs     <span class="number">920</span>M  <span class="number">496</span>K  <span class="number">919</span>M   <span class="number">1</span>% <span class="regexp">/run</span></span><br><span class="line"><span class="regexp">tmpfs          tmpfs     920M     0  920M   0% /sys</span><span class="regexp">/fs/cgroup</span></span><br><span class="line">tmpfs          tmpfs     <span class="number">184</span>M     <span class="number">0</span>  <span class="number">184</span>M   <span class="number">0</span>% <span class="regexp">/run/user</span><span class="regexp">/0</span></span><br><span class="line"><span class="regexp">12345678</span></span><br></pre></td></tr></table></figure><p>将系统内的所有特殊文件格式及名称都列出来</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@www ~]<span class="comment"># df -aT</span></span><br><span class="line">Filesystem    Type 1K-blocks    Used Available Use% Mounted on</span><br><span class="line">/dev/hdc2     ext3  <span class="number"> 9920624 </span>3823112  <span class="number"> 5585444 </span> 41% /</span><br><span class="line">proc          proc        <span class="number"> 0 </span>     <span class="number"> 0 </span>       <span class="number"> 0 </span>  -  /proc</span><br><span class="line">sysfs        sysfs        <span class="number"> 0 </span>     <span class="number"> 0 </span>       <span class="number"> 0 </span>  -  /sys</span><br><span class="line">devpts      devpts        <span class="number"> 0 </span>     <span class="number"> 0 </span>       <span class="number"> 0 </span>  -  /dev/pts</span><br><span class="line">/dev/hdc3     ext3  <span class="number"> 4956316 </span><span class="number"> 141376 </span> <span class="number"> 4559108 </span>  4% /home</span><br><span class="line">/dev/hdc1     ext3   <span class="number"> 101086 </span> <span class="number"> 11126 </span>   <span class="number"> 84741 </span> 12% /boot</span><br><span class="line">tmpfs        tmpfs   <span class="number"> 371332 </span>     <span class="number"> 0 </span>  <span class="number"> 371332 </span>  0% /dev/shm</span><br><span class="line">none   binfmt_misc        <span class="number"> 0 </span>     <span class="number"> 0 </span>       <span class="number"> 0 </span>  -  /proc/sys/fs/binfmt_misc</span><br><span class="line">sunrpc  rpc_pipefs        <span class="number"> 0 </span>     <span class="number"> 0 </span>       <span class="number"> 0 </span>  -  /var/lib/nfs/rpc_pipefs</span><br><span class="line">1234567891011</span><br></pre></td></tr></table></figure><h4 id="du">du</h4><p>du命令是对文件和目录磁盘使用的空间的查看.</p><p>语法：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">du</span> [-ahskm] 文件或目录名称</span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>选项与参数：</p><ul class="lvl-0"><li class="lvl-2"><p>-a ：列出所有的文件与目录容量，因为默认仅统计目录底下的文件量而已。</p></li><li class="lvl-2"><p>-h ：以人们较易读的容量格式 (G/M) 显示；</p></li><li class="lvl-2"><p>-s ：列出总量而已，而不列出每个各别的目录占用容量；</p></li><li class="lvl-2"><p>-S ：不包括子目录下的总计，与 -s 有点差别。</p></li><li class="lvl-2"><p>-k ：以 KBytes 列出容量显示；</p></li><li class="lvl-2"><p>-m ：以 MBytes 列出容量显示；</p></li></ul><p>du没有加任何选项时，只列出当前目录下的所有文件夹容量（包括隐藏文件夹）:</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@www ~]<span class="comment"># du</span></span><br><span class="line">8       <span class="string">./test4</span>     &lt;==每个目录都会列出来</span><br><span class="line">8       <span class="string">./test2</span></span><br><span class="line"><span class="string">....</span>中间省略<span class="string">....</span></span><br><span class="line">12      <span class="string">./.gconfd</span>   &lt;==包括隐藏文件的目录</span><br><span class="line">220     .           &lt;==这个目录<span class="params">(.)</span>所占用的总量</span><br><span class="line">123456</span><br></pre></td></tr></table></figure><p>直接输入 du 没有加任何选项时，则 du 会分析当前所在目录的文件与目录所占用的硬盘空间。</p><p>加<code>-a</code>选项才显示文件的容量：</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@www ~]<span class="comment"># du -a</span></span><br><span class="line">12      <span class="string">./install.log.syslog</span>   &lt;==有文件的列表了</span><br><span class="line">8       <span class="string">./.bash_logout</span></span><br><span class="line">8       <span class="string">./test4</span></span><br><span class="line">8       <span class="string">./test2</span></span><br><span class="line"><span class="string">....</span>中间省略<span class="string">....</span></span><br><span class="line">12      <span class="string">./.gconfd</span></span><br><span class="line">220     .</span><br><span class="line">12345678</span><br></pre></td></tr></table></figure><p>检查根目录底下每个目录所占用的容量</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@www ~]<span class="comment"># du -sh /*</span></span><br><span class="line">0       <span class="string">/bin</span></span><br><span class="line">108M    <span class="string">/boot</span></span><br><span class="line">4.0K    <span class="string">/data</span></span><br><span class="line"><span class="string">.....</span>中间省略<span class="string">....</span></span><br><span class="line">0       <span class="string">/proc</span></span><br><span class="line"><span class="string">.....</span>中间省略<span class="string">....</span></span><br><span class="line">40K     <span class="string">/tmp</span></span><br><span class="line">2.4G    <span class="string">/usr</span></span><br><span class="line">2.4G    <span class="string">/var</span></span><br><span class="line">12345678910</span><br></pre></td></tr></table></figure><h4 id="fdisk">fdisk</h4><p>fdisk 是 Linux 的磁盘分区表操作工具。</p><p>语法：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fdisk <span class="selector-attr">[-l]</span> 装置名称</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>选项与参数：</p><ul class="lvl-0"><li class="lvl-2"><p>-l ：输出后面接的装置所有的分区内容。若仅有 fdisk -l 时， 则系统将会把整个系统内能够搜寻到的装置的分区均列出来。</p></li></ul><p>列出所有分区信息：</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[root@AY120919111755c246621 tmp]<span class="comment"># fdisk -l</span></span><br><span class="line"></span><br><span class="line">Disk /dev/xvda: 21.5 GB,<span class="number"> 21474836480 </span>bytes</span><br><span class="line">255 heads,<span class="number"> 63 </span>sectors/track,<span class="number"> 2610 </span>cylinders</span><br><span class="line">Units = cylinders of<span class="number"> 16065 </span>*<span class="number"> 512 </span>=<span class="number"> 8225280 </span>bytes</span><br><span class="line">Sector size (logical/physical):<span class="number"> 512 </span>bytes /<span class="number"> 512 </span>bytes</span><br><span class="line">I/O size (minimum/optimal):<span class="number"> 512 </span>bytes /<span class="number"> 512 </span>bytes</span><br><span class="line">Disk identifier: 0x00000000</span><br><span class="line"></span><br><span class="line">    Device Boot      Start         End      Blocks   Id  System</span><br><span class="line">/dev/xvda1   *          <span class="number"> 1 </span>      <span class="number"> 2550 </span>  <span class="number"> 20480000 </span> <span class="number"> 83 </span> Linux</span><br><span class="line">/dev/xvda2           <span class="number"> 2550 </span>      <span class="number"> 2611 </span>    <span class="number"> 490496 </span> <span class="number"> 82 </span> Linux swap / Solaris</span><br><span class="line"></span><br><span class="line">Disk /dev/xvdb: 21.5 GB,<span class="number"> 21474836480 </span>bytes</span><br><span class="line">255 heads,<span class="number"> 63 </span>sectors/track,<span class="number"> 2610 </span>cylinders</span><br><span class="line">Units = cylinders of<span class="number"> 16065 </span>*<span class="number"> 512 </span>=<span class="number"> 8225280 </span>bytes</span><br><span class="line">Sector size (logical/physical):<span class="number"> 512 </span>bytes /<span class="number"> 512 </span>bytes</span><br><span class="line">I/O size (minimum/optimal):<span class="number"> 512 </span>bytes /<span class="number"> 512 </span>bytes</span><br><span class="line">Disk identifier: 0x56f40944</span><br><span class="line"></span><br><span class="line">    Device Boot      Start         End      Blocks   Id  System</span><br><span class="line">/dev/xvdb2              <span class="number"> 1 </span>      <span class="number"> 2610 </span>   20964793+ <span class="number"> 83 </span> Linux</span><br><span class="line">12345678910111213141516171819202122</span><br></pre></td></tr></table></figure><p>查看根目录所在磁盘，并查阅该硬盘内的相关信息：</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@www ~]<span class="comment"># df /            &lt;==注意：重点在找出磁盘文件名而已</span></span><br><span class="line">Filesystem           <span class="number">1</span>K-blocks      Used Available Use% Mounted <span class="keyword">on</span></span><br><span class="line">/dev/hdc2              <span class="number">9920624</span>   <span class="number">3823168</span>   <span class="number">5585388</span>  <span class="number">41</span>% /</span><br><span class="line"></span><br><span class="line">[root@www ~]<span class="comment"># fdisk /dev/hdc  &lt;==不要加上数字！</span></span><br><span class="line">The <span class="built_in">number</span> <span class="keyword">of</span> cylinders <span class="keyword">for</span> this disk <span class="keyword">is</span> <span class="keyword">set</span> <span class="keyword">to</span> <span class="number">5005.</span></span><br><span class="line">There <span class="keyword">is</span> nothing wrong <span class="keyword">with</span> <span class="keyword">that</span>, <span class="keyword">but</span> this <span class="keyword">is</span> larger than <span class="number">1024</span>,</span><br><span class="line"><span class="keyword">and</span> could <span class="keyword">in</span> certain setups cause problems <span class="keyword">with</span>:</span><br><span class="line"><span class="number">1</span>) software <span class="keyword">that</span> runs <span class="keyword">at</span> boot <span class="built_in">time</span> (e.g., old versions <span class="keyword">of</span> LILO)</span><br><span class="line"><span class="number">2</span>) booting <span class="keyword">and</span> partitioning software <span class="keyword">from</span> other OSs</span><br><span class="line">   (e.g., DOS FDISK, OS/<span class="number">2</span> FDISK)</span><br><span class="line"></span><br><span class="line">Command (m <span class="keyword">for</span> help):     &lt;==等待你的输入！</span><br><span class="line"><span class="number">12345678910111213</span></span><br></pre></td></tr></table></figure><p>输入 m 后，就会看到底下这些命令介绍</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">Command (m <span class="keyword">for</span> help): m   <span class="operator">&lt;=</span><span class="operator">=</span> 输入 m 后，就会看到底下这些命令介绍</span><br><span class="line">Command action</span><br><span class="line">   a   toggle a bootable flag</span><br><span class="line">   b   edit bsd disklabel</span><br><span class="line">   c   toggle the dos compatibility flag</span><br><span class="line">   d   <span class="keyword">delete</span> a <span class="keyword">partition</span>            <span class="operator">&lt;=</span><span class="operator">=</span>删除一个<span class="keyword">partition</span></span><br><span class="line">   l   list known <span class="keyword">partition</span> types</span><br><span class="line">   m   print this menu</span><br><span class="line">   n   <span class="keyword">add</span> a <span class="keyword">new</span> <span class="keyword">partition</span>           <span class="operator">&lt;=</span><span class="operator">=</span>新增一个<span class="keyword">partition</span></span><br><span class="line">   o   <span class="keyword">create</span> a <span class="keyword">new</span> <span class="keyword">empty</span> DOS <span class="keyword">partition</span> <span class="keyword">table</span></span><br><span class="line">   p   print the <span class="keyword">partition</span> <span class="keyword">table</span>     <span class="operator">&lt;=</span><span class="operator">=</span>在屏幕上显示分割表</span><br><span class="line">   q   quit <span class="keyword">without</span> saving changes   <span class="operator">&lt;=</span><span class="operator">=</span>不储存离开fdisk程序</span><br><span class="line">   s   <span class="keyword">create</span> a <span class="keyword">new</span> <span class="keyword">empty</span> Sun disklabel</span><br><span class="line">   t   change a <span class="keyword">partition</span><span class="string">&#x27;s system id</span></span><br><span class="line"><span class="string">   u   change display/entry units</span></span><br><span class="line"><span class="string">   v   verify the partition table</span></span><br><span class="line"><span class="string">   w   write table to disk and exit  &lt;==将刚刚的动作写入分割表</span></span><br><span class="line"><span class="string">   x   extra functionality (experts only)</span></span><br><span class="line"><span class="string">123456789101112131415161718</span></span><br></pre></td></tr></table></figure><p>离开 fdisk 时按下 <code>q</code>，那么所有的动作都不会生效！相反的， 按下<code>w</code>就是动作生效的意思。</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Command (m for help): p  &lt;== 这里可以输出目前磁盘的状态</span><br><span class="line"></span><br><span class="line">Disk /dev/hdc: 41.1 GB,<span class="number"> 41174138880 </span>bytes        &lt;==这个磁盘的文件名与容量</span><br><span class="line">255 heads,<span class="number"> 63 </span>sectors/track,<span class="number"> 5005 </span>cylinders      &lt;==磁头、扇区与磁柱大小</span><br><span class="line">Units = cylinders of<span class="number"> 16065 </span>*<span class="number"> 512 </span>=<span class="number"> 8225280 </span>bytes &lt;==每个磁柱的大小</span><br><span class="line"></span><br><span class="line">   Device Boot      Start         End      Blocks   Id  System</span><br><span class="line">/dev/hdc1   *          <span class="number"> 1 </span>        <span class="number"> 13 </span>    <span class="number"> 104391 </span> <span class="number"> 83 </span> Linux</span><br><span class="line">/dev/hdc2             <span class="number"> 14 </span>      <span class="number"> 1288 </span>   10241437+ <span class="number"> 83 </span> Linux</span><br><span class="line">/dev/hdc3           <span class="number"> 1289 </span>      <span class="number"> 1925 </span>    5116702+ <span class="number"> 83 </span> Linux</span><br><span class="line">/dev/hdc4           <span class="number"> 1926 </span>      <span class="number"> 5005 </span>  <span class="number"> 24740100 </span>  <span class="number"> 5 </span> Extended</span><br><span class="line">/dev/hdc5           <span class="number"> 1926 </span>      <span class="number"> 2052 </span>   <span class="number"> 1020096 </span> <span class="number"> 82 </span> Linux swap / Solaris</span><br><span class="line"><span class="comment"># 装置文件名 启动区否 开始磁柱    结束磁柱  1K大小容量 磁盘分区槽内的系统</span></span><br><span class="line"></span><br><span class="line">Command (m for help): q</span><br><span class="line">123456789101112131415</span><br></pre></td></tr></table></figure><p>使用 <code>p</code> 可以列出目前这颗磁盘的分割表信息，这个信息的上半部在显示整体磁盘的状态。</p><h4 id="磁盘格式化">磁盘格式化</h4><p>磁盘分割完毕后自然就是要进行文件系统的格式化，格式化的命令非常的简单，使用 <code>mkfs</code>（make filesystem） 命令。</p><p>语法：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkfs <span class="selector-attr">[-t 文件系统格式]</span> 装置文件名</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>选项与参数：</p><ul class="lvl-0"><li class="lvl-2"><p>-t ：可以接文件系统格式，例如 ext3, ext2, vfat 等(系统有支持才会生效)</p></li></ul><p>查看 mkfs 支持的文件格式：</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@VM_0_9_centos web]<span class="comment"># mkfs[tab]</span></span><br><span class="line">mkfs         mkfs.cramfs  mkfs.<span class="keyword">ext3 </span>   mkfs.minix   </span><br><span class="line">mkfs.<span class="keyword">btrfs </span>  mkfs.<span class="keyword">ext2 </span>   mkfs.<span class="keyword">ext4 </span>   mkfs.xfs</span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure><p>按下两个[tab]，会发现 mkfs 支持的文件格式如上所示。</p><p>将分区 /dev/hdc6（可指定其他分区） 格式化为ext3文件系统：</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">[root@www ~]# mkfs -t ext3 /dev/hdc6</span><br><span class="line">mke2fs 1.39 (29-May-2006)</span><br><span class="line">Filesystem label=                &lt;==这里指的是分割槽的名称(label)</span><br><span class="line">OS type: Linux</span><br><span class="line">Block <span class="attribute">size</span>=4096 (<span class="attribute">log</span>=2)          &lt;==block 的大小配置为 4K </span><br><span class="line">Fragment <span class="attribute">size</span>=4096 (<span class="attribute">log</span>=2)</span><br><span class="line">251392 inodes, 502023 blocks     &lt;==由此配置决定的inode/block数量</span><br><span class="line">25101 blocks (5.00%) reserved <span class="keyword">for</span> the super<span class="built_in"> user</span></span><br><span class="line"><span class="built_in"></span>First data <span class="attribute">block</span>=0</span><br><span class="line">Maximum filesystem <span class="attribute">blocks</span>=515899392</span><br><span class="line">16 block groups</span><br><span class="line">32768 blocks per group, 32768 fragments per<span class="built_in"> group</span></span><br><span class="line"><span class="built_in"></span>15712 inodes per<span class="built_in"> group</span></span><br><span class="line"><span class="built_in"></span>Superblock backups stored on blocks:</span><br><span class="line">        32768, 98304, 163840, 229376, 294912</span><br><span class="line"></span><br><span class="line">Writing inode tables: done</span><br><span class="line">Creating journal (8192 blocks): done &lt;==有日志记录</span><br><span class="line">Writing superblocks <span class="keyword">and</span> filesystem<span class="built_in"> accounting </span>information: done</span><br><span class="line"></span><br><span class="line">This filesystem will be automatically checked every 34 mounts <span class="keyword">or</span></span><br><span class="line">180 days, whichever comes first.  Use tune2fs -c <span class="keyword">or</span> -i <span class="keyword">to</span> override.</span><br><span class="line"><span class="comment"># 这样就创建起来我们所需要的 Ext3 文件系统了！简单明了！</span></span><br><span class="line">1234567891011121314151617181920212223</span><br></pre></td></tr></table></figure><h4 id="磁盘检验">磁盘检验</h4><p>fsck（file system check）用来检查和维护不一致的文件系统。</p><p>若系统掉电或磁盘发生问题，可利用fsck命令对文件系统进行检查。</p><p>语法：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fsck <span class="selector-attr">[-t 文件系统]</span> <span class="selector-attr">[-ACay]</span> 装置名称</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>选项与参数：</p><ul class="lvl-0"><li class="lvl-2"><p>-t : 给定档案系统的型式，若在 /etc/fstab 中已有定义或 kernel 本身已支援的则不需加上此参数</p></li><li class="lvl-2"><p>-s : 依序一个一个地执行 fsck 的指令来检查</p></li><li class="lvl-2"><p>-A : 对/etc/fstab 中所有列出来的 分区（partition）做检查</p></li><li class="lvl-2"><p>-C : 显示完整的检查进度</p></li><li class="lvl-2"><p>-d : 打印出 e2fsck 的 debug 结果</p></li><li class="lvl-2"><p>-p : 同时有 -A 条件时，同时有多个 fsck 的检查一起执行</p></li><li class="lvl-2"><p>-R : 同时有 -A 条件时，省略 / 不检查</p></li><li class="lvl-2"><p>-V : 详细显示模式</p></li><li class="lvl-2"><p>-a : 如果检查有错则自动修复</p></li><li class="lvl-2"><p>-r : 如果检查有错则由使用者回答是否修复</p></li><li class="lvl-2"><p>-y : 选项指定检测每个文件是自动输入yes，在不确定那些是不正常的时候，可以执行 # fsck -y 全部检查修复。</p></li></ul><p>查看系统有多少文件系统支持的 fsck 命令：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-attr">[root@www ~]</span># fsck<span class="selector-attr">[tab]</span><span class="selector-attr">[tab]</span></span><br><span class="line">fsck         fsck<span class="selector-class">.cramfs</span>  fsck<span class="selector-class">.ext2</span>    fsck<span class="selector-class">.ext3</span>    fsck<span class="selector-class">.msdos</span>   fsck<span class="selector-class">.vfat</span></span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure><p>强制检测 /dev/hdc6 分区:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">root@www</span> <span class="string">~</span>]<span class="comment"># fsck -C -f -t ext3 /dev/hdc6 </span></span><br><span class="line"><span class="string">fsck</span> <span class="number">1.39</span> <span class="string">(29-May-2006)</span></span><br><span class="line"><span class="string">e2fsck</span> <span class="number">1.39</span> <span class="string">(29-May-2006)</span></span><br><span class="line"><span class="attr">Pass 1:</span> <span class="string">Checking</span> <span class="string">inodes,</span> <span class="string">blocks,</span> <span class="string">and</span> <span class="string">sizes</span></span><br><span class="line"><span class="attr">Pass 2:</span> <span class="string">Checking</span> <span class="string">directory</span> <span class="string">structure</span></span><br><span class="line"><span class="attr">Pass 3:</span> <span class="string">Checking</span> <span class="string">directory</span> <span class="string">connectivity</span></span><br><span class="line"><span class="attr">Pass 4:</span> <span class="string">Checking</span> <span class="string">reference</span> <span class="string">counts</span></span><br><span class="line"><span class="attr">Pass 5:</span> <span class="string">Checking</span> <span class="string">group</span> <span class="string">summary</span> <span class="string">information</span></span><br><span class="line"><span class="attr">vbird_logical:</span> <span class="number">11</span><span class="string">/251968</span> <span class="string">files</span> <span class="string">(9.1%</span> <span class="string">non-contiguous),</span> <span class="number">36926</span><span class="string">/1004046</span> <span class="string">blocks</span></span><br><span class="line"><span class="number">123456789</span></span><br></pre></td></tr></table></figure><p>如果没有加上 -f 的选项，则由于这个文件系统不曾出现问题，检查的经过非常快速！若加上 -f 强制检查，才会一项一项的显示过程。</p><h4 id="磁盘挂载与卸除">磁盘挂载与卸除</h4><p>Linux 的磁盘挂载使用 <code>mount</code> 命令，卸载使用 <code>umount</code> 命令。</p><p>磁盘挂载语法：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mount <span class="selector-attr">[-t 文件系统]</span> <span class="selector-attr">[-L Label名]</span> <span class="selector-attr">[-o 额外选项]</span> <span class="selector-attr">[-n]</span>  装置文件名  挂载点</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>用默认的方式，将刚刚创建的 /dev/hdc6 挂载到 /mnt/hdc6 上面！</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="variable">@www</span> ~]<span class="comment"># mkdir /mnt/hdc6</span></span><br><span class="line">[root<span class="variable">@www</span> ~]<span class="comment"># mount /dev/hdc6 /mnt/hdc6</span></span><br><span class="line">[root<span class="variable">@www</span> ~]<span class="comment"># df</span></span><br><span class="line">Filesystem           <span class="number">1</span>K-blocks      Used Available Use% Mounted on</span><br><span class="line">.....中间省略.....</span><br><span class="line"><span class="regexp">/dev/hdc</span>6              <span class="number">1976312</span>     <span class="number">42072</span>   <span class="number">1833836</span>   <span class="number">3</span>% <span class="regexp">/mnt/hdc</span>6</span><br><span class="line"><span class="number">123456</span></span><br></pre></td></tr></table></figure><p>磁盘卸载命令 <code>umount</code> 语法：</p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">umount</span> [-<span class="meta">fn</span>] 装置文件名或挂载点</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>选项与参数：</p><ul class="lvl-0"><li class="lvl-2"><p>-f ：强制卸除！可用在类似网络文件系统 (NFS) 无法读取到的情况下；</p></li><li class="lvl-2"><p>-n ：不升级 /etc/mtab 情况下卸除。</p></li></ul><p>卸载/dev/hdc6</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="symbol">@www</span> ~]<span class="meta"># umount /dev/hdc6     </span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><h3 id="Linux管道命令">Linux管道命令</h3><p>Linux的管道命令是’|’，通过它可以对数据进行连续处理，其示意图如下：</p><p><img src="/images/loading.jpeg" data-original="/posts/2c8b313c//Users/Administrator/Corazon/blog/source/_posts/%E3%80%90Linux%E3%80%91%E6%80%BB%E7%BB%93/91c28994d6fb98e8c35f2eac36880df2.jpeg" alt="img"></p><p>注意：</p><p>1）管道命令仅处理标准输出，对于标准错误输出，将忽略</p><p>2）管道命令右边命令，必须能够接收标准输入流命令才行，否则传递过程中数据会抛弃。</p><p>常用来作为接收数据管道命令有： less,more,head,tail，而ls, cp, mv就不行。</p><h4 id="wc-统计字数">wc - 统计字数</h4><p>可以计算文件的Byte数、字数、或是列数，若不指定文件名称、或是所给予的文件名为&quot;-&quot;，则wc指令会从标准输入设备读取数据。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">wc</span> [-lwm] [filename]</span><br><span class="line">-l: 统计行数</span><br><span class="line">-w：统计英文单词</span><br><span class="line">-m：统计字符数</span><br><span class="line">python@xxx:~$ <span class="built_in">wc</span> -l /etc/passwd</span><br><span class="line">49 /etc/passwd</span><br><span class="line">python@xxx:~$ <span class="built_in">wc</span> -w /etc/passwd</span><br><span class="line">81 /etc/passwd</span><br><span class="line">python@xxx:~$ <span class="built_in">wc</span> -m /etc/passwd</span><br><span class="line">2696 /etc/passwd</span><br><span class="line">12345678910</span><br></pre></td></tr></table></figure><p>在默认的情况下，wc将计算指定文件的行数、字数，以及字节数。使用的命令为：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">wc</span> testfile           <span class="comment"># testfile文件的统计信息  </span></span><br><span class="line">3 92 598 testfile       <span class="comment"># testfile文件的行数为3、单词数92、字节数598 </span></span><br><span class="line">12</span><br></pre></td></tr></table></figure><p>其中，3 个数字分别表示testfile文件的行数、单词数，以及该文件的字节数。</p><p>如果想同时统计多个文件的信息，例如同时统计testfile、testfile_1、testfile_2，可使用如下命令：</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ wc testfile testfile_1 testfile_2  <span class="comment">#统计三个文件的信息  </span></span><br><span class="line">3<span class="number"> 92 </span>598 testfile                    <span class="comment">#第一个文件行数为3、单词数92、字节数598  </span></span><br><span class="line">9<span class="number"> 18 </span>78 testfile_1                   <span class="comment">#第二个文件的行数为9、单词数18、字节数78  </span></span><br><span class="line">3<span class="number"> 6 </span>32 testfile_2                    <span class="comment">#第三个文件的行数为3、单词数6、字节数32  </span></span><br><span class="line">15<span class="number"> 116 </span>708 总用量                    <span class="comment">#三个文件总共的行数为15、单词数116、字节数708 </span></span><br><span class="line">12345</span><br></pre></td></tr></table></figure><h4 id="cut-列选取命令">cut - 列选取命令</h4><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">选项与参数：</span><br><span class="line"><span class="deletion">-d  ：后面接分隔字符。与 -f 一起使用；</span></span><br><span class="line"><span class="deletion">-f  ：依据 -d 的分隔字符将一段信息分割成为数段，用 -f 取出第几段的意思；</span></span><br><span class="line"><span class="deletion">-c  ：以字符 (characters) 的单位取出固定字符区间；</span></span><br><span class="line">1234</span><br></pre></td></tr></table></figure><p>cut以行为单位，根据分隔符把行分成若干列，这样就可以指定选取哪些列了。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cut</span> -d <span class="string">&#x27;分隔字符&#x27;</span> -f 选取的列数</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$PATH</span>|<span class="built_in">cut</span> -d <span class="string">&#x27;:&#x27;</span> -f 2  	--选取第2列</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$PATH</span>|<span class="built_in">cut</span> -d <span class="string">&#x27;:&#x27;</span> -f 3,5  	--选取第3列和第5列</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$PATH</span>|<span class="built_in">cut</span> -d <span class="string">&#x27;:&#x27;</span> -f 3-5  	--选取第3列到第5列</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$PATH</span>|<span class="built_in">cut</span> -d <span class="string">&#x27;:&#x27;</span> -f 3-   	--选取第3列到最后1列</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$PATH</span>|<span class="built_in">cut</span> -d <span class="string">&#x27;:&#x27;</span> -f 1-3,5	--选取第1到第3列还有第5列</span><br><span class="line">123456</span><br></pre></td></tr></table></figure><p>只显示/etc/passwd的用户和shell：</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#cat /etc/passwd | cut -d <span class="string">&#x27;:&#x27;</span> -f 1,7 </span></span><br><span class="line"><span class="symbol">root:</span><span class="keyword">/bin/</span>bash</span><br><span class="line"><span class="symbol">daemon:</span><span class="keyword">/bin/</span>sh</span><br><span class="line"><span class="symbol">bin:</span><span class="keyword">/bin/</span>sh</span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure><h4 id="grep-行选取命令">grep - 行选取命令</h4><p>grep一般格式为：</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">grep</span> [-cinv] <span class="string">&#x27;查找的字符串&#x27;</span> filename</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>在grep命令中输入字符串参数时，最好引号或双引号括起来。例如：<code>grep 'a' 1.txt</code>。</p><p>常用选项说明：</p><table><thead><tr><th>选项</th><th>含义</th></tr></thead><tbody><tr><td>-v</td><td>显示不包含匹配文本的所有行（相当于求反）</td></tr><tr><td>-n</td><td>显示匹配行及行号</td></tr><tr><td>-i</td><td>忽略大小写</td></tr><tr><td>-c</td><td>计算找到的行数</td></tr></tbody></table><p>grep搜索内容串可以是正则表达式，常用正则表达式：</p><table><thead><tr><th>参数</th><th>含义</th></tr></thead><tbody><tr><td>^a</td><td>行首,搜寻以 m 开头的行；grep -n ‘^a’ 1.txt</td></tr><tr><td>ke$</td><td>行尾,搜寻以 ke 结束的行；grep -n ‘ke$’ 1.txt</td></tr><tr><td>[Ss]igna[Ll]</td><td>匹配 [] 里中一系列字符中的一个；搜寻匹配单词signal、signaL、Signal、SignaL的行；grep -n ‘[Ss]igna[Ll]’ 1.txt</td></tr><tr><td>.</td><td>.匹配一个非换行符的字符；grep -n ‘e.e’ 1.txt可以匹配 eee，eae，eve，但是不匹配 ee，eaae；</td></tr><tr><td>*</td><td>匹配零个或多个先前字符</td></tr><tr><td>[^]</td><td>匹配一个不在指定范围内的字符</td></tr><tr><td><code>\(..\)</code></td><td>标记匹配字符</td></tr><tr><td>\</td><td>锚定单词的开始</td></tr><tr><td><code>\&lt;</code></td><td>锚定单词的开头</td></tr><tr><td><code>\&gt;</code></td><td>锚定单词的结束</td></tr><tr><td><code>x\&#123;m\&#125;</code></td><td>重复字符x，m次</td></tr><tr><td><code>x\&#123;m,\&#125;</code></td><td>重复字符x,至少m次</td></tr><tr><td><code>x\&#123;m,n\&#125;</code></td><td>重复字符x，至少m次，不多于n次</td></tr><tr><td>\w</td><td>匹配文字和数字字符，也就是[A-Za-z0-9]</td></tr><tr><td>\b</td><td>单词锁定符</td></tr></tbody></table><p>实例：显示所有以“h”结尾的行<br>grep h$<br>匹配所有以“a”开头且以“e”结尾的，中间包含2个字符的单词<br>grep ‘&lt;a…e&gt;’<br>显示所有包含一个”y”或”h”字符的行<br>grep [yh]<br>显示不包含字母a~k 且后紧跟“pple”的单词</p><figure class="highlight cos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep [<span class="symbol">^a</span>-<span class="keyword">k</span>]pple</span><br></pre></td></tr></table></figure><p>从系统词典中选择所有以“c”开头且以“o”结尾的单词<code>grep '\&lt;c.*o\&gt;'</code><br>找出一个文件中或者输出中找到包含<code>*</code>的行<code>grep '\*'</code><br>显示所有包含每个字符串至少有20个连续字母的单词的行<br><code>grep [a-Z]\&#123;20,\&#125;</code></p><h4 id="sort-排序">sort - 排序</h4><p><strong>语法：</strong></p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sort</span> [-fbMnrtuk] [<span class="built_in">file</span> <span class="keyword">or</span> <span class="keyword">stdin</span>]</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p><strong>参数说明</strong>：</p><ul class="lvl-0"><li class="lvl-2"><p>-f ：忽略大小写的差异，例如 A 与 a 视为编码相同；</p></li><li class="lvl-2"><p>-b ：忽略最前面的空格符部分；</p></li><li class="lvl-2"><p>-M ：以月份的名字来排序，例如 JAN, DEC 等等的排序方法；</p></li><li class="lvl-2"><p>-n ：使用『纯数字』进行排序(默认是以文字型态来排序的)；</p></li><li class="lvl-2"><p>-r ：反向排序；</p></li><li class="lvl-2"><p>-u ：就是 uniq ，相同的数据中，仅出现一行代表；</p></li><li class="lvl-2"><p>-t ：分隔符，默认是用 [tab] 键来分隔；</p></li><li class="lvl-2"><p>-k ：以哪个区间 (field) 来进行排序</p></li></ul><p>默认是以第一个字符升序排序:</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cat /etc/passwd | sort </span></span><br><span class="line"><span class="symbol">adm:</span><span class="symbol">x:</span><span class="number">3</span><span class="symbol">:</span><span class="number">4</span><span class="symbol">:adm</span><span class="symbol">:/var/adm</span><span class="symbol">:/sbin/nologin</span></span><br><span class="line">avahi-<span class="symbol">autoipd:</span><span class="symbol">x:</span><span class="number">100</span><span class="symbol">:</span><span class="number">156</span><span class="symbol">:avahi-autoipd</span><span class="symbol">:/var/lib/avahi-autoipd</span><span class="symbol">:/sbin/nologin</span></span><br><span class="line"><span class="symbol">avahi:</span><span class="symbol">x:</span><span class="number">70</span><span class="symbol">:</span><span class="number">70</span><span class="symbol">:Avahi</span> <span class="symbol">daemon:</span>/<span class="symbol">:/sbin/nologin</span></span><br><span class="line"><span class="symbol">bin:</span><span class="symbol">x:</span><span class="number">1</span><span class="symbol">:</span><span class="number">1</span><span class="symbol">:bin</span><span class="symbol">:/bin</span><span class="symbol">:/sbin/nologin</span></span><br><span class="line">......</span><br><span class="line"><span class="number">123456</span></span><br></pre></td></tr></table></figure><p>以第3列排序：</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="variable">@www</span> ~]<span class="comment"># cat /etc/passwd | sort -t &#x27;:&#x27; -k 3</span></span><br><span class="line"><span class="symbol">root:</span><span class="symbol">x:</span><span class="number">0</span><span class="symbol">:</span><span class="number">0</span><span class="symbol">:root</span><span class="symbol">:/root</span><span class="symbol">:/bin/bash</span></span><br><span class="line"><span class="symbol">uucp:</span><span class="symbol">x:</span><span class="number">10</span><span class="symbol">:</span><span class="number">14</span><span class="symbol">:uucp</span><span class="symbol">:/var/spool/uucp</span><span class="symbol">:/sbin/nologin</span></span><br><span class="line"><span class="symbol">operator:</span><span class="symbol">x:</span><span class="number">11</span><span class="symbol">:</span><span class="number">0</span><span class="symbol">:operator</span><span class="symbol">:/root</span><span class="symbol">:/sbin/nologin</span></span><br><span class="line"><span class="symbol">bin:</span><span class="symbol">x:</span><span class="number">1</span><span class="symbol">:</span><span class="number">1</span><span class="symbol">:bin</span><span class="symbol">:/bin</span><span class="symbol">:/sbin/nologin</span></span><br><span class="line"><span class="symbol">games:</span><span class="symbol">x:</span><span class="number">12</span><span class="symbol">:</span><span class="number">100</span><span class="symbol">:games</span><span class="symbol">:/usr/games</span><span class="symbol">:/sbin/nologin</span></span><br><span class="line"><span class="number">123456</span></span><br></pre></td></tr></table></figure><p>使用数字排序：</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/passwd | sort -t <span class="string">&#x27;:&#x27;</span> -k <span class="number">3</span>n</span><br><span class="line"><span class="symbol">root:</span><span class="symbol">x:</span><span class="number">0</span><span class="symbol">:</span><span class="number">0</span><span class="symbol">:root</span><span class="symbol">:/root</span><span class="symbol">:/bin/bash</span></span><br><span class="line"><span class="symbol">daemon:</span><span class="symbol">x:</span><span class="number">1</span><span class="symbol">:</span><span class="number">1</span><span class="symbol">:daemon</span><span class="symbol">:/usr/sbin</span><span class="symbol">:/bin/sh</span></span><br><span class="line"><span class="symbol">bin:</span><span class="symbol">x:</span><span class="number">2</span><span class="symbol">:</span><span class="number">2</span><span class="symbol">:bin</span><span class="symbol">:/bin</span><span class="symbol">:/bin/sh</span></span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure><p>倒序排序：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /etc/passwd | <span class="built_in">sort</span> -t <span class="string">&#x27;:&#x27;</span> -k 3nr</span><br><span class="line">nobody:x:65534:65534:nobody:/nonexistent:/bin/sh</span><br><span class="line">ntp:x:106:113::/home/ntp:/bin/false</span><br><span class="line">messagebus:x:105:109::/var/run/dbus:/bin/false</span><br><span class="line">sshd:x:104:65534::/var/run/sshd:/usr/sbin/nologin</span><br><span class="line">或者</span><br><span class="line"><span class="built_in">cat</span> /etc/passwd | <span class="built_in">sort</span> -t <span class="string">&#x27;:&#x27;</span> -k 3 -nr</span><br><span class="line">1234567</span><br></pre></td></tr></table></figure><p>先以第六个域的第2个字符到第4个字符进行正向排序，再基于第一个域进行反向排序：</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/passwd |  sort -t <span class="string">&#x27;:&#x27;</span> -k <span class="number">6.2</span>,<span class="number">6.4</span> -k <span class="number">1</span>r      </span><br><span class="line"><span class="symbol">sync:</span><span class="symbol">x:</span><span class="number">4</span><span class="symbol">:</span><span class="number">65534</span><span class="symbol">:sync</span><span class="symbol">:/bin</span><span class="symbol">:/bin/sync</span></span><br><span class="line"><span class="symbol">proxy:</span><span class="symbol">x:</span><span class="number">13</span><span class="symbol">:</span><span class="number">13</span><span class="symbol">:proxy</span><span class="symbol">:/bin</span><span class="symbol">:/bin/sh</span></span><br><span class="line"><span class="symbol">bin:</span><span class="symbol">x:</span><span class="number">2</span><span class="symbol">:</span><span class="number">2</span><span class="symbol">:bin</span><span class="symbol">:/bin</span><span class="symbol">:/bin/sh</span></span><br><span class="line"><span class="symbol">sys:</span><span class="symbol">x:</span><span class="number">3</span><span class="symbol">:</span><span class="number">3</span><span class="symbol">:sys</span><span class="symbol">:/dev</span><span class="symbol">:/bin/sh</span></span><br><span class="line"><span class="number">12345</span></span><br></pre></td></tr></table></figure><p>查看/etc/passwd有多少个shell:</p><p>方法对/etc/passwd的第七个域排序并去重，然后统计行数：</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="variable">@VM_0_9_centos</span> ~]<span class="comment"># cat /etc/passwd |  sort -t&#x27;:&#x27; -k 7 -u</span></span><br><span class="line"><span class="symbol">root:</span><span class="symbol">x:</span><span class="number">0</span><span class="symbol">:</span><span class="number">0</span><span class="symbol">:root</span><span class="symbol">:/root</span><span class="symbol">:/bin/bash</span></span><br><span class="line"><span class="symbol">syslog:</span><span class="symbol">x:</span><span class="number">996</span><span class="symbol">:</span><span class="number">994</span><span class="symbol">:</span><span class="symbol">:/home/syslog</span><span class="symbol">:/bin/false</span></span><br><span class="line"><span class="symbol">sync:</span><span class="symbol">x:</span><span class="number">5</span><span class="symbol">:</span><span class="number">0</span><span class="symbol">:sync</span><span class="symbol">:/sbin</span><span class="symbol">:/bin/sync</span></span><br><span class="line"><span class="symbol">halt:</span><span class="symbol">x:</span><span class="number">7</span><span class="symbol">:</span><span class="number">0</span><span class="symbol">:halt</span><span class="symbol">:/sbin</span><span class="symbol">:/sbin/halt</span></span><br><span class="line"><span class="symbol">bin:</span><span class="symbol">x:</span><span class="number">1</span><span class="symbol">:</span><span class="number">1</span><span class="symbol">:bin</span><span class="symbol">:/bin</span><span class="symbol">:/sbin/nologin</span></span><br><span class="line"><span class="symbol">shutdown:</span><span class="symbol">x:</span><span class="number">6</span><span class="symbol">:</span><span class="number">0</span><span class="symbol">:shutdown</span><span class="symbol">:/sbin</span><span class="symbol">:/sbin/shutdown</span></span><br><span class="line">[root<span class="variable">@VM_0_9_centos</span> ~]<span class="comment"># cat /etc/passwd |  sort -t&#x27;:&#x27; -k 7 -u|wc -l</span></span><br><span class="line"><span class="number">6</span></span><br><span class="line"><span class="number">123456789</span></span><br></pre></td></tr></table></figure><h4 id="uniq-去重">uniq - 去重</h4><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">选项与参数：</span><br><span class="line"><span class="deletion">-i   ：忽略大小写字符的不同；</span></span><br><span class="line"><span class="deletion">-c  ：进行计数</span></span><br><span class="line"><span class="deletion">-u  ：只显示唯一的行</span></span><br><span class="line">1234</span><br></pre></td></tr></table></figure><p>该命令用于排完序之后，对排序结果进行去重</p><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">python</span>@xxx:~$ last | cut -d <span class="string">&#x27; &#x27;</span> -f <span class="number">1</span>  | <span class="keyword">sort</span> | uniq</span><br><span class="line"></span><br><span class="line">haha</span><br><span class="line"><span class="keyword">python</span></span><br><span class="line">reboot</span><br><span class="line">wtmp</span><br><span class="line"><span class="keyword">python</span>@xxx:~$ last | cut -d <span class="string">&#x27; &#x27;</span> -f <span class="number">1</span>  | <span class="keyword">sort</span> | uniq -c</span><br><span class="line">      <span class="number">1</span> </span><br><span class="line">      <span class="number">2</span> haha</span><br><span class="line">     <span class="number">22</span> <span class="keyword">python</span></span><br><span class="line">      <span class="number">7</span> reboot</span><br><span class="line">      <span class="number">1</span> wtmp</span><br><span class="line"><span class="number">123456789101112</span></span><br></pre></td></tr></table></figure><p>排序文件，默认是去重：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="built_in">cat</span> words | <span class="built_in">sort</span> |<span class="built_in">uniq</span></span></span><br><span class="line">friend</span><br><span class="line">hello</span><br><span class="line">world</span><br><span class="line">1234</span><br></pre></td></tr></table></figure><p>排序之后删除了重复行，同时在行首位置输出该行重复的次数：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="built_in">sort</span> testfile | <span class="built_in">uniq</span> -c</span></span><br><span class="line">1 friend</span><br><span class="line">3 hello</span><br><span class="line">2 world</span><br><span class="line">1234</span><br></pre></td></tr></table></figure><p>仅显示存在重复的行，并在行首显示该行重复的次数：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="built_in">sort</span> testfile | <span class="built_in">uniq</span> -dc</span></span><br><span class="line">3 hello</span><br><span class="line">2 world</span><br><span class="line">123</span><br></pre></td></tr></table></figure><p>仅显示不重复的行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sort</span> testfile | <span class="built_in">uniq</span> -u</span><br><span class="line">friend</span><br><span class="line">12</span><br></pre></td></tr></table></figure><h4 id="tee-同时输出多个文件">tee - 同时输出多个文件</h4><p>从标准输入设备读取数据，将其内容输出到标准输出设备，同时保存成文件。</p><p>一般情况下用重定向实现，需要同时输出多个文件时可以使用该命令。</p><p><strong>参数</strong>：</p><ul class="lvl-0"><li class="lvl-2"><p>-a或–append 　附加到既有文件的后面，而非覆盖它．</p></li></ul><p>将输出同时保存到多个文件中，同时将输出内容显示到控制台：</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">python<span class="variable">@xxx</span><span class="symbol">:~/test</span><span class="variable">$ </span>echo <span class="string">&quot;hello world&quot;</span>|tee f1 f2 </span><br><span class="line">hello world</span><br><span class="line">python<span class="variable">@xxx</span><span class="symbol">:~/test</span><span class="variable">$ </span>cat f1</span><br><span class="line">hello world</span><br><span class="line">python<span class="variable">@xxx</span><span class="symbol">:~/test</span><span class="variable">$ </span>echo <span class="string">&quot;hello world&quot;</span>|tee f1 f2 -a</span><br><span class="line">hello world</span><br><span class="line">python<span class="variable">@xxx</span><span class="symbol">:~/test</span><span class="variable">$ </span>cat f1</span><br><span class="line">hello world</span><br><span class="line">hello world</span><br><span class="line"><span class="number">123456789</span></span><br></pre></td></tr></table></figure><h4 id="tr-替换指定的字符">tr - 替换指定的字符</h4><p>不指定参数时，即表示替换指定的字符为另一个字符，支持指定的字符集合。</p><p><strong>参数说明：</strong></p><ul class="lvl-0"><li class="lvl-2"><p>-d, --delete：删除指定的字符</p></li><li class="lvl-2"><p>-s, --squeeze-repeats：缩减连续重复的字符成指定的单个字符</p></li></ul><p>字符集合的范围：</p><ul class="lvl-0"><li class="lvl-2"><p>\NNN 八进制值的字符 NNN (1 to 3 为八进制值的字符)</p></li><li class="lvl-2"><p>\ 反斜杠</p></li><li class="lvl-2"><p>\a Ctrl-G 铃声</p></li><li class="lvl-2"><p>\b Ctrl-H 退格符</p></li><li class="lvl-2"><p>\f Ctrl-L 走行换页</p></li><li class="lvl-2"><p>\n Ctrl-J 新行</p></li><li class="lvl-2"><p>\r Ctrl-M 回车</p></li><li class="lvl-2"><p>\t Ctrl-I tab键</p></li><li class="lvl-2"><p>\v Ctrl-X 水平制表符</p></li><li class="lvl-2"><p>CHAR1-CHAR2 ：字符范围从 CHAR1 到 CHAR2 的指定，范围的指定以 ASCII 码的次序为基础，只能由小到大，不能由大到小。</p></li><li class="lvl-2"><p>[CHAR*] ：这是 SET2 专用的设定，功能是重复指定的字符到与 SET1 相同长度为止</p></li><li class="lvl-2"><p>[CHAR*REPEAT] ：这也是 SET2 专用的设定，功能是重复指定的字符到设定的 REPEAT 次数为止(REPEAT 的数字采 8 进位制计算，以 0 为开始)</p></li><li class="lvl-2"><p>[:alnum:] ：所有字母字符与数字</p></li><li class="lvl-2"><p>[:alpha:] ：所有字母字符</p></li><li class="lvl-2"><p>[:blank:] ：所有水平空格</p></li><li class="lvl-2"><p>[:cntrl:] ：所有控制字符</p></li><li class="lvl-2"><p>[:digit:] ：所有数字</p></li><li class="lvl-2"><p>[:graph:] ：所有可打印的字符(不包含空格符)</p></li><li class="lvl-2"><p>[:lower:] ：所有小写字母</p></li><li class="lvl-2"><p>[:print:] ：所有可打印的字符(包含空格符)</p></li><li class="lvl-2"><p>[:punct:] ：所有标点字符</p></li><li class="lvl-2"><p>[:space:] ：所有水平与垂直空格符</p></li><li class="lvl-2"><p>[:upper:] ：所有大写字母</p></li><li class="lvl-2"><p>[:xdigit:] ：所有 16 进位制的数字</p></li><li class="lvl-2"><p>[=CHAR=] ：所有符合指定的字符(等号里的 CHAR，代表你可自订的字符)</p></li></ul><p>将文件testfile中的小写字母全部转换成大写字母：</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">cat</span> <span class="selector-tag">testfile</span> |<span class="selector-tag">tr</span> <span class="selector-tag">a</span><span class="selector-tag">-z</span> <span class="selector-tag">A</span><span class="selector-tag">-Z</span> </span><br><span class="line">或</span><br><span class="line"><span class="selector-tag">cat</span> <span class="selector-tag">testfile</span> |<span class="selector-tag">tr</span> <span class="selector-attr">[:lower:]</span> <span class="selector-attr">[:upper:]</span> </span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure><p>缩减连续重复的字符成指定的单个字符：</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">python<span class="variable">@xxx</span><span class="symbol">:~/test</span><span class="variable">$ </span>cat t</span><br><span class="line">dddddddsssssdd</span><br><span class="line">eeeeeeeeee</span><br><span class="line">aaaaaaaaaaaaaa</span><br><span class="line">vvvvvvvvvvvvvv</span><br><span class="line">python<span class="variable">@xxx</span><span class="symbol">:~/test</span><span class="variable">$ </span>cat t|tr -s <span class="string">&#x27;se&#x27;</span></span><br><span class="line">dddddddsdd</span><br><span class="line">e</span><br><span class="line">aaaaaaaaaaaaaa</span><br><span class="line">vvvvvvvvvvvvvv</span><br><span class="line">python<span class="variable">@xxx</span><span class="symbol">:~/test</span><span class="variable">$ </span>cat t|tr -s <span class="string">&#x27;sdeav&#x27;</span></span><br><span class="line">dsd</span><br><span class="line">e</span><br><span class="line">a</span><br><span class="line">v</span><br><span class="line"><span class="number">123456789101112131415</span></span><br></pre></td></tr></table></figure><p>删除指定的字符：</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">python<span class="variable">@xxx</span><span class="symbol">:~/test</span><span class="variable">$ </span>cat t|tr -d <span class="string">&#x27;dv&#x27;</span></span><br><span class="line">sssss</span><br><span class="line">eeeeeeeeee</span><br><span class="line">aaaaaaaaaaaaaa</span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure><h4 id="join-文件按行连接">join - 文件按行连接</h4><p>将两个文件中指定栏位相同的行连接起来。即按照两个文件中共同拥有的某一列，将对应的行拼接成一行。</p><p>注意：在使用join之前所处理的文件要事先经过排序。</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ cat testfile_1</span><br><span class="line">Hello 95 #例如，本例中第一列为姓名，第二列为数额  </span><br><span class="line">Linux 85  </span><br><span class="line"><span class="keyword">test </span>30  </span><br><span class="line">cmd@hdd-desktop:~$ cat testfile_2</span><br><span class="line">Hello 2005 #例如，本例中第一列为姓名，第二列为年份  </span><br><span class="line">Linux 2009  </span><br><span class="line"><span class="keyword">test </span>2006 </span><br><span class="line">12345678</span><br></pre></td></tr></table></figure><p>使用join命令，将两个文件连接：</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ join testfile_1 testfile_2 #连接testfile_1、testfile_2中的内容  </span><br><span class="line">Hello 95 2005 #连接后显示的内容  </span><br><span class="line">Linux 85 2009  </span><br><span class="line"><span class="keyword">test </span>30 2006 </span><br><span class="line">1234</span><br></pre></td></tr></table></figure><p>两个文件互换，输出结果的变化：</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ join testfile_2 testfile_1 #改变文件顺序连接两个文件  </span><br><span class="line">Hello 2005 95 #连接后显示的内容  </span><br><span class="line">Linux 2009 85  </span><br><span class="line"><span class="keyword">test </span>2006 30 </span><br><span class="line">1234</span><br></pre></td></tr></table></figure><p><strong>参数</strong>：</p><ul class="lvl-0"><li class="lvl-2"><p>-a&lt;1或2&gt; 除了显示原来的输出内容之外，还显示指令文件中没有相同栏位的行。</p></li><li class="lvl-2"><p>-e&lt;字符串&gt; 若[文件1]与[文件2]中找不到指定的栏位，则在输出中填入选项中的字符串。</p></li><li class="lvl-2"><p>-i或–igore-case 比较栏位内容时，忽略大小写的差异。</p></li><li class="lvl-2"><p>-o&lt;格式&gt; 按照指定的格式来显示结果。</p></li><li class="lvl-2"><p>-t&lt;字符&gt; 使用栏位的分隔字符。</p></li><li class="lvl-2"><p>-v&lt;1或2&gt; 跟-a相同，但是只显示文件中没有相同栏位的行。</p></li><li class="lvl-2"><p>-1&lt;栏位&gt; 连接[文件1]指定的栏位。</p></li><li class="lvl-2"><p>-2&lt;栏位&gt; 连接[文件2]指定的栏位。</p></li></ul><h4 id="paste-将多个文件对应行链接在一起">paste-将多个文件对应行链接在一起</h4><p>paste 指令会把每个文件以列对列的方式，一列列地加以合并。</p><p>语法：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">paste <span class="selector-attr">[-s]</span><span class="selector-attr">[-d &lt;间隔字符&gt;]</span><span class="selector-attr">[文件...]</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p><strong>参数</strong>：</p><ul class="lvl-0"><li class="lvl-2"><p>-d&lt;间隔字符&gt;或–delimiters=&lt;间隔字符&gt; 　用指定的间隔字符取代跳格字符。</p></li><li class="lvl-2"><p>-s或–serial 　串列进行而非平行处理。</p></li><li class="lvl-2"><p>[文件…] 指定操作的文件路径</p></li></ul><p>使用paste指令将文件&quot;file&quot;、“testfile”、&quot;testfile1&quot;进行合并，输入如下命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> file                  <span class="comment">#file文件的内容</span></span>  </span><br><span class="line">xiongdan 200  </span><br><span class="line">lihaihui 233  </span><br><span class="line">lymlrl 231  </span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> testfile              <span class="comment">#testfile文件的内容</span></span>  </span><br><span class="line">liangyuanm  ss  </span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> testfile1             <span class="comment">#testfile1文件的内容</span></span>  </span><br><span class="line">huanggai 56  </span><br><span class="line">zhixi 73 </span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">paste</span> file testfile testfile1</span></span><br><span class="line">xiongdan 200    liangyuanm ss   huanggai 56</span><br><span class="line">lihaihui 233            zhixi 73</span><br><span class="line">lymlrl 231</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">paste</span> -d <span class="string">&#x27;:&#x27;</span> file testfile testfile1</span></span><br><span class="line">xiongdan 200:liangyuanm ss:huanggai 56</span><br><span class="line">lihaihui 233::zhixi 73</span><br><span class="line">lymlrl 231::</span><br><span class="line">1234567891011121314151617</span><br></pre></td></tr></table></figure><p>参数&quot;-s&quot;可以将一个文件中的多行数据合并为一行进行显示：</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ paste -s file             <span class="comment">#合并指定文件的多行数据</span></span><br><span class="line">xiongdan<span class="number"> 200 </span>lihaihui<span class="number"> 233 </span>lymlrl<span class="number"> 231 </span></span><br><span class="line">12</span><br></pre></td></tr></table></figure><p>如果将文件位置改为-，表示接收标准输入：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> file |<span class="built_in">paste</span> testfile1 -</span></span><br><span class="line">huanggai 56     xiongdan 200</span><br><span class="line">zhixi 73        lihaihui 233</span><br><span class="line">        lymlrl 231</span><br><span class="line">1234</span><br></pre></td></tr></table></figure><h4 id="split-文件切割">split - 文件切割</h4><p>split命令用于将一个文件分割成数个。</p><p>该指令将大文件分割成较小的文件，在默认情况下将按照每1000行切割成一个小文件。</p><p>语法：</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">split [-<span class="keyword">bl] </span>file <span class="keyword">prefix</span></span><br><span class="line"><span class="keyword"></span>-<span class="keyword">b: </span>以大小切割</span><br><span class="line">-l：以行数切割</span><br><span class="line"><span class="keyword">prefix：切割后文件的前缀</span></span><br><span class="line"><span class="keyword"></span><span class="number">1234</span></span><br></pre></td></tr></table></figure><p><strong>参数说明</strong>：</p><ul class="lvl-0"><li class="lvl-2"><p>-&lt;行数&gt; : 指定每多少行切成一个小文件</p></li><li class="lvl-2"><p>-b&lt;字节&gt; : 指定每多少字节切成一个小文件</p></li><li class="lvl-2"><p>-C&lt;字节&gt; : 与参数&quot;-b&quot;相似，但是在切 割时将尽量维持每行的完整性</p></li><li class="lvl-2"><p>[输出文件名] : 设置切割后文件的前置文件名， split会自动在前置文件名后再加上编号</p></li></ul><p>使用指令&quot;split&quot;将文件&quot;README&quot;每6行切割成一个文件，输入如下命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">split</span> -6 README       <span class="comment">#将README文件每六行分割成一个文件</span></span> </span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">ls</span>                                <span class="comment">#执行ls指令</span></span>  </span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">获得当前目录结构</span></span><br><span class="line">README xaa xad xag xab xae xah xac xaf xai</span><br><span class="line">1234</span><br></pre></td></tr></table></figure><p>以上命令执行后，指令&quot;split&quot;会将原来的大文件&quot;README&quot;切割成多个以&quot;x&quot;开头的小文件。而在这些小文件中，每个文件都只有6行内容。</p><p>以大小切割：</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ ls -<span class="keyword">lh </span><span class="keyword">disease.dmp</span></span><br><span class="line"><span class="keyword"></span>-rwxr-xr-x <span class="number">1</span> root root <span class="number">122</span>M <span class="keyword">Jul </span> <span class="number">4</span>  <span class="number">2013</span> <span class="keyword">disease.dmp</span></span><br><span class="line"><span class="keyword"></span>$ split -<span class="keyword">b </span><span class="number">50</span>m <span class="keyword">disease.dmp </span><span class="keyword">disease.dmp</span></span><br><span class="line"><span class="keyword"></span>$ ls -<span class="keyword">lh </span><span class="keyword">disease.dmp*</span></span><br><span class="line"><span class="keyword"></span>-rwxr-xr-x <span class="number">1</span> root root <span class="number">122</span>M <span class="keyword">Jul </span> <span class="number">4</span>  <span class="number">2013</span> <span class="keyword">disease.dmp</span></span><br><span class="line"><span class="keyword"></span>-rw-r--r-- <span class="number">1</span> root root  <span class="number">50</span>M <span class="keyword">Jan </span> <span class="number">9</span> <span class="number">16</span>:<span class="number">10</span> <span class="keyword">disease.dmpaa</span></span><br><span class="line"><span class="keyword"></span>-rw-r--r-- <span class="number">1</span> root root  <span class="number">50</span>M <span class="keyword">Jan </span> <span class="number">9</span> <span class="number">16</span>:<span class="number">10</span> <span class="keyword">disease.dmpab</span></span><br><span class="line"><span class="keyword"></span>-rw-r--r-- <span class="number">1</span> root root  <span class="number">22</span>M <span class="keyword">Jan </span> <span class="number">9</span> <span class="number">16</span>:<span class="number">10</span> <span class="keyword">disease.dmpac</span></span><br><span class="line"><span class="keyword"></span><span class="number">12345678</span></span><br></pre></td></tr></table></figure><h4 id="xargs-参数代换">xargs - 参数代换</h4><p>不是所有的命令都支持管道，如ls，对于不支持管道的命令，可以通过xargs让其有管道命令的效果，如下所示：</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># find /sbin -perm +7000 | xargs ls -l</span></span><br><span class="line">-rwsr-x---<span class="number"> 1 </span>root ecryptfs<span class="number"> 19896 </span>Feb<span class="number"> 23 </span><span class="number"> 2012 </span>/sbin/mount.ecryptfs_private</span><br><span class="line">-rwsr-xr-x<span class="number"> 1 </span>root root    <span class="number"> 75496 </span>Jan <span class="number"> 9 </span><span class="number"> 2013 </span>/sbin/mount.nfs</span><br><span class="line">-rwsr-xr-x<span class="number"> 1 </span>root root    <span class="number"> 75504 </span>Jan <span class="number"> 9 </span><span class="number"> 2013 </span>/sbin/mount.nfs4</span><br><span class="line">-rwxr-sr-x<span class="number"> 1 </span>root root     <span class="number"> 8544 </span>Feb<span class="number"> 22 </span><span class="number"> 2012 </span>/sbin/netreport</span><br><span class="line">-rwsr-xr-x<span class="number"> 1 </span>root root    <span class="number"> 14112 </span>Nov <span class="number"> 2 </span><span class="number"> 2010 </span>/sbin/pam_timestamp_check</span><br><span class="line">-rwsr-xr-x<span class="number"> 1 </span>root root    <span class="number"> 75504 </span>Jan <span class="number"> 9 </span><span class="number"> 2013 </span>/sbin/umount.nfs</span><br><span class="line">-rwsr-xr-x<span class="number"> 1 </span>root root    <span class="number"> 75504 </span>Jan <span class="number"> 9 </span><span class="number"> 2013 </span>/sbin/umount.nfs4</span><br><span class="line">-rwsr-xr-x<span class="number"> 1 </span>root root    <span class="number"> 19768 </span>Nov <span class="number"> 2 </span><span class="number"> 2010 </span>/sbin/unix_chkpwd</span><br><span class="line">123456789</span><br></pre></td></tr></table></figure><p>如果没有xargs，ls -l的结果将不是前面find的标准输出，因为ls不支持管道命令。</p><p>xargs 用作替换工具，读取输入数据重新格式化后输出。</p><p>定义一个测试文件，内有多行文本数据：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># cat test<span class="selector-class">.txt</span></span><br><span class="line"><span class="selector-tag">a</span> <span class="selector-tag">b</span> c d e f <span class="selector-tag">g</span></span><br><span class="line">h <span class="selector-tag">i</span> j k l m n</span><br><span class="line">o <span class="selector-tag">p</span> <span class="selector-tag">q</span></span><br><span class="line"><span class="attribute">r</span> s t</span><br><span class="line">u v w <span class="attribute">x</span> <span class="attribute">y</span> z</span><br><span class="line"><span class="number">123456</span></span><br></pre></td></tr></table></figure><p>多行输入单行输出：</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># <span class="selector-tag">cat</span> <span class="selector-tag">test</span><span class="selector-class">.txt</span> | <span class="selector-tag">xargs</span></span><br><span class="line"><span class="selector-tag">a</span> <span class="selector-tag">b</span> <span class="selector-tag">c</span> <span class="selector-tag">d</span> <span class="selector-tag">e</span> <span class="selector-tag">f</span> <span class="selector-tag">g</span> <span class="selector-tag">h</span> <span class="selector-tag">i</span> <span class="selector-tag">j</span> <span class="selector-tag">k</span> <span class="selector-tag">l</span> <span class="selector-tag">m</span> <span class="selector-tag">n</span> <span class="selector-tag">o</span> <span class="selector-tag">p</span> <span class="selector-tag">q</span> <span class="selector-tag">r</span> <span class="selector-tag">s</span> <span class="selector-tag">t</span> <span class="selector-tag">u</span> <span class="selector-tag">v</span> <span class="selector-tag">w</span> <span class="selector-tag">x</span> <span class="selector-tag">y</span> <span class="selector-tag">z</span></span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure><p>-n 选项多行输出：</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># <span class="selector-tag">cat</span> <span class="selector-tag">test</span><span class="selector-class">.txt</span> | <span class="selector-tag">xargs</span> <span class="selector-tag">-n3</span></span><br><span class="line"><span class="selector-tag">a</span> <span class="selector-tag">b</span> <span class="selector-tag">c</span></span><br><span class="line"><span class="selector-tag">d</span> <span class="selector-tag">e</span> <span class="selector-tag">f</span></span><br><span class="line"><span class="selector-tag">g</span> <span class="selector-tag">h</span> <span class="selector-tag">i</span></span><br><span class="line"><span class="selector-tag">j</span> <span class="selector-tag">k</span> <span class="selector-tag">l</span></span><br><span class="line"><span class="selector-tag">m</span> <span class="selector-tag">n</span> <span class="selector-tag">o</span></span><br><span class="line"><span class="selector-tag">p</span> <span class="selector-tag">q</span> <span class="selector-tag">r</span></span><br><span class="line"><span class="selector-tag">s</span> <span class="selector-tag">t</span> <span class="selector-tag">u</span></span><br><span class="line"><span class="selector-tag">v</span> <span class="selector-tag">w</span> <span class="selector-tag">x</span></span><br><span class="line"><span class="selector-tag">y</span> <span class="selector-tag">z</span></span><br><span class="line"><span class="number">12345678910</span></span><br></pre></td></tr></table></figure><p>-d 选项可以自定义一个定界符：</p><figure class="highlight sqf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># echo <span class="string">&quot;nameXnameXnameXname&quot;</span> | xargs -dX</span></span><br><span class="line"><span class="built_in">name</span> <span class="built_in">name</span> <span class="built_in">name</span> <span class="built_in">name</span></span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure><p>结合 -n 选项使用：</p><figure class="highlight sqf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># echo <span class="string">&quot;nameXnameXnameXname&quot;</span> | xargs -dX -n2</span></span><br><span class="line"><span class="built_in">name</span> <span class="built_in">name</span></span><br><span class="line"><span class="built_in">name</span> <span class="built_in">name</span></span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure><p>读取 stdin，将格式化后的参数传递给命令:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">cat</span> sk.sh</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">sk.sh命令内容，打印出所有参数。</span></span><br><span class="line">echo $*</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">cat</span> arg.txt</span></span><br><span class="line">aaa</span><br><span class="line">bbb</span><br><span class="line">ccc</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">cat</span> arg.txt | xargs -I &#123;&#125; ./sk.sh -p &#123;&#125; -l</span></span><br><span class="line">-p aaa -l</span><br><span class="line">-p bbb -l</span><br><span class="line">-p ccc -l</span><br><span class="line">123456789101112</span><br></pre></td></tr></table></figure><p>选项<code>-I</code>指定一个替换字符串 {}，这个字符串在 xargs 扩展时会被替换掉。</p><p>复制所有图片文件到 /data/images 目录下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span> *.jpg | xargs -n1 -I &#123;&#125; <span class="built_in">cp</span> &#123;&#125; /data/images</span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>选项<code>-n</code> 后面加次数，表示命令在执行的时候一次用的argument的个数，默认是用所有的。</p><p><strong>xargs 结合 find 使用</strong></p><p>用 rm 删除太多的文件时候，可能得到一个错误信息：<strong>/bin/rm Argument list too long.</strong> 用 xargs 去避免这个问题：</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">find . -<span class="keyword">type</span> <span class="type">f </span>-name <span class="string">&quot;*.log&quot;</span> -print0 | xargs -<span class="number">0</span> rm -f</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>xargs -0 将 \0 作为定界符。</p><p>统计一个源代码目录中所有 php 文件的行数：</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">find . -<span class="keyword">type</span> <span class="type">f </span>-name <span class="string">&quot;*.php&quot;</span> -print0 | xargs -<span class="number">0</span> wc -l</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>查找所有的 jpg 文件，并且压缩它们：</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">find</span> . -type f -name <span class="string">&quot;*.jpg&quot;</span> -<span class="built_in">print</span> | xargs tar -czvf images.tar.gz</span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>批量下载：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">cat</span> url-list.txt | xargs wget -c</span></span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>wget的<code>-c</code>选项表示断点续传。</p><h2 id="linux命令练习">linux命令练习</h2><h3 id="常用命令">常用命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line">1.进入到用户根目录</span><br><span class="line"><span class="built_in">cd</span> ~ 或 <span class="built_in">cd</span></span><br><span class="line"></span><br><span class="line">2.查看当前所在目录</span><br><span class="line"><span class="built_in">pwd</span></span><br><span class="line"></span><br><span class="line">3.进入到hadoop用户根目录</span><br><span class="line"><span class="built_in">cd</span> ~hadoop</span><br><span class="line"></span><br><span class="line">4.返回到原来目录</span><br><span class="line"><span class="built_in">cd</span> -</span><br><span class="line"></span><br><span class="line">5.返回到上一级目录</span><br><span class="line"><span class="built_in">cd</span> ..</span><br><span class="line"></span><br><span class="line">6.查看hadoop用户根目录下的所有文件</span><br><span class="line"><span class="built_in">ls</span> -la</span><br><span class="line"></span><br><span class="line">7.在根目录下创建一个hadoop的文件夹</span><br><span class="line"><span class="built_in">mkdir</span> /hadoop</span><br><span class="line"></span><br><span class="line">8.在/hadoop目录下创建src和WebRoot两个文件夹</span><br><span class="line">分别创建：<span class="built_in">mkdir</span> /hadoop/src</span><br><span class="line">		  <span class="built_in">mkdir</span> /hadoop/WebRoot</span><br><span class="line">同时创建：<span class="built_in">mkdir</span> /hadoop/&#123;src,WebRoot&#125;</span><br><span class="line"></span><br><span class="line">进入到/hadoop目录，在该目录下创建.classpath和README文件</span><br><span class="line">分别创建：<span class="built_in">touch</span> .classpath</span><br><span class="line">		  <span class="built_in">touch</span> README</span><br><span class="line">同时创建：<span class="built_in">touch</span> &#123;.classpath,README&#125;</span><br><span class="line"></span><br><span class="line">查看/hadoop目录下面的所有文件</span><br><span class="line"><span class="built_in">ls</span> -la</span><br><span class="line"></span><br><span class="line">在/hadoop目录下面创建一个test.txt文件,同时写入内容<span class="string">&quot;this is test&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;this is test&quot;</span> &gt; test.txt</span><br><span class="line"></span><br><span class="line">查看一下test.txt的内容</span><br><span class="line"><span class="built_in">cat</span> test.txt</span><br><span class="line">more test.txt</span><br><span class="line">less test.txt</span><br><span class="line"></span><br><span class="line">向README文件追加写入<span class="string">&quot;please read me first&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;please read me first&quot;</span> &gt;&gt; README</span><br><span class="line"></span><br><span class="line">将test.txt的内容追加到README文件中</span><br><span class="line"><span class="built_in">cat</span> test.txt &gt;&gt; README</span><br><span class="line"></span><br><span class="line">拷贝/hadoop目录下的所有文件到/hadoop-bak</span><br><span class="line"><span class="built_in">cp</span> -r /hadoop /hadoop-bak</span><br><span class="line"></span><br><span class="line">进入到/hadoop-bak目录，将test.txt移动到src目录下，并修改文件名为Student.java</span><br><span class="line"><span class="built_in">mv</span> test.txt src/Student.java</span><br><span class="line"></span><br><span class="line">在src目录下创建一个struts.xml</span><br><span class="line">&gt; struts.xml</span><br><span class="line"></span><br><span class="line">删除所有的xml类型的文件</span><br><span class="line"><span class="built_in">rm</span> -rf *.xml</span><br><span class="line"></span><br><span class="line">删除/hadoop-bak目录和下面的所有文件</span><br><span class="line"><span class="built_in">rm</span> -rf /hadoop-bak</span><br><span class="line"></span><br><span class="line">返回到/hadoop目录，查看一下README文件有多单词，多少个少行</span><br><span class="line"><span class="built_in">wc</span> -w README</span><br><span class="line"><span class="built_in">wc</span> -l README</span><br><span class="line"></span><br><span class="line">返回到根目录，将/hadoop目录先打包，再用gzip压缩</span><br><span class="line">分步完成：tar -cvf hadoop.tar hadoop</span><br><span class="line">		  gzip hadoop.tar</span><br><span class="line">一步完成：tar -zcvf hadoop.tar.gz hadoop</span><br><span class="line">		  </span><br><span class="line">将其解压缩，再取消打包</span><br><span class="line">分步完成：gzip -d hadoop.tar.gz 或 gunzip hadoop.tar.gz</span><br><span class="line">一步完成：tar -zxvf hadoop.tar.gz</span><br><span class="line"></span><br><span class="line">将/hadoop目录先打包，同时用bzip2压缩，并保存到/tmp目录下</span><br><span class="line">tar -jcvf /tmp/hadoop.tar.bz2 hadoop</span><br><span class="line"></span><br><span class="line">将/tmp/hadoop.tar.bz2解压到/usr目录下面</span><br><span class="line">tar -jxvf hadoop.tar.bz2 -C /usr/</span><br><span class="line">123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081</span><br></pre></td></tr></table></figure><h3 id="系统命令">系统命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">1.查看主机名</span><br><span class="line">hostname</span><br><span class="line"></span><br><span class="line">2.修改主机名(重启后无效)</span><br><span class="line">hostname hadoop</span><br><span class="line"></span><br><span class="line">3.修改主机名(重启后永久生效)</span><br><span class="line">vi /ect/sysconfig/network</span><br><span class="line"></span><br><span class="line">4.修改IP(重启后无效)</span><br><span class="line">ifconfig eth0 192.168.12.22</span><br><span class="line"></span><br><span class="line">5.修改IP(重启后永久生效)</span><br><span class="line">vi /etc/sysconfig/network-scripts/ifcfg-eth0</span><br><span class="line"></span><br><span class="line">6.查看系统信息</span><br><span class="line"><span class="built_in">uname</span> -a</span><br><span class="line"><span class="built_in">uname</span> -r</span><br><span class="line"></span><br><span class="line">7.查看ID命令</span><br><span class="line"><span class="built_in">id</span> -u</span><br><span class="line"><span class="built_in">id</span> -g</span><br><span class="line"></span><br><span class="line">8.日期</span><br><span class="line"><span class="built_in">date</span></span><br><span class="line"><span class="built_in">date</span> +%Y-%m-%d</span><br><span class="line"><span class="built_in">date</span> +%T</span><br><span class="line"><span class="built_in">date</span> +%Y-%m-%d<span class="string">&quot; &quot;</span>%T</span><br><span class="line"></span><br><span class="line">9.日历</span><br><span class="line">cal 2012</span><br><span class="line"></span><br><span class="line">10.查看文件信息</span><br><span class="line">file filename</span><br><span class="line"></span><br><span class="line">11.挂载硬盘</span><br><span class="line">mount</span><br><span class="line">umount</span><br><span class="line">加载windows共享</span><br><span class="line">mount -t cifs //192.168.1.100/tools /mnt</span><br><span class="line"></span><br><span class="line">12.查看文件大小</span><br><span class="line"><span class="built_in">du</span> -h</span><br><span class="line"><span class="built_in">du</span> -ah</span><br><span class="line"></span><br><span class="line">13.查看分区</span><br><span class="line"><span class="built_in">df</span> -h</span><br><span class="line"></span><br><span class="line">14.ssh</span><br><span class="line">ssh hadoop@192.168.1.1</span><br><span class="line"></span><br><span class="line">15.关机</span><br><span class="line">shutdown -h now /init 0</span><br><span class="line">shutdown -r now /reboot</span><br><span class="line">123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354</span><br></pre></td></tr></table></figure><h3 id="查看版本信息">查看版本信息</h3><figure class="highlight tcl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、查看当前操作系统内核信息</span><br><span class="line">uname -a</span><br><span class="line">$ uname -a</span><br><span class="line">zhang@rocky9:~$ uname -a</span><br><span class="line">Linux rocky9 <span class="number">5.14</span><span class="number">.0</span><span class="number">-284.11</span><span class="number">.1</span>.el9_2.x86_64 #<span class="number">1</span> SMP PREEMPT_DYNAMIC Tue May <span class="number">9</span> <span class="number">17</span>:<span class="number">09</span>:<span class="number">15</span> UTC <span class="number">2023</span> x86_64 x86_64 x86_64 GNU/Linux</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>、查看当前操作系统版本信息</span><br><span class="line">cat /<span class="keyword">proc</span>/version</span><br><span class="line">$<span class="title"> cat</span> /<span class="keyword">proc</span>/version<span class="title"></span></span><br><span class="line"><span class="title">Linux</span> version 3.10.0-693.21.1.el7.x86_64 (builder@kbuilder.dev.centos.org) (gcc<span class="title"> version</span> 4.8.5 20150623 (Red<span class="title"> Hat</span> 4.8.5-16) (GCC) ) #1<span class="title"> SMP</span> Wed<span class="title"> Mar</span> 7 19:03:37<span class="title"> UTC</span> 2018</span><br><span class="line"></span><br><span class="line">3、查看当前操作系统发行版信息<span class="title"></span></span><br><span class="line"><span class="title">cat</span> /etc/issue 或<span class="title"> cat</span> /etc/redhat-release</span><br><span class="line">$<span class="title"> cat</span> /etc/issue</span><br><span class="line">\S<span class="title"></span></span><br><span class="line"><span class="title">Kernel</span> \r<span class="title"> on</span> an \m</span><br><span class="line"></span><br><span class="line">$<span class="title"> cat</span> /etc/redhat-release<span class="title"></span></span><br><span class="line"><span class="title">CentOS</span> Linux<span class="title"> release</span> 7.4.1708 (Core)</span><br><span class="line"></span><br><span class="line">4、查看cpu相关信息，包括型号、主频、内核信息等<span class="title"></span></span><br><span class="line"><span class="title">cat</span> /<span class="keyword">proc</span>/cpuinfo</span><br><span class="line">$<span class="title"> cat</span> /<span class="keyword">proc</span>/cpuinfo<span class="title"></span></span><br><span class="line"><span class="title">processor</span> : 0<span class="title"></span></span><br><span class="line"><span class="title">vendor_id</span> :<span class="title"> GenuineIntel</span></span><br><span class="line">cpu<span class="title"> family</span> : 6<span class="title"></span></span><br><span class="line"><span class="title">model</span> : 45<span class="title"></span></span><br><span class="line"><span class="title">model</span> name :<span class="title"> Intel®</span> Xeon®<span class="title"> CPU</span> E5-2660 0 @ 2.20GHz<span class="title"></span></span><br><span class="line"><span class="title">stepping</span> : 7<span class="title"></span></span><br><span class="line"><span class="title">microcode</span> : 0xffffffff<span class="title"></span></span><br><span class="line"><span class="title">cpu</span> MHz : 2199.998<span class="title"></span></span><br><span class="line"><span class="title">cache</span> size : 20480<span class="title"> KB</span></span><br><span class="line">physical<span class="title"> id</span> : 0<span class="title"></span></span><br><span class="line"><span class="title">siblings</span> : 2<span class="title"></span></span><br><span class="line"><span class="title">core</span> id : 0<span class="title"></span></span><br><span class="line"><span class="title">cpu</span> cores : 2<span class="title"></span></span><br><span class="line"><span class="title">apicid</span> : 0<span class="title"></span></span><br><span class="line"><span class="title">initial</span> apicid : 0<span class="title"></span></span><br><span class="line"><span class="title">fpu</span> :<span class="title"> yes</span></span><br><span class="line">fpu_exception :<span class="title"> yes</span></span><br><span class="line">cpuid<span class="title"> level</span> : 13<span class="title"></span></span><br><span class="line"><span class="title">wp</span> :<span class="title"> yes</span></span><br><span class="line">flags :<span class="title"> fpu</span> vme<span class="title"> de</span> pse<span class="title"> tsc</span> msr<span class="title"> pae</span> mce<span class="title"> cx8</span> apic<span class="title"> sep</span> mtrr<span class="title"> pge</span> mca<span class="title"> cmov</span> pat<span class="title"> pse36</span> clflush<span class="title"> mmx</span> fxsr<span class="title"> sse</span> sse2<span class="title"> ss</span> ht<span class="title"> syscall</span> nx<span class="title"> pdpe1gb</span> rdtscp<span class="title"> lm</span> constant_tsc<span class="title"> rep_good</span> nopl<span class="title"> xtopology</span> eagerfpu<span class="title"> pni</span> pclmulqdq<span class="title"> ssse3</span> cx16<span class="title"> sse4_1</span> sse4_2<span class="title"> popcnt</span> aes<span class="title"> xsave</span> avx<span class="title"> hypervisor</span> lahf_lm<span class="title"> xsaveopt</span></span><br><span class="line">bogomips : 4399.99<span class="title"></span></span><br><span class="line"><span class="title">clflush</span> size : 64<span class="title"></span></span><br><span class="line"><span class="title">cache_alignment</span> : 64<span class="title"></span></span><br><span class="line"><span class="title">address</span> sizes : 44<span class="title"> bits</span> physical, 48<span class="title"> bits</span> virtual<span class="title"></span></span><br><span class="line"><span class="title">power</span> management:<span class="title"></span></span><br><span class="line"><span class="title"></span></span><br><span class="line"><span class="title">processor</span> : 1<span class="title"></span></span><br><span class="line"><span class="title">vendor_id</span> :<span class="title"> GenuineIntel</span></span><br><span class="line">cpu<span class="title"> family</span> : 6<span class="title"></span></span><br><span class="line"><span class="title">model</span> : 45<span class="title"></span></span><br><span class="line"><span class="title">model</span> name :<span class="title"> Intel®</span> Xeon®<span class="title"> CPU</span> E5-2660 0 @ 2.20GHz<span class="title"></span></span><br><span class="line"><span class="title">stepping</span> : 7<span class="title"></span></span><br><span class="line"><span class="title">microcode</span> : 0xffffffff<span class="title"></span></span><br><span class="line"><span class="title">cpu</span> MHz : 2199.998<span class="title"></span></span><br><span class="line"><span class="title">cache</span> size : 20480<span class="title"> KB</span></span><br><span class="line">physical<span class="title"> id</span> : 0<span class="title"></span></span><br><span class="line"><span class="title">siblings</span> : 2<span class="title"></span></span><br><span class="line"><span class="title">core</span> id : 1<span class="title"></span></span><br><span class="line"><span class="title">cpu</span> cores : 2<span class="title"></span></span><br><span class="line"><span class="title">apicid</span> : 1<span class="title"></span></span><br><span class="line"><span class="title">initial</span> apicid : 1<span class="title"></span></span><br><span class="line"><span class="title">fpu</span> :<span class="title"> yes</span></span><br><span class="line">fpu_exception :<span class="title"> yes</span></span><br><span class="line">cpuid<span class="title"> level</span> : 13<span class="title"></span></span><br><span class="line"><span class="title">wp</span> :<span class="title"> yes</span></span><br><span class="line">flags :<span class="title"> fpu</span> vme<span class="title"> de</span> pse<span class="title"> tsc</span> msr<span class="title"> pae</span> mce<span class="title"> cx8</span> apic<span class="title"> sep</span> mtrr<span class="title"> pge</span> mca<span class="title"> cmov</span> pat<span class="title"> pse36</span> clflush<span class="title"> mmx</span> fxsr<span class="title"> sse</span> sse2<span class="title"> ss</span> ht<span class="title"> syscall</span> nx<span class="title"> pdpe1gb</span> rdtscp<span class="title"> lm</span> constant_tsc<span class="title"> rep_good</span> nopl<span class="title"> xtopology</span> eagerfpu<span class="title"> pni</span> pclmulqdq<span class="title"> ssse3</span> cx16<span class="title"> sse4_1</span> sse4_2<span class="title"> popcnt</span> aes<span class="title"> xsave</span> avx<span class="title"> hypervisor</span> lahf_lm<span class="title"> xsaveopt</span></span><br><span class="line">bogomips : 4399.99<span class="title"></span></span><br><span class="line"><span class="title">clflush</span> size : 64<span class="title"></span></span><br><span class="line"><span class="title">cache_alignment</span> : 64<span class="title"></span></span><br><span class="line"><span class="title">address</span> sizes : 44<span class="title"> bits</span> physical, 48<span class="title"> bits</span> virtual<span class="title"></span></span><br><span class="line"><span class="title">power</span> management:</span><br><span class="line"></span><br><span class="line">5、列出所有版本信息<span class="title"></span></span><br><span class="line"><span class="title">lsb_release</span> -a</span><br><span class="line">$<span class="title"> lsb_release</span> -a</span><br><span class="line">-bash:<span class="title"> lsb_release:</span> command<span class="title"> not</span> found</span><br><span class="line">出现command<span class="title"> not</span> found说明没安装lsb_realease，可以执行命令yum<span class="title"> install</span> -y<span class="title"> redhat-lsb安装lsb_realease，安装完成后，版本信息如下：</span></span><br><span class="line">$<span class="title"> lsb_release</span> -a<span class="title"></span></span><br><span class="line"><span class="title">LSB</span> Version: :core-4.1-amd64:core-4.1-noarch:cxx-4.1-amd64:cxx-4.1-noarch:desktop-4.1-amd64:desktop-4.1-noarch:languages-4.1-amd64:languages-4.1-noarch:printing-4.1-amd64:printing-4.1-noarch<span class="title"></span></span><br><span class="line"><span class="title">Distributor</span> ID:<span class="title"> CentOS</span></span><br><span class="line">Description:<span class="title"> CentOS</span> Linux<span class="title"> release</span> 7.4.1708 (Core)<span class="title"></span></span><br><span class="line"><span class="title">Release:</span> 7.4.1708<span class="title"></span></span><br><span class="line"><span class="title">Codename:</span> Core</span><br></pre></td></tr></table></figure><h3 id="用户和组">用户和组</h3><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">添加一个tom用户，设置它属于users组，并添加注释信息</span><br><span class="line">分步完成：useradd tom</span><br><span class="line">          usermod -g users tom</span><br><span class="line">	      usermod -c <span class="string">&quot;hr tom&quot;</span> tom</span><br><span class="line">一步完成：useradd -g users -c <span class="string">&quot;hr tom&quot;</span> tom</span><br><span class="line"></span><br><span class="line">设置tom用户的密码</span><br><span class="line">passwd tom</span><br><span class="line"></span><br><span class="line">修改tom用户的登陆名为tomcat</span><br><span class="line">usermod -l tomcat tom</span><br><span class="line"></span><br><span class="line">将tomcat添加到sys和root组中</span><br><span class="line">usermod -G sys,root tomcat</span><br><span class="line"></span><br><span class="line">查看tomcat的组信息</span><br><span class="line">groups tomcat</span><br><span class="line"></span><br><span class="line">添加一个<span class="keyword">jerry用户并设置密码</span></span><br><span class="line"><span class="keyword"></span>useradd <span class="keyword">jerry</span></span><br><span class="line"><span class="keyword"></span>passwd <span class="keyword">jerry</span></span><br><span class="line"><span class="keyword"></span></span><br><span class="line">添加一个交america的组</span><br><span class="line">groupadd america</span><br><span class="line"></span><br><span class="line">将<span class="keyword">jerry添加到america组中</span></span><br><span class="line"><span class="keyword"></span>usermod -g america <span class="keyword">jerry</span></span><br><span class="line"><span class="keyword"></span></span><br><span class="line">将tomcat用户从root组和sys组删除</span><br><span class="line">gpasswd -d tomcat root</span><br><span class="line">gpasswd -d tomcat sys</span><br><span class="line"></span><br><span class="line">将america组名修改为am</span><br><span class="line">groupmod -n am america</span><br><span class="line"><span class="number">12345678910111213141516171819202122232425262728293031323334</span></span><br></pre></td></tr></table></figure><h3 id="权限">权限</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">创建a.txt和b.txt文件，将他们设为其拥有者和所在组可写入，但其他以外的人则不可写入:</span><br><span class="line"><span class="built_in">chmod</span> ug+w,o-w a.txt b.txt</span><br><span class="line"></span><br><span class="line">创建c.txt文件所有人都可以写和执行</span><br><span class="line"><span class="built_in">chmod</span> a=wx c.txt 或<span class="built_in">chmod</span> 666 c.txt</span><br><span class="line"></span><br><span class="line">将/hadoop目录下的所有文件与子目录皆设为任何人可读取</span><br><span class="line"><span class="built_in">chmod</span> -R a+r /hadoop</span><br><span class="line"></span><br><span class="line">将/hadoop目录下的所有文件与子目录的拥有者设为root，用户拥有组为<span class="built_in">users</span></span><br><span class="line"><span class="built_in">chown</span> -R root:<span class="built_in">users</span> /hadoop</span><br><span class="line"></span><br><span class="line">将当前目录下的所有文件与子目录的用户皆设为hadoop，组设为<span class="built_in">users</span></span><br><span class="line"><span class="built_in">chown</span> -R hadoop:<span class="built_in">users</span> *</span><br><span class="line">1234567891011121314</span><br></pre></td></tr></table></figure><h3 id="帮助文档">帮助文档</h3><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">1.内部命令：echo</span><br><span class="line">查看内部命令帮助：<span class="keyword">help</span> echo 或者 <span class="keyword">man</span> echo</span><br><span class="line"></span><br><span class="line">2.外部命令：<span class="keyword">ls</span></span><br><span class="line">查看外部命令帮助：<span class="keyword">ls</span> --<span class="keyword">help</span> 或者 <span class="keyword">man</span> <span class="keyword">ls</span> 或者 info <span class="keyword">ls</span></span><br><span class="line"></span><br><span class="line">3.<span class="keyword">man</span>文档的类型(1~9)</span><br><span class="line"><span class="keyword">man</span> 7 <span class="keyword">man</span></span><br><span class="line"><span class="keyword">man</span> 5 passwd</span><br><span class="line"></span><br><span class="line">4.快捷键：</span><br><span class="line">ctrl + c：停止进程</span><br><span class="line">ctrl + <span class="keyword">l</span>：清屏</span><br><span class="line">ctrl + r：搜索历史命令</span><br><span class="line">ctrl + q：退出</span><br><span class="line"></span><br><span class="line">5.善于用<span class="keyword">tab</span>键</span><br><span class="line">1234567891011121314151617</span><br></pre></td></tr></table></figure><p>文件相关命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line">1.进入到用户根目录</span><br><span class="line"><span class="built_in">cd</span> ~ 或者 <span class="built_in">cd</span></span><br><span class="line"><span class="built_in">cd</span> ~hadoop</span><br><span class="line">回到原来路径</span><br><span class="line"><span class="built_in">cd</span> -</span><br><span class="line"></span><br><span class="line">2.查看文件详情</span><br><span class="line"><span class="built_in">stat</span> a.txt</span><br><span class="line"></span><br><span class="line">3.移动</span><br><span class="line"><span class="built_in">mv</span> a.txt /ect/</span><br><span class="line">改名</span><br><span class="line"><span class="built_in">mv</span> b.txt a.txt</span><br><span class="line">移动并改名</span><br><span class="line"><span class="built_in">mv</span> a.txt ../b.txt</span><br><span class="line"></span><br><span class="line">4拷贝并改名</span><br><span class="line"><span class="built_in">cp</span> a.txt /etc/b.txt</span><br><span class="line"></span><br><span class="line">5.vi撤销修改</span><br><span class="line">ctrl + u (undo)</span><br><span class="line">恢复</span><br><span class="line">ctrl + r (redo)</span><br><span class="line"></span><br><span class="line">6.名令设置别名(重启后无效)</span><br><span class="line"><span class="built_in">alias</span> ll=<span class="string">&quot;ls -l&quot;</span></span><br><span class="line">取消</span><br><span class="line"><span class="built_in">unalias</span> ll</span><br><span class="line"></span><br><span class="line">7.如果想让别名重启后仍然有效需要修改</span><br><span class="line">vi ~/.bashrc</span><br><span class="line"></span><br><span class="line">8.添加用户</span><br><span class="line">useradd hadoop</span><br><span class="line">passwd hadoop</span><br><span class="line"></span><br><span class="line">9创建多个文件</span><br><span class="line"><span class="built_in">touch</span> a.txt b.txt</span><br><span class="line"><span class="built_in">touch</span> /home/&#123;a.txt,b.txt&#125;</span><br><span class="line"></span><br><span class="line">10.将一个文件的内容复制到里另一个文件中</span><br><span class="line"><span class="built_in">cat</span> a.txt &gt; b.txt</span><br><span class="line">追加内容</span><br><span class="line"><span class="built_in">cat</span> a.txt &gt;&gt; b.txt </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">11.将a.txt 与b.txt设为其拥有者和其所属同一个组者可写入，但其他以外的人则不可写入:</span><br><span class="line"><span class="built_in">chmod</span> ug+w,o-w a.txt b.txt</span><br><span class="line"></span><br><span class="line"><span class="built_in">chmod</span> a=wx c.txt</span><br><span class="line"></span><br><span class="line">12.将当前目录下的所有文件与子目录皆设为任何人可读取:</span><br><span class="line"><span class="built_in">chmod</span> -R a+r *</span><br><span class="line"></span><br><span class="line">13.将a.txt的用户拥有者设为<span class="built_in">users</span>,组的拥有者设为jessie:</span><br><span class="line"><span class="built_in">chown</span> <span class="built_in">users</span>:jessie a.txt</span><br><span class="line"></span><br><span class="line">14.将当前目录下的所有文件与子目录的用户的使用者为lamport,组拥有者皆设为<span class="built_in">users</span>，</span><br><span class="line"><span class="built_in">chown</span> -R lamport:<span class="built_in">users</span> *</span><br><span class="line"></span><br><span class="line">15.将所有的java语言程式拷贝至finished子目录中:</span><br><span class="line"><span class="built_in">cp</span> *.java finished</span><br><span class="line"></span><br><span class="line">16.将目前目录及其子目录下所有扩展名是java的文件列出来。</span><br><span class="line">find -name <span class="string">&quot;*.java&quot;</span></span><br><span class="line">查找当前目录下扩展名是java 的文件</span><br><span class="line">find -name *.java</span><br><span class="line"></span><br><span class="line">17.删除当前目录下扩展名是java的文件</span><br><span class="line"><span class="built_in">rm</span> -f *.java</span><br><span class="line">12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970</span><br></pre></td></tr></table></figure><h3 id="VIM">VIM</h3><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">i</span><br><span class="line">a/A</span><br><span class="line">o/O</span><br><span class="line">r + ?替换</span><br><span class="line"></span><br><span class="line"><span class="section">0:文件当前行的开头</span></span><br><span class="line"><span class="section">$:文件当前行的末尾</span></span><br><span class="line"><span class="section">G:文件的最后一行开头</span></span><br><span class="line">1 + G到第一行 </span><br><span class="line">9 + G到第九行 = :9</span><br><span class="line"></span><br><span class="line"><span class="section">dd:删除一行</span></span><br><span class="line">3dd：删除3行</span><br><span class="line"><span class="section">yy:复制一行</span></span><br><span class="line"><span class="section">3yy:复制3行</span></span><br><span class="line"><span class="section">p:粘贴</span></span><br><span class="line"><span class="section">u:undo</span></span><br><span class="line">ctrl + r:redo</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;a剪切板a</span></span><br><span class="line"><span class="string">&quot;</span>b剪切板b</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;ap粘贴剪切板a的内容</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">每次进入vi就有行号</span></span><br><span class="line"><span class="string">vi ~/.vimrc</span></span><br><span class="line"><span class="string">set nu</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">:w a.txt另存为</span></span><br><span class="line"><span class="string">:w &gt;&gt; a.txt内容追加到a.txt</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">:e!恢复到最初状态</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">:1,$s/hadoop/root/g 将第一行到追后一行的hadoop替换为root</span></span><br><span class="line"><span class="string">:1,$s/hadoop/root/c 将第一行到追后一行的hadoop替换为root(有提示)</span></span><br><span class="line"><span class="string">1234567891011121314151617181920212223242526272829303132333435</span></span><br></pre></td></tr></table></figure><h3 id="查找">查找</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">1.查找可执行的命令：</span><br><span class="line"><span class="built_in">which</span> <span class="built_in">ls</span></span><br><span class="line"></span><br><span class="line">2.查找可执行的命令和帮助的位置：</span><br><span class="line">whereis <span class="built_in">ls</span></span><br><span class="line"></span><br><span class="line">3.查找文件(需要更新库:updatedb)</span><br><span class="line">locate hadoop.txt</span><br><span class="line"></span><br><span class="line">4.从某个文件夹开始查找</span><br><span class="line">find / -name <span class="string">&quot;hadooop*&quot;</span></span><br><span class="line">find / -name <span class="string">&quot;hadooop*&quot;</span> -<span class="built_in">ls</span></span><br><span class="line"></span><br><span class="line">5.查找并删除</span><br><span class="line">find / -name <span class="string">&quot;hadooop*&quot;</span> -ok <span class="built_in">rm</span> &#123;&#125; \;</span><br><span class="line">find / -name <span class="string">&quot;hadooop*&quot;</span> -<span class="built_in">exec</span> <span class="built_in">rm</span> &#123;&#125; \;</span><br><span class="line"></span><br><span class="line">6.查找用户为hadoop的文件</span><br><span class="line">find /usr -user hadoop -<span class="built_in">ls</span></span><br><span class="line"></span><br><span class="line">7.查找用户为hadoop并且(-a)拥有组为root的文件</span><br><span class="line">find /usr -user hadoop -a -group root -<span class="built_in">ls</span></span><br><span class="line"></span><br><span class="line">8.查找用户为hadoop或者(-o)拥有组为root并且是文件夹类型的文件</span><br><span class="line">find /usr -user hadoop -o -group root -a -<span class="built_in">type</span> d</span><br><span class="line"></span><br><span class="line">9.查找权限为777的文件</span><br><span class="line">find / -perm -777 -<span class="built_in">type</span> d -<span class="built_in">ls</span></span><br><span class="line"></span><br><span class="line">10.显示命令历史</span><br><span class="line"><span class="built_in">history</span></span><br><span class="line"></span><br><span class="line">11.grep</span><br><span class="line">grep hadoop /etc/password</span><br><span class="line">12345678910111213141516171819202122232425262728293031323334</span><br></pre></td></tr></table></figure><h3 id="打包与压缩">打包与压缩</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>.gzip压缩</span><br><span class="line">gzip <span class="selector-tag">a</span><span class="selector-class">.txt</span></span><br><span class="line"></span><br><span class="line"><span class="number">2</span>.解压</span><br><span class="line">gunzip <span class="selector-tag">a</span><span class="selector-class">.txt</span><span class="selector-class">.gz</span></span><br><span class="line">gzip -d <span class="selector-tag">a</span><span class="selector-class">.txt</span><span class="selector-class">.gz</span></span><br><span class="line"></span><br><span class="line"><span class="number">3</span>.bzip2压缩</span><br><span class="line">bzip2 <span class="selector-tag">a</span></span><br><span class="line"></span><br><span class="line"><span class="number">4</span>.解压</span><br><span class="line">bunzip2 <span class="selector-tag">a</span><span class="selector-class">.bz2</span></span><br><span class="line">bzip2 -d <span class="selector-tag">a</span><span class="selector-class">.bz2</span></span><br><span class="line"></span><br><span class="line"><span class="number">5</span>.将当前目录的文件打包</span><br><span class="line">tar -cvf bak<span class="selector-class">.tar</span> .</span><br><span class="line">将/etc/password追加文件到bak.tar中(<span class="attribute">r</span>)</span><br><span class="line">tar -rvf bak<span class="selector-class">.tar</span> /etc/password</span><br><span class="line"></span><br><span class="line"><span class="number">6</span>.解压</span><br><span class="line">tar -xvf bak<span class="selector-class">.tar</span></span><br><span class="line"></span><br><span class="line"><span class="number">7</span>.打包并压缩gzip</span><br><span class="line">tar -zcvf <span class="selector-tag">a</span><span class="selector-class">.tar</span><span class="selector-class">.gz</span></span><br><span class="line"></span><br><span class="line"><span class="number">8</span>.解压缩</span><br><span class="line">tar -zxvf <span class="selector-tag">a</span><span class="selector-class">.tar</span><span class="selector-class">.gz</span></span><br><span class="line">解压到/usr/下</span><br><span class="line">tar -zxvf <span class="selector-tag">a</span><span class="selector-class">.tar</span><span class="selector-class">.gz</span> -C /usr</span><br><span class="line"></span><br><span class="line"><span class="number">9</span>.查看压缩包内容</span><br><span class="line">tar -ztvf <span class="selector-tag">a</span><span class="selector-class">.tar</span><span class="selector-class">.gz</span></span><br><span class="line"></span><br><span class="line">zip/unzip</span><br><span class="line"></span><br><span class="line"><span class="number">10</span>.打包并压缩成bz2</span><br><span class="line">tar -jcvf <span class="selector-tag">a</span><span class="selector-class">.tar</span><span class="selector-class">.bz2</span></span><br><span class="line"></span><br><span class="line"><span class="number">11</span>.解压bz2</span><br><span class="line">tar -jxvf <span class="selector-tag">a</span><span class="selector-class">.tar</span><span class="selector-class">.bz2</span></span><br><span class="line"><span class="number">12345678910111213141516171819202122232425262728293031323334353637383940</span></span><br></pre></td></tr></table></figure><h3 id="输入输出重定向">输入输出重定向</h3><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>.新建一个文件</span><br><span class="line">touch <span class="keyword">a</span>.txt</span><br><span class="line">&gt; <span class="keyword">b</span>.txt</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>.错误重定向:<span class="number">2</span>&gt;</span><br><span class="line"><span class="keyword">find</span> /etc -name zhaoxing.txt <span class="number">2</span>&gt; error.txt</span><br><span class="line"></span><br><span class="line"><span class="number">3</span>.将正确或错误的信息都输入到<span class="built_in">log</span>.txt中</span><br><span class="line"><span class="keyword">find</span> /etc -name passwd &gt; /tmp/<span class="built_in">log</span>.txt <span class="number">2</span>&gt;&amp;<span class="number">1</span> </span><br><span class="line"><span class="keyword">find</span> /etc -name passwd &amp;&gt; /tmp/<span class="built_in">log</span>.txt</span><br><span class="line"></span><br><span class="line"><span class="number">4</span>.追加&gt;&gt;</span><br><span class="line"></span><br><span class="line"><span class="number">5</span>.将小写转为大写（输入重定向）</span><br><span class="line"><span class="keyword">tr</span> <span class="string">&quot;a-z&quot;</span> <span class="string">&quot;A-Z&quot;</span> &lt; /etc/passwd</span><br><span class="line"></span><br><span class="line"><span class="number">6</span>.自动创建文件</span><br><span class="line"><span class="keyword">cat</span> &gt; <span class="built_in">log</span>.txt &lt;&lt; EXIT</span><br><span class="line">&gt; ccc</span><br><span class="line">&gt; ddd</span><br><span class="line">&gt; EXI</span><br><span class="line"></span><br><span class="line"><span class="number">7</span>.查看/etc下的文件有多少个？</span><br><span class="line"><span class="keyword">ls</span> -<span class="keyword">l</span> /etc/ | <span class="keyword">grep</span> <span class="string">&#x27;^d&#x27;</span> | wc -<span class="keyword">l</span></span><br><span class="line"></span><br><span class="line"><span class="number">8</span>.查看/etc下的文件有多少个，并将文件详情输入到result.txt中</span><br><span class="line"><span class="keyword">ls</span> -<span class="keyword">l</span> /etc/ | <span class="keyword">grep</span> <span class="string">&#x27;^d&#x27;</span> | tee result.txt | wc -<span class="keyword">l</span></span><br><span class="line"><span class="number">123456789101112131415161718192021222324252627</span></span><br></pre></td></tr></table></figure><h3 id="进程控制">进程控制</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">1.查看用户最近登录情况</span><br><span class="line">last</span><br><span class="line">lastlog</span><br><span class="line"></span><br><span class="line">2.查看硬盘使用情况</span><br><span class="line"><span class="built_in">df</span></span><br><span class="line"></span><br><span class="line">3.查看文件大小</span><br><span class="line"><span class="built_in">du</span></span><br><span class="line"></span><br><span class="line">4.查看内存使用情况</span><br><span class="line">free</span><br><span class="line"></span><br><span class="line">5.查看文件系统</span><br><span class="line">/proc</span><br><span class="line"></span><br><span class="line">6.查看日志</span><br><span class="line"><span class="built_in">ls</span> /var/log/</span><br><span class="line"></span><br><span class="line">7.查看系统报错日志</span><br><span class="line"><span class="built_in">tail</span> /var/log/messages</span><br><span class="line"></span><br><span class="line">8.查看进程</span><br><span class="line">top</span><br><span class="line"></span><br><span class="line">9.结束进程</span><br><span class="line"><span class="built_in">kill</span> 1234</span><br><span class="line"><span class="built_in">kill</span> -9 4333</span><br><span class="line">12345678910111213141516171819202122232425262728</span><br></pre></td></tr></table></figure><h3 id="其他命令">其他命令</h3><h4 id="远程文件复制：scp">远程文件复制：scp</h4><p>scp 命令用于 Linux 之间复制文件和目录，scp是 secure copy 的缩写是linux系统下基于ssh登陆进行安全的远程文件拷贝命令。</p><p>scp 是加密的，<a target="_blank" rel="noopener" href="https://xiaoxiaoming.xyz/linux/linux-comm-rcp.html">rcp</a> 是不加密的，scp 是 rcp 的加强版。</p><p>使用scp命令要确保使用的用户具有可读取远程服务器相应文件的权限，否则scp命令是无法起作用的。</p><p>从本地复制到远程命令格式：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">复制文件</span><br><span class="line">scp local_file remote_username<span class="keyword">@remote</span>_<span class="attribute">ip</span>:remote_folder </span><br><span class="line">或者 </span><br><span class="line">scp local_file remote_username<span class="keyword">@remote</span>_<span class="attribute">ip</span>:remote_file </span><br><span class="line">或者 </span><br><span class="line">scp local_file remote_<span class="attribute">ip</span>:remote_folder </span><br><span class="line">或者 </span><br><span class="line">scp local_file remote_<span class="attribute">ip</span>:remote_file</span><br><span class="line"></span><br><span class="line">复制文件夹</span><br><span class="line">scp -r local_folder remote_username<span class="keyword">@remote</span>_<span class="attribute">ip</span>:remote_folder </span><br><span class="line">或者 </span><br><span class="line">scp -r local_folder remote_<span class="attribute">ip</span>:remote_folder </span><br><span class="line"><span class="number">12345678910111213</span></span><br></pre></td></tr></table></figure><p>实例：</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">scp <span class="regexp">/home/</span>space<span class="regexp">/music/</span><span class="number">1</span>.mp3 root<span class="meta">@xiaoxiaoming</span>.xyz:<span class="regexp">/home/</span>root<span class="regexp">/others/</span>music </span><br><span class="line">scp <span class="regexp">/home/</span>space<span class="regexp">/music/</span><span class="number">1</span>.mp3 root<span class="meta">@xiaoxiaoming</span>.xyz:<span class="regexp">/home/</span>root<span class="regexp">/others/</span>music<span class="operator">/</span><span class="number">001</span>.mp3 </span><br><span class="line">scp <span class="regexp">/home/</span>space<span class="regexp">/music/</span><span class="number">1</span>.mp3 xiaoxiaoming.xyz:<span class="regexp">/home/</span>root<span class="regexp">/others/</span>music </span><br><span class="line">scp <span class="regexp">/home/</span>space<span class="regexp">/music/</span><span class="number">1</span>.mp3 xiaoxiaoming.xyz:<span class="regexp">/home/</span>root<span class="regexp">/others/</span>music<span class="operator">/</span><span class="number">001</span>.mp3</span><br><span class="line"></span><br><span class="line">scp <span class="operator">-</span>r <span class="regexp">/home/</span>space<span class="regexp">/music/</span> root<span class="meta">@xiaoxiaoming</span>.xyz:<span class="regexp">/home/</span>root<span class="regexp">/others/</span> </span><br><span class="line">scp <span class="operator">-</span>r <span class="regexp">/home/</span>space<span class="regexp">/music/</span> xiaoxiaoming.xyz:<span class="regexp">/home/</span>root<span class="regexp">/others/</span> </span><br><span class="line"><span class="number">1234567</span></span><br></pre></td></tr></table></figure><p>从远程复制到本地：</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">scp root<span class="meta">@xiaoxiaoming</span>.xyz:<span class="regexp">/home/</span>root<span class="regexp">/others/</span>music <span class="regexp">/home/</span>space<span class="regexp">/music/</span><span class="number">1</span>.mp3 </span><br><span class="line">scp <span class="operator">-</span>r xiaoxiaoming.xyz:<span class="regexp">/home/</span>root<span class="regexp">/others/</span> <span class="regexp">/home/</span>space<span class="regexp">/music/</span></span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure><p>-P 参数来设置命令的端口号：</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#scp 命令使用端口号 4588</span></span><br><span class="line">scp -P <span class="number">4588</span> remote<span class="symbol">@xiaoxiaoming</span>.xyz:/usr/<span class="keyword">local</span>/<span class="built_in">sin</span>.sh /home/administrator</span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure><h4 id="locate查找">locate查找</h4><p>locate命令会去保存文档和目录名称的数据库内，查找文件或目录。</p><p>一般情况我们只需要输入<code>locate your_file_name</code> 即可查找指定文件。</p><p><strong>参数：</strong></p><ul class="lvl-0"><li class="lvl-2"><p>-d或–database= 配置locate指令使用的数据库。locate指令预设的数据库位于/var/lib/mlocate目录里，文档名为mlocate.db。</p></li></ul><p>查找passwd文件，输入以下命令：</p><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">locate</span> passwd</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>locate与find的区别: find 是去硬盘找，locate 只在/var/lib/slocate资料库中找。</p><p>locate的速度比find快，它并不是真的查找，而是查数据库，一般文件数据库在/var/lib/mlocate/mlocate.db中，所以locate的查找并不是实时的，而是以数据库的更新为准，一般是系统自己维护，也可以手工升级数据库 ，命令为：</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">updatedb</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><h4 id="which命令">which命令</h4><p>which查找$PATH中设置命令及安装文件目录所在位置</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">python<span class="variable">@ubuntu</span><span class="symbol">:/var/lib/mlocate</span><span class="variable">$ </span>which locate</span><br><span class="line">/usr/bin/locate</span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure><h4 id="echo">echo</h4><p>常见用法：</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">python<span class="variable">@ubuntu</span><span class="symbol">:~</span><span class="variable">$ </span>echo -e <span class="string">&quot;hello\t\t world！&quot;</span>  解析转义字符</span><br><span class="line">hello            world！</span><br><span class="line">python<span class="variable">@ubuntu</span><span class="symbol">:~</span><span class="variable">$ </span>echo -E <span class="string">&quot;hello\t\t world！&quot;</span>  不解析转义字符</span><br><span class="line">hello\t\t world！</span><br><span class="line">python<span class="variable">@ubuntu</span><span class="symbol">:~</span><span class="variable">$ </span>echo <span class="variable">$a</span>  输出环境变量</span><br><span class="line">b</span><br><span class="line"><span class="number">123456</span></span><br></pre></td></tr></table></figure><h4 id="设置或显示环境变量：export">设置或显示环境变量：export</h4><p>在 shell 中执行程序时，shell 会提供一组环境变量。export 可新增，修改或删除环境变量，供后续执行的程序使用。export 的效力仅限于该次登陆操作。</p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export <span class="comment">[-fnp]</span><span class="comment">[变量名称]</span>=<span class="comment">[变量设置值]</span></span><br><span class="line">1</span><br></pre></td></tr></table></figure><p><strong>参数说明</strong>：</p><ul class="lvl-0"><li class="lvl-2"><p>-f 　代表[变量名称]中为函数名称。</p></li><li class="lvl-2"><p>-n 　删除指定的变量。变量实际上并未删除，只是不会输出到后续指令的执行环境中。</p></li><li class="lvl-2"><p>-p 　列出所有的shell赋予程序的环境变量。</p></li></ul><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># <span class="keyword">export</span> MYENV=<span class="number">7</span> <span class="comment">//定义环境变量并赋值</span></span><br><span class="line"># <span class="keyword">export</span> -p <span class="comment">//列出当前的环境变量</span></span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure><h4 id="修改主机名-ip地址">修改主机名&amp;ip地址</h4><p>显示主机名：hostname</p><p>临时修改：hostname xxx</p><p><strong>永久修改</strong></p><p>对于Ubuntu 系统</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">vim</span> /etc/<span class="built_in">hostname</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>对于centos系统</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim <span class="regexp">/etc/</span>sysconfig/network</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>在此配置文件中添加一条HOSTNAME=node1</p><p>针对centos7系统，可以使用如下命令</p><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">hostnamectl</span> <span class="built_in">set-hostname</span> <span class="string">xxx</span></span><br><span class="line"><span class="string">1</span></span><br></pre></td></tr></table></figure><p>一般需要重开shell甚至重启操作系统才能生效。</p><p><strong>修改IP地址</strong></p><p>ifconfig eth0 192.168.12.22(重启后无效)</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim <span class="regexp">/etc/</span>sysconfig<span class="regexp">/network-scripts/i</span>fcfg-eth0</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><h4 id="mount挂载">mount挂载</h4><p>mount 挂载外部存储设备到文件系统中</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> /mnt/cdrom 创建一个目录，用来挂载</span><br><span class="line">mount -t iso9660 -o ro /dev/cdrom /mnt/cdrom/     </span><br><span class="line">12</span><br></pre></td></tr></table></figure><p>将设备/dev/cdrom挂载到 挂载点 ： /mnt/cdrom中</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">umount <span class="regexp">/mnt/</span>cdrom</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><h4 id="ssh免密登陆">ssh免密登陆</h4><p>假如 A 要登陆 B<br>在A上操作：首先生成密钥对</p><figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen (提示时，直接回车即可)</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>再将A自己的公钥拷贝并追加到B的授权列表文件authorized_keys中</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssh-<span class="keyword">copy</span>-<span class="built_in">id</span> B</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><h3 id="批量添加用户">批量添加用户</h3><h4 id="与用户账号有关的系统文件">与用户账号有关的系统文件</h4><p>完成用户管理的工作本质都是对有关的系统文件进行修改，这些系统文件包括/etc/passwd, /etc/shadow, /etc/group等。</p><p><strong>/etc/passwd记录用户的基本属性</strong></p><p>它的内容类似下面的例子：</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">＃ cat <span class="keyword">/etc/</span>passwd</span><br><span class="line"><span class="symbol"></span></span><br><span class="line"><span class="symbol">root:</span>x:<span class="number">0</span>:<span class="number">0</span>:Superuser:/:</span><br><span class="line"><span class="symbol">daemon:</span>x:<span class="number">1</span>:<span class="number">1</span>:System daemons:/etc:</span><br><span class="line"><span class="symbol">bin:</span>x:<span class="number">2</span>:<span class="number">2</span>:Owner of system commands:/bin:</span><br><span class="line"><span class="symbol">sys:</span>x:<span class="number">3</span>:<span class="number">3</span>:Owner of system files:<span class="keyword">/usr/</span>sys:</span><br><span class="line"><span class="symbol">adm:</span>x:<span class="number">4</span>:<span class="number">4</span>:System accounting:<span class="keyword">/usr/</span>adm:</span><br><span class="line"><span class="symbol">uucp:</span>x:<span class="number">5</span>:<span class="number">5</span>:UUCP administrator:<span class="keyword">/usr/</span>lib/uucp:</span><br><span class="line"><span class="symbol">auth:</span>x:<span class="number">7</span>:<span class="number">21</span>:Authentication administrator:<span class="keyword">/tcb/</span>files/auth:</span><br><span class="line"><span class="symbol">cron:</span>x:<span class="number">9</span>:<span class="number">16</span>:Cron daemon:<span class="keyword">/usr/</span>spool/cron:</span><br><span class="line"><span class="symbol">listen:</span>x:<span class="number">37</span>:<span class="number">4</span>:Network daemon:<span class="keyword">/usr/</span>net/nls:</span><br><span class="line"><span class="symbol">lp:</span>x:<span class="number">71</span>:<span class="number">18</span>:Printer administrator:<span class="keyword">/usr/</span>spool/lp:</span><br><span class="line"><span class="symbol">sam:</span>x:<span class="number">200</span>:<span class="number">50</span>:Sam san:<span class="keyword">/home/</span>sam:<span class="keyword">/bin/</span>sh</span><br><span class="line"><span class="number">12345678910111213</span></span><br></pre></td></tr></table></figure><p>/etc/passwd中一行记录对应着一个用户，每行记录又被冒号(:)分隔为7个字段，其格式和具体含义如下：</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">用户名:口令:用户标识号:组标识号:注释性描述:主目录:登录<span class="keyword">Shell</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash">1</span></span><br></pre></td></tr></table></figure><p><strong>用户名：</strong></p><p>通常长度不超过8个字符，由大小写字母和/或数字组成，不能有冒号(😃。登录名中不能有冒号(😃，因为冒号在这里是分隔符。</p><p>为了兼容起见，登录名中最好不要包含点字符(.)，并且不使用连字符(-)和加号(+)打头。</p><p><strong>口令：</strong></p><p>本身存放用户口令的加密串，但现在许多Linux 系统都使用了shadow技术，把真正的加密后的用户口令字存放到/etc/shadow文件中，而/etc/passwd文件的口令字段中只存放一个特殊的字符，例如“x”或者“*”。</p><p><strong>用户标识号：</strong></p><p>是一个整数，系统内部用它来标识用户。一般情况下它与用户名是一一对应的，如果几个用户名对应的用户标识号是一样的，系统内部将把它们视为同一个用户，但是它们可以有不同的口令、不同的主目录以及不同的登录Shell等。</p><p>通常用户标识号的取值范围是0～65 535。0是超级用户root的标识号，1～99由系统保留，作为管理账号，普通用户的标识号从100开始。</p><p><strong>组标识号：</strong></p><p>记录用户所属的用户组，对应着/etc/group文件中的一条记录。</p><p><strong>注释性描述：</strong></p><p>一段任意编写的注释，创建账户时可以通过<code>useradd -c 用户名</code>的<code>-c</code>参数指定。</p><p><strong>主目录：</strong></p><p>用户的起始工作目录，用户在登录到系统之后所处的目录。</p><p><strong>登录Shell：</strong></p><p>用户登录后，要启动一个进程，负责将用户的操作传给内核，这个进程是用户登录到系统后运行的命令解释器或某个特定的程序，即Shell。</p><p>Shell是用户与Linux系统之间的接口。Linux的Shell有许多种，每种都有不同的特点。常用的有sh(Bourne Shell), csh(C Shell), ksh(Korn Shell), tcsh(TENEX/TOPS-20 type C Shell), bash(Bourne Again Shell)等。</p><p>可以通过usermod的<code>-s</code>参数为用户指定某个Shell。如果useradd不通过<code>-s</code>参数指定shell，那么系统使用bash为默认的登录Shell，即这个字段的值为/bin/bash。</p><p>为用户的登录指定特定的Shell可以限制用户只能运行指定的应用程序，在该应用程序运行结束后，用户就自动退出了系统。不过大部分Linux系统要求只有在系统中登记过的shell才能出现在这个字段中。</p><p><strong>伪用户（pseudo users）</strong></p><p>这些用户的登陆shell为/usr/sbin/nologin，即不能登录。它们的存在主要是方便系统管理，满足相应的系统进程对文件属主的要求。</p><p>常见的伪用户如下所示：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">bin 拥有可执行的用户命令文件 </span><br><span class="line">sys 拥有系统文件 </span><br><span class="line">adm 拥有帐户文件 </span><br><span class="line">uucp UUCP使用 </span><br><span class="line"><span class="built_in">lp</span> <span class="built_in">lp</span>或lpd子系统使用 </span><br><span class="line">nobody NFS使用</span><br><span class="line"><span class="number">123456</span></span><br></pre></td></tr></table></figure><p>还有许多标准的伪用户，例如：audit, cron, mail, usenet等，它们也都各自为相关的进程和文件所需要。</p><p><strong>/etc/shadow</strong></p><p>对安全性要求较高的Linux系统都把/etc/passwd文件中的口令字段保存在/etc/shadow文件中，超级用户才拥有该文件读权限。</p><p>/etc/shadow中的记录行与/etc/passwd中的一一对应，它由pwconv命令根据/etc/passwd中的数据自动产生</p><p>字段是：</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">登录名:加密口令:最后一次修改时间:最小时间间隔:最大时间间隔:警告时间:不活动时间:失效时间:标志</span></span><br><span class="line">1</span><br></pre></td></tr></table></figure><ol><li class="lvl-3"><p>&quot;登录名&quot;是与/etc/passwd文件中的登录名相一致的用户账号</p></li><li class="lvl-3"><p>&quot;口令&quot;字段存放的是加密后的用户口令字，长度为13个字符。如果为空，则对应用户没有口令，登录时不需要口令；如果含有不属于集合 { ./0-9A-Za-z }中的字符，则对应的用户不能登录。</p></li><li class="lvl-3"><p>&quot;最后一次修改时间&quot;表示的是从某个时刻起，到用户最后一次修改口令时的天数。大部分linux系统的时间起点是1970年1月1日。</p></li><li class="lvl-3"><p>&quot;最小时间间隔&quot;指的是两次修改口令之间所需的最小天数。</p></li><li class="lvl-3"><p>&quot;最大时间间隔&quot;指的是口令保持有效的最大天数。</p></li><li class="lvl-3"><p>&quot;警告时间&quot;字段表示的是从系统开始警告用户到用户密码正式失效之间的天数。</p></li><li class="lvl-3"><p>&quot;不活动时间&quot;表示的是用户没有登录活动但账号仍能保持有效的最大天数。</p></li><li class="lvl-3"><p>&quot;失效时间&quot;字段给出的是一个绝对的天数，如果使用了这个字段，那么就给出相应账号的生存期。期满后，该账号就不再是一个合法的账号，也就不能再用来登录了。</p></li></ol><p>下面是/etc/shadow的一个例子：</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">＃ cat /etc/shadow</span><br><span class="line"></span><br><span class="line"><span class="symbol">root:</span><span class="symbol">Dnakfw28zf38w:</span><span class="number">8764</span><span class="symbol">:</span><span class="number">0</span><span class="symbol">:</span><span class="number">168</span><span class="symbol">:</span><span class="number">7</span>:::</span><br><span class="line"><span class="symbol">daemon:</span>*::<span class="number">0</span><span class="symbol">:</span><span class="number">0</span>::::</span><br><span class="line"><span class="symbol">bin:</span>*::<span class="number">0</span><span class="symbol">:</span><span class="number">0</span>::::</span><br><span class="line"><span class="symbol">sys:</span>*::<span class="number">0</span><span class="symbol">:</span><span class="number">0</span>::::</span><br><span class="line"><span class="symbol">adm:</span>*::<span class="number">0</span><span class="symbol">:</span><span class="number">0</span>::::</span><br><span class="line"><span class="symbol">uucp:</span>*::<span class="number">0</span><span class="symbol">:</span><span class="number">0</span>::::</span><br><span class="line"><span class="symbol">nuucp:</span>*::<span class="number">0</span><span class="symbol">:</span><span class="number">0</span>::::</span><br><span class="line"><span class="symbol">auth:</span>*::<span class="number">0</span><span class="symbol">:</span><span class="number">0</span>::::</span><br><span class="line"><span class="symbol">cron:</span>*::<span class="number">0</span><span class="symbol">:</span><span class="number">0</span>::::</span><br><span class="line"><span class="symbol">listen:</span>*::<span class="number">0</span><span class="symbol">:</span><span class="number">0</span>::::</span><br><span class="line"><span class="symbol">lp:</span>*::<span class="number">0</span><span class="symbol">:</span><span class="number">0</span>::::</span><br><span class="line"><span class="symbol">sam:</span><span class="symbol">EkdiSECLWPdSa:</span><span class="number">9740</span><span class="symbol">:</span><span class="number">0</span><span class="symbol">:</span><span class="number">0</span>::::</span><br><span class="line"><span class="number">1234567891011121314</span></span><br></pre></td></tr></table></figure><p><strong>/etc/group记录用户组信息</strong></p><p>每个用户都属于某个用户组；一个组中可以有多个用户，一个用户也可以属于不同的组。</p><p>当一个用户同时是多个组中的成员时，在/etc/passwd文件中记录的是用户所属的主组，也就是登录时所属的默认组，而其他组称为附加组。</p><p>用户要访问属于附加组的文件时，必须首先使用newgrp命令使自己成为所要访问的组中的成员。</p><p>用户组的所有信息都存放在/etc/group文件中，字段有：</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">组名:口令:组标识号:组内用户列表</span></span><br><span class="line">1</span><br></pre></td></tr></table></figure><ol><li class="lvl-3"><p>&quot;组名&quot;是用户组的名称，由字母或数字构成。与/etc/passwd中的登录名一样，组名不应重复。</p></li><li class="lvl-3"><p>&quot;口令&quot;字段存放的是用户组加密后的口令字。一般Linux 系统的用户组都没有口令，即这个字段一般为空，或者是*。</p></li><li class="lvl-3"><p>&quot;组标识号&quot;与用户标识号类似，也是一个整数，被系统内部用来标识组。</p></li><li class="lvl-3"><p>&quot;组内用户列表&quot;是属于这个组的所有用户的列表，不同用户之间用逗号(,)分隔。这个用户组可能是用户的主组，也可能是附加组。</p></li></ol><p>/etc/group文件的一个例子如下：</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">root::<span class="number">0</span><span class="symbol">:root</span></span><br><span class="line">bin::<span class="number">2</span><span class="symbol">:root</span>,bin</span><br><span class="line">sys::<span class="number">3</span><span class="symbol">:root</span>,uucp</span><br><span class="line">adm::<span class="number">4</span><span class="symbol">:root</span>,adm</span><br><span class="line">daemon::<span class="number">5</span><span class="symbol">:root</span>,daemon</span><br><span class="line">lp::<span class="number">7</span><span class="symbol">:root</span>,lp</span><br><span class="line">users::<span class="number">20</span><span class="symbol">:root</span>,sam</span><br><span class="line"><span class="number">1234567</span></span><br></pre></td></tr></table></figure><h4 id="实操">实操</h4><p><strong>先编辑一个文本用户文件</strong></p><p>每一列按照<code>/etc/passwd</code>密码文件的格式书写，要注意每个用户的用户名、UID、宿主目录都不可以相同，其中密码栏可以留做空白或输入x号。一个范例文件user.txt内容如下：</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">user001::<span class="number">601</span><span class="symbol">:</span><span class="number">100</span><span class="symbol">:user</span><span class="symbol">:/home/user001</span><span class="symbol">:/bin/bash</span></span><br><span class="line">user002::<span class="number">602</span><span class="symbol">:</span><span class="number">100</span><span class="symbol">:user</span><span class="symbol">:/home/user002</span><span class="symbol">:/bin/bash</span></span><br><span class="line">user003::<span class="number">603</span><span class="symbol">:</span><span class="number">100</span><span class="symbol">:user</span><span class="symbol">:/home/user003</span><span class="symbol">:/bin/bash</span></span><br><span class="line">user004::<span class="number">604</span><span class="symbol">:</span><span class="number">100</span><span class="symbol">:user</span><span class="symbol">:/home/user004</span><span class="symbol">:/bin/bash</span></span><br><span class="line">user005::<span class="number">605</span><span class="symbol">:</span><span class="number">100</span><span class="symbol">:user</span><span class="symbol">:/home/user005</span><span class="symbol">:/bin/bash</span></span><br><span class="line">user006::<span class="number">606</span><span class="symbol">:</span><span class="number">100</span><span class="symbol">:user</span><span class="symbol">:/home/user006</span><span class="symbol">:/bin/bash</span></span><br><span class="line"><span class="number">123456</span></span><br></pre></td></tr></table></figure><p><strong>执行<code>/usr/sbin/newusers</code>命令</strong></p><p>需要root权限：</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># newusers &lt; user.txt</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>可以执行命令 <code>vipw</code> 或 <code>vi /etc/passwd</code> 检查 <code>/etc/passwd</code> 文件是否已经出现这些用户的数据，并且用户的宿主目录是否已经创建。</p><p><strong>取消 <code>shadow password</code> 功能</strong></p><p>将 <code>/etc/shadow</code> 产生的 <code>shadow</code> 密码解码，然后回写到 <code>/etc/passwd</code> 中，并将<code>/etc/shadow</code>的<code>shadow</code>密码栏删掉。这是为了方便下一步的密码转换工作，即先取消 <code>shadow password</code> 功能。</p><p>执行<code>/usr/sbin/pwunconv</code>命令:</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># pwunconv</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p><strong>编辑每个用户的密码对照文件</strong></p><p>格式为：</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">用户名:密码</span></span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>实例文件 <code>passwd.txt</code> 内容如下：</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">user001</span>:<span class="number">123456</span></span><br><span class="line"><span class="attribute">user002</span>:<span class="number">123456</span></span><br><span class="line"><span class="attribute">user003</span>:<span class="number">123456</span></span><br><span class="line"><span class="attribute">user004</span>:<span class="number">123456</span></span><br><span class="line"><span class="attribute">user005</span>:<span class="number">123456</span></span><br><span class="line"><span class="attribute">user006</span>:<span class="number">123456</span></span><br><span class="line"><span class="attribute">123456</span></span><br></pre></td></tr></table></figure><p><strong>执行 <code>/usr/sbin/chpasswd</code>命令</strong></p><p>需要root权限：</p><p>创建用户密码，<code>chpasswd</code> 会将经过 <code>/usr/bin/passwd</code> 命令编码过的密码写入 <code>/etc/passwd</code> 的密码栏。</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># chpasswd &lt; passwd.txt</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p><strong>将密码编码为 <code>shadow password</code></strong></p><p>执行命令 <code>/usr/sbin/pwconv</code> 将密码编码为 <code>shadow password</code>，并将结果写入 <code>/etc/shadow</code>。</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># pwconv</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>这样就完成了大量用户的创建了，之后您可以到/home下检查这些用户宿主目录的权限设置是否都正确，并登录验证用户密码是否正确。</p><p><strong>完整步骤</strong></p><p>先准备好用户文件user和密码文件passwd</p><p>然后运行：</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">newusers &lt; <span class="keyword">user</span></span><br><span class="line">pwunconv</span><br><span class="line">chpasswd &lt; passwd</span><br><span class="line">pwconv</span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure><h3 id="crontab的使用">crontab的使用</h3><p>crontab命令是cron table的简写，它是cron的配置文件，也可以叫它作业列表。</p><p>相关配置文件如下：</p><ul class="lvl-0"><li class="lvl-2"><p>/var/spool/cron/ 目录下存放的是每个用户包括root的crontab任务，每个任务以创建者的名字命名</p></li><li class="lvl-2"><p>/etc/crontab 这个文件负责调度各种管理和维护任务。</p></li><li class="lvl-2"><p>/etc/cron.d/ 这个目录用来存放任何要执行的crontab文件或脚本。</p></li><li class="lvl-2"><p>还可以把脚本放在/etc/cron.hourly、/etc/cron.daily、/etc/cron.weekly、/etc/cron.monthly目录中，让它每小时/天/星期、月执行一次。</p></li></ul><p>命令格式：</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">crontab [ -u <span class="keyword">user</span> <span class="title">] &#123; -l</span> | -r | -e &#125;</span><br><span class="line">//省略用户表表示操作当前用户的crontab</span><br><span class="line">    -e      (编辑工作表)</span><br><span class="line">    -l      (列出工作表里的命令)</span><br><span class="line">    -r      (删除工作表)</span><br><span class="line"><span class="number">12345</span></span><br></pre></td></tr></table></figure><p><strong>crontab -e</strong>进入当前用户的工作表编辑，是常见的vim界面。每行是一条命令。</p><p>crontab的命令构成为 时间+动作，其时间有<strong>分、时、日、月、周</strong>五种，操作符有</p><ul class="lvl-0"><li class="lvl-2"><p>***** 取值范围内的所有数字</p></li><li class="lvl-2"><p><strong>/</strong> 每过多少个数字</p></li><li class="lvl-2"><p><strong>-</strong> 从X到Z</p></li><li class="lvl-2"><p>**，**散列数字</p></li></ul><p>基本格式 :</p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">f1</span>	<span class="built_in">f2</span>	<span class="built_in">f3</span>	<span class="built_in">f4</span>	<span class="built_in">f5</span>	command</span><br><span class="line">分	时	日	月	周	命令 </span><br><span class="line">第<span class="number">1</span>列表示分钟<span class="number">0</span>～<span class="number">59</span> 每分钟用*或者 */<span class="number">1</span>表示 </span><br><span class="line">第<span class="number">2</span>列表示小时<span class="number">0</span>～<span class="number">23</span>（<span class="number">0</span>表示<span class="number">0</span>点） </span><br><span class="line">第<span class="number">3</span>列表示日期<span class="number">1</span>～<span class="number">31</span> </span><br><span class="line">第<span class="number">4</span>列表示月份<span class="number">1</span>～<span class="number">12</span> </span><br><span class="line">第<span class="number">5</span>列标识号星期<span class="number">0</span>～<span class="number">6</span>（<span class="number">0</span>表示星期天） </span><br><span class="line">第<span class="number">6</span>列要运行的命令</span><br><span class="line"><span class="number">12345678</span></span><br></pre></td></tr></table></figure><p><img src="/images/loading.jpeg" data-original="/posts/2c8b313c//Users/Administrator/Corazon/blog/source/_posts/%E3%80%90Linux%E3%80%91%E6%80%BB%E7%BB%93/99fb8a619138438d007b738d8630fbdc.jpeg" alt="img"></p><ul class="lvl-0"><li class="lvl-2"><p>其中 f1 是表示分钟，f2 表示小时，f3 表示一个月份中的第几日，f4 表示月份，f5 表示一个星期中的第几天。command表示要执行的命令。</p></li><li class="lvl-2"><p>当 f1 为 * 时表示每分钟都要执行 program，f2 为 * 时表示每小时都要执行程序，以此类推</p></li><li class="lvl-2"><p>当 f1 为 a-b 时表示从第 a 分钟到第 b 分钟这段时间内要执行，f2 为 a-b 时表示从第 a 到第 b 小时都要执行，以此类推</p></li><li class="lvl-2"><p>当 f1 为 */n 时表示每 n 分钟个时间间隔执行一次，f2 为 */n 表示每 n 小时个时间间隔执行一次，以此类推</p></li><li class="lvl-2"><p>当 f1 为 a, b, c,… 时表示第 a, b, c,… 分钟要执行，f2 为 a, b, c,… 时表示第 a, b, c…个小时要执行，以此类推</p></li></ul><p>在 12 月内, 每天的早上 6 点到 12 点，每隔 3 个小时 0 分钟执行一次 /usr/bin/backup</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">0 </span><span class="number">6</span>-<span class="number">12</span>/<span class="number">3</span> * <span class="number">12</span> * /<span class="keyword">usr</span>/bin/backup</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>周一到周五每天下午 5:00 寄一封信给 <a href="mailto:alex@domain.name">alex@domain.name</a></p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">0 </span><span class="number">17</span> * * <span class="number">1</span>-<span class="number">5</span> mail -s <span class="string">&quot;hi&quot;</span> alex@domain.<span class="keyword">name</span> &lt; /tmp/maildata</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>每月每天的午夜 0 点 20 分, 2 点 20 分, 4 点 20 分…执行 echo “haha”</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">20 </span><span class="number">0</span>-<span class="number">23</span>/<span class="number">2</span> * * * echo <span class="string">&quot;haha&quot;</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>示例1：</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">45</span> <span class="number">4</span> <span class="number">1</span>,<span class="number">10</span>,<span class="number">22</span> <span class="operator">*</span> <span class="operator">*</span> <span class="regexp">/etc/</span><span class="keyword">init</span>.d<span class="operator">/</span>smb restart 每月<span class="number">1</span><span class="operator">、</span><span class="number">10</span><span class="operator">、</span><span class="number">22</span>日的<span class="number">4</span> : <span class="number">45</span>重启smb</span><br><span class="line"></span><br><span class="line"><span class="number">10</span> <span class="number">1</span> <span class="operator">*</span> <span class="operator">*</span> <span class="number">6</span>,<span class="number">0</span> <span class="regexp">/etc/</span><span class="keyword">init</span>.d<span class="operator">/</span>smb restart  每周六<span class="operator">、</span>周日的<span class="number">1</span> : <span class="number">10</span>重启smb</span><br><span class="line"></span><br><span class="line"><span class="number">0</span>,<span class="number">30</span> <span class="number">18</span><span class="operator">-</span><span class="number">23</span> <span class="operator">*</span> <span class="operator">*</span> <span class="operator">*</span> <span class="regexp">/etc/</span><span class="keyword">init</span>.d<span class="operator">/</span>smb restart  每天<span class="number">18</span> : <span class="number">00</span>至<span class="number">23</span> : <span class="number">00</span>之间每隔<span class="number">30</span>分钟重启smb</span><br><span class="line"></span><br><span class="line"><span class="number">0</span> <span class="number">23</span> <span class="operator">*</span> <span class="operator">*</span> <span class="number">6</span> <span class="regexp">/etc/</span><span class="keyword">init</span>.d<span class="operator">/</span>smb restart  每星期六的晚上<span class="number">11</span> : <span class="number">00</span> pm重启smb</span><br><span class="line"></span><br><span class="line"><span class="operator">*</span> <span class="operator">*/</span><span class="number">1</span> <span class="operator">*</span> <span class="operator">*</span> <span class="operator">*</span> <span class="regexp">/etc/</span><span class="keyword">init</span>.d<span class="operator">/</span>smb restart  每一小时重启smb</span><br><span class="line"></span><br><span class="line"><span class="operator">*</span> <span class="number">23</span><span class="operator">-</span><span class="number">7</span><span class="regexp">/1 * * * /</span>etc<span class="regexp">/init.d/</span>smb restart  晚上<span class="number">11</span>点到早上<span class="number">7</span>点之间，每隔一小时重启smb</span><br><span class="line"><span class="number">1234567891011</span></span><br></pre></td></tr></table></figure><p>示例2：</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">0 </span>*/<span class="number">2</span> * * * /sbin/service httpd restart  每两个小时重启一次apache </span><br><span class="line"></span><br><span class="line"><span class="symbol">50 </span><span class="number">7</span> * * * /sbin/service sshd start  每天<span class="number">7</span>：<span class="number">50</span>开启ssh服务 </span><br><span class="line"></span><br><span class="line"><span class="symbol">50 </span><span class="number">22</span> * * * /sbin/service sshd <span class="keyword">stop</span>  每天<span class="number">22</span>：<span class="number">50</span>关闭ssh服务 </span><br><span class="line"></span><br><span class="line"><span class="symbol">0 </span><span class="number">0</span> <span class="number">1</span>,<span class="number">15</span> * * fsck /home  每月<span class="number">1</span>号和<span class="number">15</span>号检查/home 磁盘 </span><br><span class="line"></span><br><span class="line"><span class="symbol">1 </span>* * * * /home/bruce/backup  每小时的第一分执行 /home/bruce/backup这个文件 </span><br><span class="line"></span><br><span class="line"><span class="symbol">00 </span><span class="number">03</span> * * <span class="number">1</span>-<span class="number">5</span> find /home <span class="string">&quot;*.xxx&quot;</span> -mtime +<span class="number">4</span> -exec rm &#123;&#125; \;  每周一至周五<span class="number">3</span>点钟，在目录/home中，查找文件名为*.xxx的文件，并删除<span class="number">4</span>天前的文件。</span><br><span class="line"></span><br><span class="line"><span class="symbol">30 </span><span class="number">6</span> */<span class="number">10</span> * * ls  每月的<span class="number">1</span>、<span class="number">11</span>、<span class="number">21</span>、<span class="number">31</span>日是的<span class="number">6</span>：<span class="number">30</span>执行一次ls命令</span><br><span class="line"><span class="number">12345678910111213</span></span><br></pre></td></tr></table></figure><p><strong>环境变量问题：</strong></p><p>有时创建了一个crontab，但是这个任务却无法自动执行，而手动执行这个任务却没有问题，这种情况一般是由于在crontab文件中没有配置环境变量引起的。</p><p>所以注意如下3点：</p><p>1）脚本中涉及文件路径时写全局路径；</p><p>2）脚本执行要用到java或其他环境变量时，通过source命令引入环境变量，如：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> start_cbp.sh</span><br><span class="line"><span class="comment">#!/bin/sh</span></span><br><span class="line"><span class="built_in">source</span> /etc/profile</span><br><span class="line"><span class="built_in">export</span> RUN_CONF=/home/d139/conf/platform/cbp/cbp_jboss.conf</span><br><span class="line">/usr/local/jboss-4.0.5/bin/run.sh -c mev &amp;</span><br><span class="line">12345</span><br></pre></td></tr></table></figure><p>3）当手动执行脚本OK，但是crontab死活不执行时，可以尝试在crontab中直接引入环境变量解决问题。如：</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">0 </span>* * * * . /etc/profile;/bin/sh /var/www/java/audit_no_count/bin/restart_audit.sh</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><h2 id="特殊权限">特殊权限</h2><p>linux共12位权限，除了9位基础权限还有3个特殊权限。</p><h3 id="三种特殊的权限">三种特殊的权限</h3><h4 id="SetUID-suid">SetUID(suid)</h4><p><strong>命令功能：</strong> **临时使用命令的属主权限执行该命令。**即如果文件有suid权限时，那么普通用户去执行该文件时，会以该文件的所属用户的身份去执行。</p><p>SetUID（简写suid）：会在属主权限位的执行权限上写个s。 如果该属主权限位上有执行权限，则会在属主权限位的执行权限上写个s（小写）； 如果该属主权限位上没有执行权限，则会在属主权限位的执行权限上写个S（大写）。</p><p>suid数字权限是4000,设置方法：</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">方式<span class="number">1</span>：</span><br><span class="line">[root<span class="symbol">@centos7</span> ~]<span class="meta"># chmod u+s filename</span></span><br><span class="line">方式<span class="number">2</span>：</span><br><span class="line">[root<span class="symbol">@centos7</span> ~]<span class="meta"># chmod 4755 filename</span></span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure><p>查看passwd命令的权限</p><figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">`[root@localhost ftl]``# ll /usr/bin/passwd ` `问题： ``passwd``文件的属组是root,表示只有root用户可以访问的文件，为什么普通用户依然可以使用该命令更改自己的密码？``答案：当普通用户[omd]使用``passwd``命令的时候，系统看到``passwd``命令文件的属性有大写s后，表示这个命令的属主权限被omd用户获得,也就是omd用户获得文件``/etc/shadow``的root的rwx权限`</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>由于<code>passwd</code>具有s权限，普通用户使用该命令的时候，就会以该命令的属主身份root执行该命令，于是能够顺利修改普通用户不具备修改权限的<code>/etc/shadow</code>文件。</p><p>希望普通用户user1可以删除某个自己没有权限删除的文件的操作方法：</p><ul class="lvl-0"><li class="lvl-2"><p>sudo给user1授权rm权限</p></li><li class="lvl-2"><p>rm设置suid</p></li><li class="lvl-2"><p>修改被删除文件上级目录的权限</p></li></ul><p><strong>SetUID（简称suid）总结：</strong></p><ol><li class="lvl-3"><p>让普通用户对可执行的二进制文件，临时拥有二进制文件的属主权限；</p></li><li class="lvl-3"><p>如果设置的二进制文件没有执行权限，那么suid的权限显示就是S（大写字母S）；</p></li><li class="lvl-3"><p>特殊权限suid仅对二进制可执行程序有效，其他文件或目录则无效。</p></li><li class="lvl-3"><p>suid极其危险，如果给vim或者rm命令设置了setUID，那么任何文件都能编辑或者删除了，相当于有root权限了。</p></li></ol><h4 id="setGID（sgid）">setGID（sgid）</h4><p>**命令功能：**使用sgid可以使得多个用户之间共享一个目录的所有文件变得简单。当某个目录设置了sgid后，在该目录中新建的文件不在是创建该文件的默认所属组。</p><p>如果该属组权限位上有执行权限，则会在属组主权限位的执行权限上写个s（小写字母）； 如果该属组权限位上没有执行权限，则会在属组主权限位的执行权限上写个S（大写字母S）。</p><p>write命令的权限：</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@VM_0_9_centos ~]# ll <span class="regexp">/bin/</span><span class="keyword">write</span> </span><br><span class="line">-rwxr-sr-x <span class="number">1</span> root tty <span class="number">19544</span> Aug  <span class="number">9</span> <span class="number">11</span>:<span class="number">10</span> <span class="regexp">/bin/</span><span class="keyword">write</span></span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure><p>sgid数字权限是2000，设置方法：</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">方式<span class="number">1</span>：</span><br><span class="line">[root<span class="symbol">@VM_0_9_centos</span> ~]<span class="meta"># chmod 2755 test/</span></span><br><span class="line">方式<span class="number">2</span>：</span><br><span class="line">[root<span class="symbol">@VM_0_9_centos</span> ~]<span class="meta"># chmod g+s test/</span></span><br><span class="line"></span><br><span class="line">[root<span class="symbol">@VM_0_9_centos</span> ~]<span class="meta"># ll -d test/</span></span><br><span class="line">drwxr-sr-x <span class="number">2</span> root root <span class="number">4096</span> Nov <span class="number">22</span> <span class="number">21</span>:<span class="number">02</span> test/</span><br><span class="line"><span class="number">1234567</span></span><br></pre></td></tr></table></figure><p>在设置SetGID的文件夹创建文件的属组是父目录的属组：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@VM_0_9_centos ~]# <span class="built_in">cd</span> <span class="built_in">test</span>/</span><br><span class="line">[root@VM_0_9_centos <span class="built_in">test</span>]# su aaa</span><br><span class="line">[aaa@VM_0_9_centos <span class="built_in">test</span>]$ <span class="built_in">touch</span> bbb</span><br><span class="line">[aaa@VM_0_9_centos <span class="built_in">test</span>]$ ll</span><br><span class="line">-rw-rw-r-- 1 aaa  root 0 Nov 22 21:14 bbb</span><br><span class="line">12345</span><br></pre></td></tr></table></figure><h4 id="sticky-sbit-粘滞位">sticky(sbit)粘滞位</h4><p>**命令功能：**粘滞位，只对目录有效，对某目录设置粘滞位后，普通用户就算有w权限也只能删除该目录下自己建立的文件，而不能删除其他用户建立的文件。</p><p>如果该其他用户权限位上有执行权限，则会在其他用户权限位的执行权限上写个t（小写）； 如果该其它用户权限位上没有执行权限，则会在其他用户权限位的执行权限上写个T（大写）。</p><p>系统中存在的/tmp目录是经典的粘滞位目录，谁都有写权限，因此安全成问题，常常是木马第一手跳板。</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[aaa<span class="meta">@VM_0_9_centos</span> <span class="operator">~</span>]$ ll <span class="operator">-</span>d <span class="regexp">/tmp/</span> </span><br><span class="line">drwxrwxrwt. <span class="number">9</span> root root <span class="number">4096</span> <span class="type">Nov</span> <span class="number">22</span> <span class="number">21</span>:<span class="number">15</span> <span class="regexp">/tmp/</span></span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure><p>sbit数字权限是1000，设置方法：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">方法1：</span><br><span class="line">[root@VM_0_9_centos ~]# <span class="built_in">chmod</span> 1755 <span class="built_in">test</span>/</span><br><span class="line">方法2：</span><br><span class="line">[root@VM_0_9_centos ~]# <span class="built_in">chmod</span> o+t <span class="built_in">test</span>/ </span><br><span class="line">查看权限：</span><br><span class="line">[root@VM_0_9_centos ~]# ll -d <span class="built_in">test</span>/    </span><br><span class="line">drwxr-xr-t 2 root root 4096 Nov 22 21:15 <span class="built_in">test</span>/</span><br><span class="line">1234567</span><br></pre></td></tr></table></figure><h3 id="chattr权限">chattr权限</h3><p>chattr概述：凌驾于r、w、x、suid、sgid之上的权限。</p><h4 id="lsattr：查看特殊权限">lsattr：查看特殊权限</h4><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="variable">@VM_0_9_centos</span> ~]<span class="comment"># lsattr /etc/passwd</span></span><br><span class="line">-------------e-- <span class="regexp">/etc/passwd</span></span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure><h4 id="chattr：设置特殊权限">chattr：设置特殊权限</h4><table><thead><tr><th>权限说明</th><th></th></tr></thead><tbody><tr><td>-i</td><td>锁定文件，不能编辑，不能修改，不能删除，不能移动，可以执行</td></tr><tr><td>-a</td><td>仅可以追加文件，不能编辑，不能删除，不能移动，可以执行</td></tr></tbody></table><p>防止系统中某个关键文件被修改：</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="variable">@VM_0_9_centos</span> ~]<span class="comment"># chattr +i /etc/fstab</span></span><br><span class="line">[root<span class="variable">@VM_0_9_centos</span> ~]<span class="comment"># lsattr /etc/fstab   </span></span><br><span class="line">----i--------e-- <span class="regexp">/etc/fstab</span></span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure><p>让某个文件只能往里面追加内容，不能删除，一些日志文件适用于这种操作：</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="symbol">@VM_0_9_centos</span> ~]<span class="meta"># chattr +a user_act.log</span></span><br><span class="line">[root<span class="symbol">@VM_0_9_centos</span> ~]<span class="meta"># lsattr user_act.log </span></span><br><span class="line">-----a-------e-- user_act.<span class="built_in">log</span></span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure><h3 id="掩码umask">掩码umask</h3><h4 id="umask的作用">umask的作用</h4><p>umask值用于设置用户在创建文件时的默认权限，当我们在系统中创建目录或文件时，目录或文件所具有的默认权限就是由umask值决定的。</p><p>对于root用户，系统默认的umask值是0022；对于普通用户，系统默认的umask值是0002。执行umask命令可以查看当前用户的umask值。</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="symbol">@VM_0_9_centos</span> ~]<span class="meta"># umask</span></span><br><span class="line"><span class="number">0022</span></span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure><h4 id="umask是如何改变新文件的权限">umask是如何改变新文件的权限</h4><p>umask值一共有4组数字，其中第1组数字用于定义特殊权限，一般不予考虑，与一般权限有关的是后3组数字。</p><p>默认情况下，对于目录，用户所能拥有的最大权限是777；对于文件，用户所能拥有的最大权限是目录的最大权限去掉执行权限，即666。因为x执行权限对于目录是必须的，没有执行权限就无法进入目录，而对于文件则不必默认赋予x执行权限。</p><p>对于root用户，他的umask值是022。当root用户创建目录时，默认的权限就是用最大权限777去掉相应位置的umask值权限，即对于所有者不必去掉任何权限，对于所属组要去掉w权限，对于其他用户也要去掉w权限，所以目录的默认权限就是755；当root用户创建文件时，默认的权限则是用最大权限666去掉相应位置的umask值，即文件的默认权限是644。</p><p>通过umask命令可以修改umask值，比如将umask值设为0077。</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="symbol">@VM_0_9_centos</span> ~]<span class="meta"># umask 0077</span></span><br><span class="line">[root<span class="symbol">@VM_0_9_centos</span> ~]<span class="meta"># umask</span></span><br><span class="line"><span class="number">0077</span></span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure><h4 id="永久修改umask">永久修改umask</h4><p>umask命令只能临时修改umask值，系统重启之后umask将还原成默认值。如果要永久修改umask值，可修改<code>/etc/bashrc</code>或<code>/etc/profile</code>文件。</p><p>例如要将默认umask值设置为027，那么可以在文件中增加一行<code>umask 027</code>。</p><h2 id="shell编程">shell编程</h2><p>这里说的Shell 脚本（shell script），是在Linux 环境下运行的脚本程序</p><p>Shell 编程跟 JavaScript、php 编程一样，只要有一个能编写代码的文本编辑器和一个能解释执行的脚本解释器就可以了。</p><p>Linux 的 Shell 种类众多，常见的有：</p><ul class="lvl-0"><li class="lvl-2"><p>Bourne Shell（/usr/bin/sh或/bin/sh）</p></li><li class="lvl-2"><p>Bourne Again Shell（/bin/bash）</p></li><li class="lvl-2"><p>C Shell（/usr/bin/csh）</p></li><li class="lvl-2"><p>K Shell（/usr/bin/ksh）</p></li><li class="lvl-2"><p>Shell for Root（/sbin/sh）</p></li><li class="lvl-2"><p>……</p></li></ul><p>Bash是大多数Linux 系统默认的 Shell，本文也仅关注Bash Shell。</p><p>在一般情况下，并不区分 Bourne Shell 和 Bourne Again Shell，所以，像 <strong>#!/bin/sh</strong>，它同样也可以改为 <strong>#!/bin/bash</strong>。</p><p><strong>#!</strong> 告诉系统其后路径所指定的程序即是解释此脚本文件的 Shell 程序。</p><h3 id="入门">入门</h3><h4 id="运行Shell脚本">运行Shell脚本</h4><p>编写shell脚本：</p><figure class="highlight d"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vi test.sh</span><br><span class="line"></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">echo <span class="string">&quot;Hello World !&quot;</span></span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure><p><strong>#!</strong> 是一个约定的标记，它告诉系统这个脚本需要什么解释器来执行，即使用哪一种 Shell。</p><p>echo 命令用于向窗口输出文本。</p><p>运行 Shell 脚本有两种方法：</p><p><strong>1、作为可执行程序</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> +x ./test.sh  <span class="comment">#使脚本具有执行权限</span></span><br><span class="line">./test.sh  <span class="comment">#执行脚本</span></span><br><span class="line">12</span><br></pre></td></tr></table></figure><p>默认情况下，一定要写成 <strong>./test.sh</strong>，而不是 <strong><a target="_blank" rel="noopener" href="http://test.sh">test.sh</a></strong>，运行其它二进制的程序也一样。</p><p>除非将当前目录.加入到PATH环境变量中，配置方法：</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /etc<span class="built_in">/profile</span></span><br><span class="line"><span class="built_in"></span>加入一行</span><br><span class="line"><span class="built_in">export</span> <span class="attribute">PATH</span>=<span class="variable">$PATH</span>:.</span><br><span class="line">保存之后，执行</span><br><span class="line">source /etc<span class="built_in">/profile</span></span><br><span class="line"><span class="built_in"></span>12345</span><br></pre></td></tr></table></figure><p><strong>2、作为解释器参数</strong></p><p>直接运行解释器，其参数就是 shell 脚本的文件名：</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/bin/<span class="keyword">sh</span> <span class="keyword">test</span>.<span class="keyword">sh</span></span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>这种方式运行的脚本，不需要在第一行指定解释器信息，写了也没用。</p><h4 id="编写一个快捷创建shell脚本的命令">编写一个快捷创建shell脚本的命令</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">test</span> -z <span class="variable">$1</span>;<span class="keyword">then</span></span><br><span class="line">  newfile=<span class="string">&quot;./script_`date +%m%d_%s`&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  newfile=<span class="variable">$1</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$newfile</span></span><br><span class="line"><span class="keyword">if</span>  ! grep <span class="string">&quot;^#!&quot;</span> <span class="variable">$newfile</span> &amp;&gt;/dev/null; <span class="keyword">then</span></span><br><span class="line"><span class="built_in">cat</span> &gt;&gt; <span class="variable">$newfile</span> &lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string">#!/bin/bash</span></span><br><span class="line"><span class="string"># Author:</span></span><br><span class="line"><span class="string"># Date &amp; Time: `date +&quot;%F %T&quot;`</span></span><br><span class="line"><span class="string">#Description:</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">vim +5 <span class="variable">$newfile</span></span><br><span class="line"><span class="built_in">chmod</span> +x <span class="variable">$newfile</span></span><br><span class="line">1234567891011121314151617</span><br></pre></td></tr></table></figure><p>将以上内容编写好之后保存为shell文件，然后执行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> u+x shell</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">mv</span> shell /usr/bin/</span><br><span class="line">12</span><br></pre></td></tr></table></figure><h4 id="echo命令">echo命令</h4><p>Shell 的 echo 指令与 PHP 的 echo 指令类似，都是用于字符串的输出。命令格式：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> <span class="keyword">string</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>显示普通字符串:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;It is a test&quot;</span></span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>这里的双引号完全可以省略，以下命令与上面实例效果一致：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> It is a <span class="built_in">test</span></span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>显示转义字符:</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo <span class="string">&quot;\&quot;</span>It <span class="keyword">is</span> a test\<span class="string">&quot;&quot;</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>结果将是:</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;It is a test&quot;</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>同样，双引号也可以省略</p><p>read 命令从标准输入中读取一行,并把输入行的每个字段的值指定给 shell 变量</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"><span class="built_in">read</span> name </span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$name</span> It is a test&quot;</span></span><br><span class="line">123</span><br></pre></td></tr></table></figure><p>以上代码保存为 <a target="_blank" rel="noopener" href="http://test.sh">test.sh</a>，name 接收标准输入的变量，结果将是:</p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@www ~]<span class="comment"># sh test.sh</span></span><br><span class="line">OK                     <span class="comment">#标准输入</span></span><br><span class="line">OK It <span class="keyword">is</span> a test        <span class="comment">#输出</span></span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure><h5 id="显示换行">显示换行</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;OK! \n&quot;</span> <span class="comment"># -e 开启转义</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;It is a test&quot;</span></span><br><span class="line">12</span><br></pre></td></tr></table></figure><p>输出结果：</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">OK!</span><br><span class="line"></span><br><span class="line">It <span class="keyword">is</span> a test</span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure><h5 id="显示不换行">显示不换行</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;OK! \c&quot;</span> <span class="comment"># -e 开启转义 \c 不换行</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;It is a test&quot;</span></span><br><span class="line">123</span><br></pre></td></tr></table></figure><p>输出结果：</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">OK! It <span class="keyword">is</span> a test</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><h4 id="printf-命令">printf 命令</h4><p>printf 命令的语法：</p><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">printf  <span class="keyword">format</span>-<span class="keyword">string</span>  [arguments...]</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p><strong>参数说明：</strong></p><ul class="lvl-0"><li class="lvl-2"><p><strong>format-string:</strong> 为格式控制字符串</p></li><li class="lvl-2"><p><strong>arguments:</strong> 为参数列表。</p></li></ul><p>实例如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"> </span><br><span class="line"><span class="built_in">printf</span> <span class="string">&quot;%-10s %-8s %-4s\n&quot;</span> 姓名 性别 体重kg  </span><br><span class="line"><span class="built_in">printf</span> <span class="string">&quot;%-10s %-8s %-4.2f\n&quot;</span> 郭靖 男 66.1234 </span><br><span class="line"><span class="built_in">printf</span> <span class="string">&quot;%-10s %-8s %-4.2f\n&quot;</span> 杨过 男 48.6543 </span><br><span class="line"><span class="built_in">printf</span> <span class="string">&quot;%-10s %-8s %-4.2f\n&quot;</span> 郭芙 女 47.9876 </span><br><span class="line">123456</span><br></pre></td></tr></table></figure><p>执行脚本，输出结果如下所示：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">姓名</span>     <span class="string">性别</span>   <span class="string">体重kg</span></span><br><span class="line"><span class="string">郭靖</span>     <span class="string">男</span>      <span class="number">66.12</span></span><br><span class="line"><span class="string">杨过</span>     <span class="string">男</span>      <span class="number">48.65</span></span><br><span class="line"><span class="string">郭芙</span>     <span class="string">女</span>      <span class="number">47.99</span></span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure><ul class="lvl-0"><li class="lvl-2"><p>%s %c %d %f都是格式替代符</p></li><li class="lvl-2"><p>%-10s 指一个宽度为10个字符（-表示左对齐，没有则表示右对齐），任何字符都会被显示在10个字符宽的字符内，如果不足则自动以空格填充，超过也会将内容全部显示出来。</p></li><li class="lvl-2"><p>%-4.2f 指格式化为小数，其中.2指保留2位小数。</p></li></ul><p>printf的转义序列：</p><table><thead><tr><th>序列</th><th>说明</th></tr></thead><tbody><tr><td>\a</td><td>警告字符，通常为ASCII的BEL字符</td></tr><tr><td>\b</td><td>后退</td></tr><tr><td>\c</td><td>抑制（不显示）输出结果中任何结尾的换行字符（只在%b格式指示符控制下的参数字符串中有效），而且，任何留在参数里的字符、任何接下来的参数以及任何留在格式字符串中的字符，都被忽略</td></tr><tr><td>\f</td><td>换页（formfeed）</td></tr><tr><td>\n</td><td>换行</td></tr><tr><td>\r</td><td>回车（Carriage return）</td></tr><tr><td>\t</td><td>水平制表符</td></tr><tr><td>\v</td><td>垂直制表符</td></tr><tr><td>\</td><td>一个字面上的反斜杠字符</td></tr><tr><td>\ddd</td><td>表示1到3位数八进制值的字符。仅在格式字符串中有效</td></tr><tr><td>\0ddd</td><td>表示1到3位的八进制值字符</td></tr></tbody></table><p>例子：</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">python<span class="variable">@ubuntu</span><span class="symbol">:~/test</span><span class="variable">$ </span>printf <span class="string">&quot;a string, no processing:&lt;%s&gt;\n&quot;</span> <span class="string">&quot;A\nB&quot;</span></span><br><span class="line">a string, no <span class="symbol">processing:</span>&lt;A\nB&gt;</span><br><span class="line">python<span class="variable">@ubuntu</span><span class="symbol">:~/test</span><span class="variable">$ </span>printf <span class="string">&quot;a string, no processing:&lt;%b&gt;\n&quot;</span> <span class="string">&quot;A\nB&quot;</span></span><br><span class="line">a string, no <span class="symbol">processing:</span>&lt;A</span><br><span class="line">B&gt;</span><br><span class="line">python<span class="variable">@ubuntu</span><span class="symbol">:~/test</span><span class="variable">$ </span>printf <span class="string">&quot;www.runoob.com \a&quot;</span></span><br><span class="line">www.runoob.com python<span class="variable">@ubuntu</span><span class="symbol">:~/test</span><span class="variable">$ </span></span><br><span class="line"><span class="number">1234567</span></span><br></pre></td></tr></table></figure><h4 id="Shell-注释">Shell 注释</h4><p>以 <strong>#</strong> 开头的行就是注释，会被解释器忽略：</p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#--------------------------------------------</span><br><span class="line"># 这是一个注释</span><br><span class="line"># author：菜鸟教程</span><br><span class="line"># site：www.taobao.com</span><br><span class="line"># slogan：学的不仅是技术，更是梦想！</span><br><span class="line">#--------------------------------------------</span><br><span class="line">##### 用户配置区 开始 #####</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line"># 这里可以添加脚本描述信息</span><br><span class="line"># </span><br><span class="line">#</span><br><span class="line">##### 用户配置区 结束  #####</span><br><span class="line"><span class="number">12345678910111213</span></span><br></pre></td></tr></table></figure><p>多行注释还可以使用以下格式：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">:&lt;&lt;<span class="string">EOF</span></span><br><span class="line"><span class="string">注释内容...</span></span><br><span class="line"><span class="string">注释内容...</span></span><br><span class="line"><span class="string">注释内容...</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line">12345</span><br></pre></td></tr></table></figure><p>EOF 也可以使用其他符号:</p><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">:&lt;&lt;&#x27;</span><br><span class="line">注释内容...</span><br><span class="line">注释内容...</span><br><span class="line">注释内容...</span><br><span class="line">&#x27;</span><br><span class="line"></span><br><span class="line">:&lt;&lt;!</span><br><span class="line">注释内容...</span><br><span class="line">注释内容...</span><br><span class="line">注释内容...</span><br><span class="line">!</span><br><span class="line"><span class="number">1234567891011</span></span><br></pre></td></tr></table></figure><h3 id="Shell变量">Shell变量</h3><h4 id="定义变量">定义变量</h4><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">your_name<span class="operator">=</span><span class="string">&quot;taobao.com&quot;</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>变量名的命名须遵循如下规则：</p><ul class="lvl-0"><li class="lvl-2"><p>命名只能使用英文字母，数字和下划线，首个字符不能以数字开头。</p></li><li class="lvl-2"><p>中间不能有空格，可以使用下划线（_）。</p></li><li class="lvl-2"><p>不能使用标点符号。</p></li><li class="lvl-2"><p>不能使用bash里的关键字（可用help命令查看保留关键字）。</p></li></ul><h4 id="使用变量">使用变量</h4><p>在变量名前面加美元符号即可，如：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">your_name=<span class="string">&quot;qinjx&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$your_name</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;your_name&#125;</span></span><br><span class="line">123</span><br></pre></td></tr></table></figure><p>加花括号可以帮助解释器识别变量的边界，比如：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> skill <span class="keyword">in</span> Ada Coffe Action Java; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;I am good at <span class="variable">$&#123;skill&#125;</span>Script&quot;</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">123</span><br></pre></td></tr></table></figure><h4 id="只读变量">只读变量</h4><p>使用 readonly 命令可以将变量定义为只读变量，只读变量的值不能被改变。</p><p>下面的例子尝试更改只读变量，结果报错：</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">python<span class="variable">@ubuntu</span><span class="symbol">:~/shell</span><span class="variable">$ </span>myUrl=<span class="string">&quot;http://www.google.com&quot;</span></span><br><span class="line">python<span class="variable">@ubuntu</span><span class="symbol">:~/shell</span><span class="variable">$ </span>readonly myUrl</span><br><span class="line">python<span class="variable">@ubuntu</span><span class="symbol">:~/shell</span><span class="variable">$ </span>myUrl=<span class="string">&quot;http://www.baidu.com&quot;</span></span><br><span class="line">-<span class="symbol">bash:</span> <span class="symbol">myUrl:</span> 只读变量</span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure><h4 id="删除变量">删除变量</h4><p>使用 unset 命令可以删除变量，但不能删除只读变量：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line">myUrl=<span class="string">&quot;http://www.baidu.com&quot;</span></span><br><span class="line"><span class="built_in">unset</span> myUrl</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$myUrl</span></span><br><span class="line">1234</span><br></pre></td></tr></table></figure><h4 id="变量类型">变量类型</h4><p>运行shell时，会同时存在三种变量：</p><ul class="lvl-0"><li class="lvl-2"><p><strong>1) 局部变量</strong> 局部变量在脚本或命令中定义，仅在当前shell实例中有效，其他shell启动的程序不能访问局部变量。</p></li><li class="lvl-2"><p><strong>2) 环境变量</strong> 所有的程序，包括shell启动的程序，都能访问环境变量，有些程序需要环境变量来保证其正常运行。必要的时候shell脚本也可以定义环境变量。</p></li><li class="lvl-2"><p><strong>3) shell变量</strong> shell变量是由shell程序设置的特殊变量。shell变量中有一部分是环境变量，有一部分是局部变量，这些变量保证了shell的正常运行</p></li></ul><h3 id="Shell-函数">Shell 函数</h3><p>shell中函数的定义格式如下：</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[ <span class="keyword">function</span> <span class="title">]</span> funname [()]</span><br><span class="line">&#123;</span><br><span class="line">    action;</span><br><span class="line">    [<span class="keyword">return</span> <span class="type">int</span>;]</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">12345</span></span><br></pre></td></tr></table></figure><p>说明：</p><ul class="lvl-0"><li class="lvl-2"><p>1、可以带function fun() 定义，也可以直接fun() 定义,不带任何参数。</p></li><li class="lvl-2"><p>2、参数返回，可以显示加：return 返回，如果不加，将以最后一条命令运行结果，作为返回值。 return后跟数值n(0-255)</p></li></ul><p>示例：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">funWithReturn</span></span>()&#123;</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;这个函数会对输入的两个数字进行相加运算...&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;输入第一个数字: &quot;</span></span><br><span class="line">    <span class="built_in">read</span> aNum</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;输入第二个数字: &quot;</span></span><br><span class="line">    <span class="built_in">read</span> anotherNum</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;两个数字分别为 <span class="variable">$aNum</span> 和 <span class="variable">$anotherNum</span> !&quot;</span></span><br><span class="line">    <span class="built_in">return</span> $((<span class="variable">$aNum</span>+<span class="variable">$anotherNum</span>))</span><br><span class="line">&#125;</span><br><span class="line">funWithReturn</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;输入的两个数字之和为 $? !&quot;</span></span><br><span class="line">12345678910111213</span><br></pre></td></tr></table></figure><p>输出，类似下面：</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">这个函数会对输入的两个数字进行相加运算...</span><br><span class="line">输入第一个数字: </span><br><span class="line">1</span><br><span class="line">输入第二个数字: </span><br><span class="line">2</span><br><span class="line">两个数字分别为<span class="number"> 1 </span>和<span class="number"> 2 </span>!</span><br><span class="line">输入的两个数字之和为<span class="number"> 3 </span>!</span><br><span class="line">1234567</span><br></pre></td></tr></table></figure><p>函数返回值在调用该函数后通过 $? 来获得。</p><p>注意：所有函数在使用前必须定义。这意味着必须将函数放在脚本开始部分，直至shell解释器首次发现它时，才可以使用。调用函数仅使用其函数名即可。</p><p>在Shell中，调用函数时可以向其传递参数。在函数体内部，通过 <code>$n</code> 的形式来获取参数的值，例如，<code>$1</code>表示第一个参数，<code>$2</code>表示第二个参数…</p><p>带参数的函数示例：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">funWithParam</span></span>()&#123;</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;第一个参数为 <span class="variable">$1</span> !&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;第二个参数为 <span class="variable">$2</span> !&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;第十个参数为 <span class="variable">$10</span> !&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;第十个参数为 <span class="variable">$&#123;10&#125;</span> !&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;第十一个参数为 <span class="variable">$&#123;11&#125;</span> !&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;参数总数有 <span class="variable">$#</span> 个!&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;作为一个字符串输出所有参数 $* !&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">funWithParam 1 2 3 4 5 6 7 8 9 34 73</span><br><span class="line">123456789101112</span><br></pre></td></tr></table></figure><p>输出结果：</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">第一个参数为<span class="number"> 1 </span>!</span><br><span class="line">第二个参数为<span class="number"> 2 </span>!</span><br><span class="line">第十个参数为<span class="number"> 10 </span>!</span><br><span class="line">第十个参数为<span class="number"> 34 </span>!</span><br><span class="line">第十一个参数为<span class="number"> 73 </span>!</span><br><span class="line">参数总数有<span class="number"> 11 </span>个!</span><br><span class="line">作为一个字符串输出所有参数<span class="number"> 1 </span>2<span class="number"> 3 </span>4<span class="number"> 5 </span>6<span class="number"> 7 </span>8<span class="number"> 9 </span>34<span class="number"> 73 </span>!</span><br><span class="line">1234567</span><br></pre></td></tr></table></figure><p>当n&gt;=10时，需要使用<code>$&#123;n&#125;</code>来获取参数。</p><p>另外，还有几个特殊字符用来处理参数：</p><table><thead><tr><th>参数处理</th><th>说明</th></tr></thead><tbody><tr><td>$#</td><td>传递到脚本的参数个数</td></tr><tr><td>$*</td><td>以一个单字符串显示所有向脚本传递的参数</td></tr><tr><td>$$</td><td>脚本运行的当前进程ID号</td></tr><tr><td>$!</td><td>后台运行的最后一个进程的ID号</td></tr><tr><td>$@</td><td>与$*相同，但是使用时加引号，并在引号中返回每个参数。</td></tr><tr><td>$-</td><td>显示Shell使用的当前选项，与set命令功能相同。</td></tr><tr><td>$?</td><td>显示最后命令的退出状态。0表示没有错误，其他任何值表明有错误。</td></tr></tbody></table><h3 id="文件包含">文件包含</h3><p>Shell 文件包含的语法格式如下：</p><figure class="highlight tcl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">. <span class="keyword">filename</span>   # 注意点号(.)和文件名中间有一空格</span><br><span class="line">或</span><br><span class="line"><span class="keyword">source</span> <span class="keyword">filename</span></span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure><p><strong>实例</strong></p><p>创建两个 shell 脚本文件。</p><p><a target="_blank" rel="noopener" href="http://test1.sh">test1.sh</a> 代码如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">url=<span class="string">&quot;http://www.baidu.com&quot;</span></span><br><span class="line">123</span><br></pre></td></tr></table></figure><p><a target="_blank" rel="noopener" href="http://test2.sh">test2.sh</a> 代码如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#使用 . 号来引用test1.sh 文件</span></span><br><span class="line">. ./test1.sh</span><br><span class="line"><span class="comment"># 或者使用以下包含文件代码</span></span><br><span class="line"><span class="comment"># source ./test1.sh</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;url地址：<span class="variable">$url</span>&quot;</span></span><br><span class="line">12345678</span><br></pre></td></tr></table></figure><p>接下来，我们为 <a target="_blank" rel="noopener" href="http://test2.sh">test2.sh</a> 添加可执行权限并执行：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">chmod</span> +x test2.sh</span> </span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">./test2.sh</span> </span><br><span class="line">url地址：http://www.baidu.com</span><br><span class="line">123</span><br></pre></td></tr></table></figure><blockquote><p>**注：**被包含的文件 <a target="_blank" rel="noopener" href="http://test1.sh">test1.sh</a> 不需要可执行权限。</p></blockquote><h3 id="shell数据类型">shell数据类型</h3><h4 id="字符串">字符串</h4><p>字符串可以用单引号，也可以用双引号，也可以不用引号。</p><p>单引号：</p><figure class="highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">str=<span class="symbol">&#x27;this</span> <span class="keyword">is</span> a <span class="built_in">string</span>&#x27;</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>单引号字符串的限制：</p><ul class="lvl-0"><li class="lvl-2"><p>单引号里的任何字符都会原样输出，单引号字符串中的变量是无效的；</p></li><li class="lvl-2"><p>单引号字串中不能出现单独一个的单引号（对单引号使用转义符后也不行），但可成对出现，作为字符串拼接使用。</p></li></ul><p>双引号：</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">your_name</span>=<span class="string">&#x27;taobao&#x27;</span></span><br><span class="line"><span class="attribute">str</span>=<span class="string">&quot;Hello, I know you are \&quot;<span class="variable">$your_name</span>\&quot;! \n&quot;</span></span><br><span class="line">echo -e <span class="variable">$str</span></span><br><span class="line">123</span><br></pre></td></tr></table></figure><p>输出结果为：</p><figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Hello,</span> I know you are <span class="string">&quot;taobao&quot;</span>! </span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>双引号的优点：</p><ul class="lvl-0"><li class="lvl-2"><p>双引号里可以有变量</p></li><li class="lvl-2"><p>双引号里可以出现转义字符</p></li></ul><p>拼接字符串：</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">your_name</span>=<span class="string">&quot;taobao&quot;</span></span><br><span class="line"><span class="comment"># 使用双引号拼接</span></span><br><span class="line"><span class="attribute">greeting</span>=<span class="string">&quot;hello, &quot;</span><span class="variable">$your_name</span><span class="string">&quot; !&quot;</span></span><br><span class="line"><span class="attribute">greeting_1</span>=<span class="string">&quot;hello, <span class="variable">$&#123;your_name&#125;</span> !&quot;</span></span><br><span class="line">echo <span class="variable">$greeting</span>  <span class="variable">$greeting_1</span></span><br><span class="line"><span class="comment"># 使用单引号拼接</span></span><br><span class="line"><span class="attribute">greeting_2</span>=<span class="string">&#x27;hello, &#x27;</span><span class="variable">$your_name</span><span class="string">&#x27; !&#x27;</span></span><br><span class="line"><span class="attribute">greeting_3</span>=<span class="string">&#x27;hello, $&#123;your_name&#125; !&#x27;</span></span><br><span class="line">echo <span class="variable">$greeting_2</span>  <span class="variable">$greeting_3</span></span><br><span class="line">123456789</span><br></pre></td></tr></table></figure><p>输出结果为：</p><figure class="highlight erlang-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hello, taobao ! hello, taobao !</span><br><span class="line">hello, taobao ! hello, $&#123;your_name&#125; !</span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure><p><strong>获取字符串长度<code>$&#123;#s&#125;</code></strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">string=<span class="string">&quot;abcd&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;#string&#125;</span> <span class="comment">#输出 4</span></span><br><span class="line">12</span><br></pre></td></tr></table></figure><p><strong>截取字符串${s:n1:n2}</strong></p><p>以下实例从字符串第 <strong>2</strong> 个字符开始截取 <strong>4</strong> 个字符：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">string</span>=<span class="string">&quot;taobao is a great site&quot;</span></span><br><span class="line"><span class="keyword">echo</span> $&#123;<span class="keyword">string</span>:<span class="number">1</span>:<span class="number">4</span>&#125; <span class="comment"># 输出 unoo</span></span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure><p><strong>查找字符出现的位置<code>expr index</code></strong></p><p>查找字符 <strong>i</strong> 或 <strong>o</strong> 的位置(哪个字母先出现就计算哪个)：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">string=<span class="string">&quot;taobao is a great site&quot;</span></span><br><span class="line"><span class="built_in">echo</span> `<span class="built_in">expr</span> index <span class="string">&quot;<span class="variable">$string</span>&quot;</span> io`  <span class="comment"># 输出 3</span></span><br><span class="line">12</span><br></pre></td></tr></table></figure><p><strong>注意：</strong> 以上脚本中 <strong>`</strong> 是反引号，而不是单引号 <strong>'</strong>。</p><h4 id="数组">数组</h4><p>bash支持一维数组（不支持多维数组），并且没有限定数组的大小。</p><p>数组元素的下标由 0 开始编号。</p><h5 id="定义数组">定义数组</h5><p>在 Shell 中，用括号来表示数组，数组元素用&quot;空格&quot;符号分割开。定义数组的一般形式为：</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">array_name<span class="operator">=</span>(value0 value1 value2 value3)</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>或者</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">array_name<span class="operator">=</span>(</span><br><span class="line">value0</span><br><span class="line">value1</span><br><span class="line">value2</span><br><span class="line">value3</span><br><span class="line">)</span><br><span class="line"><span class="number">123456</span></span><br></pre></td></tr></table></figure><p>或单独定义数组的各个分量：</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">array_name[<span class="number">0</span>]<span class="operator">=</span>value0</span><br><span class="line">array_name[<span class="number">1</span>]<span class="operator">=</span>value1</span><br><span class="line">array_name[n]<span class="operator">=</span>valuen</span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure><p>可以不使用连续的下标，而且下标的范围没有限制。</p><h5 id="读取数组">读取数组</h5><p>读取数组元素值的一般格式是：</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">valuen</span>=<span class="variable">$&#123;array_name[n]&#125;</span></span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>例子：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">my_array=(A B <span class="string">&quot;C&quot;</span> D)</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;第一个元素为: <span class="variable">$&#123;my_array[0]&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;第二个元素为: <span class="variable">$&#123;my_array[1]&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;第三个元素为: <span class="variable">$&#123;my_array[2]&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;第四个元素为: <span class="variable">$&#123;my_array[3]&#125;</span>&quot;</span></span><br><span class="line">12345678</span><br></pre></td></tr></table></figure><p>执行脚本，输出结果如下所示：</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ chmod +x test.sh </span><br><span class="line">$ ./test.sh</span><br><span class="line"><span class="section">第一个元素为: A</span></span><br><span class="line"><span class="section">第二个元素为: B</span></span><br><span class="line"><span class="section">第三个元素为: C</span></span><br><span class="line"><span class="section">第四个元素为: D</span></span><br><span class="line">123456</span><br></pre></td></tr></table></figure><p>使用 <code>@</code>或<code>*</code> 符号可以获取数组中的所有元素，例如：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;array_name[@]&#125;</span></span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>例子：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">my_array[0]=A</span><br><span class="line">my_array[1]=B</span><br><span class="line">my_array[2]=C</span><br><span class="line">my_array[3]=D</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;数组的元素为: <span class="variable">$&#123;my_array[*]&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;数组的元素为: <span class="variable">$&#123;my_array[@]&#125;</span>&quot;</span></span><br><span class="line">123456789</span><br></pre></td></tr></table></figure><p>执行脚本，输出结果如下所示：</p><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> <span class="variable">chmod</span> <span class="operator">+</span><span class="variable">x</span> <span class="variable">test</span><span class="operator">.</span><span class="variable">sh</span> </span><br><span class="line"><span class="variable">$</span> <span class="operator">./</span><span class="variable">test</span><span class="operator">.</span><span class="variable">sh</span></span><br><span class="line">数组的元素为<span class="operator">:</span> <span class="variable">A</span> <span class="variable">B</span> <span class="built_in">C</span> <span class="built_in">D</span></span><br><span class="line">数组的元素为<span class="operator">:</span> <span class="variable">A</span> <span class="variable">B</span> <span class="built_in">C</span> <span class="built_in">D</span></span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure><h5 id="获取数组的长度">获取数组的长度</h5><p>获取数组长度的方法与获取字符串长度的方法相同，例如：</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 取得数组元素的个数</span></span><br><span class="line">length=<span class="variable">$&#123;</span><span class="comment">#array_name[@]&#125;</span></span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line">length=<span class="variable">$&#123;</span><span class="comment">#array_name[*]&#125;</span></span><br><span class="line"><span class="comment"># 取得数组单个元素的长度</span></span><br><span class="line">lengthn=<span class="variable">$&#123;</span><span class="comment">#array_name[n]&#125;</span></span><br><span class="line"><span class="number">123456</span></span><br></pre></td></tr></table></figure><p>例子：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">my_array[0]=A</span><br><span class="line">my_array[1]=B</span><br><span class="line">my_array[2]=C</span><br><span class="line">my_array[3]=D</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;数组元素个数为: <span class="variable">$&#123;#my_array[*]&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;数组元素个数为: <span class="variable">$&#123;#my_array[@]&#125;</span>&quot;</span></span><br><span class="line">123456789</span><br></pre></td></tr></table></figure><p>执行脚本，输出结果如下所示：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">chmod</span> +x test.sh</span> </span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">./test.sh</span></span><br><span class="line">数组元素个数为: 4</span><br><span class="line">数组元素个数为: 4</span><br><span class="line">1234</span><br></pre></td></tr></table></figure><h4 id="Shell传递参数">Shell传递参数</h4><p>执行 Shell 脚本时，向脚本传递参数，脚本内获取参数的格式为：<strong>$n</strong>。</p><p><strong>n</strong> 代表一个数字，1 为执行脚本的第一个参数，2 为执行脚本的第二个参数，以此类推……</p><p><strong>$0</strong> 为执行的文件名</p><p>test.sh文件内容如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">vi test.sh</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Shell 传递参数实例！&quot;</span>;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;执行的文件名：<span class="variable">$0</span>&quot;</span>;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;第一个参数为：<span class="variable">$1</span>&quot;</span>;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;第二个参数为：<span class="variable">$2</span>&quot;</span>;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;第三个参数为：<span class="variable">$3</span>&quot;</span>;</span><br><span class="line">12345678</span><br></pre></td></tr></table></figure><p>运行结果：</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">python@ubuntu:~/<span class="keyword">test</span>$ <span class="keyword">sh</span> <span class="keyword">test</span>.<span class="keyword">sh</span> 1 2 3</span><br><span class="line"><span class="keyword">Shell</span> 传递参数实例！</span><br><span class="line">执行的文件名：<span class="keyword">test</span>.<span class="keyword">sh</span></span><br><span class="line">第一个参数为：1</span><br><span class="line">第二个参数为：2</span><br><span class="line">第三个参数为：3</span><br><span class="line">123456</span><br></pre></td></tr></table></figure><p>参数获取：</p><table><thead><tr><th>参数处理</th><th>说明</th></tr></thead><tbody><tr><td>$#</td><td>传递到脚本的参数个数</td></tr><tr><td><code>$*</code></td><td>传递的参数作为一个字符串显示</td></tr><tr><td>$$</td><td>脚本运行的当前进程ID号</td></tr><tr><td>$!</td><td>后台运行的最后一个进程的ID号</td></tr><tr><td><code>$@</code></td><td>与<code>$*</code>相同，但是使用时加引号</td></tr><tr><td>$?</td><td>显示最后命令的退出状态。0表示没有错误，其他任何值表明有错误。</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;参数个数为：<span class="variable">$#</span>&quot;</span>;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;$*传递的参数作为一个字符串显示：$*&quot;</span>;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$@</span>传递的参数作为一个字符串显示：<span class="variable">$@</span>&quot;</span>;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;脚本运行的当前进程ID号：$$&quot;</span>;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;后台运行的最后一个进程的ID号：$!&quot;</span>;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;$?&quot;</span></span><br><span class="line">12345678</span><br></pre></td></tr></table></figure><p>执行脚本，输出结果如下所示：</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">python<span class="variable">@ubuntu</span><span class="symbol">:~/test</span><span class="variable">$ </span>./test.sh <span class="number">1</span> <span class="number">2</span> <span class="number">3</span></span><br><span class="line">参数个数为：<span class="number">3</span></span><br><span class="line"><span class="number">1</span> <span class="number">2</span> <span class="number">3</span>传递的参数作为一个字符串显示：<span class="number">1</span> <span class="number">2</span> <span class="number">3</span></span><br><span class="line"><span class="number">1</span> <span class="number">2</span> <span class="number">3</span>传递的参数作为一个字符串显示：<span class="number">1</span> <span class="number">2</span> <span class="number">3</span></span><br><span class="line">脚本运行的当前进程<span class="title class_">ID</span>号：<span class="number">5059</span></span><br><span class="line">后台运行的最后一个进程的<span class="title class_">ID</span>号：</span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="number">1234567</span></span><br></pre></td></tr></table></figure><p><code>$*</code>与<code>$@</code>的区别：</p><ul class="lvl-0"><li class="lvl-2"><p>只有在双引号中体现出来。假设在脚本运行时写了三个参数 1、2、3，，则<code>$*</code> 等价于 “1 2 3”（传递了一个参数），而<code>$@</code>等价于 “1” “2” “3”（传递了三个参数）。</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;-- \&quot;\$*\&quot; 演示 ---&quot;</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="string">&quot;$*&quot;</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;-- \&quot;\$@\&quot; 演示 ---&quot;</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="string">&quot;<span class="variable">$@</span>&quot;</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;-- \$* 演示 ---&quot;</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $*; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;-- \$@ 演示 ---&quot;</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="variable">$@</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">123456789101112131415161718192021</span><br></pre></td></tr></table></figure><p>执行脚本，输出结果如下所示：</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">python<span class="variable">@ubuntu</span><span class="symbol">:~/test</span><span class="variable">$ </span>sh test <span class="number">1</span> <span class="number">2</span> <span class="number">3</span></span><br><span class="line">-- <span class="string">&quot;$*&quot;</span> 演示 ---</span><br><span class="line"><span class="number">1</span> <span class="number">2</span> <span class="number">3</span></span><br><span class="line">-- <span class="string">&quot;$@&quot;</span> 演示 ---</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line">-- <span class="variable">$*</span> 演示 ---</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line">-- <span class="variable">$@</span> 演示 ---</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">123456789101112131415</span></span><br></pre></td></tr></table></figure><h3 id="Shell基本运算符">Shell基本运算符</h3><p>Shell 和其他编程语言一样，支持多种运算符，包括：</p><ul class="lvl-0"><li class="lvl-2"><p>算数运算符</p></li><li class="lvl-2"><p>关系运算符</p></li><li class="lvl-2"><p>布尔运算符</p></li><li class="lvl-2"><p>字符串运算符</p></li><li class="lvl-2"><p>文件测试运算符</p></li></ul><p>原生bash不支持简单的数学运算，但是可以通过其他命令来实现，例如 awk 和 expr，expr 最常用。</p><p>expr 是一款表达式计算工具，使用它能完成表达式的求值操作。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">val=`<span class="built_in">expr</span> 2 + 2`</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;两数之和为 : <span class="variable">$val</span>&quot;</span></span><br><span class="line">1234</span><br></pre></td></tr></table></figure><p>执行脚本，输出结果如下所示：</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">两数之和为 : 4</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>两点注意：</p><ul class="lvl-0"><li class="lvl-2"><p>表达式和运算符之间要有空格，例如 2+2 是不对的，必须写成 2 + 2。</p></li><li class="lvl-2"><p>完整的表达式要被 <code></code> 包含，这个字符是<strong>反引号</strong>在 Esc 键下边。</p></li></ul><h4 id="算术运算符">算术运算符</h4><p>下表列出了常用的算术运算符，假定变量 a 为 10，变量 b 为 20：</p><table><thead><tr><th>运算符</th><th>说明</th><th>举例</th></tr></thead><tbody><tr><td>+</td><td>加法</td><td><code>expr $a + $b</code> 结果为 30。</td></tr><tr><td>-</td><td>减法</td><td><code>expr $a - $b</code> 结果为 -10。</td></tr><tr><td>*</td><td>乘法</td><td><code>expr $a \* $b</code> 结果为 200。</td></tr><tr><td>/</td><td>除法</td><td><code>expr $b / $a</code> 结果为 2。</td></tr><tr><td>%</td><td>取余</td><td><code>expr $b % $a</code> 结果为 0。</td></tr><tr><td>=</td><td>赋值</td><td>a=$b 将把变量 b 的值赋给 a。</td></tr><tr><td>==</td><td>相等。用于比较两个数字，相同则返回 true。</td><td><code>[ $a == $b ]</code> 返回 false。</td></tr><tr><td>!=</td><td>不相等。用于比较两个数字，不相同则返回 true。</td><td><code>[ $a != $b ]</code> 返回 true。</td></tr></tbody></table><p>算术运算符实例如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">a=10</span><br><span class="line">b=20</span><br><span class="line"></span><br><span class="line">val=`<span class="built_in">expr</span> <span class="variable">$a</span> + <span class="variable">$b</span>`</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;a + b : <span class="variable">$val</span>&quot;</span></span><br><span class="line"></span><br><span class="line">val=`<span class="built_in">expr</span> <span class="variable">$a</span> - <span class="variable">$b</span>`</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;a - b : <span class="variable">$val</span>&quot;</span></span><br><span class="line"></span><br><span class="line">val=`<span class="built_in">expr</span> <span class="variable">$a</span> \* <span class="variable">$b</span>`</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;a * b : <span class="variable">$val</span>&quot;</span></span><br><span class="line"></span><br><span class="line">val=`<span class="built_in">expr</span> <span class="variable">$b</span> / <span class="variable">$a</span>`</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;b / a : <span class="variable">$val</span>&quot;</span></span><br><span class="line"></span><br><span class="line">val=`<span class="built_in">expr</span> <span class="variable">$b</span> % <span class="variable">$a</span>`</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;b % a : <span class="variable">$val</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$a</span> == <span class="variable">$b</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;a 等于 b&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$a</span> != <span class="variable">$b</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;a 不等于 b&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">12345678910111213141516171819202122232425262728</span><br></pre></td></tr></table></figure><p>执行脚本，输出结果如下所示：</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">a</span> + <span class="selector-tag">b</span> : <span class="number">30</span></span><br><span class="line"><span class="selector-tag">a</span> <span class="selector-tag">-</span> <span class="selector-tag">b</span> : <span class="selector-tag">-10</span></span><br><span class="line"><span class="selector-tag">a</span> * <span class="selector-tag">b</span> : <span class="number">200</span></span><br><span class="line"><span class="selector-tag">b</span> / <span class="selector-tag">a</span> : <span class="number">2</span></span><br><span class="line"><span class="selector-tag">b</span> % <span class="selector-tag">a</span> : <span class="number">0</span></span><br><span class="line"><span class="selector-tag">a</span> 不等于 <span class="selector-tag">b</span></span><br><span class="line"><span class="number">123456</span></span><br></pre></td></tr></table></figure><p><strong>注意：</strong></p><ul class="lvl-0"><li class="lvl-2"><p>乘号(*)前边必须加反斜杠<code>\</code>才能实现乘法运算；</p></li><li class="lvl-2"><p>if…then…fi 是条件语句，后续将会讲解。</p></li><li class="lvl-2"><p>在 MAC 中 shell 的 expr 语法是：<strong>$((表达式))</strong>，此处表达式中的 “*” 不需要转义符号 <code>\</code> 。</p></li></ul><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">let <span class="attribute">varName</span>=算术表达式</span><br><span class="line"><span class="attribute">varName</span>=$[算术表达式]</span><br><span class="line"><span class="attribute">varName</span>=$((算术表达式))</span><br><span class="line">123</span><br></pre></td></tr></table></figure><h4 id="关系运算符">关系运算符</h4><p>关系运算符只支持数字，不支持字符串，除非字符串的值是数字。</p><p>下表列出了常用的关系运算符，假定变量 a 为 10，变量 b 为 20：</p><table><thead><tr><th>运算符</th><th>说明</th><th>举例</th></tr></thead><tbody><tr><td>-eq</td><td>检测两个数是否相等，相等返回 true。</td><td><code>[ $a -eq $b ]</code> 返回 false。</td></tr><tr><td>-ne</td><td>检测两个数是否不相等，不相等返回 true。</td><td><code>[ $a -ne $b ]</code> 返回 true。</td></tr><tr><td>-gt</td><td>检测左边的数是否大于右边的，如果是，则返回 true。</td><td><code>[ $a -gt $b ]</code> 返回 false。</td></tr><tr><td>-lt</td><td>检测左边的数是否小于右边的，如果是，则返回 true。</td><td><code>[ $a -lt $b ]</code> 返回 true。</td></tr><tr><td>-ge</td><td>检测左边的数是否大于等于右边的，如果是，则返回 true。</td><td><code>[ $a -ge $b ]</code>返回 false。</td></tr><tr><td>-le</td><td>检测左边的数是否小于等于右边的，如果是，则返回 true。</td><td><code>[ $a -le $b ]</code> 返回 true。</td></tr></tbody></table><p>关系运算符实例如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">a=10</span><br><span class="line">b=20</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$a</span> -eq <span class="variable">$b</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> -eq <span class="variable">$b</span> : a 等于 b&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> -eq <span class="variable">$b</span>: a 不等于 b&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$a</span> -ne <span class="variable">$b</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> -ne <span class="variable">$b</span>: a 不等于 b&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> -ne <span class="variable">$b</span> : a 等于 b&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$a</span> -gt <span class="variable">$b</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> -gt <span class="variable">$b</span>: a 大于 b&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> -gt <span class="variable">$b</span>: a 不大于 b&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$a</span> -lt <span class="variable">$b</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> -lt <span class="variable">$b</span>: a 小于 b&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> -lt <span class="variable">$b</span>: a 不小于 b&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$a</span> -ge <span class="variable">$b</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> -ge <span class="variable">$b</span>: a 大于或等于 b&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> -ge <span class="variable">$b</span>: a 小于 b&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$a</span> -le <span class="variable">$b</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> -le <span class="variable">$b</span>: a 小于或等于 b&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> -le <span class="variable">$b</span>: a 大于 b&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">1234567891011121314151617181920212223242526272829303132333435363738394041</span><br></pre></td></tr></table></figure><p>执行脚本，输出结果如下所示：</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">10 </span>-eq <span class="number">20</span>: a 不等于 b</span><br><span class="line"><span class="symbol">10 </span>-ne <span class="number">20</span>: a 不等于 b</span><br><span class="line"><span class="symbol">10 </span>-gt <span class="number">20</span>: a 不大于 b</span><br><span class="line"><span class="symbol">10 </span>-lt <span class="number">20</span>: a 小于 b</span><br><span class="line"><span class="symbol">10 </span>-ge <span class="number">20</span>: a 小于 b</span><br><span class="line"><span class="symbol">10 </span>-le <span class="number">20</span>: a 小于或等于 b</span><br><span class="line"><span class="number">123456</span></span><br></pre></td></tr></table></figure><h4 id="布尔运算符">布尔运算符</h4><p>下表列出了常用的布尔运算符，假定变量 a 为 10，变量 b 为 20：</p><table><thead><tr><th>运算符</th><th>说明</th><th>举例</th></tr></thead><tbody><tr><td>!</td><td>非运算，表达式为 true 则返回 false，否则返回 true。</td><td><code>[ ! false ]</code> 返回 true。</td></tr><tr><td>-o</td><td>或运算，有一个表达式为 true 则返回 true。</td><td><code>[ $a -lt 20 -o $b -gt 100 ]</code> 返回 true。</td></tr><tr><td>-a</td><td>与运算，两个表达式都为 true 才返回 true。</td><td><code>[ $a -lt 20 -a $b -gt 100 ]</code> 返回 false。</td></tr></tbody></table><p>布尔运算符实例如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">a=10</span><br><span class="line">b=20</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$a</span> != <span class="variable">$b</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> != <span class="variable">$b</span> : a 不等于 b&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> == <span class="variable">$b</span>: a 等于 b&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$a</span> -lt 100 -a <span class="variable">$b</span> -gt 15 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> 小于 100 且 <span class="variable">$b</span> 大于 15 : 返回 true&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> 小于 100 且 <span class="variable">$b</span> 大于 15 : 返回 false&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$a</span> -lt 100 -o <span class="variable">$b</span> -gt 100 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> 小于 100 或 <span class="variable">$b</span> 大于 100 : 返回 true&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> 小于 100 或 <span class="variable">$b</span> 大于 100 : 返回 false&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$a</span> -lt 5 -o <span class="variable">$b</span> -gt 100 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> 小于 5 或 <span class="variable">$b</span> 大于 100 : 返回 true&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> 小于 5 或 <span class="variable">$b</span> 大于 100 : 返回 false&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">1234567891011121314151617181920212223242526272829</span><br></pre></td></tr></table></figure><p>执行脚本，输出结果如下所示：</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">10 </span>!= <span class="number">20</span> : a 不等于 b</span><br><span class="line"><span class="symbol">10 </span>小于 <span class="number">100</span> 且 <span class="number">20</span> 大于 <span class="number">15</span> : 返回 true</span><br><span class="line"><span class="symbol">10 </span>小于 <span class="number">100</span> 或 <span class="number">20</span> 大于 <span class="number">100</span> : 返回 true</span><br><span class="line"><span class="symbol">10 </span>小于 <span class="number">5</span> 或 <span class="number">20</span> 大于 <span class="number">100</span> : 返回 false</span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure><h4 id="逻辑运算符">逻辑运算符</h4><p>以下介绍 Shell 的逻辑运算符，假定变量 a 为 10，变量 b 为 20:</p><table><thead><tr><th>运算符</th><th>说明</th><th>举例</th></tr></thead><tbody><tr><td>&amp;&amp;</td><td>逻辑的 AND</td><td><code>[[ $a -lt 100 &amp;&amp; $b -gt 100 ]]</code> 返回 false</td></tr><tr><td>||</td><td>逻辑的 OR</td><td>`[[ $a -lt 100</td></tr></tbody></table><p>逻辑运算符实例如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">a=10</span><br><span class="line">b=20</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [[ <span class="variable">$a</span> -lt 100 &amp;&amp; <span class="variable">$b</span> -gt 100 ]]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;返回 true&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;返回 false&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [[ <span class="variable">$a</span> -lt 100 || <span class="variable">$b</span> -gt 100 ]]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;返回 true&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;返回 false&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">123456789101112131415161718</span><br></pre></td></tr></table></figure><p>执行脚本，输出结果如下所示：</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">返回 <span class="literal">false</span></span><br><span class="line">返回 <span class="literal">true</span></span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure><h4 id="字符串运算符">字符串运算符</h4><p>下表列出了常用的字符串运算符，假定变量 a 为 “abc”，变量 b 为 “efg”：</p><table><thead><tr><th>运算符</th><th>说明</th><th>举例</th></tr></thead><tbody><tr><td>=</td><td>检测两个字符串是否相等，相等返回 true。</td><td><code>[ $a = $b ]</code> 返回 false。</td></tr><tr><td>!=</td><td>检测两个字符串是否相等，不相等返回 true。</td><td><code>[ $a != $b ]</code> 返回 true。</td></tr><tr><td>-z</td><td>检测字符串长度是否为0，为0返回 true。</td><td><code>[ -z $a ]</code> 返回 false。</td></tr><tr><td>-n</td><td>检测字符串长度是否为0，不为0返回 true。</td><td><code>[ -n &quot;$a&quot; ]</code> 返回 true。</td></tr><tr><td>$</td><td>检测字符串是否为空，不为空返回 true。</td><td><code>[ $a ]</code> 返回 true。</td></tr></tbody></table><p>字符串运算符实例如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">a=<span class="string">&quot;abc&quot;</span></span><br><span class="line">b=<span class="string">&quot;efg&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$a</span> = <span class="variable">$b</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> = <span class="variable">$b</span> : a 等于 b&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> = <span class="variable">$b</span>: a 不等于 b&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$a</span> != <span class="variable">$b</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> != <span class="variable">$b</span> : a 不等于 b&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> != <span class="variable">$b</span>: a 等于 b&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ -z <span class="variable">$a</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;-z <span class="variable">$a</span> : 字符串长度为 0&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;-z <span class="variable">$a</span> : 字符串长度不为 0&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ -n <span class="string">&quot;<span class="variable">$a</span>&quot;</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;-n <span class="variable">$a</span> : 字符串长度不为 0&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;-n <span class="variable">$a</span> : 字符串长度为 0&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$a</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> : 字符串不为空&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> : 字符串为空&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">1234567891011121314151617181920212223242526272829303132333435</span><br></pre></td></tr></table></figure><p>执行脚本，输出结果如下所示：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">abc</span> <span class="string">=</span> <span class="attr">efg:</span> <span class="string">a</span> <span class="string">不等于</span> <span class="string">b</span></span><br><span class="line"><span class="string">abc</span> <span class="type">!=</span> <span class="attr">efg :</span> <span class="string">a</span> <span class="string">不等于</span> <span class="string">b</span></span><br><span class="line"><span class="string">-z</span> <span class="attr">abc :</span> <span class="string">字符串长度不为</span> <span class="number">0</span></span><br><span class="line"><span class="string">-n</span> <span class="attr">abc :</span> <span class="string">字符串长度不为</span> <span class="number">0</span></span><br><span class="line"><span class="attr">abc :</span> <span class="string">字符串不为空</span></span><br><span class="line"><span class="number">12345</span></span><br></pre></td></tr></table></figure><h4 id="文件测试运算符">文件测试运算符</h4><p>文件测试运算符用于检测 Unix 文件的各种属性。</p><p>属性检测描述如下：</p><table><thead><tr><th>操作符</th><th>说明</th><th>举例</th></tr></thead><tbody><tr><td>-b file</td><td>检测文件是否是块设备文件，如果是，则返回 true。</td><td>[ -b $file ] 返回 false。</td></tr><tr><td>-c file</td><td>检测文件是否是字符设备文件，如果是，则返回 true。</td><td>[ -c $file ] 返回 false。</td></tr><tr><td>-d file</td><td>检测文件是否是目录，如果是，则返回 true。</td><td>[ -d $file ] 返回 false。</td></tr><tr><td>-f file</td><td>检测文件是否是普通文件（既不是目录，也不是设备文件），如果是，则返回 true。</td><td>[ -f $file ] 返回 true。</td></tr><tr><td>-g file</td><td>检测文件是否设置了 SGID 位，如果是，则返回 true。</td><td>[ -g $file ] 返回 false。</td></tr><tr><td>-k file</td><td>检测文件是否设置了粘着位(Sticky Bit)，如果是，则返回 true。</td><td>[ -k $file ] 返回 false。</td></tr><tr><td>-p file</td><td>检测文件是否是有名管道，如果是，则返回 true。</td><td>[ -p $file ] 返回 false。</td></tr><tr><td>-u file</td><td>检测文件是否设置了 SUID 位，如果是，则返回 true。</td><td>[ -u $file ] 返回 false。</td></tr><tr><td>-r file</td><td>检测文件是否可读，如果是，则返回 true。</td><td>[ -r $file ] 返回 true。</td></tr><tr><td>-w file</td><td>检测文件是否可写，如果是，则返回 true。</td><td>[ -w $file ] 返回 true。</td></tr><tr><td>-x file</td><td>检测文件是否可执行，如果是，则返回 true。</td><td>[ -x $file ] 返回 true。</td></tr><tr><td>-s file</td><td>检测文件是否为空（文件大小是否大于0），不为空返回 true。</td><td>[ -s $file ] 返回 true。</td></tr><tr><td>-e file</td><td>检测文件（包括目录）是否存在，如果是，则返回 true。</td><td>[ -e $file ] 返回 true。</td></tr></tbody></table><p>其他检查符：</p><ul class="lvl-0"><li class="lvl-2"><p><strong>-S</strong>: 判断某文件是否 socket。</p></li><li class="lvl-2"><p><strong>-L</strong>: 检测文件是否存在并且是一个符号链接。</p></li></ul><p>变量 file 表示文件 <strong>/var/www/runoob/test.sh</strong>，它的大小为 100 字节，具有 <strong>rwx</strong> 权限。下面的代码，将检测该文件的各种属性：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">file=<span class="string">&quot;/var/www/runoob/test.sh&quot;</span></span><br><span class="line"><span class="keyword">if</span> [ -r <span class="variable">$file</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;文件可读&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;文件不可读&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ -w <span class="variable">$file</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;文件可写&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;文件不可写&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ -x <span class="variable">$file</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;文件可执行&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;文件不可执行&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ -f <span class="variable">$file</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;文件为普通文件&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;文件为特殊文件&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ -d <span class="variable">$file</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;文件是个目录&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;文件不是个目录&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ -s <span class="variable">$file</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;文件不为空&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;文件为空&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ -e <span class="variable">$file</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;文件存在&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;文件不存在&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">123456789101112131415161718192021222324252627282930313233343536373839404142434445</span><br></pre></td></tr></table></figure><p>执行脚本，输出结果如下所示：</p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">文件可读</span><br><span class="line">文件可写</span><br><span class="line">文件可执行</span><br><span class="line">文件为普通文件</span><br><span class="line">文件不是个目录</span><br><span class="line">文件不为空</span><br><span class="line">文件存在</span><br><span class="line"><span class="number">1234567</span></span><br></pre></td></tr></table></figure><h3 id="test命令">test命令</h3><p>Shell中的 test 命令用于检查某个条件是否成立，它可以进行数值、字符和文件三个方面的测试。</p><h4 id="数值测试">数值测试</h4><table><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>-eq</td><td>等于则为真</td></tr><tr><td>-ne</td><td>不等于则为真</td></tr><tr><td>-gt</td><td>大于则为真</td></tr><tr><td>-ge</td><td>大于等于则为真</td></tr><tr><td>-lt</td><td>小于则为真</td></tr><tr><td>-le</td><td>小于等于则为真</td></tr></tbody></table><p>实例演示：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">num1=100</span><br><span class="line">num2=100</span><br><span class="line"><span class="keyword">if</span> <span class="built_in">test</span> $[num1] -eq $[num2]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&#x27;两个数相等！&#x27;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&#x27;两个数不相等！&#x27;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">12345678</span><br></pre></td></tr></table></figure><p>输出结果：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">两个数相等！</span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>代码中的 [] 执行基本的算数运算，如：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">a=5</span><br><span class="line">b=6</span><br><span class="line"></span><br><span class="line">result=$[a+b] <span class="comment"># 注意等号两边不能有空格</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;result 为： <span class="variable">$result</span>&quot;</span></span><br><span class="line">1234567</span><br></pre></td></tr></table></figure><p>结果为:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">result</span> 为： <span class="number">11</span></span><br><span class="line"><span class="attribute">1</span></span><br></pre></td></tr></table></figure><h4 id="字符串测试">字符串测试</h4><table><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>=</td><td>等于则为真</td></tr><tr><td>!=</td><td>不相等则为真</td></tr><tr><td>-z 字符串</td><td>字符串的长度为零则为真</td></tr><tr><td>-n 字符串</td><td>字符串的长度不为零则为真</td></tr></tbody></table><p>实例演示：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">num1=<span class="string">&quot;ru1noob&quot;</span></span><br><span class="line">num2=<span class="string">&quot;runoob&quot;</span></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">test</span> <span class="variable">$num1</span> = <span class="variable">$num2</span></span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&#x27;两个字符串相等!&#x27;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&#x27;两个字符串不相等!&#x27;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">12345678</span><br></pre></td></tr></table></figure><p>输出结果：</p><figure class="highlight erlang-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">两个字符串不相等!</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><h4 id="文件测试">文件测试</h4><table><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>-e 文件名</td><td>如果文件存在则为真</td></tr><tr><td>-r 文件名</td><td>如果文件存在且可读则为真</td></tr><tr><td>-w 文件名</td><td>如果文件存在且可写则为真</td></tr><tr><td>-x 文件名</td><td>如果文件存在且可执行则为真</td></tr><tr><td>-s 文件名</td><td>如果文件存在且至少有一个字符则为真</td></tr><tr><td>-d 文件名</td><td>如果文件存在且为目录则为真</td></tr><tr><td>-f 文件名</td><td>如果文件存在且为普通文件则为真</td></tr><tr><td>-c 文件名</td><td>如果文件存在且为字符型特殊文件则为真</td></tr><tr><td>-b 文件名</td><td>如果文件存在且为块特殊文件则为真</td></tr></tbody></table><p>实例演示：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /bin</span><br><span class="line"><span class="keyword">if</span> <span class="built_in">test</span> -e ./bash</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&#x27;文件已存在!&#x27;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&#x27;文件不存在!&#x27;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">1234567</span><br></pre></td></tr></table></figure><p>输出结果：</p><figure class="highlight erlang-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">文件已存在!</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>另外，Shell还提供了与( -a )、或( -o )、非( ! )三个逻辑操作符用于将测试条件连接起来，其优先级为：“!“最高，”-a&quot;次之，”-o&quot;最低。例如：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /bin</span><br><span class="line"><span class="keyword">if</span> <span class="built_in">test</span> -e ./notFile -o -e ./bash</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&#x27;至少有一个文件存在!&#x27;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&#x27;两个文件都不存在&#x27;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">1234567</span><br></pre></td></tr></table></figure><p>输出结果：</p><figure class="highlight erlang-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">至少有一个文件存在!</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><h3 id="Shell-流程控制">Shell 流程控制</h3><h4 id="if-else判断语句">if else判断语句</h4><p>if 语句语法格式：</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> condition</span><br><span class="line">then</span><br><span class="line">    <span class="keyword">command</span>1 </span><br><span class="line">    <span class="keyword">command</span>2</span><br><span class="line">    <span class="string">...</span></span><br><span class="line">    <span class="keyword">command</span>N </span><br><span class="line">fi</span><br><span class="line">1234567</span><br></pre></td></tr></table></figure><p>写成一行（适用于终端命令提示符）：</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">if</span> [ $(ps -ef | grep -c <span class="string">&quot;ssh&quot;</span>) -gt <span class="number">1</span> ]; <span class="attribute">then</span> echo <span class="string">&quot;true&quot;</span>; <span class="attribute">fi</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>if else 语法格式：</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> condition</span><br><span class="line">then</span><br><span class="line">    <span class="keyword">command</span>1 </span><br><span class="line">    <span class="keyword">command</span>2</span><br><span class="line">    <span class="string">...</span></span><br><span class="line">    <span class="keyword">command</span>N</span><br><span class="line">else</span><br><span class="line">    <span class="keyword">command</span></span><br><span class="line">fi</span><br><span class="line">123456789</span><br></pre></td></tr></table></figure><p>if else-if else 语法格式：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> condition1</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    command1</span><br><span class="line"><span class="keyword">elif</span> condition2 </span><br><span class="line"><span class="keyword">then</span> </span><br><span class="line">    command2</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    commandN</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">123456789</span><br></pre></td></tr></table></figure><p>以下实例判断两个变量是否相等：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">a=10</span><br><span class="line">b=20</span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$a</span> == <span class="variable">$b</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;a 等于 b&quot;</span></span><br><span class="line"><span class="keyword">elif</span> [ <span class="variable">$a</span> -gt <span class="variable">$b</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;a 大于 b&quot;</span></span><br><span class="line"><span class="keyword">elif</span> [ <span class="variable">$a</span> -lt <span class="variable">$b</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;a 小于 b&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;没有符合的条件&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">1234567891011121314</span><br></pre></td></tr></table></figure><p>输出结果：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">a</span> 小于 <span class="selector-tag">b</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>if else语句经常与test命令结合使用，如下所示：</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">num1=<span class="symbol">$</span>[<span class="number">2</span>*<span class="number">3</span>]</span><br><span class="line">num2=<span class="symbol">$</span>[<span class="number">1</span>+<span class="number">5</span>]</span><br><span class="line"><span class="keyword">if</span> test <span class="symbol">$</span>[num1] -<span class="keyword">eq</span> <span class="symbol">$</span>[num2]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    echo <span class="string">&#x27;两个数字相等!&#x27;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    echo <span class="string">&#x27;两个数字不相等!&#x27;</span></span><br><span class="line">fi</span><br><span class="line"><span class="number">12345678</span></span><br></pre></td></tr></table></figure><p>输出结果：</p><figure class="highlight erlang-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">两个数字相等!</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><h4 id="for循环">for循环</h4><p>for循环一般格式为：</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">for var in item1 item2 <span class="string">...</span> itemN</span><br><span class="line">do</span><br><span class="line">    <span class="keyword">command</span>1</span><br><span class="line">    <span class="keyword">command</span>2</span><br><span class="line">    <span class="string">...</span></span><br><span class="line">    <span class="keyword">command</span>N</span><br><span class="line">done</span><br><span class="line">1234567</span><br></pre></td></tr></table></figure><p>写成一行：</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">for var in item1 item2 <span class="string">...</span> itemN; do <span class="keyword">command</span>1; <span class="keyword">command</span>2… done;</span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>例如，顺序输出当前列表中的数字：</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">for</span> loop in <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span></span><br><span class="line"><span class="attribute">do</span></span><br><span class="line">    <span class="attribute">echo</span> <span class="string">&quot;The value is: $loop&quot;</span></span><br><span class="line"><span class="attribute">done</span></span><br><span class="line"><span class="attribute">1234</span></span><br></pre></td></tr></table></figure><p>输出结果：</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">The value <span class="keyword">is</span>: <span class="number">1</span></span><br><span class="line">The value <span class="keyword">is</span>: <span class="number">2</span></span><br><span class="line">The value <span class="keyword">is</span>: <span class="number">3</span></span><br><span class="line">The value <span class="keyword">is</span>: <span class="number">4</span></span><br><span class="line">The value <span class="keyword">is</span>: <span class="number">5</span></span><br><span class="line"><span class="number">12345</span></span><br></pre></td></tr></table></figure><p>顺序输出字符串中的字符：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> str <span class="keyword">in</span> <span class="string">&#x27;This is a string&#x27;</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$str</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">1234</span><br></pre></td></tr></table></figure><p>输出结果：</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">This <span class="keyword">is</span> a <span class="built_in">string</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><h4 id="while循环">while循环</h4><p>while循环格式为：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> condition</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">command</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">1234</span><br></pre></td></tr></table></figure><p>示例：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">int=1</span><br><span class="line"><span class="keyword">while</span>(( <span class="variable">$int</span>&lt;=<span class="number">5</span> ))</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$int</span></span><br><span class="line">    <span class="built_in">let</span> <span class="string">&quot;int++&quot;</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">1234567</span><br></pre></td></tr></table></figure><p>运行脚本，输出：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">12345</span><br></pre></td></tr></table></figure><p>while循环可用于读取键盘信息。下面的例子中，输入信息被设置为变量FILM，按<code>Ctrl-D</code>结束循环。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;按下 &lt;CTRL-D&gt; 退出&#x27;</span></span><br><span class="line"><span class="built_in">echo</span> -n <span class="string">&#x27;输入你最喜欢的网站名: &#x27;</span></span><br><span class="line"><span class="keyword">while</span> <span class="built_in">read</span> FILM</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;是的！<span class="variable">$FILM</span> 是一个好网站&quot;</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">123456</span><br></pre></td></tr></table></figure><p>运行脚本，输出类似下面：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">按下 <span class="tag">&lt;<span class="name">CTRL-D</span>&gt;</span> 退出</span><br><span class="line">输入你最喜欢的网站名:淘宝</span><br><span class="line">是的！淘宝 是一个好网站</span><br><span class="line">123</span><br></pre></td></tr></table></figure><h4 id="无限循环">无限循环</h4><p>无限循环语法格式：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> :</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">command</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">1234</span><br></pre></td></tr></table></figure><p>或者</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> <span class="literal">true</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">command</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">1234</span><br></pre></td></tr></table></figure><p>或者</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">for (( <span class="comment">; ; ))</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><h4 id="until-循环">until 循环</h4><p>until 循环执行一系列命令直至条件为 true 时停止。</p><p>until 循环与 while 循环在处理方式上刚好相反。</p><p>一般 while 循环优于 until 循环，但在某些时候—也只是极少数情况下，until 循环更加有用。</p><p>until 语法格式:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">until</span> condition</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">command</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">1234</span><br></pre></td></tr></table></figure><p>condition 一般为条件表达式，如果返回值为 false，则继续执行循环体内的语句，否则跳出循环。</p><p>以下实例我们使用 until 命令来输出 0 ~ 9 的数字：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">a=0</span><br><span class="line"></span><br><span class="line"><span class="keyword">until</span> [ ! <span class="variable">$a</span> -lt 10 ]</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="variable">$a</span></span><br><span class="line">   a=`<span class="built_in">expr</span> <span class="variable">$a</span> + 1`</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">123456789</span><br></pre></td></tr></table></figure><p>运行结果：</p><p>输出结果为：</p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="number">6</span></span><br><span class="line"><span class="number">7</span></span><br><span class="line"><span class="number">8</span></span><br><span class="line"><span class="number">9</span></span><br><span class="line"><span class="number">12345678910</span></span><br></pre></td></tr></table></figure><h4 id="case">case</h4><p>Shell case语句为多选择语句。可以用case语句匹配一个值与一个模式，如果匹配成功，执行相匹配的命令。case语句格式如下：</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">case 值 in</span><br><span class="line">模式1)</span><br><span class="line">    <span class="keyword">command</span>1</span><br><span class="line">    <span class="keyword">command</span>2</span><br><span class="line">    <span class="string">...</span></span><br><span class="line">    <span class="keyword">command</span>N</span><br><span class="line">    ;;</span><br><span class="line">模式2）</span><br><span class="line">    <span class="keyword">command</span>1</span><br><span class="line">    <span class="keyword">command</span>2</span><br><span class="line">    <span class="string">...</span></span><br><span class="line">    <span class="keyword">command</span>N</span><br><span class="line">    ;;</span><br><span class="line">esac</span><br><span class="line">1234567891011121314</span><br></pre></td></tr></table></figure><p>下面的脚本提示输入1到4，与每一种模式进行匹配：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;输入 1 到 4 之间的数字:&#x27;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;你输入的数字为:&#x27;</span></span><br><span class="line"><span class="built_in">read</span> aNum</span><br><span class="line"><span class="keyword">case</span> <span class="variable">$aNum</span> <span class="keyword">in</span></span><br><span class="line">    1)  <span class="built_in">echo</span> <span class="string">&#x27;你选择了 1&#x27;</span></span><br><span class="line">    ;;</span><br><span class="line">    2)  <span class="built_in">echo</span> <span class="string">&#x27;你选择了 2&#x27;</span></span><br><span class="line">    ;;</span><br><span class="line">    3)  <span class="built_in">echo</span> <span class="string">&#x27;你选择了 3&#x27;</span></span><br><span class="line">    ;;</span><br><span class="line">    4)  <span class="built_in">echo</span> <span class="string">&#x27;你选择了 4&#x27;</span></span><br><span class="line">    ;;</span><br><span class="line">    *)  <span class="built_in">echo</span> <span class="string">&#x27;你没有输入 1 到 4 之间的数字&#x27;</span></span><br><span class="line">    ;;</span><br><span class="line"><span class="keyword">esac</span></span><br><span class="line">123456789101112131415</span><br></pre></td></tr></table></figure><p>输入不同的内容，会有不同的结果，例如：</p><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">输入 1 到 4 之间的数字</span><span class="punctuation">:</span></span><br><span class="line"><span class="attribute">你输入的数字为</span><span class="punctuation">:</span></span><br><span class="line">3</span><br><span class="line">你选择了 3</span><br><span class="line">1234</span><br></pre></td></tr></table></figure><h4 id="跳出循环">跳出循环</h4><p>在循环过程中，有时候需要在未达到循环结束条件时强制跳出循环，Shell使用两个命令来实现该功能：break和continue。</p><p>break命令允许跳出所有循环（终止执行后面的所有循环）。</p><p>下面的例子中，脚本进入死循环直至用户输入数字大于5。要跳出这个循环，返回到shell提示符下，需要使用break命令。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="keyword">while</span> :</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> -n <span class="string">&quot;输入 1 到 5 之间的数字:&quot;</span></span><br><span class="line">    <span class="built_in">read</span> aNum</span><br><span class="line">    <span class="keyword">case</span> <span class="variable">$aNum</span> <span class="keyword">in</span></span><br><span class="line">        1|2|3|4|5) <span class="built_in">echo</span> <span class="string">&quot;你输入的数字为 <span class="variable">$aNum</span>!&quot;</span></span><br><span class="line">        ;;</span><br><span class="line">        *) <span class="built_in">echo</span> <span class="string">&quot;你输入的数字不是 1 到 5 之间的! 游戏结束&quot;</span></span><br><span class="line">            <span class="built_in">break</span></span><br><span class="line">        ;;</span><br><span class="line">    <span class="keyword">esac</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">12345678910111213</span><br></pre></td></tr></table></figure><p>执行以上代码，输出结果为：</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">输入<span class="number"> 1 </span>到<span class="number"> 5 </span>之间的数字:3</span><br><span class="line">你输入的数字为 3!</span><br><span class="line">输入<span class="number"> 1 </span>到<span class="number"> 5 </span>之间的数字:7</span><br><span class="line">你输入的数字不是<span class="number"> 1 </span>到<span class="number"> 5 </span>之间的! 游戏结束</span><br><span class="line">1234</span><br></pre></td></tr></table></figure><p>continue命令与break命令类似，只有一点差别，它不会跳出所有循环，仅仅跳出当前循环。</p><h3 id="Shell输入-输出重定向">Shell输入/输出重定向</h3><p>重定向命令列表如下：</p><table><thead><tr><th>命令</th><th>说明</th></tr></thead><tbody><tr><td>command &gt; file</td><td>将输出重定向到 file。</td></tr><tr><td>command &lt; file</td><td>将输入重定向到 file。</td></tr><tr><td>command &gt;&gt; file</td><td>将输出以追加的方式重定向到 file。</td></tr><tr><td>n &gt; file</td><td>将文件描述符为 n 的文件重定向到 file。</td></tr><tr><td>n &gt;&gt; file</td><td>将文件描述符为 n 的文件以追加的方式重定向到 file。</td></tr><tr><td>n &gt;&amp; m</td><td>将输出文件 m 和 n 合并。</td></tr><tr><td>n &lt;&amp; m</td><td>将输入文件 m 和 n 合并。</td></tr><tr><td>&lt;&lt; tag</td><td>将开始标记 tag 和结束标记 tag 之间的内容作为输入。</td></tr></tbody></table><blockquote><p>需要注意的是文件描述符 0 通常是标准输入（STDIN），1 是标准输出（STDOUT），2 是标准错误输出（STDERR）。</p></blockquote><hr><h4 id="输出重定向">输出重定向</h4><p>重定向一般通过在命令间插入特定的符号来实现。特别的，这些符号的语法如下所示:</p><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">comma<span class="symbol">nd1</span> &gt; file<span class="number">1</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>上面这个命令执行command1然后将输出的内容存入file1。</p><p>注意任何file1内的已经存在的内容将被新内容替代。如果要将新内容添加在文件末尾，请使用&gt;&gt;操作符。</p><p>输出重定向会覆盖文件内容：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> <span class="string">&quot;www.baidu.com&quot;</span> &gt; <span class="built_in">users</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> <span class="built_in">users</span></span></span><br><span class="line">www.baidu.com</span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash">1234</span></span><br></pre></td></tr></table></figure><p>如果不希望文件内容被覆盖，可以使用 &gt;&gt; 追加到文件末尾，例如：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> <span class="string">&quot;www.baidu.com&quot;</span> &gt;&gt; <span class="built_in">users</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> <span class="built_in">users</span></span></span><br><span class="line">www.baidu.com</span><br><span class="line">www.baidu.com</span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash">12345</span></span><br></pre></td></tr></table></figure><h4 id="输入重定向">输入重定向</h4><p>和输出重定向一样，Unix 命令也可以从文件获取输入，语法为：</p><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">comma<span class="symbol">nd1</span> &lt; file<span class="number">1</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>这样，本来需要从键盘获取输入的命令会转移到文件读取内容。</p><p>注意：输出重定向是大于号(&gt;)，输入重定向是小于号(&lt;)。</p><p>统计 users 文件的行数,执行以下命令：</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">python<span class="variable">@ubuntu</span><span class="symbol">:~/test</span><span class="variable">$ </span>wc -l test </span><br><span class="line"><span class="number">4</span> test</span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure><p>也可以将输入重定向到 users 文件：</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">python<span class="variable">@ubuntu</span><span class="symbol">:~/test</span><span class="variable">$ </span>wc -l &lt;test</span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure><p>注意：上面两个例子的结果不同：第一个例子，会输出文件名；第二个不会，因为它仅仅知道从标准输入读取内容。</p><p>同时替换输入和输出，执行command1，从文件infile读取内容，然后将输出写入到outfile中:</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">command1 &lt; <span class="keyword">infile</span> &gt; <span class="keyword">outfile</span></span><br><span class="line">1</span><br></pre></td></tr></table></figure><h4 id="重定向深入讲解">重定向深入讲解</h4><p>一般情况下，每个 Unix/Linux 命令运行时都会打开三个文件：</p><ul class="lvl-0"><li class="lvl-2"><p>标准输入文件(stdin)：stdin的文件描述符为0，Unix程序默认从stdin读取数据。</p></li><li class="lvl-2"><p>标准输出文件(stdout)：stdout 的文件描述符为1，Unix程序默认向stdout输出数据。</p></li><li class="lvl-2"><p>标准错误文件(stderr)：stderr的文件描述符为2，Unix程序会向stderr流中写入错误信息。</p></li></ul><p>默认情况下，command &gt; file 将 stdout 重定向到 file，command &lt; file 将stdin 重定向到 file。</p><p>如果希望 stderr 重定向到 file，可以这样写：</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="keyword">command</span> <span class="number">2</span> &gt; <span class="keyword">file</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>如果希望 stderr 追加到 file 文件末尾，可以这样写：</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="keyword">command</span> <span class="number">2</span> &gt;&gt; <span class="keyword">file</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p><strong>2</strong> 表示标准错误文件(stderr)。</p><p>如果希望将 stdout 和 stderr 合并后重定向到 file，可以这样写：</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="keyword">command</span> &gt; <span class="keyword">file</span> <span class="number">2</span>&gt;&amp;<span class="number">1</span></span><br><span class="line">或者</span><br><span class="line">$ <span class="keyword">command</span> &gt;&gt; <span class="keyword">file</span> <span class="number">2</span>&gt;&amp;<span class="number">1</span></span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure><p>如果希望对 stdin 和 stdout 都重定向，可以这样写：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">command</span> &lt; file1 &gt;file2</span></span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>command 命令将 stdin 重定向到 file1，将 stdout 重定向到 file2。</p><h4 id="Here-Document">Here Document</h4><p>Here Document 是 Shell 中的一种特殊的重定向方式，用来将输入重定向到一个交互式 Shell 脚本或程序。</p><p>它的基本的形式如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">command</span> &lt;&lt; <span class="string">delimiter</span></span><br><span class="line"><span class="string">    document</span></span><br><span class="line"><span class="string">delimiter</span></span><br><span class="line">123</span><br></pre></td></tr></table></figure><p>它的作用是将两个 delimiter 之间的内容(document) 作为输入传递给 command。</p><p>注意：结尾的delimiter 一定要顶格写，前面不能有任何字符，后面也不能有任何字符，包括空格和 tab 缩进。</p><p>在命令行中通过 wc -l 命令计算 Here Document 的行数：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">wc</span> -l &lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string">    欢迎来到</span></span><br><span class="line"><span class="string">    菜鸟教程</span></span><br><span class="line"><span class="string">    www.runoob.com</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line">3          <span class="comment"># 输出结果为 3 行</span></span><br><span class="line">$</span><br><span class="line">1234567</span><br></pre></td></tr></table></figure><h4 id="dev-null-文件">/dev/null 文件</h4><p>如果希望执行某个命令，但又不希望在屏幕上显示输出结果，那么可以将输出重定向到 /dev/null：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">command</span> &gt; /dev/null</span></span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>/dev/null 是一个特殊的文件，写入到它的内容都会被丢弃；如果尝试从该文件读取内容，那么什么也读不到。但是 /dev/null 文件非常有用，将命令的输出重定向到它，会起到&quot;禁止输出&quot;的效果。</p><p>如果希望屏蔽 stdout 和 stderr，可以这样写：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">command</span> &gt; /dev/null 2&gt;&amp;1</span></span><br><span class="line">1</span><br></pre></td></tr></table></figure><p>0 是标准输入（STDIN），1 是标准输出（STDOUT），2 是标准错误输出（STDERR）。</p><h3 id="实例">实例</h3><h4 id="杨辉三角：">杨辉三角：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">test</span> -z <span class="variable">$1</span>) ;<span class="keyword">then</span> </span><br><span class="line"> <span class="built_in">read</span> -p <span class="string">&quot;Input high Int Lines:&quot;</span> high </span><br><span class="line"><span class="keyword">else</span> </span><br><span class="line"> high=<span class="variable">$1</span> </span><br><span class="line"><span class="keyword">fi</span> </span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">test</span> -z <span class="variable">$2</span>) ;<span class="keyword">then</span> </span><br><span class="line"> space=4</span><br><span class="line"><span class="keyword">else</span> </span><br><span class="line"> space=<span class="variable">$2</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">printspace</span></span>()&#123;</span><br><span class="line">  <span class="comment">#空位填充</span></span><br><span class="line">  <span class="keyword">for</span>((z=<span class="number">1</span>;z&lt;=<span class="variable">$1</span>;z++));<span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> -n <span class="string">&quot; &quot;</span></span><br><span class="line">  <span class="keyword">done</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">a[0]=1     </span><br><span class="line"><span class="keyword">for</span>((i=<span class="number">0</span>;i&lt;=high;i++));<span class="keyword">do</span></span><br><span class="line">  <span class="comment">#产生当前列数据数组</span></span><br><span class="line">  <span class="keyword">for</span> ((j=<span class="variable">$i</span>;j&gt;<span class="number">0</span>;j--));<span class="keyword">do</span> </span><br><span class="line">    ((a[<span class="variable">$j</span>]+=a[<span class="variable">$j</span>-<span class="number">1</span>])) </span><br><span class="line">  <span class="keyword">done</span></span><br><span class="line">  printspace $(((<span class="variable">$high</span>-<span class="variable">$i</span>)*<span class="variable">$space</span>/<span class="number">2</span>))</span><br><span class="line">  <span class="keyword">for</span> ((j=<span class="number">0</span>;j&lt;=<span class="variable">$i</span>;j++));<span class="keyword">do</span></span><br><span class="line">    num=$((<span class="variable">$space</span>-<span class="variable">$&#123;#a[$j]&#125;</span>))</span><br><span class="line">    printspace $((<span class="variable">$num</span>/<span class="number">2</span>))</span><br><span class="line">    <span class="built_in">echo</span> -n <span class="variable">$&#123;a[$j]&#125;</span></span><br><span class="line">    printspace $((<span class="variable">$num</span>-<span class="variable">$num</span>/<span class="number">2</span>))</span><br><span class="line">  <span class="keyword">done</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">1234567891011121314151617181920212223242526272829303132333435</span><br></pre></td></tr></table></figure><h4 id="sum-max">sum()&amp;max():</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;shell的函数返回值只能为0~255的整数，高位自动丢弃&quot;</span></span><br><span class="line"><span class="function"><span class="title">sum</span></span>()&#123;</span><br><span class="line"> <span class="built_in">sum</span>=0</span><br><span class="line"> <span class="keyword">for</span> i <span class="keyword">in</span> <span class="variable">$@</span></span><br><span class="line"> <span class="keyword">do</span></span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">test</span> <span class="variable">$i</span> -ne <span class="variable">$1</span>;<span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> -n <span class="string">&quot;+&quot;</span></span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line">  <span class="built_in">echo</span> -n <span class="string">&quot;<span class="variable">$i</span>&quot;</span></span><br><span class="line">  <span class="built_in">sum</span>=$((<span class="variable">$sum</span>+<span class="variable">$i</span>))</span><br><span class="line"> <span class="keyword">done</span></span><br><span class="line"> <span class="built_in">echo</span> <span class="string">&quot;=<span class="variable">$sum</span>&quot;</span></span><br><span class="line"> <span class="built_in">return</span> $((<span class="variable">$sum</span>))</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">sum</span> <span class="variable">$@</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;‘sum()’函数返回值：&quot;</span>$?</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">max</span></span>()&#123;</span><br><span class="line"> max=0</span><br><span class="line"> <span class="keyword">for</span> i <span class="keyword">in</span> <span class="variable">$@</span>;<span class="keyword">do</span></span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">test</span> <span class="variable">$i</span> -ge <span class="variable">$max</span>;<span class="keyword">then</span></span><br><span class="line">    max=<span class="variable">$i</span></span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line"> <span class="keyword">done</span></span><br><span class="line"> <span class="built_in">echo</span> <span class="string">&quot;参数最大值：<span class="variable">$max</span>&quot;</span></span><br><span class="line"> <span class="built_in">return</span> $((<span class="variable">$max</span>))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">max <span class="variable">$@</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;‘max()’函数返回值：&quot;</span>$?</span><br><span class="line"></span><br><span class="line">12345678910111213141516171819202122232425262728293031323334</span><br></pre></td></tr></table></figure><h4 id="99乘法表：">99乘法表：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> &#123;1..9&#125;;<span class="keyword">do</span></span><br><span class="line"> <span class="keyword">for</span>((j=<span class="number">1</span>;j&lt;=i;j++));<span class="keyword">do</span></span><br><span class="line">  <span class="built_in">echo</span> -en <span class="string">&quot;<span class="variable">$i</span>*<span class="variable">$j</span>=<span class="subst">$(($i*$j)</span>)\t&quot;</span></span><br><span class="line"> <span class="keyword">done</span></span><br><span class="line"> <span class="built_in">echo</span> <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> a <span class="keyword">in</span> &#123;1..9&#125;;<span class="keyword">do</span></span><br><span class="line">    <span class="keyword">for</span> b <span class="keyword">in</span> &#123;0..9&#125;;<span class="keyword">do</span></span><br><span class="line">        <span class="keyword">for</span> c <span class="keyword">in</span> &#123;0..9&#125;;<span class="keyword">do</span></span><br><span class="line">            number1=$((a*<span class="number">100</span>+b*<span class="number">10</span>+c))</span><br><span class="line">            number2=$((a**<span class="number">3</span>+b**<span class="number">3</span>+c**<span class="number">3</span>))</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">test</span> <span class="variable">$number1</span> -eq <span class="variable">$number2</span>; <span class="keyword">then</span></span><br><span class="line">                <span class="built_in">echo</span> <span class="string">&quot;Found number <span class="variable">$number1</span>&quot;</span></span><br><span class="line">            <span class="keyword">fi</span></span><br><span class="line">        <span class="keyword">done</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">1234567891011121314151617181920</span><br></pre></td></tr></table></figure><h2 id="虚拟机">虚拟机</h2><h3 id="三种网络模式">三种网络模式</h3><p><strong>桥接</strong></p><p>在网络网卡上安装了一个桥接协议，让这块网卡处于混杂模式，可以同时连接多个网络的做法。</p><p>桥接下，类似于把物理主机虚拟为一个交换机，所有桥接设置的虚拟机连接到这个交换机的一个接口上，物理主机也同样查在这个交换机当中，所以所有桥接下网卡与网卡都是交换模式的，相互可以访问而不干扰。</p><p><img src="/images/loading.jpeg" data-original="/posts/2c8b313c//Users/Administrator/Corazon/blog/source/_posts/%E3%80%90Linux%E3%80%91%E6%80%BB%E7%BB%93/20061909046cf0a4cafbe52ded65acac.jpeg" alt="img"></p><p><strong>Host-only</strong>（仅与主机通信）</p><p>虚拟机使用VMnet1网卡与主机单独组网,主机对于虚拟机相当于路由器</p><p><img src="/images/loading.jpeg" data-original="/posts/2c8b313c//Users/Administrator/Corazon/blog/source/_posts/%E3%80%90Linux%E3%80%91%E6%80%BB%E7%BB%93/5b8910196f03cc08e8e20c7619817a65.jpeg" alt="img"></p><p><strong>NAT</strong></p><p>虚拟机使用VMnet8网卡与主机单独组网,主机对于虚拟机相当于路由器，VMnet8网卡通过NAT地址转换协议与物理机网卡通信</p><p><img src="/images/loading.jpeg" data-original="/posts/2c8b313c//Users/Administrator/Corazon/blog/source/_posts/%E3%80%90Linux%E3%80%91%E6%80%BB%E7%BB%93/ceb6926bc18279d63927d02d1214e341.jpeg" alt="img"></p><p><img src="/images/loading.jpeg" data-original="/posts/2c8b313c//Users/Administrator/Corazon/blog/source/_posts/%E3%80%90Linux%E3%80%91%E6%80%BB%E7%BB%93/3a7cb1671fbea88783a3a741a12ab342.jpeg" alt="img"></p><h3 id="常见问题">常见问题</h3><h4 id="修改静态地址后发现无法ping外网">修改静态地址后发现无法ping外网</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">需要设置网关<span class="built_in"></span></span><br><span class="line"><span class="built_in">route </span><span class="built_in">add</span><span class="built_in"> default </span>gw 192.168.33.1</span><br><span class="line">添加nameserver</span><br><span class="line">vi /etc/resolv.conf</span><br><span class="line">nameserver 192.168.33.1</span><br><span class="line">12345</span><br></pre></td></tr></table></figure><h4 id="虚拟机克隆后eth0消失">虚拟机克隆后eth0消失</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">直接修改  <span class="regexp">/etc/</span>sysconfig<span class="regexp">/network-script/i</span>fcfg-eth0</span><br><span class="line">删掉UUID  HWADDR</span><br><span class="line">配置静态地址</span><br><span class="line">然后：</span><br><span class="line">rm -rf 　<span class="regexp">/etc/u</span>dev<span class="regexp">/rules.d/</span><span class="number">70</span>-persistent-net.rules</span><br><span class="line">然后 reboot</span><br><span class="line"><span class="number">123456</span></span><br></pre></td></tr></table></figure></div><div><div><div style="text-align:center;color:#ccc;font-size:14px">-------------本文结束<i class="fa fa-heart"></i>感谢阅读-------------</div></div></div><div class="reward-container"><div>创作不易，您的支持将鼓励我继续创作！</div><button onclick='var qr=document.getElementById("qr");qr.style.display="none"===qr.style.display?"block":"none"'>打赏</button><div id="qr" style="display:none"><div style="display:inline-block"><img src="/images/loading.jpeg" data-original="/images/wechatpay.png" alt="Corazon 微信支付"><p>微信支付</p></div><div style="display:inline-block"><img src="/images/loading.jpeg" data-original="/images/alipay.jpg" alt="Corazon 支付宝"><p>支付宝</p></div></div></div><div><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者： </strong>Corazon</li><li class="post-copyright-link"><strong>本文链接：</strong> <a href="http://mcorazon.top/posts/2c8b313c/" title="【Linux】Linux总结">http://mcorazon.top/posts/2c8b313c/</a></li><li class="post-copyright-license"><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><footer class="post-footer"><div class="post-tags"><a href="/tags/Linux/" rel="tag"><i class="fa fa-tag"></i> Linux</a></div><div class="post-nav"><div class="post-nav-item"><a href="/posts/e3e8d0c4/" rel="prev" title="【Hexo】更高级的Markdown渲染器——hexo-renderer-markdown-it"><i class="fa fa-chevron-left"></i> 【Hexo】更高级的Markdown渲染器——hexo-renderer-markdown-it</a></div><div class="post-nav-item"><a href="/posts/4fb642e/" rel="next" title="【Hexo】博客复制粘贴">【Hexo】博客复制粘贴 <i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class="comment-button-group"><a class="btn comment-button gitalk">gitalk</a> <a class="btn comment-button valine">valine</a></div><div class="comment-position gitalk"><div class="comments" id="gitalk-container"></div></div><div class="comment-position valine"><div class="comments" id="valine-comments"></div></div><script>(function() {
          let commentButton = document.querySelectorAll('.comment-button');
            commentButton.forEach(element => {
            let commentClass = element.classList[2];
            element.addEventListener('click', () => {
              commentButton.forEach(rmActive => rmActive.classList.remove('active'));
              element.classList.add('active');
              document.querySelectorAll('.comment-position').forEach(rmActive => rmActive.classList.remove('active'));
              document.querySelector(`.comment-position.${commentClass}`).classList.add('active');
              if (CONFIG.comments.storage) {
                localStorage.setItem('comments_active', commentClass);
              }
            });
          });
          let { activeClass } = CONFIG.comments;
          if (CONFIG.comments.storage) {
            activeClass = localStorage.getItem('comments_active') || activeClass;
          }
          if (activeClass) {
            let activeButton = document.querySelector(`.comment-button.${activeClass}`);
            if (activeButton) {
              activeButton.click();
            }
          }
        })();</script><script>window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc">文章目录</li><li class="sidebar-nav-overview">站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Linux%E5%91%BD%E4%BB%A4"><span class="nav-number">1.</span> <span class="nav-text">Linux命令</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Linux-%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86"><span class="nav-number">1.1.</span> <span class="nav-text">Linux 磁盘管理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#df"><span class="nav-number">1.1.1.</span> <span class="nav-text">df</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#du"><span class="nav-number">1.1.2.</span> <span class="nav-text">du</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#fdisk"><span class="nav-number">1.1.3.</span> <span class="nav-text">fdisk</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%A3%81%E7%9B%98%E6%A0%BC%E5%BC%8F%E5%8C%96"><span class="nav-number">1.1.4.</span> <span class="nav-text">磁盘格式化</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%A3%81%E7%9B%98%E6%A3%80%E9%AA%8C"><span class="nav-number">1.1.5.</span> <span class="nav-text">磁盘检验</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD%E4%B8%8E%E5%8D%B8%E9%99%A4"><span class="nav-number">1.1.6.</span> <span class="nav-text">磁盘挂载与卸除</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Linux%E7%AE%A1%E9%81%93%E5%91%BD%E4%BB%A4"><span class="nav-number">1.2.</span> <span class="nav-text">Linux管道命令</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#wc-%E7%BB%9F%E8%AE%A1%E5%AD%97%E6%95%B0"><span class="nav-number">1.2.1.</span> <span class="nav-text">wc - 统计字数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#cut-%E5%88%97%E9%80%89%E5%8F%96%E5%91%BD%E4%BB%A4"><span class="nav-number">1.2.2.</span> <span class="nav-text">cut - 列选取命令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#grep-%E8%A1%8C%E9%80%89%E5%8F%96%E5%91%BD%E4%BB%A4"><span class="nav-number">1.2.3.</span> <span class="nav-text">grep - 行选取命令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#sort-%E6%8E%92%E5%BA%8F"><span class="nav-number">1.2.4.</span> <span class="nav-text">sort - 排序</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#uniq-%E5%8E%BB%E9%87%8D"><span class="nav-number">1.2.5.</span> <span class="nav-text">uniq - 去重</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#tee-%E5%90%8C%E6%97%B6%E8%BE%93%E5%87%BA%E5%A4%9A%E4%B8%AA%E6%96%87%E4%BB%B6"><span class="nav-number">1.2.6.</span> <span class="nav-text">tee - 同时输出多个文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#tr-%E6%9B%BF%E6%8D%A2%E6%8C%87%E5%AE%9A%E7%9A%84%E5%AD%97%E7%AC%A6"><span class="nav-number">1.2.7.</span> <span class="nav-text">tr - 替换指定的字符</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#join-%E6%96%87%E4%BB%B6%E6%8C%89%E8%A1%8C%E8%BF%9E%E6%8E%A5"><span class="nav-number">1.2.8.</span> <span class="nav-text">join - 文件按行连接</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#paste-%E5%B0%86%E5%A4%9A%E4%B8%AA%E6%96%87%E4%BB%B6%E5%AF%B9%E5%BA%94%E8%A1%8C%E9%93%BE%E6%8E%A5%E5%9C%A8%E4%B8%80%E8%B5%B7"><span class="nav-number">1.2.9.</span> <span class="nav-text">paste-将多个文件对应行链接在一起</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#split-%E6%96%87%E4%BB%B6%E5%88%87%E5%89%B2"><span class="nav-number">1.2.10.</span> <span class="nav-text">split - 文件切割</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#xargs-%E5%8F%82%E6%95%B0%E4%BB%A3%E6%8D%A2"><span class="nav-number">1.2.11.</span> <span class="nav-text">xargs - 参数代换</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#linux%E5%91%BD%E4%BB%A4%E7%BB%83%E4%B9%A0"><span class="nav-number">2.</span> <span class="nav-text">linux命令练习</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="nav-number">2.1.</span> <span class="nav-text">常用命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B3%BB%E7%BB%9F%E5%91%BD%E4%BB%A4"><span class="nav-number">2.2.</span> <span class="nav-text">系统命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E7%89%88%E6%9C%AC%E4%BF%A1%E6%81%AF"><span class="nav-number">2.3.</span> <span class="nav-text">查看版本信息</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%94%A8%E6%88%B7%E5%92%8C%E7%BB%84"><span class="nav-number">2.4.</span> <span class="nav-text">用户和组</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9D%83%E9%99%90"><span class="nav-number">2.5.</span> <span class="nav-text">权限</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%AE%E5%8A%A9%E6%96%87%E6%A1%A3"><span class="nav-number">2.6.</span> <span class="nav-text">帮助文档</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#VIM"><span class="nav-number">2.7.</span> <span class="nav-text">VIM</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E6%89%BE"><span class="nav-number">2.8.</span> <span class="nav-text">查找</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%89%93%E5%8C%85%E4%B8%8E%E5%8E%8B%E7%BC%A9"><span class="nav-number">2.9.</span> <span class="nav-text">打包与压缩</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E9%87%8D%E5%AE%9A%E5%90%91"><span class="nav-number">2.10.</span> <span class="nav-text">输入输出重定向</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%9B%E7%A8%8B%E6%8E%A7%E5%88%B6"><span class="nav-number">2.11.</span> <span class="nav-text">进程控制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%B6%E4%BB%96%E5%91%BD%E4%BB%A4"><span class="nav-number">2.12.</span> <span class="nav-text">其他命令</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BF%9C%E7%A8%8B%E6%96%87%E4%BB%B6%E5%A4%8D%E5%88%B6%EF%BC%9Ascp"><span class="nav-number">2.12.1.</span> <span class="nav-text">远程文件复制：scp</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#locate%E6%9F%A5%E6%89%BE"><span class="nav-number">2.12.2.</span> <span class="nav-text">locate查找</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#which%E5%91%BD%E4%BB%A4"><span class="nav-number">2.12.3.</span> <span class="nav-text">which命令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#echo"><span class="nav-number">2.12.4.</span> <span class="nav-text">echo</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AE%E6%88%96%E6%98%BE%E7%A4%BA%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%EF%BC%9Aexport"><span class="nav-number">2.12.5.</span> <span class="nav-text">设置或显示环境变量：export</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E4%B8%BB%E6%9C%BA%E5%90%8D-ip%E5%9C%B0%E5%9D%80"><span class="nav-number">2.12.6.</span> <span class="nav-text">修改主机名&amp;ip地址</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#mount%E6%8C%82%E8%BD%BD"><span class="nav-number">2.12.7.</span> <span class="nav-text">mount挂载</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ssh%E5%85%8D%E5%AF%86%E7%99%BB%E9%99%86"><span class="nav-number">2.12.8.</span> <span class="nav-text">ssh免密登陆</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%89%B9%E9%87%8F%E6%B7%BB%E5%8A%A0%E7%94%A8%E6%88%B7"><span class="nav-number">2.13.</span> <span class="nav-text">批量添加用户</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%8E%E7%94%A8%E6%88%B7%E8%B4%A6%E5%8F%B7%E6%9C%89%E5%85%B3%E7%9A%84%E7%B3%BB%E7%BB%9F%E6%96%87%E4%BB%B6"><span class="nav-number">2.13.1.</span> <span class="nav-text">与用户账号有关的系统文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%9E%E6%93%8D"><span class="nav-number">2.13.2.</span> <span class="nav-text">实操</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#crontab%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="nav-number">2.14.</span> <span class="nav-text">crontab的使用</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%89%B9%E6%AE%8A%E6%9D%83%E9%99%90"><span class="nav-number">3.</span> <span class="nav-text">特殊权限</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%89%E7%A7%8D%E7%89%B9%E6%AE%8A%E7%9A%84%E6%9D%83%E9%99%90"><span class="nav-number">3.1.</span> <span class="nav-text">三种特殊的权限</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#SetUID-suid"><span class="nav-number">3.1.1.</span> <span class="nav-text">SetUID(suid)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#setGID%EF%BC%88sgid%EF%BC%89"><span class="nav-number">3.1.2.</span> <span class="nav-text">setGID（sgid）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#sticky-sbit-%E7%B2%98%E6%BB%9E%E4%BD%8D"><span class="nav-number">3.1.3.</span> <span class="nav-text">sticky(sbit)粘滞位</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#chattr%E6%9D%83%E9%99%90"><span class="nav-number">3.2.</span> <span class="nav-text">chattr权限</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#lsattr%EF%BC%9A%E6%9F%A5%E7%9C%8B%E7%89%B9%E6%AE%8A%E6%9D%83%E9%99%90"><span class="nav-number">3.2.1.</span> <span class="nav-text">lsattr：查看特殊权限</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#chattr%EF%BC%9A%E8%AE%BE%E7%BD%AE%E7%89%B9%E6%AE%8A%E6%9D%83%E9%99%90"><span class="nav-number">3.2.2.</span> <span class="nav-text">chattr：设置特殊权限</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8E%A9%E7%A0%81umask"><span class="nav-number">3.3.</span> <span class="nav-text">掩码umask</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#umask%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="nav-number">3.3.1.</span> <span class="nav-text">umask的作用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#umask%E6%98%AF%E5%A6%82%E4%BD%95%E6%94%B9%E5%8F%98%E6%96%B0%E6%96%87%E4%BB%B6%E7%9A%84%E6%9D%83%E9%99%90"><span class="nav-number">3.3.2.</span> <span class="nav-text">umask是如何改变新文件的权限</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B0%B8%E4%B9%85%E4%BF%AE%E6%94%B9umask"><span class="nav-number">3.3.3.</span> <span class="nav-text">永久修改umask</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#shell%E7%BC%96%E7%A8%8B"><span class="nav-number">4.</span> <span class="nav-text">shell编程</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%A5%E9%97%A8"><span class="nav-number">4.1.</span> <span class="nav-text">入门</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BF%90%E8%A1%8CShell%E8%84%9A%E6%9C%AC"><span class="nav-number">4.1.1.</span> <span class="nav-text">运行Shell脚本</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BC%96%E5%86%99%E4%B8%80%E4%B8%AA%E5%BF%AB%E6%8D%B7%E5%88%9B%E5%BB%BAshell%E8%84%9A%E6%9C%AC%E7%9A%84%E5%91%BD%E4%BB%A4"><span class="nav-number">4.1.2.</span> <span class="nav-text">编写一个快捷创建shell脚本的命令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#echo%E5%91%BD%E4%BB%A4"><span class="nav-number">4.1.3.</span> <span class="nav-text">echo命令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#printf-%E5%91%BD%E4%BB%A4"><span class="nav-number">4.1.4.</span> <span class="nav-text">printf 命令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Shell-%E6%B3%A8%E9%87%8A"><span class="nav-number">4.1.5.</span> <span class="nav-text">Shell 注释</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Shell%E5%8F%98%E9%87%8F"><span class="nav-number">4.2.</span> <span class="nav-text">Shell变量</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%9A%E4%B9%89%E5%8F%98%E9%87%8F"><span class="nav-number">4.2.1.</span> <span class="nav-text">定义变量</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E5%8F%98%E9%87%8F"><span class="nav-number">4.2.2.</span> <span class="nav-text">使用变量</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%AA%E8%AF%BB%E5%8F%98%E9%87%8F"><span class="nav-number">4.2.3.</span> <span class="nav-text">只读变量</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E5%8F%98%E9%87%8F"><span class="nav-number">4.2.4.</span> <span class="nav-text">删除变量</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%98%E9%87%8F%E7%B1%BB%E5%9E%8B"><span class="nav-number">4.2.5.</span> <span class="nav-text">变量类型</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Shell-%E5%87%BD%E6%95%B0"><span class="nav-number">4.3.</span> <span class="nav-text">Shell 函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB"><span class="nav-number">4.4.</span> <span class="nav-text">文件包含</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#shell%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="nav-number">4.5.</span> <span class="nav-text">shell数据类型</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="nav-number">4.5.1.</span> <span class="nav-text">字符串</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%95%B0%E7%BB%84"><span class="nav-number">4.5.2.</span> <span class="nav-text">数组</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Shell%E4%BC%A0%E9%80%92%E5%8F%82%E6%95%B0"><span class="nav-number">4.5.3.</span> <span class="nav-text">Shell传递参数</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Shell%E5%9F%BA%E6%9C%AC%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">4.6.</span> <span class="nav-text">Shell基本运算符</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%AE%97%E6%9C%AF%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">4.6.1.</span> <span class="nav-text">算术运算符</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%85%B3%E7%B3%BB%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">4.6.2.</span> <span class="nav-text">关系运算符</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B8%83%E5%B0%94%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">4.6.3.</span> <span class="nav-text">布尔运算符</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">4.6.4.</span> <span class="nav-text">逻辑运算符</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">4.6.5.</span> <span class="nav-text">字符串运算符</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E6%B5%8B%E8%AF%95%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">4.6.6.</span> <span class="nav-text">文件测试运算符</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#test%E5%91%BD%E4%BB%A4"><span class="nav-number">4.7.</span> <span class="nav-text">test命令</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%95%B0%E5%80%BC%E6%B5%8B%E8%AF%95"><span class="nav-number">4.7.1.</span> <span class="nav-text">数值测试</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%B5%8B%E8%AF%95"><span class="nav-number">4.7.2.</span> <span class="nav-text">字符串测试</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E6%B5%8B%E8%AF%95"><span class="nav-number">4.7.3.</span> <span class="nav-text">文件测试</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Shell-%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6"><span class="nav-number">4.8.</span> <span class="nav-text">Shell 流程控制</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#if-else%E5%88%A4%E6%96%AD%E8%AF%AD%E5%8F%A5"><span class="nav-number">4.8.1.</span> <span class="nav-text">if else判断语句</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#for%E5%BE%AA%E7%8E%AF"><span class="nav-number">4.8.2.</span> <span class="nav-text">for循环</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#while%E5%BE%AA%E7%8E%AF"><span class="nav-number">4.8.3.</span> <span class="nav-text">while循环</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%97%A0%E9%99%90%E5%BE%AA%E7%8E%AF"><span class="nav-number">4.8.4.</span> <span class="nav-text">无限循环</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#until-%E5%BE%AA%E7%8E%AF"><span class="nav-number">4.8.5.</span> <span class="nav-text">until 循环</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#case"><span class="nav-number">4.8.6.</span> <span class="nav-text">case</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%B7%B3%E5%87%BA%E5%BE%AA%E7%8E%AF"><span class="nav-number">4.8.7.</span> <span class="nav-text">跳出循环</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Shell%E8%BE%93%E5%85%A5-%E8%BE%93%E5%87%BA%E9%87%8D%E5%AE%9A%E5%90%91"><span class="nav-number">4.9.</span> <span class="nav-text">Shell输入&#x2F;输出重定向</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BE%93%E5%87%BA%E9%87%8D%E5%AE%9A%E5%90%91"><span class="nav-number">4.9.1.</span> <span class="nav-text">输出重定向</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BE%93%E5%85%A5%E9%87%8D%E5%AE%9A%E5%90%91"><span class="nav-number">4.9.2.</span> <span class="nav-text">输入重定向</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%87%8D%E5%AE%9A%E5%90%91%E6%B7%B1%E5%85%A5%E8%AE%B2%E8%A7%A3"><span class="nav-number">4.9.3.</span> <span class="nav-text">重定向深入讲解</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Here-Document"><span class="nav-number">4.9.4.</span> <span class="nav-text">Here Document</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#dev-null-%E6%96%87%E4%BB%B6"><span class="nav-number">4.9.5.</span> <span class="nav-text">&#x2F;dev&#x2F;null 文件</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9E%E4%BE%8B"><span class="nav-number">4.10.</span> <span class="nav-text">实例</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9D%A8%E8%BE%89%E4%B8%89%E8%A7%92%EF%BC%9A"><span class="nav-number">4.10.1.</span> <span class="nav-text">杨辉三角：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#sum-max"><span class="nav-number">4.10.2.</span> <span class="nav-text">sum()&amp;max():</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#99%E4%B9%98%E6%B3%95%E8%A1%A8%EF%BC%9A"><span class="nav-number">4.10.3.</span> <span class="nav-text">99乘法表：</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%99%9A%E6%8B%9F%E6%9C%BA"><span class="nav-number">5.</span> <span class="nav-text">虚拟机</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%89%E7%A7%8D%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%BC%8F"><span class="nav-number">5.1.</span> <span class="nav-text">三种网络模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98"><span class="nav-number">5.2.</span> <span class="nav-text">常见问题</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E9%9D%99%E6%80%81%E5%9C%B0%E5%9D%80%E5%90%8E%E5%8F%91%E7%8E%B0%E6%97%A0%E6%B3%95ping%E5%A4%96%E7%BD%91"><span class="nav-number">5.2.1.</span> <span class="nav-text">修改静态地址后发现无法ping外网</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%85%8B%E9%9A%86%E5%90%8Eeth0%E6%B6%88%E5%A4%B1"><span class="nav-number">5.2.2.</span> <span class="nav-text">虚拟机克隆后eth0消失</span></a></li></ol></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="Corazon" src="/images/006.png"><p class="site-author-name" itemprop="name">Corazon</p><div class="site-description" itemprop="description"><font color="#000000">网络安全从业人员个人博客</font></div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">16</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">4</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">7</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/Corazon-hacker" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Corazon-hacker" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a></span></div><div class="links-of-blogroll motion-element"><div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i> Links</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"><a href="https://www.runoob.com/" title="https:&#x2F;&#x2F;www.runoob.com&#x2F;" rel="noopener" target="_blank">菜鸟教程</a></li><li class="links-of-blogroll-item"><a href="http://c.biancheng.net/sitemap/" title="http:&#x2F;&#x2F;c.biancheng.net&#x2F;sitemap&#x2F;" rel="noopener" target="_blank">C语言中文网</a></li><li class="links-of-blogroll-item"><a href="https://csdiy.wiki/" title="https:&#x2F;&#x2F;csdiy.wiki&#x2F;" rel="noopener" target="_blank">CS自学指南</a></li><li class="links-of-blogroll-item"><a href="https://www.r2coding.com/#/" title="https:&#x2F;&#x2F;www.r2coding.com&#x2F;#&#x2F;" rel="noopener" target="_blank">Road To Coding</a></li><li class="links-of-blogroll-item"><a href="https://hackway.org/docs/cs/intro" title="https:&#x2F;&#x2F;hackway.org&#x2F;docs&#x2F;cs&#x2F;intro" rel="noopener" target="_blank">计算机专业学习路线</a></li></ul></div></div><div class="back-to-top motion-element"><i class="fa fa-arrow-up"></i> <span>0%</span></div><script type="text/javascript" charset="utf-8" src="/js/tagcloud.js"></script><script type="text/javascript" charset="utf-8" src="/js/tagcanvas.js"></script><div class="widget-wrap"><h3 class="widget-title">标签云</h3><div id="myCanvasContainer" class="widget tagcloud"><canvas width="250" height="250" id="resCanvas"><ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/" rel="tag">Linux</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MYSQL/" rel="tag">MYSQL</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blog/" rel="tag">blog</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bolg/" rel="tag">bolg</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/" rel="tag">hexo</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/private/" rel="tag">private</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/typora/" rel="tag">typora</a><span class="tag-list-count">2</span></li></ul></canvas></div></div></div></aside><div id="sidebar-dimmer"></div></div></main></div><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2025</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">Corazon</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-chart-area"></i> </span><span title="站点总字数">178k</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-coffee"></i> </span><span title="站点阅读时长">2:42</span></div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-user"></i> </span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span> </span></span><span class="post-meta-divider">|</span> <span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div></div></footer><script color="0,0,255" opacity="1" zindex="-1" count="99" src="/lib/canvas-nest/canvas-nest.min.js"></script><script src="/lib/anime.min.js"></script><script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/code-unfold.js"></script><script src="/js/local-search.js"></script><script>if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }</script><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.css"><script>NexT.utils.loadComments(document.querySelector('#gitalk-container'), () => {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID    : 'Ov23liioqYUgEl2eGVTc',
      clientSecret: '268a15cf6d039e6e17da820b0bd4824725bbce6d',
      repo        : 'Corazon-hacker.github.io',
      owner       : 'Corazon-hacker',
      admin       : ['Corazon-hacker'],
      id          : '5a5d357a1cd3198bdc8b7465a60777f6',
        language: 'zh-CN',
      distractionFreeMode: true
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
});</script><script>NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : true,
      appId      : '02iDSwDgb06k5K8yx5oSD85t-gzGzoHsz',
      appKey     : 'eA8vZdwW4UasH3SiNapGvXh5',
      placeholder: "你是我一生只会遇见一次的惊喜 ...",
      avatar     : 'monsterid',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : 'zh-cn' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : 'https://02idswdg.lc-cn-n1-shared.com'
    });
  }, window.Valine);
});</script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script><link href="https://cdn.bootcss.com/gitalk/1.4.0/gitalk.min.css" rel="stylesheet"><script src="https://cdn.bootcss.com/gitalk/1.4.0/gitalk.min.js"></script><script src="https://cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.min.js"></script><script type="text/javascript">var gitalk = new Gitalk({
    clientID: '',
    clientSecret: '',
    repo: 'Corazon-hacker.github.io',
    owner: '',
    admin: [''],
    id: md5(location.pathname),   // ISSUE：location.href 限制50个字符 (应该是Issue 内容存数据库的标识， 具体在页面上无感)
    labels: ''.split(',').filter(l => l),  // 需要的 labels需要一个数组，否则会报错
    perPage: ,
    pagerDirection: '',
    createIssueManually: ,
    distractionFreeMode: 
  })
  gitalk.render('gitalk-container')</script><style>[bg-lazy]{background-image:none!important;background-color:#eee!important}</style><script>window.imageLazyLoadSetting={isSPA:!1,preloadRatio:1,processImages:null}</script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})})</script><script>(r=>{r.imageLazyLoadSetting.processImages=t;var a=r.imageLazyLoadSetting.isSPA,o=r.imageLazyLoadSetting.preloadRatio||1,d=i();function i(){var t=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")),e=Array.prototype.slice.call(document.querySelectorAll("[bg-lazy]"));return t.concat(e)}function t(t){(a||t)&&(d=i());for(var e,n=0;n<d.length;n++)0<=(e=(e=d[n]).getBoundingClientRect()).bottom&&0<=e.left&&e.top<=(r.innerHeight*o||document.documentElement.clientHeight*o)&&(()=>{var t,e,a,o,i=d[n];e=function(){d=d.filter(function(t){return i!==t}),r.imageLazyLoadSetting.onImageLoaded&&r.imageLazyLoadSetting.onImageLoaded(i)},(t=i).dataset.loaded||(t.hasAttribute("bg-lazy")?(t.removeAttribute("bg-lazy"),e&&e()):(a=new Image,o=t.getAttribute("data-original"),a.onload=function(){t.src=o,t.removeAttribute("data-original"),t.setAttribute("data-loaded",!0),e&&e()},a.onerror=function(){t.removeAttribute("data-original"),t.setAttribute("data-loaded",!1),t.src=o},t.src!==o&&(a.src=o)))})()}function e(){clearTimeout(t.tId),t.tId=setTimeout(t,500)}t(),document.addEventListener("scroll",e),r.addEventListener("resize",e),r.addEventListener("orientationchange",e)})(this);</script></body></html>