<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.3.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/006.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/6.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Noto Sans SC:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/lib/font-awesome/css/all.min.css"><script src="https://kit.fontawesome.com/b1f8a1a551.js" crossorigin="anonymous"></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css"><script src="/lib/pace/pace.min.js"></script><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"mcorazon.top",root:"/",scheme:"Gemini",version:"7.8.0",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:"default"},back2top:{enable:!0,sidebar:!0,scrollpercent:!0},bookmark:{enable:!1,color:"#00f",save:"manual"},fancybox:!0,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"buttons",active:"gitalk",storage:!0,lazyload:!1,nav:null,activeClass:"gitalk"},algolia:{hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},path:"search.xml"}</script><meta name="description" content="网络安全从业人员个人博客"><meta property="og:type" content="website"><meta property="og:title" content="MCorazon"><meta property="og:url" content="http://mcorazon.top/index.html"><meta property="og:site_name" content="MCorazon"><meta property="og:description" content="网络安全从业人员个人博客"><meta property="og:locale" content="zh_CN"><meta property="article:author" content="Corazon"><meta name="twitter:card" content="summary"><link rel="canonical" href="http://mcorazon.top/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!0,isPost:!1,lang:"zh-CN"}</script><title>MCorazon</title><script type="text/javascript" src="/js/tag/bubble.js"></script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css"></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span><h1 class="site-title">MCorazon</h1><span class="logo-line-after"><i></i></span></a><p class="site-subtitle" itemprop="description"><font color="#ffffff">这个世界总有黑夜<br>但是我们总发着光</font></p></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul id="menu" class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-schedule"><a href="/schedule/" rel="section"><i class="fa fa-calendar fa-fw"></i>日程表</a></li><li class="menu-item menu-item-sitemap"><a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>站点地图</a></li><li class="menu-item menu-item-commonweal"><a href="/commonweal/" rel="section"><i class="fa fa-heartbeat fa-fw"></i>公益 404</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocapitalize="off" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"><div id="no-result"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div></div></div></div></header><div class="reading-progress-bar"></div><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content index posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="http://mcorazon.top/posts/c826a854/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/006.png"><meta itemprop="name" content="Corazon"><meta itemprop="description" content="<font color="#000000">网络安全从业人员个人博客</font>"> </span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="MCorazon"></span><header class="post-header"><span class="post-meta-item-icon"><i class="fa fa-thumb-tack"></i> <font color="red">置顶</font></span><h2 class="post-title" itemprop="name headline"><a href="/posts/c826a854/" class="post-title-link" itemprop="url">【MySQL】MYSQL知识总结</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2024-10-27 16:01:40" itemprop="dateCreated datePublished" datetime="2024-10-27T16:01:40+08:00">2024-10-27</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2025-02-18 15:08:02" itemprop="dateModified" datetime="2025-02-18T15:08:02+08:00">2025-02-18</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/MySQL/" itemprop="url" rel="index"><span itemprop="name">MySQL</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>24k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>22 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><p>本文重点参考了CSDN的一篇博客：<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_45851945/article/details/114287877">MySQL 有这一篇就够</a>。</p><div class="post-button"><a class="btn" href="/posts/c826a854/" rel="contents">阅读全文 &raquo;</a></div></div><div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="http://mcorazon.top/posts/287bb156/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/006.png"><meta itemprop="name" content="Corazon"><meta itemprop="description" content="<font color="#000000">网络安全从业人员个人博客</font>"> </span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="MCorazon"></span><header class="post-header"><span class="post-meta-item-icon"><i class="fa fa-thumb-tack"></i> <font color="red">置顶</font></span><h2 class="post-title" itemprop="name headline"><a href="/posts/287bb156/" class="post-title-link" itemprop="url">【Typora】typora知识总结</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2024-10-27 19:41:13" itemprop="dateCreated datePublished" datetime="2024-10-27T19:41:13+08:00">2024-10-27</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2025-02-18 15:24:45" itemprop="dateModified" datetime="2025-02-18T15:24:45+08:00">2025-02-18</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/typora/" itemprop="url" rel="index"><span itemprop="name">typora</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>5k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>5 分钟</span></span><div class="post-description">使用typora编写hexo博客的方法及markdown语法的介绍。</div></div></header><div class="post-body" itemprop="articleBody"><h2 id="Markdown语法">Markdown语法</h2><h3 id="快捷键汇总">快捷键汇总</h3><table><thead><tr><th style="text-align:center">功能</th><th style="text-align:center">快捷键</th><th style="text-align:center">功能</th><th style="text-align:center">快捷键</th></tr></thead><tbody><tr><td style="text-align:center">加粗</td><td style="text-align:center">Ctrl+B</td><td style="text-align:center">插入图像</td><td style="text-align:center">Ctrl+Shift+I</td></tr><tr><td style="text-align:center">斜体</td><td style="text-align:center">Ctrl+I</td><td style="text-align:center">删除线</td><td style="text-align:center">Alt+Shift+5</td></tr><tr><td style="text-align:center">下划线</td><td style="text-align:center">Ctrl+U</td><td style="text-align:center">公式块</td><td style="text-align:center">Ctrl+Shift+M</td></tr><tr><td style="text-align:center">超链接</td><td style="text-align:center">Ctrl+K</td><td style="text-align:center">代码块</td><td style="text-align:center">Ctrl+Shift+K</td></tr><tr><td style="text-align:center">表格</td><td style="text-align:center">Ctrl+T</td><td style="text-align:center">代码段</td><td style="text-align:center">Ctrl+Shift+`</td></tr><tr><td style="text-align:center">引用</td><td style="text-align:center">&gt;+空格</td><td style="text-align:center">退出引用</td><td style="text-align:center">Shift+Tab</td></tr><tr><td style="text-align:center">段落</td><td style="text-align:center">Ctrl+0</td><td style="text-align:center">有序列表</td><td style="text-align:center">Ctrl+Shift+[</td></tr><tr><td style="text-align:center">标题</td><td style="text-align:center">Ctrl+数字</td><td style="text-align:center">无序列表</td><td style="text-align:center">Ctrl+Shift+]</td></tr><tr><td style="text-align:center">全选</td><td style="text-align:center">Ctrl+A</td><td style="text-align:center">选中行/句</td><td style="text-align:center">Ctrl+L</td></tr><tr><td style="text-align:center">选中段落</td><td style="text-align:center">Ctrl+E</td><td style="text-align:center">选中当前词</td><td style="text-align:center">Ctrl+D</td></tr><tr><td style="text-align:center">跳转所选</td><td style="text-align:center">Ctrl+J</td><td style="text-align:center">跳转文首/末</td><td style="text-align:center">Ctrl+Home/End</td></tr><tr><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">源代码模式</td><td style="text-align:center">Ctrl+/</td></tr></tbody></table><div class="post-button"><a class="btn" href="/posts/287bb156/" rel="contents">阅读全文 &raquo;</a></div></div><div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="http://mcorazon.top/posts/dd673edb/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/006.png"><meta itemprop="name" content="Corazon"><meta itemprop="description" content="<font color="#000000">网络安全从业人员个人博客</font>"> </span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="MCorazon"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/posts/dd673edb/" class="post-title-link" itemprop="url">【Linux】系统与磁盘管理</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2025-02-20 16:15:32 / 修改时间：16:42:55" itemprop="dateCreated datePublished" datetime="2025-02-20T16:15:32+08:00">2025-02-20</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>8.6k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>8 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="cal：查看当前日历">cal：查看当前日历</h2><p>cal命令用于查看当前日历，-y显示整年日历：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">python@ubuntu:~$ cal</span><br><span class="line">      十一月 2019        </span><br><span class="line">日 一 二 三 四 五 六  </span><br><span class="line">                1  2  </span><br><span class="line"> 3  4  5  6  7  8  9  </span><br><span class="line">10 11 12 13 14 15 16  </span><br><span class="line">17 18 19 20 21 22 23  </span><br><span class="line">24 25 26 27 28 29 30 </span><br></pre></td></tr></table></figure><h2 id="date：显示或设置时间">date：显示或设置时间</h2><p>设置时间格式（需要管理员权限）：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">date</span> [MMDDhhmm[[CC]YY][.ss]] +format</span><br></pre></td></tr></table></figure><p>MM为月，DD为天，hh为小时，mm为分钟；CC为年前两位，YY为年的后两位，ss为秒。</p><p>如： date 010203042016.55。</p><p>显示时间格式（date ‘+%y,%m,%d,%H,%M,%S’）：</p><table><thead><tr><th>format格式</th><th>含义</th></tr></thead><tbody><tr><td>%Y，%y</td><td>年</td></tr><tr><td>%m</td><td>月</td></tr><tr><td>%d</td><td>日</td></tr><tr><td>%H</td><td>时</td></tr><tr><td>%M</td><td>分</td></tr><tr><td>%S</td><td>秒</td></tr></tbody></table><h2 id="netstat：查看网络状态">netstat：查看网络状态</h2><p>netstat命令用于显示网络状态。</p><p>利用netstat指令可让你得知整个Linux系统的网络情况。</p><p>语法：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat [-acCeFghilMnNoprstuvVwx][-A&lt;网络类型&gt;][--ip]</span><br></pre></td></tr></table></figure><p><strong>参数说明</strong>：</p><ul class="lvl-0"><li class="lvl-2"><p>-a或–all 显示所有连线中的Socket。</p></li><li class="lvl-2"><p>-A&lt;网络类型&gt;或–&lt;网络类型&gt; 列出该网络类型连线中的相关地址。</p></li><li class="lvl-2"><p>-c或–continuous 持续列出网络状态。</p></li><li class="lvl-2"><p>-C或–cache 显示路由器配置的快取信息。</p></li><li class="lvl-2"><p>-e或–extend 显示网络其他相关信息。</p></li><li class="lvl-2"><p>-F或–fib 显示FIB。</p></li><li class="lvl-2"><p>-g或–groups 显示多重广播功能群组组员名单。</p></li><li class="lvl-2"><p>-h或–help 在线帮助。</p></li><li class="lvl-2"><p>-i或–interfaces 显示网络界面信息表单。</p></li><li class="lvl-2"><p>-l或–listening 显示监控中的服务器的Socket。</p></li><li class="lvl-2"><p>-M或–masquerade 显示伪装的网络连线。</p></li><li class="lvl-2"><p>-n或–numeric 直接使用IP地址，而不通过域名服务器。</p></li><li class="lvl-2"><p>-N或–netlink或–symbolic 显示网络硬件外围设备的符号连接名称。</p></li><li class="lvl-2"><p>-o或–timers 显示计时器。</p></li><li class="lvl-2"><p>-p或–programs 显示正在使用Socket的程序识别码和程序名称。</p></li><li class="lvl-2"><p>-r或–route 显示Routing Table。</p></li><li class="lvl-2"><p>-s或–statistice 显示网络工作信息统计表。</p></li><li class="lvl-2"><p>-t或–tcp 显示TCP传输协议的连线状况。</p></li><li class="lvl-2"><p>-u或–udp 显示UDP传输协议的连线状况。</p></li><li class="lvl-2"><p>-v或–verbose 显示指令执行过程。</p></li><li class="lvl-2"><p>-V或–version 显示版本信息。</p></li><li class="lvl-2"><p>-w或–raw 显示RAW传输协议的连线状况。</p></li><li class="lvl-2"><p>-x或–unix 此参数的效果和指定&quot;-A unix&quot;参数相同。</p></li><li class="lvl-2"><p>–ip或–inet 此参数的效果和指定&quot;-A inet&quot;参数相同。</p></li></ul><p>常用：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# netstat -nltp</span><br><span class="line">Active Internet connections (only servers)</span><br><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name    </span><br><span class="line">tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      829/sshd            </span><br><span class="line">tcp6       0      0 :::22                   :::*                    LISTEN      829/sshd</span><br></pre></td></tr></table></figure><h2 id="ps：查看进程信息">ps：查看进程信息</h2><p>进程是一个具有一定独立功能的程序，它是操作系统动态执行的基本单元。</p><p><strong>ps命令选项：</strong></p><ul class="lvl-0"><li class="lvl-2"><p>ps a 显示现行终端机下的所有程序，包括其他用户的程序。</p></li><li class="lvl-2"><p>ps -A 显示所有程序。</p></li><li class="lvl-2"><p>ps c 列出程序时，显示每个程序真正的指令名称，而不包含路 径，参数或常驻服务的标示。</p></li><li class="lvl-2"><p>ps -e 此参数的效果和指定&quot;A&quot;参数相同。</p></li><li class="lvl-2"><p>ps e 列出程序时，显示每个程序所使用的环境变量。</p></li><li class="lvl-2"><p>ps f 用ASCII字符显示树状结构，表达程序间的相互关系。</p></li><li class="lvl-2"><p>ps -H 显示树状结构，表示程序间的相互关系。</p></li><li class="lvl-2"><p>ps -N 显示所有的程序，除了执行ps指令终端机下的程序之外。</p></li><li class="lvl-2"><p>ps s 采用程序信号的格式显示程序状况。</p></li><li class="lvl-2"><p>ps u 以用户为主的格式来显示程序状况。</p></li><li class="lvl-2"><p>ps x 显示所有程序，不以终端机来区分。</p></li></ul><table><thead><tr><th>选项</th><th>含义</th></tr></thead><tbody><tr><td>-a</td><td>显示终端上的所有进程，包括其他用户的进程</td></tr><tr><td>-u</td><td>显示进程的详细状态</td></tr><tr><td>-x</td><td>显示没有控制终端的进程</td></tr><tr><td>-w</td><td>显示加宽，以便显示更多的信息</td></tr><tr><td>-r</td><td>只显示正在运行的进程</td></tr></tbody></table><p><strong>常见用法：</strong></p><ul class="lvl-0"><li class="lvl-2"><p>ps -e 查看所有进程信息（瞬时的）</p></li><li class="lvl-2"><p>ps -u root -N 查看所有不是root运行的进程</p></li><li class="lvl-2"><p>ps ax 显示所有进程状态状态</p></li><li class="lvl-2"><p>ps -ef |grep xxx 显示含有xxx的进程</p></li></ul><p>实例：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# ps -A</span><br><span class="line">    PID TTY          TIME CMD</span><br><span class="line">      1 ?        00:00:01 systemd</span><br><span class="line">      2 ?        00:00:00 kthreadd</span><br><span class="line">……省略部分结果</span><br><span class="line">   2207 ?        00:00:00 kworker/1:1-events</span><br><span class="line">   2208 ?        00:00:00 kworker/0:0-ata_sff</span><br><span class="line">   2215 ?        00:00:00 kworker/0:2-ata_sff</span><br><span class="line">   2217 pts/1    00:00:00 ps</span><br></pre></td></tr></table></figure><p>显示指定用户信息：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ps -u root //显示root进程用户信息</span></span><br><span class="line"> PID TTY     TIME CMD</span><br><span class="line">  1 ?    00:00:02 init</span><br><span class="line">  2 ?    00:00:00 kthreadd</span><br><span class="line">  3 ?    00:00:00 migration/0</span><br><span class="line">……省略部分结果</span><br><span class="line">30487 ?    00:00:06 gnome-terminal</span><br><span class="line">30488 ?    00:00:00 gnome-pty-helpe</span><br><span class="line">30489 pts/0  00:00:00 bash</span><br></pre></td></tr></table></figure><p>显示所有进程信息，连同命令行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ps -ef //显示所有命令，连带命令行</span></span><br><span class="line">UID    PID PPID C STIME TTY     TIME CMD</span><br><span class="line">root     1   0 0 10:22 ?    00:00:02 /sbin/init</span><br><span class="line">root     2   0 0 10:22 ?    00:00:00 [kthreadd]</span><br><span class="line">root     3   2 0 10:22 ?    00:00:00 [migration/0]</span><br><span class="line">root     4   2 0 10:22 ?    00:00:00 [ksoftirqd/0]</span><br><span class="line">root     5   2 0 10:22 ?    00:00:00 [watchdog/0]</span><br><span class="line">root     6   2 0 10:22 ?    /usr/lib/NetworkManager</span><br><span class="line">……省略部分结果</span><br><span class="line">root   31302 2095 0 17:42 ?    00:00:00 sshd: root@pts/2 </span><br><span class="line">root   31374 31302 0 17:42 pts/2  00:00:00 -bash</span><br><span class="line">root   31400   1 0 17:46 ?    00:00:00 /usr/bin/python /usr/sbin/aptd</span><br><span class="line">root   31407 31374 0 17:48 pts/2  00:00:00 ps -ef</span><br></pre></td></tr></table></figure><h2 id="pstree：以树状图显示进程关系">pstree：以树状图显示进程关系</h2><p>显示进程的关系</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# pstree</span><br><span class="line">systemd─┬─NetworkManager───2*[&#123;NetworkManager&#125;]</span><br><span class="line">        ├─atd</span><br><span class="line">        ├─auditd───&#123;auditd&#125;</span><br><span class="line">        ├─crond</span><br><span class="line">        ├─dbus-daemon───&#123;dbus-daemon&#125;</span><br><span class="line">        ├─firewalld───&#123;firewalld&#125;</span><br><span class="line">        ├─irqbalance───&#123;irqbalance&#125;</span><br><span class="line">        ├─login───bash───su───bash───su───bash</span><br><span class="line">        ├─lsmd</span><br><span class="line">        ├─mcelog</span><br><span class="line">        ├─polkitd───5*[&#123;polkitd&#125;]</span><br><span class="line">        ├─smartd</span><br><span class="line">        ├─sshd─┬─sshd───sshd───bash</span><br><span class="line">        │      └─sshd───sshd───bash───pstree</span><br><span class="line">        ├─systemd───(sd-pam)</span><br><span class="line">        ├─systemd-journal</span><br><span class="line">        ├─systemd-logind</span><br><span class="line">        ├─systemd-udevd</span><br><span class="line">        └─tuned───3*[&#123;tuned&#125;]</span><br><span class="line">        </span><br><span class="line">[root@rocky8:~]# pstree -p</span><br><span class="line">systemd(1)─┬─NetworkManager(816)─┬─&#123;NetworkManager&#125;(821)</span><br><span class="line">           │                     └─&#123;NetworkManager&#125;(823)</span><br><span class="line">           ├─atd(835)</span><br><span class="line">           ├─auditd(768)───&#123;auditd&#125;(769)</span><br><span class="line">           ├─crond(841)</span><br><span class="line">           ├─dbus-daemon(796)───&#123;dbus-daemon&#125;(802)</span><br><span class="line">           ├─firewalld(797)───&#123;firewalld&#125;(1030)</span><br><span class="line">           ├─irqbalance(792)───&#123;irqbalance&#125;(801)</span><br><span class="line">           ├─login(838)───bash(2012)───su(2043)───bash(2044)───su(2072)───bash(2076)</span><br><span class="line">           ├─lsmd(793)</span><br><span class="line">           ├─mcelog(798)</span><br><span class="line">           ├─polkitd(1035)─┬─&#123;polkitd&#125;(1051)</span><br><span class="line">           │               ├─&#123;polkitd&#125;(1052)</span><br><span class="line">           │               ├─&#123;polkitd&#125;(1058)</span><br><span class="line">           │               ├─&#123;polkitd&#125;(1059)</span><br><span class="line">           │               └─&#123;polkitd&#125;(1072)</span><br><span class="line">           ├─smartd(790)</span><br><span class="line">           ├─sshd(829)─┬─sshd(1577)───sshd(1592)───bash(1593)</span><br><span class="line">           │           └─sshd(1859)───sshd(1863)───bash(1864)───pstree(2220)</span><br><span class="line">           ├─systemd(1582)───(sd-pam)(1586)</span><br><span class="line">           ├─systemd-journal(633)</span><br><span class="line">           ├─systemd-logind(794)</span><br><span class="line">           ├─systemd-udevd(662)</span><br><span class="line">           └─tuned(827)─┬─&#123;tuned&#125;(1168)</span><br><span class="line">                        ├─&#123;tuned&#125;(1217)</span><br><span class="line">                        └─&#123;tuned&#125;(1248)</span><br><span class="line">[root@rocky8:~]# pstree -c</span><br><span class="line">systemd─┬─NetworkManager─┬─&#123;NetworkManager&#125;</span><br><span class="line">        │                └─&#123;NetworkManager&#125;</span><br><span class="line">        ├─atd</span><br><span class="line">        ├─auditd───&#123;auditd&#125;</span><br><span class="line">        ├─crond</span><br><span class="line">        ├─dbus-daemon───&#123;dbus-daemon&#125;</span><br><span class="line">        ├─firewalld───&#123;firewalld&#125;</span><br><span class="line">        ├─irqbalance───&#123;irqbalance&#125;</span><br><span class="line">        ├─login───bash───su───bash───su───bash</span><br><span class="line">        ├─lsmd</span><br><span class="line">        ├─mcelog</span><br><span class="line">        ├─polkitd─┬─&#123;polkitd&#125;</span><br><span class="line">        │         ├─&#123;polkitd&#125;</span><br><span class="line">        │         ├─&#123;polkitd&#125;</span><br><span class="line">        │         ├─&#123;polkitd&#125;</span><br><span class="line">        │         └─&#123;polkitd&#125;</span><br><span class="line">        ├─smartd</span><br><span class="line">        ├─sshd─┬─sshd───sshd───bash</span><br><span class="line">        │      └─sshd───sshd───bash───pstree</span><br><span class="line">        ├─systemd───(sd-pam)</span><br><span class="line">        ├─systemd-journal</span><br><span class="line">        ├─systemd-logind</span><br><span class="line">        ├─systemd-udevd</span><br><span class="line">        └─tuned─┬─&#123;tuned&#125;</span><br><span class="line">                ├─&#123;tuned&#125;</span><br><span class="line">                └─&#123;tuned&#125;</span><br></pre></td></tr></table></figure><p>特别表明在运行的进程：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># pstree -apnh //显示进程间的关系</span></span><br></pre></td></tr></table></figure><p>同时显示用户名称：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># pstree -u //显示用户名称</span></span><br></pre></td></tr></table></figure><h2 id="top：动态显示进程">top：动态显示进程</h2><p>top命令用来动态显示运行中的进程。top命令能够在运行后，在指定的时间间隔更新显示信息。-d参数可以指定显示信息更新的时间间隔。</p><p>在top命令执行后，可以按下按键得到对显示的结果进行排序：</p><table><thead><tr><th>按键</th><th>含义</th></tr></thead><tbody><tr><td>M</td><td>根据内存使用量来排序</td></tr><tr><td>P</td><td>根据CPU占有率来排序</td></tr><tr><td>T</td><td>根据进程运行时间的长短来排序</td></tr><tr><td>U</td><td>可以根据后面输入的用户名来筛选进程</td></tr><tr><td>K</td><td>可以根据后面输入的PID来杀死进程。</td></tr><tr><td>q</td><td>退出</td></tr><tr><td>h</td><td>获得帮助</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# top</span><br><span class="line">top - 15:40:09 up  4:53,  3 <span class="built_in">users</span>,  load average: 1.06, 0.72, 0.37</span><br><span class="line">Tasks: 161 total,   2 running, 159 sleeping,   0 stopped,   0 zombie</span><br><span class="line">%Cpu(s):  0.2 us,  0.2 sy,  0.0 ni, 99.5 <span class="built_in">id</span>,  0.0 wa,  0.2 hi,  0.0 si,  0.0 st</span><br><span class="line">MiB Mem :   1746.4 total,   1230.0 free,    246.9 used,    269.5 buff/cache</span><br><span class="line">MiB Swap:   2068.0 total,   2068.0 free,      0.0 used.   1340.5 avail Mem </span><br><span class="line"></span><br><span class="line">    PID USER      PR  NI    VIRT    RES    SHR S  %CPU  %MEM     TIME+ COMMAND                                                          </span><br><span class="line">    827 root      20   0  618180  31188  15248 S   0.3   1.7   0:30.76 tuned                                                            </span><br><span class="line">      1 root      20   0  175088  13464   9064 S   0.0   0.8   0:01.40 systemd                                                          </span><br><span class="line">      2 root      20   0       0      0      0 S   0.0   0.0   0:00.01 kthreadd                                                         </span><br><span class="line">      3 root       0 -20       0      0      0 I   0.0   0.0   0:00.00 rcu_gp                                                           </span><br><span class="line">      4 root       0 -20       0      0      0 I   0.0   0.0   0:00.00 rcu_par_gp                                                       </span><br><span class="line">      5 root       0 -20       0      0      0 I   0.0   0.0   0:00.00 slub_flushwq </span><br><span class="line">      ..................</span><br></pre></td></tr></table></figure><p>更高级的命令是htop，但需要安装：</p><p><img src="/images/loading.jpeg" data-original="/posts/dd673edb//image-20250220163058799.png" alt="image-20250220163058799"></p><h2 id="kill：终止进程">kill：终止进程</h2><p>kill命令指定进程号的进程，需要配合 ps 使用。</p><p>使用格式：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">kill</span> [-signal] pid</span><br></pre></td></tr></table></figure><p>信号值从0到15，其中9为绝对终止，可以处理一般信号无法终止的进程。</p><h2 id="关机重启：reboot、shutdown、init">关机重启：reboot、shutdown、init</h2><table><thead><tr><th>命令</th><th>含义</th></tr></thead><tbody><tr><td>reboot</td><td>重新启动操作系统</td></tr><tr><td>shutdown –r now</td><td>重新启动操作系统，shutdown会给别的用户提示</td></tr><tr><td>shutdown -h now</td><td>立刻关机，其中now相当于时间为0的状态</td></tr><tr><td>shutdown -h 20:25</td><td>系统在今天的20:25 会关机</td></tr><tr><td>shutdown -h +10</td><td>系统再过十分钟后自动关机</td></tr><tr><td>init 0</td><td>关机</td></tr><tr><td>init 6</td><td>重启</td></tr></tbody></table><h2 id="df：检测磁盘空间">df：检测磁盘空间</h2><p>df命令用于检测文件系统的磁盘空间占用和空余情况，可以显示所有文件系统对节点和磁盘块的使用情况。</p><table><thead><tr><th>选项</th><th>含义</th></tr></thead><tbody><tr><td>-a</td><td>显示所有文件系统的磁盘使用情况</td></tr><tr><td>-m</td><td>以1024字节为单位显示</td></tr><tr><td>-t</td><td>显示各指定文件系统的磁盘空间使用情况</td></tr><tr><td>-T</td><td>显示文件系统</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# <span class="built_in">df</span> -Th</span><br><span class="line">Filesystem          Type      Size  Used Avail Use% Mounted on</span><br><span class="line">devtmpfs            devtmpfs  854M     0  854M   0% /dev</span><br><span class="line">tmpfs               tmpfs     874M     0  874M   0% /dev/shm</span><br><span class="line">tmpfs               tmpfs     874M  8.7M  865M   1% /run</span><br><span class="line">tmpfs               tmpfs     874M     0  874M   0% /sys/fs/cgroup</span><br><span class="line">/dev/mapper/rl-root xfs        70G  2.9G   68G   5% /</span><br><span class="line">/dev/sda1           xfs      1014M  199M  816M  20% /boot</span><br><span class="line">/dev/mapper/rl-home xfs       127G  939M  126G   1% /home</span><br><span class="line">tmpfs               tmpfs     175M     0  175M   0% /run/user/0</span><br></pre></td></tr></table></figure><h2 id="df：检测目录所占磁盘空间">df：检测目录所占磁盘空间</h2><p>du命令用于统计目录或文件所占磁盘空间的大小，该命令的执行结果与df类似，du更侧重于磁盘的使用状况。</p><p>du命令的使用格式如下： du [选项] 目录或文件名</p><table><thead><tr><th>选项</th><th>含义</th></tr></thead><tbody><tr><td>-a</td><td>递归显示指定目录中各文件和子目录中文件占用的数据块</td></tr><tr><td>-s</td><td>显示指定文件或目录占用的数据块</td></tr><tr><td>-b</td><td>以字节为单位显示磁盘占用情况</td></tr><tr><td>-l</td><td>计算所有文件大小，对硬链接文件计算多次</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# <span class="built_in">du</span> -sh /home</span><br><span class="line">48K	/home</span><br><span class="line">[root@rocky8:~]# <span class="built_in">du</span> -h</span><br><span class="line">0	./.config/procps</span><br><span class="line">0	./.config/htop</span><br><span class="line">0	./.config</span><br><span class="line">40K	.</span><br></pre></td></tr></table></figure><h2 id="ifconfig：查看或配置网卡信息">ifconfig：查看或配置网卡信息</h2><p>ifconfig显示所有网卡的信息：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# ifconfig</span><br><span class="line">ens160: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 10.0.0.191  netmask 255.255.255.0  broadcast 10.0.0.255</span><br><span class="line">        inet6 fe80::20c:29ff:fee9:9fb3  prefixlen 64  scopeid 0x20&lt;<span class="built_in">link</span>&gt;</span><br><span class="line">        ether 00:0c:29:e9:9f:b3  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 34362  bytes 34209026 (32.6 MiB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 17179  bytes 1644986 (1.5 MiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line">lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536</span><br><span class="line">        inet 127.0.0.1  netmask 255.0.0.0</span><br><span class="line">        inet6 ::1  prefixlen 128  scopeid 0x10&lt;host&gt;</span><br><span class="line">        loop  txqueuelen 1000  (Local Loopback)</span><br><span class="line">        RX packets 48  bytes 4080 (3.9 KiB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 48  bytes 4080 (3.9 KiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>修改ip:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# <span class="built_in">sudo</span> ifconfig ens33 192.168.40.10</span><br><span class="line">[root@rocky8:~]# ifconfig ens33</span><br><span class="line">ens33     Link encap:以太网  硬件地址 00:0c:29:59:65:f2  </span><br><span class="line">          inet 地址:192.168.40.10  广播:192.168.40.255  掩码:255.255.255.0</span><br><span class="line">          inet6 地址: fe80::432f:6c4a:f47d:5f6b/64 Scope:Link</span><br><span class="line">          UP BROADCAST RUNNING MULTICAST  MTU:1500  跃点数:1</span><br><span class="line">          接收数据包:422818 错误:0 丢弃:0 过载:0 帧数:0</span><br><span class="line">          发送数据包:208692 错误:0 丢弃:0 过载:0 载波:0</span><br><span class="line">          碰撞:0 发送队列长度:1000 </span><br><span class="line">          接收字节:603745130 (603.7 MB)  发送字节:12822615 (12.8 MB)</span><br></pre></td></tr></table></figure><h2 id="ping：测试远程主机连通性">ping：测试远程主机连通性</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# ping baidu.com</span><br><span class="line">PING baidu.com (39.156.66.10) 56(84) bytes of data.</span><br><span class="line">64 bytes from 39.156.66.10 (39.156.66.10): icmp_seq=1 ttl=128 time=25.4 ms</span><br><span class="line">64 bytes from 39.156.66.10 (39.156.66.10): icmp_seq=2 ttl=128 time=25.1 ms</span><br><span class="line">64 bytes from 39.156.66.10 (39.156.66.10): icmp_seq=3 ttl=128 time=33.5 ms</span><br><span class="line">^C</span><br><span class="line">--- baidu.com ping statistics ---</span><br><span class="line">7 packets transmitted, 7 received, 0% packet loss, time 15100ms</span><br><span class="line">rtt min/avg/max/mdev = 24.992/26.546/33.483/2.870 ms</span><br><span class="line">[root@rocky8:~]# ping baidu.com -c 3</span><br><span class="line">PING baidu.com (39.156.66.10) 56(84) bytes of data.</span><br><span class="line">64 bytes from 39.156.66.10 (39.156.66.10): icmp_seq=1 ttl=128 time=26.4 ms</span><br><span class="line">64 bytes from 39.156.66.10 (39.156.66.10): icmp_seq=2 ttl=128 time=25.1 ms</span><br><span class="line">64 bytes from 39.156.66.10 (39.156.66.10): icmp_seq=3 ttl=128 time=29.8 ms</span><br><span class="line"></span><br><span class="line">--- baidu.com ping statistics ---</span><br><span class="line">3 packets transmitted, 3 received, 0% packet loss, time 11041ms</span><br><span class="line">rtt min/avg/max/mdev = 25.122/27.080/29.754/1.966 ms</span><br></pre></td></tr></table></figure><p>本文参考：</p></div><div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="http://mcorazon.top/posts/2d0621ba/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/006.png"><meta itemprop="name" content="Corazon"><meta itemprop="description" content="<font color="#000000">网络安全从业人员个人博客</font>"> </span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="MCorazon"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/posts/2d0621ba/" class="post-title-link" itemprop="url">【Linux】文件管理</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2025-02-20 15:04:16 / 修改时间：16:15:00" itemprop="dateCreated datePublished" datetime="2025-02-20T15:04:16+08:00">2025-02-20</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>13k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>12 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="Linux目录">Linux目录</h2><p><img src="/images/loading.jpeg" data-original="/posts/2d0621ba//image-20250219153540620.png" alt="image-20250219153540620"></p><ul class="lvl-0"><li class="lvl-2"><p>/：根目录，一般根目录下只存放目录，在Linux下有且只有一个根目录。所有的东西都是从这里开始。当你在终端里输入“/home”，你其实是在告诉电脑，先从/（根目录）开始，再进入到home目录。</p></li><li class="lvl-2"><p>/bin: /usr/bin: 可执行二进制文件的目录，如常用的命令ls、tar、mv、cat等。</p></li><li class="lvl-2"><p>/boot：放置linux系统启动时用到的一些文件，如Linux的内核文件：/boot/vmlinuz，系统引导管理器：/boot/grub。</p></li><li class="lvl-2"><p>/dev：存放linux系统下的设备文件，访问该目录下某个文件，相当于访问某个设备，常用的是挂载光驱 mount /dev/cdrom /mnt。</p></li><li class="lvl-2"><p>/etc：系统配置文件存放的目录，不建议在此目录下存放可执行文件，重要的配置文件有 /etc/inittab、/etc/fstab、/etc/init.d、/etc/X11、/etc/sysconfig、/etc/xinetd.d。</p></li><li class="lvl-2"><p>/home：系统默认的用户家目录，新增用户账号时，用户的家目录都存放在此目录下，表示当前用户的家目录，edu 表示用户 edu 的家目录。</p></li><li class="lvl-2"><p>/lib: /usr/lib: /usr/local/lib：系统使用的函数库的目录，程序在执行过程中，需要调用一些额外的参数时需要函数库的协助。</p></li><li class="lvl-2"><p>/lost+fount：系统异常产生错误时，会将一些遗失的片段放置于此目录下。</p></li><li class="lvl-2"><p>/mnt: /media：光盘默认挂载点，通常光盘挂载于 /mnt/cdrom 下，也不一定，可以选择任意位置进行挂载。</p></li><li class="lvl-2"><p>/opt：给主机额外安装软件所摆放的目录。</p></li><li class="lvl-2"><p>/proc：此目录的数据都在内存中，如系统核心，外部设备，网络状态，由于数据都存放于内存中，所以不占用磁盘空间，比较重要的目录有 /proc/cpuinfo、/proc/interrupts、/proc/dma、/proc/ioports、/proc/net/* 等。</p></li><li class="lvl-2"><p>/root：系统管理员root的家目录。</p></li><li class="lvl-2"><p>/sbin: /usr/sbin: /usr/local/sbin：放置系统管理员使用的可执行命令，如fdisk、shutdown、mount 等。与 /bin 不同的是，这几个目录是给系统管理员 root使用的命令，一般用户只能&quot;查看&quot;而不能设置和使用。</p></li><li class="lvl-2"><p>/tmp：一般用户或正在执行的程序临时存放文件的目录，任何人都可以访问，重要数据不可放置在此目录下。</p></li><li class="lvl-2"><p>/srv：服务启动之后需要访问的数据目录，如 www 服务需要访问的网页数据存放在 /srv/www 内。</p></li><li class="lvl-2"><p>/usr：应用程序存放目录，/usr/bin 存放应用程序，/usr/share 存放共享数据，/usr/lib 存放不能直接运行的，却是许多程序运行所必需的一些函数库文件。/usr/local: 存放软件升级包。/usr/share/doc: 系统说明文件存放目录。/usr/share/man: 程序说明文件存放目录。</p></li><li class="lvl-2"><p>/var：放置系统执行过程中经常变化的文件，如随时更改的日志文件 /var/log，/var/log/message：所有的登录文件存放目录，/var/spool/mail：邮件存放的目录，/var/run:程序或服务启动后，其PID存放在该目录下。</p></li></ul><p>位于/home/user，称之为用户工作目录或家目录,表示方式：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/home/user</span><br><span class="line">~</span><br></pre></td></tr></table></figure><p>从/目录开始描述的路径为<strong>绝对路径</strong>，如：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /home</span><br><span class="line"><span class="built_in">ls</span> /usr</span><br></pre></td></tr></table></figure><p>从当前位置开始描述的路径为<strong>相对路径</strong>，如：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ../../</span><br><span class="line"><span class="built_in">ls</span> abc/def</span><br></pre></td></tr></table></figure><p>每个目录下都有**.和…**</p><p>. 表示当前目录</p><p>… 表示上一级目录，即父目录</p><p>根目录下的.和…都表示当前目录</p><h2 id="基础操作">基础操作</h2><h4 id="输出重定向：">输出重定向：&gt;</h4><p>可将本应显示在终端上的内容保存到指定文件中。</p><p>如：ls &gt; test.txt ( test.txt 如果不存在，则创建，存在则覆盖其内容 )</p><p>注意： <code>&gt;输出重定向会覆盖原来的内容，&gt;&gt;输出重定向则会追加到文件的尾部。</code></p><h4 id="管道：">管道：|</h4><p>管道：一个命令的输出可以通过管道做为另一个命令的输入。</p><p>“ | ”的左右分为两端，从左端写入到右端。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">python@ubuntu:/bin$ ll -h |more   </span><br><span class="line">总用量 13M</span><br><span class="line">drwxr-xr-x  2 root root  4.0K 8月   4  2016 ./</span><br><span class="line">drwxr-xr-x 26 root root  4.0K 7月  30  2016 ../</span><br><span class="line">-rwxr-xr-x  1 root root 1014K 6月  24  2016 bash*</span><br><span class="line">-rwxr-xr-x  1 root root   31K 5月  20  2015 bunzip2*</span><br><span class="line">-rwxr-xr-x  1 root root  1.9M 8月  19  2015 busybox*</span><br><span class="line">-rwxr-xr-x  1 root root   31K 5月  20  2015 bzcat*</span><br><span class="line">lrwxrwxrwx  1 root root     6 5月  16  2016 bzcmp -&gt; bzdiff*</span><br><span class="line">-rwxr-xr-x  1 root root  2.1K 5月  20  2015 bzdiff*</span><br><span class="line">lrwxrwxrwx  1 root root     6 5月  16  2016 bzegrep -&gt; bzgrep*</span><br><span class="line">--更多--</span><br></pre></td></tr></table></figure><h4 id="清屏：clear">清屏：clear</h4><p>clear作用为清除终端上的显示(类似于DOS的cls清屏功能)，快捷键：Ctrl + l ( “l” 为字母 )。</p><h4 id="切换工作目录：-cd">切换工作目录： cd</h4><p>Linux所有的目录和文件名大小写敏感</p><p>cd后面可跟绝对路径，也可以跟相对路径。如果省略目录，则默认切换到当前用户的主目录。</p><table><thead><tr><th>命令</th><th>含义</th></tr></thead><tbody><tr><td>cd</td><td>相当于cd ~</td></tr><tr><td>cd ~</td><td>切换到当前用户的主目录(/home/用户目录)</td></tr><tr><td>cd .</td><td>切换到当前目录</td></tr><tr><td>cd …</td><td>切换到上级目录</td></tr><tr><td>cd -</td><td>进入上次所在的目录</td></tr></tbody></table><h4 id="查看命令位置：which">查看命令位置：which</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">python@ubuntu:~$ <span class="built_in">which</span> <span class="built_in">ls</span></span><br><span class="line">/bin/ls</span><br><span class="line">python@ubuntu:~$ <span class="built_in">which</span> <span class="built_in">sudo</span></span><br><span class="line">/usr/bin/sudo</span><br></pre></td></tr></table></figure><h2 id="查看文件内容">查看文件内容</h2><p>Linux系统中使用以下命令来查看文件的内容：</p><ul class="lvl-0"><li class="lvl-2"><p>cat 由第一行开始显示文件内容</p></li><li class="lvl-2"><p>tac 从最后一行开始显示</p></li><li class="lvl-2"><p>nl 显示的时候，顺道输出行号</p></li><li class="lvl-2"><p>more 一页一页的显示文件内容</p></li><li class="lvl-2"><p>less与more 类似，但可以往前翻页</p></li><li class="lvl-2"><p>head 只看头几行</p></li><li class="lvl-2"><p>tail 只看尾巴几行</p></li></ul><h4 id="基本显示：cat、tac">基本显示：cat、tac</h4><p>语法：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> [-AbEnTv]</span><br></pre></td></tr></table></figure><p>选项与参数：</p><ul class="lvl-0"><li class="lvl-2"><p>-A ：相当于 -vET 的整合选项，可列出一些特殊字符而不是空白而已；</p></li><li class="lvl-2"><p>-v ：列出一些看不出来的特殊字符</p></li><li class="lvl-2"><p>-E ：将结尾的断行字节 $ 显示出来；</p></li><li class="lvl-2"><p>-T ：将 [tab] 按键以 ^I 显示出来；</p></li><li class="lvl-2"><p>-b ：列出行号，空白行不标行号</p></li><li class="lvl-2"><p>-n ：列出行号，连同空白行也会有行号</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:/]# <span class="built_in">cat</span> -b /etc/issue</span><br><span class="line">     1	\S</span><br><span class="line">     2	Kernel \r on an \m</span><br><span class="line"></span><br><span class="line">[root@rocky8:/]# <span class="built_in">cat</span> -n /etc/issue</span><br><span class="line">     1	\S</span><br><span class="line">     2	Kernel \r on an \m</span><br><span class="line">     3</span><br></pre></td></tr></table></figure><p>tac与cat命令刚好相反，文件内容从最后一行开始显示，可以看出 tac 是 cat 的倒着写！如：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:/]# <span class="built_in">tac</span> /etc/issue</span><br><span class="line"></span><br><span class="line">Kernel \r on an \m</span><br><span class="line">\S</span><br></pre></td></tr></table></figure><h4 id="显示行号：nl">显示行号：nl</h4><p>语法：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">nl</span> [-bnw] 文件</span><br></pre></td></tr></table></figure><p>选项与参数：</p><ul class="lvl-0"><li class="lvl-2"><p>-b ：指定行号指定的方式，主要有两种：<br>-b a ：表示不论是否为空行，也同样列出行号(类似 cat -n)；<br>-b t ：如果有空行，空的那一行不要列出行号(默认值)；</p></li><li class="lvl-2"><p>-n ：列出行号表示的方法，主要有三种：<br>-n ln ：行号在荧幕的最左方显示；<br>-n rn ：行号在自己栏位的最右方显示，且不加 0 ；<br>-n rz ：行号在自己栏位的最右方显示，且加 0 ；</p></li><li class="lvl-2"><p>-w ：行号栏位的占用的位数。</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:/]# <span class="built_in">nl</span> /etc/issue</span><br><span class="line">     1	\S</span><br><span class="line">     2	Kernel \r on an \m</span><br><span class="line">       </span><br></pre></td></tr></table></figure><h4 id="分屏显示：more、less">分屏显示：more、less</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:/]# more /etc/man_db.config </span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Generated automatically from man.conf.in by the</span></span><br><span class="line"><span class="comment"># configure script.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># man.conf from man-1.6d</span></span><br><span class="line">....(中间省略)....</span><br><span class="line">--More--(28%)  &lt;== 光标在这里等待命令</span><br></pre></td></tr></table></figure><p>more运行时可以输入的命令有：</p><ul class="lvl-0"><li class="lvl-2"><p>空白键 (space)：代表向下翻一页；</p></li><li class="lvl-2"><p>Enter ：代表向下翻『一行』；</p></li><li class="lvl-2"><p>/字串 ：代表在这个显示的内容当中，向下搜寻『字串』这个关键字；</p></li><li class="lvl-2"><p>:f ：立刻显示出档名以及目前显示的行数；</p></li><li class="lvl-2"><p>q ：代表立刻离开 more ，不再显示该文件内容。</p></li><li class="lvl-2"><p>b 或 [ctrl]-b ：代表往回翻页，不过这动作只对文件有用，对管线无用。</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:/]# less /etc/man.config</span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Generated automatically from man.conf.in by the</span></span><br><span class="line"><span class="comment"># configure script.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># man.conf from man-1.6d</span></span><br><span class="line">....(中间省略)....</span><br><span class="line">:   &lt;== 这里可以等待你输入命令！</span><br></pre></td></tr></table></figure><p>less运行时可以输入的命令有：</p><ul class="lvl-0"><li class="lvl-2"><p>空白键 ：向下翻动一页；</p></li><li class="lvl-2"><p>[pagedown]：向下翻动一页；</p></li><li class="lvl-2"><p>[pageup] ：向上翻动一页；</p></li><li class="lvl-2"><p>/字串 ：向下搜寻『字串』的功能；</p></li><li class="lvl-2"><p>?字串 ：向上搜寻『字串』的功能；</p></li><li class="lvl-2"><p>n ：重复前一个搜寻 (与 / 或 ? 有关！)</p></li><li class="lvl-2"><p>N ：反向的重复前一个搜寻 (与 / 或 ? 有关！)</p></li><li class="lvl-2"><p>q ：离开 less 这个程序；</p></li></ul><h4 id="取首尾n行：head、tail">取首尾n行：head、tail</h4><p>head取出文件前面几行</p><p>语法：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">head</span> [-n number] 文件 </span><br></pre></td></tr></table></figure><p>选项与参数：</p><ul class="lvl-0"><li class="lvl-2"><p>-n ：后面接数字，代表显示几行的意思</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# <span class="built_in">head</span> /etc/man.config</span><br></pre></td></tr></table></figure><p>默认的情况中，显示前面 10 行！若要显示前 20 行，就得要这样：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# <span class="built_in">head</span> -n 20 /etc/man.config</span><br></pre></td></tr></table></figure><p>tail取出文件后面几行</p><p>语法：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">tail</span> [-n number] 文件 </span><br></pre></td></tr></table></figure><p>选项与参数：</p><ul class="lvl-0"><li class="lvl-2"><p>-n ：后面接数字，代表显示几行的意思</p></li><li class="lvl-2"><p>-f ：表示持续侦测后面所接的档名，要等到按下[ctrl]-c才会结束tail的侦测</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# <span class="built_in">tail</span> /etc/man.config</span><br><span class="line"><span class="comment"># 默认的情况中，显示最后的十行！若要显示最后的 20 行，就得要这样：</span></span><br><span class="line">[root@rocky8:~]# <span class="built_in">tail</span> -n 20 /etc/man.config</span><br></pre></td></tr></table></figure><h4 id="显示当前路径：pwd">显示当前路径：pwd</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# <span class="built_in">pwd</span></span><br><span class="line">/root</span><br></pre></td></tr></table></figure><p>选项与参数：</p><ul class="lvl-0"><li class="lvl-2"><p><strong>-P</strong> ：显示出确实的路径，而非使用连结 (link) 路径。</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# <span class="built_in">cd</span> /var/mail</span><br><span class="line">[root@rocky8:mail]# <span class="built_in">pwd</span></span><br><span class="line">/var/mail</span><br><span class="line">[root@rocky8:mail]# <span class="built_in">pwd</span> -P</span><br><span class="line">/var/spool/mail</span><br></pre></td></tr></table></figure><h2 id="文件操作">文件操作</h2><h4 id="创建目录：mkdir">创建目录：mkdir</h4><p>mkdir可以创建一个新的目录。</p><p>注意：新建目录的名称不能与当前目录中已有的目录或文件同名，并且目录创建者必须对当前目录具有写权限。</p><p>语法：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> [-mp] 目录名称</span><br></pre></td></tr></table></figure><p>选项与参数：</p><ul class="lvl-0"><li class="lvl-2"><p>-m ：指定被创建目录的权限，而不是根据默认权限 (umask) 设定</p></li><li class="lvl-2"><p>-p ：递归创建所需要的目录</p></li></ul><p>实例：-p递归创建目录：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# <span class="built_in">cd</span> /tmp</span><br><span class="line">[root@rocky8:tmp]# <span class="built_in">mkdir</span> <span class="built_in">test</span>	&lt;==创建一名为 <span class="built_in">test</span> 的新目录</span><br><span class="line">[root@rocky8:tmp]# <span class="built_in">mkdir</span> test1/test2/test3/test4</span><br><span class="line"><span class="built_in">mkdir</span>: cannot create directory ‘test1/test2/test3/test4’: No such file or directory		&lt;== 没办法直接创建此目录啊！</span><br><span class="line">[root@rocky8:tmp]# <span class="built_in">mkdir</span> -p test1/test2/test3/test4</span><br></pre></td></tr></table></figure><p>mkdir创建的目录权限默认根据umask得到，而-m参数可以指定被创建目录的权限：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# <span class="built_in">mkdir</span> t1</span><br><span class="line">[root@rocky8:~]# ll</span><br><span class="line">total 0</span><br><span class="line">drwxr-xr-x. 2 root root 6 Feb 20 15:06 t1</span><br><span class="line">[root@rocky8:~]# <span class="built_in">mkdir</span> t2 -m 711</span><br><span class="line">[root@rocky8:~]# ll</span><br><span class="line">total 0</span><br><span class="line">drwxr-xr-x. 2 root root 6 Feb 20 15:06 t1</span><br><span class="line">drwx--x--x. 2 root root 6 Feb 20 15:06 t2</span><br></pre></td></tr></table></figure><h4 id="删除文件：rm">删除文件：rm</h4><p>可通过rm删除文件或目录。使用rm命令要小心，因为文件删除后不能恢复。为了防止文件误删，可以在rm后使用-i参数以逐个确认要删除的文件。</p><p>常用参数及含义如下表所示：</p><table><thead><tr><th>参数</th><th>含义</th></tr></thead><tbody><tr><td>-i</td><td>以进行交互式方式执行</td></tr><tr><td>-f</td><td>强制删除，忽略不存在的文件，无需提示</td></tr><tr><td>-r</td><td>递归地删除目录下的内容，删除文件夹时必须加此参数</td></tr></tbody></table><p>####ln： 建立链接文件</p><p>软链接：ln -s 源文件 链接文件</p><p>硬链接：ln 源文件 链接文件</p><p>软链接类似于Windows下的快捷方式，如果软链接文件和源文件不在同一个目录，源文件要使用绝对路径，不能使用相对路径。</p><p>硬链接只能链接普通文件不能链接目录。 两个文件占用相同大小的硬盘空间，即使删除了源文件，链接文件还是存在，所以-s选项是更常见的形式。</p><h4 id="rename：修改文件名">rename：修改文件名</h4><p>rename命令是在Linux和Unix系统中使用的一个命令，用于批量重命名文件或目录。支持正则表达式。基本语法:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rename [选项] 表达式 替换的字符 文件...</span><br></pre></td></tr></table></figure><p>命令选项：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]#rename -h</span><br><span class="line"></span><br><span class="line">Usage:</span><br><span class="line"> rename [options] &lt;expression&gt; &lt;replacement&gt; &lt;file&gt;...</span><br><span class="line"></span><br><span class="line">Rename files.</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line"> -v, --verbose       explain what is being <span class="keyword">done</span></span><br><span class="line"> -s, --symlink       act on the target of symlinks</span><br><span class="line"> -n, --no-act        <span class="keyword">do</span> not make any changes</span><br><span class="line"> -o, --no-overwrite  don<span class="string">&#x27;t overwrite existing files</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> -h, --help          display this help</span></span><br><span class="line"><span class="string"> -V, --version       display version</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">For more details see rename(1).</span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure><p>下面是rename命令的常用选项</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-v, --verbose : 显示详细的操作信息 </span><br><span class="line">-s, --symlink : 对符号链接目标进行操作</span><br><span class="line">-h, --<span class="built_in">help</span> : 显示帮助信息并退出 </span><br><span class="line">-V, --version : 显示版本信息并退出</span><br></pre></td></tr></table></figure><p>实例1：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]#rename -v file afile file0?</span><br><span class="line">`file01<span class="string">&#x27; -&gt; `afile01&#x27;</span></span><br><span class="line">`file02<span class="string">&#x27; -&gt; `afile02&#x27;</span></span><br><span class="line">`file03<span class="string">&#x27; -&gt; `afile03&#x27;</span></span><br><span class="line">`file04<span class="string">&#x27; -&gt; `afile04&#x27;</span></span><br><span class="line">`file05<span class="string">&#x27; -&gt; `afile05&#x27;</span></span><br><span class="line">`file06<span class="string">&#x27; -&gt; `afile06&#x27;</span></span><br><span class="line">`file07<span class="string">&#x27; -&gt; `afile07&#x27;</span></span><br><span class="line">`file08<span class="string">&#x27; -&gt; `afile08&#x27;</span></span><br><span class="line">`file09<span class="string">&#x27; -&gt; `afile09&#x27;</span></span><br></pre></td></tr></table></figure><p>实例2：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]#rename file afile *</span><br><span class="line">[root@rocky8:~]#<span class="built_in">ls</span></span><br><span class="line">aafile01  aafile09  afile017  afile025  afile033  afile041  afile049  afile057  afile065  afile073  afile081  afile089  afile097......</span><br></pre></td></tr></table></figure><h4 id="grep：文本搜索">grep：文本搜索</h4><p>Linux系统中grep命令是一种强大的文本搜索工具，grep允许对文本文件进行模式查找。如果找到匹配模式， grep打印包含模式的所有行。</p><p>grep一般格式为：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep [-选项] <span class="string">&#x27;搜索内容串&#x27;</span> 文件名</span><br></pre></td></tr></table></figure><p>在grep命令中输入字符串参数时，最好引号或双引号括起来。例如：<code>grep 'a' 1.txt</code>。</p><p>在当前目录中，查找前缀有test字样的文件中包含 test 字符串的文件，并打印出该字符串的行。此时，可以使用如下命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ grep <span class="built_in">test</span> <span class="built_in">test</span>* <span class="comment">#查找前缀有test的文件包含test字符串的文件  </span></span><br><span class="line">testfile1:This a Linux testfile! <span class="comment">#列出testfile1 文件中包含test字符的行  </span></span><br><span class="line">testfile_2:This is a linux testfile! <span class="comment">#列出testfile_2 文件中包含test字符的行  </span></span><br><span class="line">testfile_2:Linux <span class="built_in">test</span> <span class="comment">#列出testfile_2 文件中包含test字符的行 </span></span><br></pre></td></tr></table></figure><p>以递归的方式查找符合条件的文件。例如，查找指定目录/etc/acpi 及其子目录（如果存在子目录的话）下所有文件中包含字符串&quot;update&quot;的文件，并打印出该字符串所在行的内容，使用的命令为：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ grep -r update /etc/acpi <span class="comment">#以递归的方式查找“etc/acpi”  </span></span><br><span class="line"><span class="comment">#下包含“update”的文件  </span></span><br><span class="line">/etc/acpi/ac.d/85-anacron.sh:# (Things like the slocate updatedb cause a lot of IO.)  </span><br><span class="line">Rather than  </span><br><span class="line">/etc/acpi/resume.d/85-anacron.sh:# (Things like the slocate updatedb cause a lot of  </span><br><span class="line">IO.) Rather than  </span><br><span class="line">/etc/acpi/events/thinkpad-cmos:action=/usr/sbin/thinkpad-keys--update </span><br></pre></td></tr></table></figure><p>反向查找。前面各个例子是查找并打印出符合条件的行，通过&quot;-v&quot;参数可以打印出不符合条件行的内容。</p><p>查找文件名中包含 test 的文件中不包含test 的行，此时，使用的命令为：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ grep -v <span class="built_in">test</span>* <span class="comment">#查找文件名中包含test 的文件中不包含test 的行  </span></span><br><span class="line">testfile1:helLinux!  </span><br><span class="line">testfile1:Linis a free Unix-<span class="built_in">type</span> operating system.  </span><br><span class="line">testfile1:Lin  </span><br><span class="line">testfile_1:HELLO LINUX!  </span><br><span class="line">testfile_1:LINUX IS A FREE UNIX-TYPE OPTERATING SYSTEM.  </span><br><span class="line">testfile_1:THIS IS A LINUX TESTFILE!  </span><br><span class="line">testfile_2:HELLO LINUX!  </span><br><span class="line">testfile_2:Linux is a free unix-type opterating system.  </span><br></pre></td></tr></table></figure><h4 id="查找文件：find">查找文件：find</h4><p>常用用法：</p><table><thead><tr><th>命令</th><th>含义</th></tr></thead><tbody><tr><td>find ./ -name <a target="_blank" rel="noopener" href="http://test.sh">test.sh</a></td><td>查找当前目录下所有名为test.sh的文件</td></tr><tr><td>find ./ -name ‘*.sh’</td><td>查找当前目录下所有后缀为.sh的文件</td></tr><tr><td>find ./ -name “[A-Z]*”</td><td>查找当前目录下所有以大写字母开头的文件</td></tr><tr><td>find /tmp -size 2M</td><td>查找在/tmp 目录下等于2M的文件</td></tr><tr><td>find /tmp -size +2M</td><td>查找在/tmp 目录下大于2M的文件</td></tr><tr><td>find /tmp -size -2M</td><td>查找在/tmp 目录下小于2M的文件</td></tr><tr><td>find ./ -size +4k -size -5M</td><td>查找当前目录下大于4k，小于5M的文件</td></tr><tr><td>find ./ -perm 0777</td><td>查找当前目录下权限为 777 的文件或目录</td></tr></tbody></table><p>Linux find命令用来在指定目录下查找文件。任何位于参数之前的字符串都将被视为欲查找的目录名。如果使用该命令时，不设置任何参数，则find命令将在当前目录下查找子目录与文件。并且将查找到的子目录和文件全部进行显示。</p><p>语法：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find path -option [ -<span class="built_in">print</span> ] [ -<span class="built_in">exec</span> -ok <span class="built_in">command</span> ] &#123;&#125; \;</span><br></pre></td></tr></table></figure><p><strong>常用参数说明</strong> :</p><ul class="lvl-0"><li class="lvl-2"><p>-perm xxxx：权限为 xxxx的文件或目录</p></li><li class="lvl-2"><p>-user： 按照文件属主来查找文件。</p></li><li class="lvl-2"><p>-size n : n单位,b:512位元组的区块,c:字元数,k:kilo bytes,w:二个位元组</p></li><li class="lvl-2"><p>-mount, -xdev : 只检查和指定目录在同一个文件系统下的文件，避免列出其它文件系统中的文件</p></li><li class="lvl-2"><p>-amin n : 在过去 n 分钟内被读取过</p></li><li class="lvl-2"><p>-anewer file : 比文件 file 更晚被读取过的文件</p></li><li class="lvl-2"><p>-atime n : 在过去n天内被读取过的文件</p></li><li class="lvl-2"><p>-cmin n : 在过去 n 分钟内被修改过</p></li><li class="lvl-2"><p>-cnewer file :比文件 file 更新的文件</p></li><li class="lvl-2"><p>-ctime n : 在过去n天内被修改过的文件</p></li><li class="lvl-2"><p>-empty : 空的文件</p></li><li class="lvl-2"><p>-gid n or -group name : gid 是 n 或是 group 名称是 name</p></li><li class="lvl-2"><p>-ipath p, -path p : 路径名称符合 p 的文件，ipath 会忽略大小写</p></li><li class="lvl-2"><p>-name name, -iname name : 文件名称符合 name 的文件。iname 会忽略大小写</p></li><li class="lvl-2"><p>-type 查找某一类型的文件：</p><ul class="lvl-2"><li class="lvl-4">b - 块设备文件</li><li class="lvl-4">d - 目录</li><li class="lvl-4">c - 字符设备文件</li><li class="lvl-4">p - 管道文件</li><li class="lvl-4">l - 符号链接文件</li><li class="lvl-4">f - 普通文件</li></ul></li><li class="lvl-2"><p>-exec 命令名{} \ (注意：“}”和“\”之间有空格)</p></li></ul><p>find实例：</p><p>显示当前目录中大于20字节并以.c结尾的文件名</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . -name <span class="string">&quot;*.c&quot;</span> -size +20c </span><br></pre></td></tr></table></figure><p>将目前目录其其下子目录中所有一般文件列出</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . -<span class="built_in">type</span> f</span><br></pre></td></tr></table></figure><p>将目前目录及其子目录下所有最近 20 天内更新过的文件列出</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . -ctime -20</span><br></pre></td></tr></table></figure><p>查找/var/log目录中更改时间在7日以前的普通文件，并在删除之前询问它们：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /var/log -<span class="built_in">type</span> f -mtime +7 -ok <span class="built_in">rm</span> &#123;&#125; \;</span><br></pre></td></tr></table></figure><p>查找前目录中文件属主具有读、写权限，并且文件所属组的用户和其他用户具有读权限的文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . -<span class="built_in">type</span> f -perm 644 -<span class="built_in">exec</span> <span class="built_in">ls</span> -l &#123;&#125; \;</span><br></pre></td></tr></table></figure><p>查找系统中所有文件长度为0的普通文件，并列出它们的完整路径：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -<span class="built_in">type</span> f -size 0 -<span class="built_in">exec</span> <span class="built_in">ls</span> -l &#123;&#125; \;</span><br></pre></td></tr></table></figure><p>从根目录查找类型为符号链接的文件，并将其删除：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -<span class="built_in">type</span> l -<span class="built_in">exec</span> <span class="built_in">rm</span> -rf &#123;&#125; \</span><br></pre></td></tr></table></figure><p>从当前目录查找用户tom的所有文件并显示在屏幕上</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . -user tom</span><br></pre></td></tr></table></figure><p>在当前目录中查找所有文件以.doc结尾，且更改时间在3天以上的文件，找到后删除，并且给出删除提示</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . -name *.doc  -mtime +3 -ok <span class="built_in">rm</span> &#123;&#125; \;</span><br></pre></td></tr></table></figure><p>在当前目录下查找所有链接文件，并且以长格式显示文件的基本信息</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . -<span class="built_in">type</span> l -<span class="built_in">exec</span> <span class="built_in">ls</span> -l &#123;&#125; \;</span><br></pre></td></tr></table></figure><p>在当前目录下查找文件名有一个小写字母、一个大写字母、两个数字组成，且扩展名为.doc的文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . -name <span class="string">&#x27;[a-z][A-Z][0-9][0-9].doc&#x27;</span></span><br></pre></td></tr></table></figure><h4 id="拷贝文件：cp">拷贝文件：cp</h4><p>cp命令的功能是将给出的文件或目录复制到另一个文件或目录中，相当于DOS下的copy命令。</p><p>常用选项说明：</p><table><thead><tr><th>选项</th><th>含义</th></tr></thead><tbody><tr><td>-a</td><td>该选项通常在复制目录时使用，它保留链接、文件属性，并递归地复制目录，简单而言，保持文件原有属性。</td></tr><tr><td>-f</td><td>已经存在的目标文件而不提示</td></tr><tr><td>-i</td><td>交互式复制，在覆盖目标文件之前将给出提示要求用户确认</td></tr><tr><td>-r</td><td>若给出的源文件是目录文件，则cp将递归复制该目录下的所有子目录和文件，目标文件必须为一个目录名。</td></tr><tr><td>-v</td><td>显示拷贝进度</td></tr><tr><td>-l</td><td>创建硬链接(hard link)，而非复制文件本身</td></tr><tr><td>-s</td><td>复制成为符号链接 (symbolic link)，相当于批量创建快捷方式</td></tr><tr><td>-u</td><td>若 destination 比 source 旧才升级 destination ！</td></tr></tbody></table><p>cp vim_configure/ code/ -ivr 把文件夹 vim_configure 拷贝到 code 目录里。</p><h4 id="移动文件：mv">移动文件：mv</h4><p>mv命令用来移动文件或目录，也可以给文件或目录重命名。</p><p>常用选项说明：</p><table><thead><tr><th>选项</th><th>含义</th></tr></thead><tbody><tr><td>-f</td><td>禁止交互式操作，如有覆盖也不会给出提示</td></tr><tr><td>-i</td><td>确认交互方式操作，如果mv操作将导致对已存在的目标文件的覆盖，系统会询问是否重写，要求用户回答以避免误覆盖文件</td></tr><tr><td>-v</td><td>显示移动进度</td></tr></tbody></table><p>mv可以修改文件名：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]#ll</span><br><span class="line">total 4</span><br><span class="line">-rw-------. 1 root root 1256 Feb 18 21:18 anaconda-ks.cfg</span><br><span class="line">-rw-r--r--. 1 root root    0 Feb 19 11:43 test.txt</span><br><span class="line">[root@rocky8:~]#<span class="built_in">mv</span> test.txt <span class="built_in">test</span></span><br><span class="line">[root@rocky8:~]#ll</span><br><span class="line">total 4</span><br><span class="line">-rw-------. 1 root root 1256 Feb 18 21:18 anaconda-ks.cfg</span><br><span class="line">-rw-r--r--. 1 root root    0 Feb 19 11:43 <span class="built_in">test</span></span><br></pre></td></tr></table></figure><h4 id="归档管理：tar">归档管理：tar</h4><p>此命令可以把一系列文件归档到一个大文件中，也可以把档案文件解开以恢复数据。</p><p>tar使用格式 tar [参数] 打包文件名 文件</p><p>tar命令参数很特殊，其参数前面可以使用“-”，也可以不使用。</p><p>常用参数：</p><table><thead><tr><th>参数</th><th>含义</th></tr></thead><tbody><tr><td>-c</td><td>生成档案文件，创建打包文件</td></tr><tr><td>-v</td><td>列出归档解档的详细过程，显示进度</td></tr><tr><td>-f</td><td>指定档案文件名称，f后面一定是.tar文件，所以必须放选项最后</td></tr><tr><td>-t</td><td>列出档案中包含的文件</td></tr><tr><td>-x</td><td>解开档案文件</td></tr></tbody></table><p>注意：除了f需要放在参数的最后，其它参数的顺序任意。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# tar -cvf test.tar &#123;1..3&#125;.txt</span><br><span class="line">1.txt</span><br><span class="line">2.txt</span><br><span class="line">3.txt</span><br><span class="line">[root@rocky8:~]# ll</span><br><span class="line">total 12</span><br><span class="line">-rw-r--r--. 1 root root     0 Feb 20 15:14 1.txt</span><br><span class="line">-rw-r--r--. 1 root root     0 Feb 20 15:14 2.txt</span><br><span class="line">-rw-r--r--. 1 root root     0 Feb 20 15:14 3.txt</span><br><span class="line">-rw-r--r--. 1 root root 10240 Feb 20 15:14 test.tar</span><br><span class="line">[root@rocky8:~]# <span class="built_in">rm</span> -rf *.txt</span><br><span class="line">[root@rocky8:~]# ll</span><br><span class="line">total 12</span><br><span class="line">-rw-r--r--. 1 root root 10240 Feb 20 15:14 test.tar</span><br><span class="line">[root@rocky8:~]# tar -xvf test.tar </span><br><span class="line">1.txt</span><br><span class="line">2.txt</span><br><span class="line">3.txt</span><br><span class="line">[root@rocky8:~]# ll</span><br><span class="line">total 12</span><br><span class="line">-rw-r--r--. 1 root root     0 Feb 20 15:14 1.txt</span><br><span class="line">-rw-r--r--. 1 root root     0 Feb 20 15:14 2.txt</span><br><span class="line">-rw-r--r--. 1 root root     0 Feb 20 15:14 3.txt</span><br><span class="line">-rw-r--r--. 1 root root 10240 Feb 20 15:14 test.tar</span><br></pre></td></tr></table></figure><h4 id="文件压缩解压：gzip、bzip2">文件压缩解压：gzip、bzip2</h4><p>tar与gzip命令结合使用实现文件打包、压缩。 tar只负责打包文件，但不压缩，用gzip压缩tar打包后的文件，其扩展名一般用xxxx.tar.gz。</p><p>gzip使用格式如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gzip  [选项]  被压缩文件</span><br></pre></td></tr></table></figure><p>常用选项：</p><table><thead><tr><th>选项</th><th>含义</th></tr></thead><tbody><tr><td>-d</td><td>解压文件</td></tr><tr><td>-r</td><td>压缩文件</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# ll *.tar*</span><br><span class="line">-rw-r--r--. 1 root root 10240 Feb 20 15:14 test.tar</span><br><span class="line">[root@rocky8:~]# gzip -r test.tar test.tar.gz  ==&gt;或者:gzip test.tar</span><br><span class="line">[root@rocky8:~]# ll *.tar*</span><br><span class="line">-rw-r--r--. 1 root root 131 Feb 20 15:14 test.tar.gz</span><br><span class="line">[root@rocky8:~]# gzip -d test.tar.gz </span><br><span class="line">[root@rocky8:~]# ll *.tar*</span><br><span class="line">-rw-r--r--. 1 root root 10240 Feb 20 15:14 test.tar</span><br></pre></td></tr></table></figure><p>tar命令中-z选项可以调用gzip实现了一个压缩的功能，实行一个先打包后压缩的过程。</p><p>压缩用法：tar zcvf 压缩包包名 文件1 文件2 …</p><p>例如： tar zcvf test.tar.gz 1.c 2.c 3.c 4.c把 1.c 2.c 3.c 4.c 压缩成 test.tar.gz</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# <span class="built_in">ls</span></span><br><span class="line">1.c  2.c  3.c  4.c</span><br><span class="line">[root@rocky8:~]# tar -zcvf test.tar.gz &#123;1..4&#125;.c</span><br><span class="line">1.c</span><br><span class="line">2.c</span><br><span class="line">3.c</span><br><span class="line">4.c</span><br><span class="line">[root@rocky8:~]# <span class="built_in">ls</span></span><br><span class="line">1.c  2.c  3.c  4.c  test.tar.gz</span><br><span class="line">[root@rocky8:~]# gzip -d test.tar.gz </span><br><span class="line">[root@rocky8:~]# <span class="built_in">ls</span></span><br><span class="line">1.c  2.c  3.c  4.c  test.tar</span><br></pre></td></tr></table></figure><p>解压用法： tar zxvf 压缩包包名</p><p>例如：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# <span class="built_in">ls</span></span><br><span class="line">new.tar.gz  test.tar  test.tar.gz</span><br><span class="line">[root@rocky8:~]# tar -zxvf new.tar.gz</span><br><span class="line">1.c</span><br><span class="line">2.c</span><br><span class="line">3.c</span><br><span class="line">4.c</span><br><span class="line">[root@rocky8:~]# <span class="built_in">ls</span></span><br><span class="line">1.c  2.c  3.c  4.c  new.tar.gz  test.tar  test.tar.gz</span><br></pre></td></tr></table></figure><p>解压到指定目录：-C （解压时可以不指定-z选项）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# <span class="built_in">ls</span></span><br><span class="line">1.c  2.c  3.c  4.c  new.tar.gz  test.tar  test.tar.gz</span><br><span class="line">[root@rocky8:~]# tar -zxvf new.tar.gz -C number/</span><br><span class="line">1.c</span><br><span class="line">2.c</span><br><span class="line">3.c</span><br><span class="line">4.c</span><br><span class="line">[root@rocky8:~]# <span class="built_in">ls</span> number/</span><br><span class="line">1.c  2.c  3.c  4.c</span><br></pre></td></tr></table></figure><p>bzip2命令跟gzip用法类似</p><p>压缩用法：tar jcvf 压缩包包名 文件…(tar jcvf bk.tar.bz2 *.c)</p><p>解压用法：tar jxvf 压缩包包名 (tar jxvf bk.tar.bz2)</p><h4 id="文件压缩解压：zip、unzip">文件压缩解压：zip、unzip</h4><p>通过zip压缩文件的目标文件不需要指定扩展名，默认扩展名为zip。</p><p>压缩文件：zip [-r] 目标文件(没有扩展名) 源文件</p><p>解压文件：unzip -d 解压后目录文件 压缩文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# <span class="built_in">ls</span></span><br><span class="line">1.txt  2.txt  3.txt  4.txt  test.tar</span><br><span class="line">[root@rocky8:~]# zip myzip *.txt</span><br><span class="line">  adding: 1.txt (stored 0%)</span><br><span class="line">  adding: 2.txt (stored 0%)</span><br><span class="line">  adding: 3.txt (stored 0%)</span><br><span class="line">  adding: 4.txt (stored 0%)</span><br><span class="line">[root@rocky8:~]# <span class="built_in">ls</span></span><br><span class="line">1.txt  2.txt  3.txt  4.txt  myzip.zip  test.tar</span><br><span class="line">[root@rocky8:~]# <span class="built_in">rm</span> -f *.txt *.tar</span><br><span class="line">[root@rocky8:~]# <span class="built_in">ls</span></span><br><span class="line">myzip.zip</span><br><span class="line">[root@rocky8:~]# unzip myzip</span><br><span class="line">Archive:  myzip.zip</span><br><span class="line"> extracting: 1.txt                   </span><br><span class="line"> extracting: 2.txt                   </span><br><span class="line"> extracting: 3.txt                   </span><br><span class="line"> extracting: 4.txt                   </span><br><span class="line">[root@rocky8:~]# <span class="built_in">ls</span></span><br><span class="line">1.txt  2.txt  3.txt  4.txt  myzip.zip</span><br></pre></td></tr></table></figure><p>本文参考：</p></div><div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="http://mcorazon.top/posts/247a4e5f/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/006.png"><meta itemprop="name" content="Corazon"><meta itemprop="description" content="<font color="#000000">网络安全从业人员个人博客</font>"> </span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="MCorazon"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/posts/247a4e5f/" class="post-title-link" itemprop="url">【Linux】Vim使用及文本处理</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2025-02-19 17:00:19" itemprop="dateCreated datePublished" datetime="2025-02-19T17:00:19+08:00">2025-02-19</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2025-02-20 15:03:27" itemprop="dateModified" datetime="2025-02-20T15:03:27+08:00">2025-02-20</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>38k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>35 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="vim的使用">vim的使用</h2><h3 id="什么是-vim？">什么是 vim？</h3><p>Vim是从 vi 发展出来的一个文本编辑器。代码补完、编译及错误跳转等方便编程的功能特别丰富，在程序员中被广泛使用。vim 的官方网站 (<a target="_blank" rel="noopener" href="http://www.vim.org/">http://www.vim.org</a>)</p><p>vim 键盘图：</p><p><img src="/images/loading.jpeg" data-original="/posts/247a4e5f//11de8c1d4c8385c025ede918e03b6a86.gif" alt="img"></p><p>基本上vi可以分为三种状态：</p><ul class="lvl-0"><li class="lvl-2"><p>命令模式（command mode)</p></li><li class="lvl-2"><p>插入模式（Insert mode)</p></li><li class="lvl-2"><p>底行模式（last line mode)</p></li></ul><h3 id="vi-vim的三种模式">vi/vim的三种模式</h3><p>vi/vim主要分为三种模式，分别是<strong>命令模式（Command mode）</strong>，<strong>输入模式（Insert mode）**和**底线命令模式（Last line mode）</strong>。</p><p><img src="/images/loading.jpeg" data-original="/posts/247a4e5f//1cee092565d316d1462ddbf987fbc6e1.png" alt="img"></p><p>这三种模式的作用分别是：</p><h4 id="输入模式">输入模式</h4><p>在命令模式下输入插入命令i、附加命令a 、打开命令o、修改命令c、取代命令r或替换命令s都可以进入文本输入模式。在该模式下，用户输入的任何字符都被Vi当做文件内容保存起来，并将其显示在屏幕上。在文本输入过程中，若想回到命令模式下，按键ESC即可。</p><h4 id="命令模式">命令模式</h4><p>用户刚刚启动 vi/vim，便进入了命令模式。 任何时候，不管用户处于何种模式，只要按一下ESC键，即可使Vi进入命令模式；</p><p>此状态下敲击键盘动作会被Vim识别为命令，输入<code>:</code> 可切换到<strong>底线命令模式</strong>，以在最底一行输入命令。</p><p>若想要编辑文本：启动Vim，进入了命令模式，按下i，切换到输入模式。</p><h4 id="底行模式">底行模式</h4><p>在命令模式下按下:（英文冒号）就进入了底行命令模式。</p><p>底线命令模式可以输入单个或多个字符的命令，可用的命令非常多。</p><p>在底线命令模式中，基本的命令有（已经省略了冒号）：</p><ul class="lvl-0"><li class="lvl-2"><p>q 退出程序</p></li><li class="lvl-2"><p>w 保存文件</p></li></ul><p>按ESC键可随时退出底线命令模式。</p><h3 id="vim基础操作">vim基础操作</h3><h4 id="进入输入模式-Insert-mode">进入输入模式(Insert mode)</h4><p><img src="/images/loading.jpeg" data-original="/posts/247a4e5f//90d3f3acdaa32af011e62e7be564f47c.png" alt="1574384484673"></p><ul class="lvl-0"><li class="lvl-2"><p>i: 插入光标前一个字符</p></li><li class="lvl-2"><p>I: 插入行首</p></li><li class="lvl-2"><p>a: 插入光标后一个字符</p></li><li class="lvl-2"><p>A: 插入行未</p></li><li class="lvl-2"><p>o: 向下新开一行,插入行首</p></li><li class="lvl-2"><p>O: 向上新开一行,插入行首</p></li></ul><p>在进入输入模式后， vi 画面的左下角处会出现『–INSERT–』的字样</p><h4 id="进入替换模式-Replace-mode">进入替换模式(Replace mode)</h4><ul class="lvl-0"><li class="lvl-2"><p>r : 只会取代光标所在的那一个字符一次</p></li><li class="lvl-2"><p>R: 会一直取代光标所在的文字，直到按下ESC为止</p></li></ul><p>在进入输入模式后， vi 画面的左下角处会出现『–REPLACE–』的字样</p><h4 id="命令模式常用命令">命令模式常用命令</h4><h5 id="移动光标">移动光标</h5><table><thead><tr><th>移动光标的方法</th><th></th></tr></thead><tbody><tr><td>h 或 向左箭头键(←)</td><td>光标向左移动一个字符</td></tr><tr><td>j 或 向下箭头键(↓)</td><td>光标向下移动一个字符</td></tr><tr><td>k 或 向上箭头键(↑)</td><td>光标向上移动一个字符</td></tr><tr><td>l 或 向右箭头键(→)</td><td>光标向右移动一个字符</td></tr><tr><td>向下移动 30 行，可以使用 “30j” 或 “30↓” 的组合按键</td><td></td></tr><tr><td>[Ctrl] + [f]</td><td>屏幕『向下』移动一页，相当于 [Page Down]按键 (常用)</td></tr><tr><td>[Ctrl] + [b]</td><td>屏幕『向上』移动一页，相当于 [Page Up] 按键 (常用)</td></tr><tr><td>[Ctrl] + [d]</td><td>屏幕『向下』移动半页</td></tr><tr><td>[Ctrl] + [u]</td><td>屏幕『向上』移动半页</td></tr><tr><td>+</td><td>光标移动到非空格符的下一行</td></tr><tr><td>-</td><td>光标移动到非空格符的上一行</td></tr><tr><td>n</td><td>表示空格光标向右移动这一行的 n 个字符。例如 20 则光标会向后面移动 20 个字符距离。</td></tr><tr><td>0 或功能键[Home]</td><td>这是数字『 0 』：移动到这一行的最前面字符处 (常用)</td></tr><tr><td>$ 或功能键[End]</td><td>移动到这一行的最后面字符处(常用)</td></tr><tr><td>H</td><td>光标移动到这个屏幕的最上方那一行的第一个字符</td></tr><tr><td>M</td><td>光标移动到这个屏幕的中央那一行的第一个字符</td></tr><tr><td>L</td><td>光标移动到这个屏幕的最下方那一行的第一个字符</td></tr><tr><td>G</td><td>移动到这个文档的最后一行(常用)</td></tr><tr><td>nG</td><td>n 为数字。移动到这个文件的第 n 行。例如 20G 则会移动到这个文件的第 20 行(可配合 :set nu)</td></tr><tr><td>gg</td><td>移动到这个文档的第一行，相当于 1G</td></tr><tr><td>n</td><td>n 为数字。光标向下移动 n 行(常用)</td></tr></tbody></table><h5 id="删除操作">删除操作</h5><table><thead><tr><th>删除操作</th><th>删除后会添加到剪切板，相当于剪切</th></tr></thead><tbody><tr><td>x, X</td><td>x为向后删除一个字符 (相当于 [del] 按键)， X为向前删除一个字符(相当于 [backspace] )</td></tr><tr><td>nx</td><td>n 为数字，连续向后删除 n 个字符。例如10x表示连续删除 10 个字符。</td></tr><tr><td>dd</td><td>删除光标所在的一整行(常用)</td></tr><tr><td>ndd</td><td>n 为数字。删除光标所在的向下 n 行，例如 20dd 则是删除 20 行</td></tr><tr><td>d1G</td><td>删除光标所在行到首行的所有数据</td></tr><tr><td>dG</td><td>删除光标所在行到最后一行的所有数据</td></tr><tr><td>d$</td><td>删除光标所在位置到该行的最后一个字符</td></tr><tr><td>d0</td><td>删除光标所在位置到该行的最前面一个字符</td></tr></tbody></table><h5 id="撤销-复原-重复">撤销&amp;复原&amp;重复</h5><table><thead><tr><th>撤销&amp;复原</th><th></th></tr></thead><tbody><tr><td>u</td><td>撤销操作，相对于普通编辑器里面的ctrl+z</td></tr><tr><td>Ctrl+r</td><td>恢复操作，相对于普通编辑器里面的ctrl+y</td></tr><tr><td>.</td><td>就是小数点！可重复前一个动作</td></tr></tbody></table><h5 id="复制-粘贴">复制&amp;粘贴</h5><table><thead><tr><th>复制&amp;粘贴</th><th></th></tr></thead><tbody><tr><td>yy</td><td>复制光标所在行</td></tr><tr><td>nyy</td><td>n 为数字。复制光标所在的向下 n 行，例如 20yy 则是复制 20 行</td></tr><tr><td>y1G</td><td>复制光标所在行到第一行的所有数据</td></tr><tr><td>yG</td><td>复制光标所在行到最后一行的所有数据</td></tr><tr><td>y0</td><td>复制光标所在的那个字符到该行行首的所有数据</td></tr><tr><td>y$</td><td>复制光标所在的那个字符到该行行尾的所有数据</td></tr><tr><td>p, P</td><td>p 为将已复制的数据在光标下一行贴上，P 则为贴在光标上一行！</td></tr></tbody></table><h5 id="合成行">合成行</h5><ul class="lvl-0"><li class="lvl-2"><p>J: 将光标所在行与下一行的数据结合成同一行</p></li></ul><h5 id="搜索">搜索</h5><table><thead><tr><th>搜索</th><th></th></tr></thead><tbody><tr><td>/word</td><td>向光标之下寻找一个名称为 word 的字符串。</td></tr><tr><td>?word</td><td>向光标之上寻找一个字符串名称为 word 的字符串。</td></tr><tr><td>n</td><td>代表重复前一个搜寻的动作，根据前面输入的/word还是?word向下或向上搜索下一个匹配的字符串。</td></tr><tr><td>N</td><td>表示反向搜索，与n的搜索方向相反。</td></tr></tbody></table><h5 id="替换">替换</h5><table><thead><tr><th>替换</th><th></th></tr></thead><tbody><tr><td>:n1,n2s/word1/word2/g</td><td>在第 n1 与 n2 行之间寻找word1并替换为word2！比如『:100,200s/vbird/VBIRD/g』表示在100到200行之间将vbird替换为VBIRD</td></tr><tr><td><code>:1,$s/word1/word2/g</code> 或 <code>:%s/word1/word2/g</code></td><td>$表示最后一行，%s表示所有行。</td></tr><tr><td><code>:1,$s/word1/word2/gc</code> 或 <code>:%s/word1/word2/gc</code></td><td>gc中的c表示取代前显示提示字符给用户确认 (confirm) ！</td></tr></tbody></table><h5 id="底行命令模式的常用操作">底行命令模式的常用操作</h5><table><thead><tr><th>底行命令模式</th><th></th></tr></thead><tbody><tr><td>:w</td><td>保存编辑数据</td></tr><tr><td>:w!</td><td>若文件属性为『只读』时，强制写入该文件。不过，到底能不能写入， 还是跟你对该文件的文件权限有关啊！</td></tr><tr><td>:q</td><td>离开 vi</td></tr><tr><td>:q!</td><td>若曾修改过文件，又不想储存，使用 ! 为强制离开不储存文件。</td></tr><tr><td>惊叹号 (!) 在 vi 当中，常常具有『强制』的意思～</td><td></td></tr><tr><td>:wq</td><td>储存后离开，若为 :wq! 则为强制储存后离开</td></tr><tr><td>ZZ</td><td>若文件没有更动，则不储存离开，若文件已经被更动过，则储存后离开！</td></tr><tr><td>:w [filename]</td><td>另存为</td></tr><tr><td>:r [filename]</td><td>将另一个文件『filename』的数据加到光标所在行后面</td></tr><tr><td>:n1,n2 w [filename]</td><td>将 n1 到 n2 行的内容储存成 filename 这个文件。</td></tr><tr><td>:! command</td><td>暂时离开 vi 到指令行模式下执行 command 的显示结果！例如 『:! ls /home』即可在 vi 当中察看 /home 底下以 ls 输出的文件信息！</td></tr><tr><td>:set nu</td><td>会在每一行的前缀显示该行的行号</td></tr><tr><td>:set nonu</td><td>取消行号显示</td></tr></tbody></table><p>示例：</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">将当前路径插入到光标的下一行</span><br><span class="line"><span class="symbol">:r!pwd</span></span><br></pre></td></tr></table></figure><h4 id="可视模式">可视模式</h4><p>v 进入字符可视化模式： 文本选择是以字符为单位的。<br>V 进入行可视化模式： 文本选择是以行为单位的。<br>Ctrl+v 进入块可视化模式 ： 选择一个矩形内的文本。</p><p>可视模式下可进行如下操作：</p><table><thead><tr><th>可视模式操作</th><th></th></tr></thead><tbody><tr><td>A</td><td>在选定的部分后面插入内容</td></tr><tr><td>I</td><td>在选定的部分前面插入内容</td></tr><tr><td>d</td><td>删除选定的部分</td></tr><tr><td>c</td><td>删除选定的部分并进入插入模式（有批量替换效果）</td></tr><tr><td>r</td><td>把选定的部分全部替换为指定的单个字符</td></tr><tr><td><code>&gt;&gt;</code></td><td>向右缩进一个单位，更适合行可视化模式</td></tr><tr><td><code>&lt;&lt;</code></td><td>向左缩进一个单位，更适合行可视化模式</td></tr><tr><td><code>gu</code></td><td>选中区域转为小写</td></tr><tr><td><code>gU</code></td><td>选中区域转为大写</td></tr><tr><td><code>g~</code></td><td>大小写互调</td></tr></tbody></table><p>可视模式下，选中的区域是由两个端点来界定的（一个在左上角，一个在右下角），在默认情况下只可以控制右下角的端点，而使用<code>o</code>按键则可以在左上角和右下角之间切换控制端点。</p><h3 id="VIM快速复习">VIM快速复习</h3><h4 id="按-冒号即可进入last-line-mode">按:冒号即可进入last line mode</h4><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">:set</span> nu 列出行号</span><br><span class="line"><span class="symbol">:set</span> nonu	取消行号</span><br><span class="line"><span class="symbol">:</span><span class="comment">#7 跳到文件中的第7行</span></span><br><span class="line">/keyword 查找字符  按n向下</span><br><span class="line"><span class="string">?k</span>eyword 查找字符  按N向下</span><br><span class="line"><span class="symbol">:n1</span>,n2/word1/word2/gc  替换指定范围单词，c表示提示</span><br><span class="line"><span class="symbol">:w</span> 保存文件</span><br><span class="line"><span class="symbol">:w</span> filename 以指定的文件名另存</span><br><span class="line"><span class="symbol">:n1</span>,n2 w [filename]	将 n1 到 n2行另存</span><br><span class="line"><span class="symbol">:r</span> [filename]	读入另一个文件加到光标所在行后面</span><br><span class="line"><span class="symbol">:</span>! ls /home  在vi当中察看ls输出信息！</span><br><span class="line"><span class="symbol">:q</span>离开vi</span><br><span class="line"><span class="symbol">:wq</span> 和 <span class="symbol">:ZZ</span> 和 <span class="symbol">:x</span> 保存并退出vi</span><br><span class="line">!强制执行</span><br><span class="line"><span class="symbol">:%</span> s/^<span class="regexp">/#/g</span> 来在全部内容的行首添加 <span class="comment"># 号注释</span></span><br><span class="line"><span class="symbol">:</span><span class="number">1</span>,<span class="number">10</span> s/^<span class="regexp">/#/g</span> 在<span class="number">1</span>~<span class="number">10</span> 行首添加 <span class="comment"># 号注释  </span></span><br></pre></td></tr></table></figure><h4 id="从command-mode进入Insert-mode">从command mode进入Insert mode</h4><p>按i在当前位置编辑按a在当前位置的下一个字符编辑按o插入新行，从行首开始编辑按R(Replace mode)：R会一直取代光标所在的文字，直到按下 ESC为止；(常用)</p><h4 id="按ESC键退回command-mode">按ESC键退回command mode</h4><p>h←j↓k↑l→前面加数字移动指定的行数或字符数<br>1、翻页bu上下整页，ud上下半页</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ctrl+<span class="selector-tag">b</span>：上移一页。</span><br><span class="line">ctrl+f：下移一页。</span><br><span class="line">ctrl+u：上移半页。</span><br><span class="line">ctrl+d：下移半页。</span><br></pre></td></tr></table></figure><p>2、行定位</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">7gg</span>或<span class="number">7</span>G：定位第<span class="number">7</span>行首字符。(可能只在Vim中有效)</span><br><span class="line"><span class="attribute">G</span>：移动到文章的最后。</span><br><span class="line"><span class="attribute">7H</span>:当前屏幕的第<span class="number">7</span>行行首</span><br><span class="line"><span class="attribute">M</span>：当前屏幕中间行的行首</span><br><span class="line"><span class="attribute">7L</span>:当前屏幕的倒数第<span class="number">7</span>行行首</span><br></pre></td></tr></table></figure><p>3、当前行定位</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$：</span>移动到光标所在行的“行尾”。</span><br><span class="line"><span class="number">0</span>或^：移动到光标所在行的“行首”</span><br><span class="line">w：光标跳到下个单词的开头</span><br><span class="line">e：光标跳到下个单词的字尾</span><br><span class="line">b：光标回到上个单词的开头</span><br></pre></td></tr></table></figure><p>4、编辑</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">x：剪切当前字符</span><br><span class="line">7x：剪切从当前位置起7个字符</span><br><span class="line">大写的X，表示从前面一个字符开始往前计算</span><br><span class="line"><span class="built_in">dd</span>：剪切光标所在行。</span><br><span class="line">7dd：从光标所在行开始剪切7行</span><br><span class="line">d7G	删除光标所在到第7行的所有数据</span><br><span class="line">yw：复制当前单词</span><br><span class="line">7yw：复制从当前位置起7个单词</span><br><span class="line">yy：复制当前行</span><br><span class="line">6yy：从当前行起向下复制6行</span><br><span class="line">y7G	复制游标所在列到第7列的所有数据</span><br><span class="line">p：粘贴</span><br><span class="line">u：撤销</span><br><span class="line">ctrl+r：取消撤销</span><br><span class="line">cw：删除当前单词(从光标位置开始计算)，并进入插入模式</span><br><span class="line">c7w：删除7个单词并进入插入模式</span><br></pre></td></tr></table></figure><h4 id="多行编辑，vim支持，vi不支持">多行编辑，vim支持，vi不支持</h4><p>按ctrl+V进入块模式，上下键选中快，按大写G选择到末尾，上下左右键移动选择位置按大写I进去编辑模式，输入要插入的字符，编辑完成按ESC退出选中要替换的字符后，按c键全部会删除，然后输入要插入的字符，编辑完成按ESC退出选中要替删除的字符后，按delete键，则会全部删除</p><p>按shift+V可进入行模式，对指定行操作</p><h3 id="vim练习">vim练习</h3><p>1、创建目录/tmp/test，将/etc/man.config复制到该目录下</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">mkdir</span> -p /tmp/test</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">cp</span> /etc/man.config /tmp/test/</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">cd</span> /tmp/test/</span></span><br></pre></td></tr></table></figure><p>2、用vim编辑man.config文件：</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim man.config</span><br></pre></td></tr></table></figure><p>3、设置显示行号； 移动到第58行，向右移动40个字符，查看双引号内的是什么目录；</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">：<span class="keyword">set</span> nu</span><br><span class="line">58G 或<span class="comment">58gg</span> </span><br><span class="line">40-&gt; 或40空格 目录为：/dir/bin/foo </span><br></pre></td></tr></table></figure><p>4、移动到第一行，并向下查找“bzip2”这个字符串，它在第几行；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">移动到最后一行，并向上查找该字符串；</span><br><span class="line">gg 或1G</span><br><span class="line">/bzip 137行 ?bzip2</span><br></pre></td></tr></table></figure><p>5、将50行到100行之间的man更改为MAN，并且 逐个挑选 是否需要修改；</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">若在挑选过程中一直按y，结果会在最后一行出现改变了几个<span class="built_in">man</span>?</span><br><span class="line">:<span class="number">50</span>,<span class="number">100</span>s/<span class="built_in">man</span>/<span class="built_in">MAN</span>/<span class="built_in">gc</span> <span class="number">25</span>次替换</span><br></pre></td></tr></table></figure><p>6、修改完后，突然反悔了，要全部复原，有哪些方法？</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">一直按u键	</span><br><span class="line">或者</span><br><span class="line"><span class="symbol">:q!</span>强制不保存退出后，再重新打开该文件</span><br></pre></td></tr></table></figure><p>7、复制65到73这9行的内容（含有MANPATH_MAP），并且粘贴到最后一行之后；</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">65gg</span>或<span class="number">65</span>G到该行后，<span class="number">9</span>yy,G 移动到最后一行，p粘贴</span><br></pre></td></tr></table></figure><p>8、21行到42行之间开头为#符号的批注数据不要了，如何删除；</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">21G</span>到该行 <span class="number">22</span>dd</span><br></pre></td></tr></table></figure><p>9、将这个文件另存为man.test.config的文件</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:w <span class="keyword">man</span>.<span class="keyword">test</span>.config</span><br></pre></td></tr></table></figure><p>10、到第27行，并且删除15个字符，结果出现的第一个字符是什么？</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">27gg</span> 后<span class="number">15</span>x</span><br></pre></td></tr></table></figure><p>11、在第一行新增一行，在该行内输入“I am a student ”</p><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">gg</span>到第一行 <span class="built_in">O</span>输入即可 说明：<span class="variable">o</span>是在当前行之后插入一行，<span class="built_in">O</span>是在当前行之前插入一行</span><br></pre></td></tr></table></figure><p>12、保存并退出</p><figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">:wq</span></span><br></pre></td></tr></table></figure><h2 id="正则表达式（待写）">正则表达式（待写）</h2><h2 id="文本编辑命令">文本编辑命令</h2><h3 id="cut命令">cut命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">选项与参数：</span><br><span class="line">-d  ：后面接分隔字符。与 -f 一起使用；</span><br><span class="line">-f  ：依据 -d 的分隔字符将一段信息分割成为数段，用 -f 取出第几段的意思；</span><br><span class="line">-c  ：以字符 (characters) 的单位取出固定字符区间；</span><br></pre></td></tr></table></figure><p>cut以行为单位，根据分隔符把行分成若干列，这样就可以指定选取哪些列了。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cut</span> -d <span class="string">&#x27;分隔字符&#x27;</span> -f 选取的列数</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$PATH</span>|<span class="built_in">cut</span> -d <span class="string">&#x27;:&#x27;</span> -f 2  	--选取第2列</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$PATH</span>|<span class="built_in">cut</span> -d <span class="string">&#x27;:&#x27;</span> -f 3,5  	--选取第3列和第5列</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$PATH</span>|<span class="built_in">cut</span> -d <span class="string">&#x27;:&#x27;</span> -f 3-5  	--选取第3列到第5列</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$PATH</span>|<span class="built_in">cut</span> -d <span class="string">&#x27;:&#x27;</span> -f 3-   	--选取第3列到最后1列</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$PATH</span>|<span class="built_in">cut</span> -d <span class="string">&#x27;:&#x27;</span> -f 1-3,5	--选取第1到第3列还有第5列</span><br></pre></td></tr></table></figure><p>只显示/etc/passwd的用户和shell：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#cat /etc/passwd | cut -d &#x27;:&#x27; -f 1,7 </span></span><br><span class="line">root:/bin/bash</span><br><span class="line">daemon:/bin/sh</span><br><span class="line">bin:/bin/sh</span><br></pre></td></tr></table></figure><h3 id="sed命令">sed命令</h3><p>sed 可依照脚本的指令来处理、编辑文本文件。</p><p>Sed 主要用来自动编辑一个或多个文件、简化对文件的反复操作、编写转换程序等。</p><p>语法:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed [-e&lt;script&gt;][-f&lt;script文件&gt;][文本文件]</span><br></pre></td></tr></table></figure><p><strong>参数说明</strong>：</p><ul class="lvl-0"><li class="lvl-2"><p><code>-e &lt;script&gt;</code>以指定的script来处理输入的文本文件。</p></li><li class="lvl-2"><p><code>-f&lt;script文件&gt;</code>以指定的script文件来处理输入的文本文件。</p></li><li class="lvl-2"><p><code>-n</code>仅显示script处理后的结果，一般跟p动作搭配使用。</p></li><li class="lvl-2"><p><code>-i</code>使用处理后的结果修改文件。</p></li></ul><p><strong>动作说明</strong>：</p><ul class="lvl-0"><li class="lvl-2"><p>a：在指定行后面插入内容</p></li><li class="lvl-2"><p>i：在指定行前面插入内容</p></li><li class="lvl-2"><p>d：删除指定行</p></li><li class="lvl-2"><p>c ：替换指定行</p></li><li class="lvl-2"><p>p ：打印指定行的数据，通常需要跟<code>-n</code>选项搭配使用</p></li><li class="lvl-2"><p>s ：替换指定字符，兼容vim的替换语法，例如 1,20s/old/new/g</p></li></ul><h4 id="元字符集">元字符集</h4><p>sed支持一般的正则表达式，下面是支持的正则语法：<code>^</code>行的开始 如：/^sed/匹配所有以sed开头的行。<code>$</code>行的结束 如：/sed$/匹配所有以sed结尾的行。<code>.</code>匹配一个非换行符的任意字符 如：/s.d/匹配s后接一个任意字符，然后是d。<code>*</code>匹配零或多个字符 如：/*sed/匹配所有模板是一个或多个空格后紧跟sed的行。<code>[]</code>匹配一个指定范围内的字符，如<code>/[Ss]ed/</code>匹配sed和Sed。<code>[^]</code>匹配一个不在指定范围内的字符，如：<code>/[^A-RT-Z]ed/</code>匹配不包含A-R和T-Z的一个字母开头，紧跟ed的行。<code>\(..\)</code>保存匹配的字符，如s/(love)able/\1rs，loveable被替换成lovers。<code>&amp;</code>保存搜索字符用来替换其他字符，如<code>s/love/**&amp;**/</code>，love这成<code>**love**</code>。<code>\&lt;</code>单词的开始，如:/&lt;love/匹配包含以love开头的单词的行。<code>\&gt;</code>单词的结束，如/love&gt;/匹配包含以love结尾的单词的行。<code>x\+</code>重复字符x，至少1次，如：<code>/o\+/</code>匹配至少有1个o的行。<code>x\&#123;m\&#125;</code>重复字符x，m次，如：<code>/o\&#123;5\&#125;/</code>匹配包含5个o的行。<code>x\&#123;m,\&#125;</code>重复字符x,至少m次，如：<code>/o\&#123;5,\&#125;/</code>匹配至少有5个o的行。<code>x\&#123;m,n\&#125;</code>重复字符x，至少m次，不多于n次，如：<code>/o\&#123;5,10\&#125;/</code>匹配5-10个o的行。</p><h4 id="a-i-在指定行位置添加行">a|i:在指定行位置添加行</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:Corazon]# <span class="built_in">cat</span> a</span><br><span class="line">LINUX!  </span><br><span class="line"> Linux is a free unix-type opterating system.  </span><br><span class="line"> This is a linux testfile!  </span><br><span class="line"> Linux <span class="built_in">test</span> </span><br><span class="line"></span><br><span class="line">[root@rocky8:Corazon]# sed -e 2a\newline a</span><br><span class="line">LINUX!  </span><br><span class="line"> Linux is a free unix-type opterating system.  </span><br><span class="line">newline</span><br><span class="line"> This is a linux testfile!  </span><br><span class="line"> Linux <span class="built_in">test</span></span><br></pre></td></tr></table></figure><p>默认情况下<code>-e</code>参数可以省略：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:Corazon]# <span class="built_in">cat</span> a | sed <span class="string">&#x27;2a\newline&#x27;</span></span><br><span class="line">LINUX!  </span><br><span class="line"> Linux is a free unix-type opterating system.  </span><br><span class="line">newline</span><br><span class="line"> This is a linux testfile!  </span><br><span class="line"> Linux <span class="built_in">test</span> </span><br><span class="line">[root@rocky8:~]# sed 2a\newline a</span><br><span class="line">NUX!  </span><br><span class="line"> Linux is a free unix-type opterating system.  </span><br><span class="line">newline</span><br><span class="line"> This is a linux testfile!  </span><br><span class="line"> Linux <span class="built_in">test</span></span><br><span class="line">[root@rocky8:Corazon]# sed <span class="string">&#x27;2a newline&#x27;</span> a</span><br><span class="line">LINUX!  </span><br><span class="line"> Linux is a free unix-type opterating system.  </span><br><span class="line">newline</span><br><span class="line"> This is a linux testfile!  </span><br><span class="line"> Linux <span class="built_in">test</span></span><br></pre></td></tr></table></figure><p>在第二行之前添加一行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:Corazon]# sed <span class="string">&#x27;2i newline&#x27;</span> a</span><br><span class="line">LINUX!  </span><br><span class="line">newline</span><br><span class="line"> Linux is a free unix-type opterating system.  </span><br><span class="line"> This is a linux testfile!  </span><br><span class="line"> Linux <span class="built_in">test</span></span><br></pre></td></tr></table></figure><p>最后一行加入 <code># This is a test</code>:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:Corazon]# sed <span class="string">&#x27;$a # This is a test&#x27;</span> a</span><br><span class="line">LINUX!  </span><br><span class="line"> Linux is a free unix-type opterating system.  </span><br><span class="line"> This is a linux testfile!  </span><br><span class="line"> Linux <span class="built_in">test</span> </span><br><span class="line"></span><br><span class="line"><span class="comment"># This is a test</span></span><br></pre></td></tr></table></figure><p>同时添加多行：</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:Corazon]# cat a|sed <span class="string">&#x27;2a\newline1\</span></span><br><span class="line"><span class="string">&gt; newline2&#x27;</span></span><br><span class="line">LINUX!  </span><br><span class="line"> Linux <span class="keyword">is</span> a free unix-<span class="keyword">type</span> opterating <span class="keyword">system</span>.  </span><br><span class="line">newline1</span><br><span class="line">newline2</span><br><span class="line"> This <span class="keyword">is</span> a linux testfile!  </span><br><span class="line"> Linux test</span><br></pre></td></tr></table></figure><h4 id="d-删除指定行">d:删除指定行</h4><p>将 /etc/passwd 的内容列出行号，并将第 2~5 行删除！</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# <span class="built_in">nl</span> /etc/passwd|sed <span class="string">&#x27;2,5d&#x27;</span></span><br><span class="line">     1	root:x:0:0:root:/root:/bin/bash</span><br><span class="line">     6	<span class="built_in">sync</span>:x:5:0:<span class="built_in">sync</span>:/sbin:/bin/sync</span><br><span class="line">     7	shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown</span><br><span class="line">.....(后面省略).....</span><br></pre></td></tr></table></figure><p>只删除第2行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">nl</span> /etc/passwd | sed <span class="string">&#x27;2d&#x27;</span> </span><br></pre></td></tr></table></figure><p>删除第3到最后一行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">nl</span> /etc/passwd | sed <span class="string">&#x27;3,$d&#x27;</span> </span><br></pre></td></tr></table></figure><p>删除/etc/passwd所有包含<code>/sbin/nologin</code>的行，其他行输出：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# <span class="built_in">nl</span> /etc/passwd|sed <span class="string">&#x27;/\/sbin\/nologin/d&#x27;</span></span><br><span class="line">     1	root:x:0:0:root:/root:/bin/bash</span><br><span class="line">     6	<span class="built_in">sync</span>:x:5:0:<span class="built_in">sync</span>:/sbin:/bin/sync</span><br><span class="line">     7	shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown</span><br><span class="line">     8	halt:x:7:0:halt:/sbin:/sbin/halt</span><br><span class="line">    25	zah:x:1000:1000:Zah:/home/zah:/bin/bash</span><br><span class="line">    26	Cora:x:1002:1002::/home/Cora:/bin/bash</span><br><span class="line">    27	Corazon:x:1003:1003::/home/Corazon:/bin/bash</span><br></pre></td></tr></table></figure><h4 id="c-替换指定行">c:替换指定行</h4><p>将第2-5行的内容替换成为『No 2-5 number』：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# <span class="built_in">nl</span> /etc/passwd|sed <span class="string">&#x27;2,5c No 2-5 number&#x27;</span></span><br><span class="line">     1	root:x:0:0:root:/root:/bin/bash</span><br><span class="line">No 2-5 number</span><br><span class="line">     6	<span class="built_in">sync</span>:x:5:0:<span class="built_in">sync</span>:/sbin:/bin/sync</span><br></pre></td></tr></table></figure><h4 id="p-仅显示指定行">p:仅显示指定行</h4><p>不加<code>-n</code>选项时，除了输出匹配行，还同时会输出所有行，所以需要加<code>-n</code>选项。</p><p>仅列出 /etc/passwd 文件内的第 5-7 行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# <span class="built_in">nl</span> /etc/passwd|sed -n <span class="string">&#x27;5,7p&#x27;</span></span><br><span class="line">     5	lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line">     6	<span class="built_in">sync</span>:x:5:0:<span class="built_in">sync</span>:/sbin:/bin/sync</span><br><span class="line">     7	shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown</span><br></pre></td></tr></table></figure><p>搜索 /etc/passwd有root关键字的行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# <span class="built_in">cat</span> /etc/passwd|sed -n <span class="string">&#x27;/root/p&#x27;</span></span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">operator:x:11:0:operator:/root:/sbin/nologin</span><br><span class="line">[root@rocky8:~]# sed -n <span class="string">&#x27;/root/p&#x27;</span> /etc/passwd</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">operator:x:11:0:operator:/root:/sbin/nologin</span><br></pre></td></tr></table></figure><p>打印/etc/passwd有以root和bin开头之间的行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# sed -n <span class="string">&#x27;/^root/,/^bin/p&#x27;</span> /etc/passwd</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br></pre></td></tr></table></figure><p>打印从第五行开始到第一个包含以<code>/usr/games</code>开始的行之间的所有行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# <span class="built_in">nl</span> /etc/passwd | sed -n <span class="string">&#x27;5,\/usr\/games/p&#x27;</span></span><br><span class="line">     5	lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line">     6	<span class="built_in">sync</span>:x:5:0:<span class="built_in">sync</span>:/sbin:/bin/sync</span><br><span class="line">     7	shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown</span><br><span class="line">     8	halt:x:7:0:halt:/sbin:/sbin/halt</span><br><span class="line">     9	mail:x:8:12:mail:/var/spool/mail:/sbin/nologin</span><br><span class="line">    10	operator:x:11:0:operator:/root:/sbin/nologin</span><br><span class="line">    11	games:x:12:100:games:/usr/games:/sbin/nologin</span><br></pre></td></tr></table></figure><h4 id="s-字符串替换">s:字符串替换</h4><p>语法：</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">sed</span> <span class="string">&#x27;s/要被取代的字串/新的字串/g&#x27;</span></span><br></pre></td></tr></table></figure><p>不论什么字符，紧跟着s命令的都被认为是新的分隔符.</p><p><code>sed 's#10#100#g'</code>表示把所有10替换成100，“#”在这里是分隔符，代替了默认的“/”分隔符。</p><p>提取本机所有的ip地址：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# ifconfig | grep <span class="string">&#x27;inet &#x27;</span></span><br><span class="line">        inet 10.0.0.191  netmask 255.255.255.0  broadcast 10.0.0.255</span><br><span class="line">        inet 127.0.0.1  netmask 255.0.0.0</span><br><span class="line">[root@rocky8:~]# ifconfig | grep <span class="string">&#x27;inet &#x27;</span>|sed <span class="string">&#x27;s/^[^0-9]*\([0-9\.]*\).*$/\1/g&#x27;</span></span><br><span class="line">10.0.0.191</span><br><span class="line">127.0.0.1</span><br></pre></td></tr></table></figure><p>对于以root和bin开头之间的行，每行的末尾添加sed test：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# <span class="built_in">cat</span> /etc/passwd | sed <span class="string">&#x27;/^root/,/^bin/s/$/--sed test/&#x27;</span></span><br><span class="line">root:x:0:0:root:/root:/bin/bash--sed <span class="built_in">test</span></span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin--sed <span class="built_in">test</span></span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin--sed <span class="built_in">test</span></span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">......</span><br></pre></td></tr></table></figure><h4 id="y-单字符替换">y:单字符替换</h4><p>跟s一样也用于替换，不过s替换的是整体，y替换的是每一字母对应的单个字母</p><p>把data中的第一行至第三行中的a替换成A，b替换成B，c替换成C：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">&#x27;1,3y/abc/ABC/&#x27;</span> data </span><br></pre></td></tr></table></figure><p>示例：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# <span class="built_in">echo</span> <span class="string">&quot;123&quot;</span> | sed <span class="string">&#x27;y/13/34/&#x27;</span></span><br><span class="line">324</span><br><span class="line">[root@rocky8:~]# <span class="built_in">echo</span> <span class="string">&quot;axxbxxcxx&quot;</span> | sed <span class="string">&#x27;y/abc/123/&#x27;</span></span><br><span class="line">1xx2xx3xx</span><br></pre></td></tr></table></figure><p><font class="notice">注：单个字符转换用y，字符串转换用<code>'s/str1/str2/g'</code></font></p><h4 id="hHgG模式空间与保持空间"><code>hHgG</code>模式空间与保持空间</h4><p>首先介绍一下模式空间和保持空间:</p><blockquote><p><strong>（H、h、G、g、x）</strong><br><strong>模式空间：</strong><a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=sed&amp;spm=1001.2101.3001.7020">sed</a>处理文本内容行的一个临时缓冲区，模式空间中的内容会主动打印到标准输出，并自动清空模式空间</p><p>**保持空间：**sed处理文本内容行的另一个临时缓冲区，不同的是保持空间内容不会主动清空，也不会主动打印到标准输出，而是需要<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=sed%E5%91%BD%E4%BB%A4&amp;spm=1001.2101.3001.7020">sed命令</a>来进行处理</p></blockquote><p>模式空间与保持空间的关系:</p><blockquote><p>**模式空间：**相当于流水线，文本行再模式空间中进行处理；<br>**保持空间：**相当于仓库，在模式空间对数据进行处理时，可以把数据临时存储到保持空间；作为模式空间的一个辅助临时缓冲区，但又是相互独立，可以进行交互，命令可以寻址模式空间但是不能寻址保持空间。可以使用高级命令h,H,g,G与模式空间进行交互。</p></blockquote><p>实际上， 保持空间是模式空间一个临时存放数据的缓冲区，协助模式空间进行数据处理。</p><p>相关命令的作用：</p><blockquote><p><strong>d</strong> Delete pattern space. Start next cycle.<br>删除pattern space的内容，开始下一个循环</p><p><strong>h H</strong> Copy/append pattern space to hold space.<br>复制/追加pattern space的内容到hold space.（复制会覆盖原内容）</p><p><strong>g G</strong> Copy/append hold space to pattern space.<br>复制/追加hold space的内容到pattern space. （复制会覆盖原内容）</p><p><strong>x</strong> Exchange the contents of the hold and pattern spaces.<br>交换hold space和pattern space的内容.</p></blockquote><p>h命令是将当前模式空间中内容覆盖至保持空间，H命令是将当前模式空间中的内容追加至保持空间</p><p>g命令是将当前保持空间中内容覆盖至模式空间，G命令是将当前保持空间中的内容追加至模式空间</p><p>模拟tac命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# <span class="built_in">cat</span> num</span><br><span class="line">One</span><br><span class="line">Two</span><br><span class="line">Three</span><br><span class="line">[root@rocky8:~]# <span class="built_in">tac</span> num</span><br><span class="line">Three</span><br><span class="line">Two</span><br><span class="line">One</span><br><span class="line">[root@rocky8:~]# sed <span class="string">&#x27;1!G;h;$!d&#x27;</span> num</span><br><span class="line">Three</span><br><span class="line">Two</span><br><span class="line">One</span><br></pre></td></tr></table></figure><p>1!G第1行不 执行“G”命令，从第2行开始执行。</p><p>$!d，最后一行不删除（保留最后1行）（只有最后一行不删）</p><p>原理图：</p><p><img src="/images/loading.jpeg" data-original="/posts/247a4e5f//image-20250219211455837.png" alt="image-20250219211455837"></p><p>递增序列：</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="symbol">@rocky8</span>:~]<span class="meta"># seq 3|sed <span class="string">&#x27;H;g&#x27;</span></span></span><br><span class="line"></span><br><span class="line"><span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line">[root<span class="symbol">@rocky8</span>:~]<span class="meta"># seq 3|sed <span class="string">&#x27;1h;1!H;g&#x27;</span></span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br></pre></td></tr></table></figure><h4 id="多次指定-e选项进行多点编辑">多次指定<code>-e</code>选项进行多点编辑</h4><p>删除/etc/passwd第三行到末尾的数据，并把bash替换为blueshell：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# <span class="built_in">nl</span> /etc/passwd | sed -e <span class="string">&#x27;3,$d&#x27;</span> -e <span class="string">&#x27;s/bash/blueshell/&#x27;</span></span><br><span class="line">     1	root:x:0:0:root:/root:/bin/blueshell</span><br><span class="line">     2	daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br></pre></td></tr></table></figure><p>删除一个文件以#开头的行和空行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# <span class="built_in">cat</span> abc</span><br><span class="line"></span><br><span class="line">b</span><br><span class="line">a</span><br><span class="line"></span><br><span class="line"><span class="comment"># aaa</span></span><br><span class="line"></span><br><span class="line">ddd</span><br><span class="line"></span><br><span class="line"><span class="comment"># sss</span></span><br><span class="line">eeee</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@rocky8:~]# sed -e <span class="string">&#x27;/^#/d&#x27;</span> -e <span class="string">&#x27;/^$/d&#x27;</span> abc</span><br><span class="line">b</span><br><span class="line">a</span><br><span class="line">ddd</span><br><span class="line">eeee</span><br></pre></td></tr></table></figure><p>也可以通过<code>;</code>实现</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# <span class="built_in">nl</span> /etc/passwd|sed <span class="string">&#x27;3,$d;s/bash/blueshell/&#x27;</span> </span><br><span class="line">     1	root:x:0:0:root:/root:/bin/blueshell</span><br><span class="line">     2	daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">[root@rocky8:~]# sed <span class="string">&#x27;/^#/d;/^$/d&#x27;</span> abc</span><br><span class="line">b</span><br><span class="line">a</span><br><span class="line">ddd</span><br><span class="line">eeee</span><br></pre></td></tr></table></figure><h4 id="选项-i直接修改文件内容">选项<code>-i</code>直接修改文件内容</h4><p>默认情况下sed命令仅仅只是将处理结果显示在控制台，加<code>-i</code>选项则会修改文件内容。</p><p>将 regular_express.txt 内每一行结尾若为 . 则换成 !</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# <span class="built_in">cat</span> re</span><br><span class="line">taobao.</span><br><span class="line">google.</span><br><span class="line">taobao.</span><br><span class="line">facebook.</span><br><span class="line">zhihu-</span><br><span class="line">weibo-</span><br><span class="line">[root@rocky8:~]# sed -i <span class="string">&#x27;s/\.$/\!/&#x27;</span> re</span><br><span class="line">[root@rocky8:~]# <span class="built_in">cat</span> re</span><br><span class="line">taobao!</span><br><span class="line">google!</span><br><span class="line">taobao!</span><br><span class="line">facebook!</span><br><span class="line">zhihu-</span><br><span class="line">weibo-</span><br></pre></td></tr></table></figure><h3 id="awk命令">awk命令</h3><p>AWK是一种处理文本文件的语言，是一个强大的文本分析工具。</p><p>之所以叫AWK是因为其取了三位创始人 Alfred Aho，Peter Weinberger, 和 Brian Kernighan 的 Family Name 的首字符。</p><p>语法：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">awk [选项参数] <span class="string">&#x27;script&#x27;</span> var=value file(s)</span><br><span class="line">或</span><br><span class="line">awk [选项参数] -f scriptfile var=value file(s)</span><br></pre></td></tr></table></figure><p><strong>选项参数说明：</strong></p><ul class="lvl-0"><li class="lvl-2"><p>-F fs or --field-separator fs<br>指定输入文件折分隔符，fs是一个字符串或者是一个正则表达式，如-F:。</p></li><li class="lvl-2"><p>-v var=value or --asign var=value<br>赋值一个用户定义变量。</p></li><li class="lvl-2"><p>-f scripfile or --file scriptfile<br>从脚本文件中读取awk命令。</p></li></ul><h4 id="基本用法">基本用法</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;&#123;[pattern] action&#125;&#x27;</span> file</span><br></pre></td></tr></table></figure><p>每行按空格或TAB分割，使用<code>print</code>输出文本中的1、4列：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# <span class="built_in">cat</span> <span class="built_in">log</span></span><br><span class="line">2 this is a <span class="built_in">test</span></span><br><span class="line">3 Are you like awk</span><br><span class="line">This<span class="string">&#x27;s a test</span></span><br><span class="line"><span class="string">10 There are orange,apple,mongo</span></span><br><span class="line"><span class="string">[root@rocky8:~]# awk &#x27;</span>&#123;<span class="built_in">print</span> <span class="variable">$1</span>,<span class="variable">$4</span>&#125;<span class="string">&#x27; log</span></span><br><span class="line"><span class="string">2 a</span></span><br><span class="line"><span class="string">3 like</span></span><br><span class="line"><span class="string">This&#x27;</span>s </span><br><span class="line">10 orange,apple,mongo</span><br></pre></td></tr></table></figure><p>使用<code>printf</code>格式化输出：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# awk <span class="string">&#x27;&#123;printf &quot;%-8s %-10s\n&quot;,$1,$4&#125;&#x27;</span> <span class="built_in">log</span></span><br><span class="line">2        a         </span><br><span class="line">3        like      </span><br><span class="line">This<span class="string">&#x27;s             </span></span><br><span class="line"><span class="string">10       orange,apple,mongo</span></span><br></pre></td></tr></table></figure><h5 id="F指定分割字符"><code>-F</code>指定分割字符</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk -F  <span class="comment">#-F相当于内置变量FS, 指定分割字</span></span><br></pre></td></tr></table></figure><p>使用:分割,取/etc/passwd文件每个用户对应shell：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# awk -F: <span class="string">&#x27;&#123;print $1,$7&#125;&#x27;</span> /etc/passwd</span><br><span class="line">root /bin/bash</span><br><span class="line">daemon /sbin/nologin</span><br><span class="line">bin /sbin/nologin</span><br><span class="line">adm /sbin/nologin</span><br><span class="line">lp /sbin/nologin</span><br><span class="line"><span class="built_in">sync</span> /bin/sync</span><br><span class="line">......</span><br></pre></td></tr></table></figure><p>同时使用:和/l两个分隔符分割/etc/passwd文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# awk -F <span class="string">&#x27;[:\/]&#x27;</span> <span class="string">&#x27;&#123;print $1,$7&#125;&#x27;</span>  /etc/passwd</span><br><span class="line">awk: warning: escape sequence `\/<span class="string">&#x27; treated as plain `/&#x27;</span></span><br><span class="line">root root</span><br><span class="line">daemon sbin</span><br><span class="line">bin bin</span><br><span class="line">......</span><br></pre></td></tr></table></figure><h5 id="v设置变量"><code>-v</code>设置变量</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk -v  <span class="comment"># 设置变量</span></span><br></pre></td></tr></table></figure><p>例子：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# <span class="built_in">cat</span> <span class="built_in">log</span></span><br><span class="line">2 this is a <span class="built_in">test</span></span><br><span class="line">3 Are you like awk</span><br><span class="line">This<span class="string">&#x27;s a test</span></span><br><span class="line"><span class="string">10 There are orange,apple,mongo</span></span><br><span class="line"><span class="string">[root@rocky8:~]# awk -va=1 &#x27;</span>&#123;<span class="built_in">print</span> <span class="variable">$1</span>,<span class="variable">$1</span>+a&#125;<span class="string">&#x27; log</span></span><br><span class="line"><span class="string">2 3</span></span><br><span class="line"><span class="string">3 4</span></span><br><span class="line"><span class="string">This&#x27;</span>s 1</span><br><span class="line">10 11</span><br><span class="line">[root@rocky8:~]# awk -va=1 -vb=s <span class="string">&#x27;&#123;print $1,$1+a,$1b&#125;&#x27;</span> <span class="built_in">log</span></span><br><span class="line">2 3 2s</span><br><span class="line">3 4 3s</span><br><span class="line">This<span class="string">&#x27;s 1 This&#x27;</span>ss</span><br><span class="line">10 11 10s</span><br></pre></td></tr></table></figure><h5 id="f指定awk脚本"><code>-f</code>指定awk脚本</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk -f &#123;awk脚本&#125; &#123;文件名&#125;</span><br></pre></td></tr></table></figure><p>脚本模块：</p><ul class="lvl-0"><li class="lvl-2"><p>BEGIN{ 这里面放的是执行前的语句 }</p></li><li class="lvl-2"><p>END {这里面放的是处理完所有的行后要执行的语句 }</p></li><li class="lvl-2"><p>{这里面放的是处理每一行时要执行的语句}</p></li></ul><p>假设有这么一个文件（学生成绩表）：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# <span class="built_in">cat</span> score</span><br><span class="line">Marry   2143 78 84 77</span><br><span class="line">Jack    2321 66 78 45</span><br><span class="line">Tom     2122 48 77 71</span><br><span class="line">Mike    2537 87 97 95</span><br><span class="line">Bob     2415 40 57 62</span><br></pre></td></tr></table></figure><p>awk脚本如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# <span class="built_in">cat</span> cal.awk</span><br><span class="line"><span class="comment">#!/bin/awk -f</span></span><br><span class="line"><span class="comment">#运行前</span></span><br><span class="line">BEGIN &#123;</span><br><span class="line">    math = 0</span><br><span class="line">    english = 0</span><br><span class="line">    computer = 0</span><br><span class="line"> </span><br><span class="line">    <span class="built_in">printf</span> <span class="string">&quot;NAME    NO.   MATH  ENGLISH  COMPUTER   TOTAL\n&quot;</span></span><br><span class="line">    <span class="built_in">printf</span> <span class="string">&quot;---------------------------------------------\n&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#运行中</span></span><br><span class="line">&#123;</span><br><span class="line">    math+=<span class="variable">$3</span></span><br><span class="line">    english+=<span class="variable">$4</span></span><br><span class="line">    computer+=<span class="variable">$5</span></span><br><span class="line">    <span class="built_in">printf</span> <span class="string">&quot;%-6s %-6s %4d %8d %8d %8d\n&quot;</span>, <span class="variable">$1</span>,<span class="variable">$2</span>,<span class="variable">$3</span>,<span class="variable">$4</span>,<span class="variable">$5</span>,<span class="variable">$3</span>+<span class="variable">$4</span>+<span class="variable">$5</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#运行后</span></span><br><span class="line">END &#123;</span><br><span class="line">    <span class="built_in">printf</span> <span class="string">&quot;---------------------------------------------\n&quot;</span></span><br><span class="line">    <span class="built_in">printf</span> <span class="string">&quot;  TOTAL:%10d %8d %8d \n&quot;</span>, math, english, computer</span><br><span class="line">    <span class="built_in">printf</span> <span class="string">&quot;AVERAGE:%10.2f %8.2f %8.2f\n&quot;</span>, math/NR, english/NR, computer/NR</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><font class="notice">注：END{}中的NR表示已经读出的记录数，就是行号，从1开始</font></p><p>我们来看一下执行结果：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# awk -f cal.awk score</span><br><span class="line">NAME    NO.   MATH  ENGLISH  COMPUTER   TOTAL</span><br><span class="line">---------------------------------------------</span><br><span class="line">Marry  2143     78       84       77      239</span><br><span class="line">Jack   2321     66       78       45      189</span><br><span class="line">Tom    2122     48       77       71      196</span><br><span class="line">Mike   2537     87       97       95      279</span><br><span class="line">Bob    2415     40       57       62      159</span><br><span class="line">---------------------------------------------</span><br><span class="line">  TOTAL:       319      393      350 </span><br><span class="line">AVERAGE:     63.80    78.60    70.00</span><br></pre></td></tr></table></figure><h4 id="AWK工作原理">AWK工作原理</h4><p>AWK 工作流程可分为三个部分：</p><ul class="lvl-0"><li class="lvl-2"><p>读输入文件之前执行的代码段（由BEGIN关键字标识）。</p></li><li class="lvl-2"><p>主循环执行输入文件的代码段。</p></li><li class="lvl-2"><p>读输入文件之后的代码段（由END关键字标识）。</p></li></ul><p>命令结构:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;BEGIN&#123; commands &#125; pattern&#123; commands &#125; END&#123; commands &#125;&#x27;</span></span><br></pre></td></tr></table></figure><p>下面的流程图描述出了 AWK 的工作流程：</p><p><img src="/images/loading.jpeg" data-original="/posts/247a4e5f//d45d394db034998c8059e647e321a13d.png" alt="img"></p><ul class="lvl-0"><li class="lvl-2"><p>1、通过关键字 BEGIN 执行 BEGIN 块的内容，即 BEGIN 后花括号 <strong>{}</strong> 的内容。</p></li><li class="lvl-2"><p>2、完成 BEGIN 块的执行，开始执行body块。</p></li><li class="lvl-2"><p>3、读入有 <strong>\n</strong> 换行符分割的记录。</p></li><li class="lvl-2"><p>4、将记录按指定的域分隔符划分域，填充域，<strong>$0</strong> 则表示所有域(即一行内容)，**1表示第一个域，∗∗n表示第 n 个域。</p></li><li class="lvl-2"><p>5、依次执行各 BODY 块，pattern 部分匹配该行内容成功后，才会执行 awk-commands 的内容。</p></li><li class="lvl-2"><p>6、循环读取并执行各行直到文件结束，完成body块执行。</p></li><li class="lvl-2"><p>7、开始 END 块执行，END 块可以输出最终结果。</p></li></ul><h5 id="运算符">运算符</h5><table><thead><tr><th>运算符</th><th>描述</th></tr></thead><tbody><tr><td>= += -= *= /= %= ^= **=</td><td>赋值</td></tr><tr><td>?:</td><td>C条件表达式</td></tr><tr><td>||</td><td>逻辑或</td></tr><tr><td>&amp;&amp;</td><td>逻辑与</td></tr><tr><td>~ 和 !~</td><td>匹配正则表达式和不匹配正则表达式</td></tr><tr><td>&lt; &lt;= &gt; &gt;= != ==</td><td>关系运算符</td></tr><tr><td>空格</td><td>连接</td></tr><tr><td>+ -</td><td>加，减</td></tr><tr><td>* / %</td><td>乘，除与求余</td></tr><tr><td>+ - !</td><td>一元加，减和逻辑非</td></tr><tr><td>^ ***</td><td>求幂</td></tr><tr><td>++ –</td><td>增加或减少，作为前缀或后缀</td></tr><tr><td>$</td><td>字段引用</td></tr><tr><td>in</td><td>数组成员</td></tr></tbody></table><p><strong>过滤第一列大于2的行</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# awk <span class="string">&#x27;$1&gt;2&#x27;</span> <span class="built_in">log</span></span><br><span class="line">3 Are you like awk</span><br><span class="line">This<span class="string">&#x27;s a test</span></span><br><span class="line"><span class="string">10 There are orange,apple,mongo</span></span><br></pre></td></tr></table></figure><p><strong>过滤第一列等于2的行</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# awk <span class="string">&#x27;$1==2 &#123;print $1,$3&#125;&#x27;</span> <span class="built_in">log</span> </span><br><span class="line">2 is</span><br></pre></td></tr></table></figure><p><strong>过滤第一列大于2并且第二列等于’Are’的行</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# awk <span class="string">&#x27;$1&gt;2 &amp;&amp; $2==&quot;Are&quot; &#123;print $1,$2,$3&#125;&#x27;</span> <span class="built_in">log</span></span><br><span class="line">3 Are you</span><br></pre></td></tr></table></figure><p><strong>内建变量</strong></p><table><thead><tr><th>变量</th><th>描述</th></tr></thead><tbody><tr><td>$n</td><td>当前记录的第n个字段，字段间由FS分隔</td></tr><tr><td>$0</td><td>完整的输入记录</td></tr><tr><td>ARGC</td><td>命令行参数的数目</td></tr><tr><td>ARGIND</td><td>命令行中当前文件的位置(从0开始算)</td></tr><tr><td>ARGV</td><td>包含命令行参数的数组</td></tr><tr><td>CONVFMT</td><td>数字转换格式(默认值为%.6g)ENVIRON环境变量关联数组</td></tr><tr><td>ERRNO</td><td>最后一个系统错误的描述</td></tr><tr><td>FIELDWIDTHS</td><td>字段宽度列表(用空格键分隔)</td></tr><tr><td>FILENAME</td><td>当前文件名</td></tr><tr><td>FNR</td><td>各文件分别计数的行号</td></tr><tr><td>FS</td><td>字段分隔符(默认是任何空格)</td></tr><tr><td>IGNORECASE</td><td>如果为真，则进行忽略大小写的匹配</td></tr><tr><td>NF</td><td>一条记录的字段的数目</td></tr><tr><td>NR</td><td>已经读出的记录数，就是行号，从1开始</td></tr><tr><td>OFMT</td><td>数字的输出格式(默认值是%.6g)</td></tr><tr><td>OFS</td><td>输出记录分隔符（输出换行符），输出时用指定的符号代替换行符</td></tr><tr><td>ORS</td><td>输出记录分隔符(默认值是一个换行符)</td></tr><tr><td>RLENGTH</td><td>由match函数所匹配的字符串的长度</td></tr><tr><td>RS</td><td>记录分隔符(默认是一个换行符)</td></tr><tr><td>RSTART</td><td>由match函数所匹配的字符串的第一个位置</td></tr><tr><td>SUBSEP</td><td>数组下标分隔符(默认值是/034)</td></tr></tbody></table><p>格式化变量说明：</p><ul class="lvl-0"><li class="lvl-2"><p>%s 输出字符串</p></li><li class="lvl-2"><p>%i 输出整数</p></li><li class="lvl-2"><p>%f 输出浮点数</p></li></ul><p>%-5s 格式为左对齐且宽度为5的字符串代替（-表示左对齐），不使用则是又对齐。<br>%-4.2f 格式为左对齐宽度为4，保留两位小数。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# awk <span class="string">&#x27;BEGIN&#123;printf &quot;%8s %8s %8s %8s %8s %8s %8s\n&quot;,&quot;FILENAME&quot;,&quot;ARGC&quot;,&quot;FNR&quot;,&quot;FS&quot;,&quot;NF&quot;,&quot;NR&quot;,&quot;OFS&quot;;printf &quot;---------------------------------------------\n&quot;&#125; &#123;printf &quot;%8s %8s %8s %8s %8s %8s %8s\n&quot;,FILENAME,ARGC,FNR,FS,NF,NR,OFS&#125;&#x27;</span>  <span class="built_in">log</span></span><br><span class="line">FILENAME     ARGC      FNR       FS       NF       NR      OFS</span><br><span class="line">---------------------------------------------</span><br><span class="line">     <span class="built_in">log</span>        2        1                 5        1         </span><br><span class="line">     <span class="built_in">log</span>        2        2                 5        2         </span><br><span class="line">     <span class="built_in">log</span>        2        3                 3        3         </span><br><span class="line">     <span class="built_in">log</span>        2        4                 4        4          </span><br><span class="line"></span><br><span class="line">[root@rocky8:~]# awk -F: <span class="string">&#x27;BEGIN&#123;printf &quot;%4s %4s %4s %4s %4s %4s %4s %4s %4s\n&quot;,&quot;FILENAME&quot;,&quot;ARGC&quot;,&quot;FNR&quot;,&quot;FS&quot;,&quot;NF&quot;,&quot;NR&quot;,&quot;OFS&quot;,&quot;ORS&quot;,&quot;RS&quot;;printf &quot;---------------------------------------------\n&quot;&#125; &#123;printf &quot;%4s %4s %4s %4s %4s %4s %4s %4s %4s\n&quot;,FILENAME,ARGC,FNR,FS,NF,NR,OFS,ORS,RS&#125;&#x27;</span>  <span class="built_in">log</span></span><br><span class="line">FILENAME ARGC  FNR   FS   NF   NR  OFS  ORS   RS</span><br><span class="line">---------------------------------------------</span><br><span class="line"> <span class="built_in">log</span>    2    1    :    1    1         </span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"> <span class="built_in">log</span>    2    2    :    1    2         </span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"> <span class="built_in">log</span>    2    3    :    1    3         </span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"> <span class="built_in">log</span>    2    4    :    1    4         </span><br><span class="line">    </span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="输出顺序号-NR-匹配文本行号">输出顺序号 NR, 匹配文本行号</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# awk <span class="string">&#x27;&#123;print NR,FNR,$1,$2,$3&#125;&#x27;</span> <span class="built_in">log</span></span><br><span class="line">1 1 2 this is</span><br><span class="line">2 2 3 Are you</span><br><span class="line">3 3 This<span class="string">&#x27;s a test</span></span><br><span class="line"><span class="string">4 4 10 There are</span></span><br></pre></td></tr></table></figure><h5 id="指定输出分割符">指定输出分割符</h5><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">python<span class="variable">@ubuntu</span><span class="symbol">:~/test</span><span class="variable">$ </span>cat log.txt </span><br><span class="line"><span class="number">2</span> this is a test</span><br><span class="line"><span class="number">3</span> <span class="title class_">Are</span> you like awk</span><br><span class="line"><span class="title class_">This</span><span class="string">&#x27;s a test</span></span><br><span class="line"><span class="string">10 There are orange,apple,mongo</span></span><br><span class="line"><span class="string">python@ubuntu:~/test$ awk &#x27;</span>&#123;print <span class="variable">$1</span>,<span class="variable">$2</span>,<span class="variable">$5</span>&#125;<span class="string">&#x27; OFS=&quot; $ &quot;  log.txt</span></span><br><span class="line"><span class="string">2 $ this $ test</span></span><br><span class="line"><span class="string">3 $ Are $ awk</span></span><br><span class="line"><span class="string">This&#x27;</span>s <span class="variable">$ </span>a <span class="variable">$ </span></span><br><span class="line"><span class="number">10</span> <span class="variable">$ </span><span class="title class_">There</span> <span class="variable">$ </span></span><br><span class="line"><span class="number">12345678910</span></span><br></pre></td></tr></table></figure><h5 id="忽略大小写">忽略大小写</h5><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">$ awk &#x27;BEGIN&#123;IGNORECASE=1&#125; /this/&#x27; log.txt</span></span><br><span class="line"><span class="section">---------------------------------------------</span></span><br><span class="line">2 this is a test</span><br><span class="line">This&#x27;s a test</span><br><span class="line">1234</span><br></pre></td></tr></table></figure><h4 id="RS-ORS-FS-OFS区别与联系">RS,ORS,FS,OFS区别与联系</h4><p>学习awk时，一定要记得动手去实践，只有在实践中才能发现问题，以下就我在学习中和实践中的经验，总结一下RS,ORS,FS,OFS的区别和联系。</p><p><strong>一，RS与ORS</strong></p><p>1，RS是记录<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E5%88%86%E9%9A%94%E7%AC%A6&amp;spm=1001.2101.3001.7020">分隔符</a>，默认的分隔符是\n，具体用法看下</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# <span class="built_in">cat</span> test1</span><br><span class="line">111 222</span><br><span class="line">333 444</span><br><span class="line">555 666</span><br></pre></td></tr></table></figure><p>2，RS默认分割符\n</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# awk <span class="string">&#x27;&#123;print $0&#125;&#x27;</span> test1  //awk <span class="string">&#x27;BEGIN&#123;RS=&quot;\n&quot;&#125;&#123;print $0&#125;&#x27;</span> test1 这二个是一样的</span><br><span class="line">111 222</span><br><span class="line">333 444</span><br><span class="line">555 666</span><br></pre></td></tr></table></figure><p>其实你可以把<strong>上面test1文件里的内容理解为，111 222\n333 444\n555 6666，利用\n进行分割</strong>。看下一个例子</p><p>3，自定义RS分割符</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# <span class="built_in">echo</span> <span class="string">&quot;111 222|333 444|555 666&quot;</span>|awk <span class="string">&#x27;BEGIN&#123;RS=&quot;|&quot;&#125;&#123;print $0,RT&#125;&#x27;</span></span><br><span class="line">111 222 |</span><br><span class="line">333 444 |</span><br><span class="line">555 666</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>结合上面一个例子，就很容易理解RS的用法了。</p><p>4，RS也可能是正则表达式</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# <span class="built_in">echo</span> <span class="string">&quot;111 222a333 444b555 666&quot;</span>|awk <span class="string">&#x27;BEGIN&#123;RS=&quot;[a-z]+&quot;&#125;&#123;print $1,RS,RT&#125;&#x27;</span></span><br><span class="line">111 [a-z]+ a</span><br><span class="line">333 [a-z]+ b</span><br><span class="line">555 [a-z]+</span><br></pre></td></tr></table></figure><p>从例3和例4，我们可以发现一点，<strong>当RT是利用RS匹配出来的内容。如果RS是某个固定的值时，RT就是RS的内容</strong>。</p><p>5，RS为空时</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# <span class="built_in">cat</span> -n test2</span><br><span class="line">     1	111 222</span><br><span class="line">     2	</span><br><span class="line">     3	333 444</span><br><span class="line">     4	333 444</span><br><span class="line">     5	</span><br><span class="line">     6	</span><br><span class="line">     7	555 666</span><br><span class="line">[root@rocky8:~]# awk <span class="string">&#x27;BEGIN&#123;RS=&quot;&quot;&#125;&#123;print $0&#125;&#x27;</span> test2</span><br><span class="line">111 222</span><br><span class="line">333 444</span><br><span class="line">333 444</span><br><span class="line">555 666</span><br><span class="line">[root@rocky8:~]# awk <span class="string">&#x27;BEGIN&#123;RS=&quot;&quot;&#125;&#123;print &quot;&lt;&quot;,$0,&quot;&gt;&quot;&#125;&#x27;</span> test2</span><br><span class="line">&lt; 111 222 &gt;</span><br><span class="line">&lt; 333 444       //这一行和下面一行，是一行 </span><br><span class="line">333 444 &gt;</span><br><span class="line">&lt; 555 666 &gt;</span><br></pre></td></tr></table></figure><p>6，ORS记录输出分符符，默认值是\n</p><p><strong>把ORS理解成RS反过程，这样更容易记忆和理解</strong>，看下面的例子。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# awk <span class="string">&#x27;BEGIN&#123;ORS=&quot;\n&quot;&#125;&#123;print $0&#125;&#x27;</span> test1 //awk <span class="string">&#x27;&#123;print $0&#125;&#x27;</span> test1二者是一样的</span><br><span class="line">111 222</span><br><span class="line">333 444</span><br><span class="line">555 666</span><br><span class="line">[root@rocky8:~]# awk <span class="string">&#x27;BEGIN&#123;ORS=&quot;|&quot;&#125;&#123;print $0&#125;&#x27;</span> test1 </span><br><span class="line">111 222|333 444|555 666|[root@rocky8:~]# </span><br></pre></td></tr></table></figure><p><strong>二，FS与OFS</strong>（不理解）</p><p>1，FS指定列分割符</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# <span class="built_in">echo</span> <span class="string">&quot;111|222|333&quot;</span>|awk <span class="string">&#x27;&#123;print $1&#125;&#x27;</span> </span><br><span class="line">111|222|333</span><br><span class="line">[root@rocky8:~]# <span class="built_in">echo</span> <span class="string">&quot;111|222|333&quot;</span>|awk <span class="string">&#x27;BEGIN&#123;FS=&quot;|&quot;&#125;&#123;print $1&#125;&#x27;</span> </span><br><span class="line">111</span><br></pre></td></tr></table></figure><p>2，FS也可以用正则</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# <span class="built_in">echo</span> <span class="string">&quot;111||222|333&quot;</span>|awk <span class="string">&#x27;BEGIN&#123;FS=&quot;[|]+&quot;&#125;&#123;print $1&#125;&#x27;</span>  </span><br><span class="line">111</span><br></pre></td></tr></table></figure><p>3，FS为空的时候（不理解为啥要NF++）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# <span class="built_in">echo</span> <span class="string">&quot;111|222|333&quot;</span>|awk <span class="string">&#x27;BEGIN&#123;FS=&quot;&quot;&#125;&#123;NF++;print $0&#125;&#x27;</span></span><br><span class="line">1 1 1 | 2 2 2 | 3 3 3 </span><br></pre></td></tr></table></figure><p><strong>当FS为空的时候，awk会把一行中的每个字符，当成一列来处理</strong>。</p><p>4，RS被设定成非\n时，\n会成FS分割符中的一个</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# <span class="built_in">cat</span> test1</span><br><span class="line">111 222</span><br><span class="line">333 444</span><br><span class="line">555 666</span><br><span class="line">[root@rocky8:~]# awk <span class="string">&#x27;BEGIN&#123;RS=&quot;444&quot;;&#125;&#123;print $2,$3&#125;&#x27;</span> test1</span><br><span class="line">222 333</span><br><span class="line">666</span><br></pre></td></tr></table></figure><p><strong>222和333之间是有一个\n的，当RS设定成444后，222和333被认定成同一行的二列了，其实按常规思想是二行的一列才对</strong>。</p><p>5，OFS列输出分隔符</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# awk <span class="string">&#x27;BEGIN&#123;OFS=&quot;|&quot;;&#125;&#123;print $1,$2&#125;&#x27;</span> test1</span><br><span class="line">111|222</span><br><span class="line">333|444</span><br><span class="line">555|666</span><br><span class="line">[root@rocky8:~]# awk <span class="string">&#x27;BEGIN&#123;OFS=&quot;|&quot;;&#125;&#123;print $1 OFS $2&#125;&#x27;</span> test1  </span><br><span class="line">111|222</span><br><span class="line">333|444</span><br><span class="line">555|666</span><br></pre></td></tr></table></figure><p><strong>test1只有二列，如果100列，都写出来太麻烦了吧。</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# awk <span class="string">&#x27;BEGIN&#123;OFS=&quot;|&quot;;&#125;&#123;print $0&#125;&#x27;</span> test1  </span><br><span class="line">111 222</span><br><span class="line">333 444</span><br><span class="line">555 666</span><br><span class="line">[root@rocky8:~]# awk <span class="string">&#x27;BEGIN&#123;OFS=&quot;|&quot;;&#125;&#123;NF=NF;print $0&#125;&#x27;</span> test1 </span><br><span class="line">111|222</span><br><span class="line">333|444</span><br><span class="line">555|666</span><br></pre></td></tr></table></figure><p>为什么第二种方法中的OFS生效呢？个人觉得，<strong>awk觉查到列有所变化时，就会让OFS生效</strong>，没变化直接输出了。</p><p>此部分转自：<strong>海底苍鹰：</strong><a target="_blank" rel="noopener" href="http://blog.51yip.com/shell/1151.html">awk中RS,ORS,FS,OFS区别与联系</a></p><h4 id="正则字符串匹配">正则字符串匹配</h4><p><strong>~ 表示模式开始。// 中是模式。</strong></p><p>输出第二列包含 “th”，并打印第二列与第四列：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# awk <span class="string">&#x27;$2 ~ /th/ &#123;print $2,$4&#125;&#x27;</span> <span class="built_in">log</span> </span><br><span class="line">this a</span><br></pre></td></tr></table></figure><p>输出包含&quot;re&quot;的行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# awk <span class="string">&#x27;/re/ &#123;print $0&#125;&#x27;</span> <span class="built_in">log</span> </span><br><span class="line">3 Are you like awk</span><br><span class="line">10 There are orange,apple,mongo</span><br></pre></td></tr></table></figure><p><strong>!表示取反</strong></p><p>输出第二列不包含 “th”，并打印第二列与第四列：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# awk <span class="string">&#x27;$2 !~ /th/ &#123;print $0&#125;&#x27;</span> <span class="built_in">log</span> </span><br><span class="line">3 Are you like awk</span><br><span class="line">This<span class="string">&#x27;s a test</span></span><br><span class="line"><span class="string">10 There are orange,apple,mongo</span></span><br></pre></td></tr></table></figure><p>输出不包含&quot;re&quot;的行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# awk <span class="string">&#x27;!/re/ &#123;print $0&#125;&#x27;</span> <span class="built_in">log</span> </span><br><span class="line">2 this is a <span class="built_in">test</span></span><br><span class="line">This<span class="string">&#x27;s a test</span></span><br></pre></td></tr></table></figure><h4 id="一些实例">一些实例</h4><p><strong>计算文件大小</strong></p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# <span class="keyword">ls</span> -<span class="keyword">l</span> | awk &#x27;&#123;<span class="keyword">sum</span>+=<span class="variable">$5&#125;</span>END&#123;<span class="keyword">print</span> <span class="keyword">sum</span>&#125;&#x27;</span><br><span class="line">1066</span><br></pre></td></tr></table></figure><p><strong>从文件中找出长度大于80的行</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;length&gt;80&#x27;</span> <span class="built_in">log</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# <span class="built_in">seq</span> 100|sed <span class="string">&quot;:a;N;s/\n//g;ta&quot;</span> &gt;&gt; <span class="built_in">log</span></span><br><span class="line">[root@rocky8:~]# <span class="built_in">cat</span> <span class="built_in">log</span></span><br><span class="line">2 this is a <span class="built_in">test</span></span><br><span class="line">3 Are you like awk</span><br><span class="line">This<span class="string">&#x27;s a test</span></span><br><span class="line"><span class="string">10 There are orange,apple,mongo</span></span><br><span class="line"><span class="string">123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100</span></span><br><span class="line"><span class="string">[root@rocky8:~]# awk &#x27;</span>length&gt;80<span class="string">&#x27; log</span></span><br><span class="line"><span class="string">123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100</span></span><br></pre></td></tr></table></figure><p><strong>打印九九乘法表</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">seq</span> 9 | sed <span class="string">&#x27;H;g&#x27;</span> | awk -v RS=<span class="string">&#x27;&#x27;</span> <span class="string">&#x27;&#123;for(i=1;i&lt;=NF;i++)printf(&quot;%dx%d=%d%s&quot;, i, NR, i*NR, i==NR?&quot;\n&quot;:&quot;\t&quot;)&#125;&#x27;</span></span><br></pre></td></tr></table></figure><p><strong>访问日志分析</strong></p><p>日志格式</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# <span class="built_in">head</span> access.log -n1</span><br><span class="line">42.236.10.75 <span class="string">&quot;changtou.xiaoxiaoming.xyz&quot;</span> [14/Oct/2019:12:47:18 +0800] <span class="string">&quot;GET /logo/8@3x.png HTTP/1.1&quot;</span> 200 26053 <span class="string">&quot;https://changtou.xiaoxiaoming.xyz/&quot;</span> <span class="string">&quot;Mozilla/5.0 (Linux; U; Android 8.1.0; zh-CN; EML-AL00 Build/HUAWEIEML-AL00) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/57.0.2987.108 baidu.sogo.uc.UCBrowser/11.9.4.974 UWS/2.13.1.48 Mobile Safari/537.36 AliApp(DingTalk/4.5.11) com.alibaba.android.rimet/10487439 Channel/227200 language/zh-CN&quot;</span> <span class="string">&quot;42.236.10.75&quot;</span> rt=<span class="string">&quot;0.000&quot;</span> uct=<span class="string">&quot;-&quot;</span> uht=<span class="string">&quot;-&quot;</span> urt=<span class="string">&quot;-&quot;</span></span><br></pre></td></tr></table></figure><p>示例：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">1.数据清洗</span><br><span class="line">awk <span class="string">&#x27;($6 ~ /.html/) &amp;&amp; ($8 ~ /200/)  &#123;print $0&#125;&#x27;</span> access.log &gt; clean.log</span><br><span class="line"></span><br><span class="line">2.统计PV</span><br><span class="line">[root@rocky8:~]# awk <span class="string">&#x27;&#123;print $0&#125;&#x27;</span>  clean.log | <span class="built_in">wc</span> -l</span><br><span class="line">700</span><br><span class="line">[root@rocky8:~]# <span class="built_in">cut</span> -d <span class="string">&#x27; &#x27;</span> -f 1 clean.log|<span class="built_in">wc</span> -l    </span><br><span class="line">700</span><br><span class="line"></span><br><span class="line">3:UV</span><br><span class="line">[root@rocky8:~]# awk <span class="string">&#x27;&#123;print $1&#125;&#x27;</span>  clean.log |<span class="built_in">sort</span>|<span class="built_in">uniq</span>| <span class="built_in">wc</span> -l</span><br><span class="line">155</span><br><span class="line">[root@rocky8:~]# <span class="built_in">cut</span> -d <span class="string">&#x27; &#x27;</span> -f 1 clean.log|<span class="built_in">sort</span>|<span class="built_in">uniq</span>| <span class="built_in">wc</span> -l</span><br><span class="line">155</span><br><span class="line"></span><br><span class="line">4:获取每天访问网站最多的前10名用户</span><br><span class="line">awk <span class="string">&#x27;&#123;print $1&#125;&#x27;</span> clean.log|<span class="built_in">sort</span>|<span class="built_in">uniq</span> -c|<span class="built_in">sort</span> -k 1nr|<span class="built_in">head</span></span><br><span class="line">或</span><br><span class="line"><span class="built_in">cut</span> -d <span class="string">&#x27; &#x27;</span> -f 1 clean.log|<span class="built_in">sort</span>|<span class="built_in">uniq</span> -c|<span class="built_in">sort</span> -k 1nr|<span class="built_in">head</span></span><br></pre></td></tr></table></figure><h3 id="awk编程">awk编程</h3><h4 id="条件语句IF-ELSE">条件语句IF&amp;ELSE</h4><p>IF 条件语句语法格式如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (condition)</span><br><span class="line">    action</span><br></pre></td></tr></table></figure><p>也可以使用花括号来执行一组操作：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (condition)</span><br><span class="line">&#123;</span><br><span class="line">    action-1</span><br><span class="line">    action-2</span><br><span class="line">    .</span><br><span class="line">    .</span><br><span class="line">    action-n</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>判断数字是奇数还是偶数：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# awk <span class="string">&#x27;BEGIN &#123;num = 10; if (num % 2 == 0) printf &quot;%d 是偶数\n&quot;, num &#125;&#x27;</span></span><br><span class="line">10 是偶数</span><br></pre></td></tr></table></figure><p>IF - ELSE 条件语句语法格式如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (condition)</span><br><span class="line">    action-1</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    action-2</span><br><span class="line">1234</span><br></pre></td></tr></table></figure><p>在条件语句 condition 为 true 时只需 action-1，否则执行 action-2。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# awk <span class="string">&#x27;BEGIN &#123;</span></span><br><span class="line"><span class="string">&gt;     num = 11; </span></span><br><span class="line"><span class="string">&gt;     if (num % 2 == 0) printf &quot;%d 是偶数\n&quot;, num; </span></span><br><span class="line"><span class="string">&gt;     else printf &quot;%d 是奇数\n&quot;, num </span></span><br><span class="line"><span class="string">&gt; &#125;&#x27;</span></span><br><span class="line">11 是奇数</span><br><span class="line">[root@rocky8:~]# awk <span class="string">&#x27;BEGIN &#123;num = 11; if (num % 2 == 0) printf &quot;%d 是偶数\n&quot;, num; else printf &quot;%d 是奇数\n&quot;, num &#125;&#x27;</span></span><br><span class="line">11 是奇数</span><br></pre></td></tr></table></figure><p>可以创建多个 IF - ELSE 格式的判断语句来实现多个条件的判断：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ awk <span class="string">&#x27;BEGIN &#123;</span></span><br><span class="line"><span class="string">a=30;</span></span><br><span class="line"><span class="string">if (a==10)</span></span><br><span class="line"><span class="string">  print &quot;a = 10&quot;;</span></span><br><span class="line"><span class="string">else if (a == 20)</span></span><br><span class="line"><span class="string">  print &quot;a = 20&quot;;</span></span><br><span class="line"><span class="string">else if (a == 30)</span></span><br><span class="line"><span class="string">  print &quot;a = 30&quot;;</span></span><br><span class="line"><span class="string">&#125;&#x27;</span></span><br></pre></td></tr></table></figure><p>输出结果：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:~]# awk <span class="string">&#x27;BEGIN &#123;</span></span><br><span class="line"><span class="string">&gt; a=30;</span></span><br><span class="line"><span class="string">&gt; if (a==10)</span></span><br><span class="line"><span class="string">&gt;   print &quot;a = 10&quot;;</span></span><br><span class="line"><span class="string">&gt; else if (a == 20)</span></span><br><span class="line"><span class="string">&gt;   print &quot;a = 20&quot;;</span></span><br><span class="line"><span class="string">&gt; else if (a == 30)</span></span><br><span class="line"><span class="string">&gt;   print &quot;a = 30&quot;;</span></span><br><span class="line"><span class="string">&gt; &#125;&#x27;</span></span><br><span class="line">a = 30</span><br></pre></td></tr></table></figure><h4 id="循环语句For-While">循环语句For&amp;While</h4><p>For 循环的语法如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (initialisation; condition; increment/decrement)</span><br><span class="line">    action</span><br></pre></td></tr></table></figure><p>下面的例子使用 For 循环输出数字 1 至 5：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">python@ubuntu:~/test$ awk <span class="string">&#x27;BEGIN &#123; for (i = 1; i &lt;= 5; ++i) print i &#125;&#x27;</span></span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td></tr></table></figure><p>While 循环的语法如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (condition)</span><br><span class="line">    action</span><br></pre></td></tr></table></figure><p>下面是使用 While 循环输出数字 1 到 5 的例子：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">python@ubuntu:~/test$ awk <span class="string">&#x27;BEGIN &#123;i = 1; while (i &lt; 6) &#123; print i; ++i &#125; &#125;&#x27;</span></span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td></tr></table></figure><p>在下面的示例子中，当计算的和大于 50 的时候使用 break 结束循环：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ awk <span class="string">&#x27;BEGIN &#123;</span></span><br><span class="line"><span class="string">   sum = 0; for (i = 0; i &lt; 20; ++i) &#123; </span></span><br><span class="line"><span class="string">      sum += i; if (sum &gt; 50) break; else print &quot;Sum =&quot;, sum </span></span><br><span class="line"><span class="string">   &#125; </span></span><br><span class="line"><span class="string">&#125;&#x27;</span></span><br></pre></td></tr></table></figure><p>输出结果为：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">python@ubuntu:~/test$ awk <span class="string">&#x27;BEGIN &#123;</span></span><br><span class="line"><span class="string">&gt;    sum = 0; for (i = 0; i &lt; 20; ++i) &#123; </span></span><br><span class="line"><span class="string">&gt;       sum += i; if (sum &gt; 50) break; else print &quot;Sum =&quot;, sum </span></span><br><span class="line"><span class="string">&gt;    &#125; </span></span><br><span class="line"><span class="string">&gt; &#125;&#x27;</span></span><br><span class="line">Sum = 0</span><br><span class="line">Sum = 1</span><br><span class="line">Sum = 3</span><br><span class="line">Sum = 6</span><br><span class="line">Sum = 10</span><br><span class="line">Sum = 15</span><br><span class="line">Sum = 21</span><br><span class="line">Sum = 28</span><br><span class="line">Sum = 36</span><br><span class="line">Sum = 45</span><br></pre></td></tr></table></figure><p>Continue 语句用于在循环体内部结束本次循环，从而直接进入下一次循环迭代。</p><p>下面的例子输出 1 到 20 之间的偶数：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">python@ubuntu:~/test$ awk <span class="string">&#x27;BEGIN &#123;for (i = 1; i &lt;= 20; ++i) &#123;if (i % 2 == 0) print i ; else continue&#125; &#125;&#x27;</span></span><br><span class="line">2</span><br><span class="line">4</span><br><span class="line">6</span><br><span class="line">8</span><br><span class="line">10</span><br><span class="line">12</span><br><span class="line">14</span><br><span class="line">16</span><br><span class="line">18</span><br><span class="line">20</span><br></pre></td></tr></table></figure><p>Exit 用于结束脚本程序的执行。</p><p>该函数接受一个整数作为参数表示 AWK 进程结束状态。 如果没有提供该参数，其默认状态为 0。</p><p>下面例子中当和大于 50 时结束 AWK 程序。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ awk <span class="string">&#x27;BEGIN &#123;</span></span><br><span class="line"><span class="string">   sum = 0; for (i = 0; i &lt; 20; ++i) &#123;</span></span><br><span class="line"><span class="string">      sum += i; if (sum &gt; 50) exit(10); else print &quot;Sum =&quot;, sum </span></span><br><span class="line"><span class="string">   &#125; </span></span><br><span class="line"><span class="string">&#125;&#x27;</span></span><br></pre></td></tr></table></figure><p>输出结果为：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">python@ubuntu:~/test$ awk <span class="string">&#x27;BEGIN &#123;</span></span><br><span class="line"><span class="string">&gt;    sum = 0; for (i = 0; i &lt; 20; ++i) &#123;</span></span><br><span class="line"><span class="string">&gt;       sum += i; if (sum &gt; 50) exit(10); else print &quot;Sum =&quot;, sum </span></span><br><span class="line"><span class="string">&gt;    &#125; </span></span><br><span class="line"><span class="string">&gt; &#125;&#x27;</span></span><br><span class="line">Sum = 0</span><br><span class="line">Sum = 1</span><br><span class="line">Sum = 3</span><br><span class="line">Sum = 6</span><br><span class="line">Sum = 10</span><br><span class="line">Sum = 15</span><br><span class="line">Sum = 21</span><br><span class="line">Sum = 28</span><br><span class="line">Sum = 36</span><br><span class="line">Sum = 45</span><br><span class="line">python@ubuntu:~/test$ <span class="built_in">echo</span> $?</span><br><span class="line">10</span><br></pre></td></tr></table></figure><h4 id="awk数组">awk数组</h4><p>AWK的数组底层数据结构是散列表，索引可以是数字或字符串。</p><p>数组使用的语法格式：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">array_name[index]=value</span><br></pre></td></tr></table></figure><p>创建数组并访问数组元素：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ awk <span class="string">&#x27;BEGIN &#123;</span></span><br><span class="line"><span class="string">sites[&quot;taobao&quot;]=&quot;www.taobao.com&quot;;</span></span><br><span class="line"><span class="string">sites[&quot;google&quot;]=&quot;www.google.com&quot;</span></span><br><span class="line"><span class="string">print sites[&quot;taobao&quot;] &quot;\n&quot; sites[&quot;google&quot;]</span></span><br><span class="line"><span class="string">&#125;&#x27;</span></span><br></pre></td></tr></table></figure><p>删除数组元素语法格式：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">delete array_name[index]</span><br></pre></td></tr></table></figure><p>下面的例子中，数组中的 google 元素被删除（删除命令没有输出）：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ awk <span class="string">&#x27;BEGIN &#123;</span></span><br><span class="line"><span class="string">sites[&quot;taobao&quot;]=&quot;www.taobao.com&quot;;</span></span><br><span class="line"><span class="string">sites[&quot;google&quot;]=&quot;www.google.com&quot;</span></span><br><span class="line"><span class="string">delete sites[&quot;google&quot;];</span></span><br><span class="line"><span class="string">print sites[&quot;google&quot;]</span></span><br><span class="line"><span class="string">&#125;&#x27;</span></span><br></pre></td></tr></table></figure><p>AWK 本身不支持多维数组，不过我们可以很容易地使用一维数组模拟实现多维数组。</p><p>如下示例为一个 3x3 的三维数组：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">100 200 300</span><br><span class="line">400 500 600</span><br><span class="line">700 800 900</span><br></pre></td></tr></table></figure><p>以上实例中，<code>array[0][0]</code> 存储 100，<code>array[0][1]</code> 存储 200 ，依次类推。为了在 <code>array[0][0]</code> 处存储 100, 可以使用字符串0,0 作为索引： array[“0,0”] = 100。</p><p>下面是模拟二维数组的例子：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$ awk <span class="string">&#x27;BEGIN &#123;</span></span><br><span class="line"><span class="string">array[&quot;0,0&quot;] = 100;</span></span><br><span class="line"><span class="string">array[&quot;0,1&quot;] = 200;</span></span><br><span class="line"><span class="string">array[&quot;0,2&quot;] = 300;</span></span><br><span class="line"><span class="string">array[&quot;1,0&quot;] = 400;</span></span><br><span class="line"><span class="string">array[&quot;1,1&quot;] = 500;</span></span><br><span class="line"><span class="string">array[&quot;1,2&quot;] = 600;</span></span><br><span class="line"><span class="string"># 输出数组元素</span></span><br><span class="line"><span class="string">print &quot;array[0,0] = &quot; array[&quot;0,0&quot;];</span></span><br><span class="line"><span class="string">print &quot;array[0,1] = &quot; array[&quot;0,1&quot;];</span></span><br><span class="line"><span class="string">print &quot;array[0,2] = &quot; array[&quot;0,2&quot;];</span></span><br><span class="line"><span class="string">print &quot;array[1,0] = &quot; array[&quot;1,0&quot;];</span></span><br><span class="line"><span class="string">print &quot;array[1,1] = &quot; array[&quot;1,1&quot;];</span></span><br><span class="line"><span class="string">print &quot;array[1,2] = &quot; array[&quot;1,2&quot;];</span></span><br><span class="line"><span class="string">&#125;&#x27;</span></span><br></pre></td></tr></table></figure><p>执行上面的命令可以得到如下结果：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">array[0,0] = 100</span><br><span class="line">array[0,1] = 200</span><br><span class="line">array[0,2] = 300</span><br><span class="line">array[1,0] = 400</span><br><span class="line">array[1,1] = 500</span><br><span class="line">array[1,2] = 600</span><br></pre></td></tr></table></figure><p>在数组上可以执行很多操作，比如，使用 asort 完成数组元素的排序，或者使用 asorti 实现数组索引的排序等等。</p><h4 id="AWK-用户自定义函数">AWK 用户自定义函数</h4><p>自定义函数的语法格式为：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> function_name(argument1, argument2, ...)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">function</span> body</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>以下实例实现了两个简单函数，它们分别返回两个数值中的最小值和最大值。</p><p>文件 functions.awk 代码如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 返回最小值</span></span><br><span class="line"><span class="keyword">function</span> find_min(num1, num2)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">if</span> (num1 &lt; num2)</span><br><span class="line">    <span class="built_in">return</span> num1</span><br><span class="line">  <span class="built_in">return</span> num2</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 返回最大值</span></span><br><span class="line"><span class="keyword">function</span> find_max(num1, num2)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">if</span> (num1 &gt; num2)</span><br><span class="line">    <span class="built_in">return</span> num1</span><br><span class="line">  <span class="built_in">return</span> num2</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 主函数</span></span><br><span class="line"><span class="keyword">function</span> main(num1, num2)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="comment"># 查找最小值</span></span><br><span class="line">  result = find_min(10, 20)</span><br><span class="line">  <span class="built_in">print</span> <span class="string">&quot;Minimum =&quot;</span>, result</span><br><span class="line"></span><br><span class="line">  <span class="comment"># 查找最大值</span></span><br><span class="line">  result = find_max(10, 20)</span><br><span class="line">  <span class="built_in">print</span> <span class="string">&quot;Maximum =&quot;</span>, result</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 脚本从这里开始执行</span></span><br><span class="line">BEGIN &#123;</span><br><span class="line">  main(10, 20)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>执行 functions.awk 文件，可以得到如下的结果：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ awk -f functions.awk </span><br><span class="line">Minimum = 10</span><br><span class="line">Maximum = 20</span><br></pre></td></tr></table></figure><h4 id="AWK-内置函数">AWK 内置函数</h4><p>AWK 内置函数主要有以下几种：</p><ul class="lvl-0"><li class="lvl-2"><p>算数函数</p></li><li class="lvl-2"><p>字符串函数</p></li><li class="lvl-2"><p>时间函数</p></li><li class="lvl-2"><p>位操作函数</p></li><li class="lvl-2"><p>其它函数</p></li></ul><h4 id="算数函数">算数函数</h4><table><thead><tr><th><strong>函数名</strong></th><th><strong>说明</strong></th><th><strong>实例</strong></th></tr></thead><tbody><tr><td>atan2( y, x )</td><td>返回 y/x 的反正切。</td><td><code>$ awk 'BEGIN &#123; PI = 3.14159265 x = -10 y = 10 result = atan2 (y,x) * 180 / PI; printf &quot;The arc tangent for (x=%f, y=%f) is %f degrees\n&quot;, x, y, result &#125;'</code>输出结果为：<code>The arc tangent for (x=-10.000000, y=10.000000) is 135.000000 degrees</code></td></tr><tr><td>cos( x )</td><td>返回 x 的余弦；x 是弧度。</td><td><code>$ awk 'BEGIN &#123; PI = 3.14159265 param = 60 result = cos(param * PI / 180.0); printf &quot;The cosine of %f degrees is %f.\n&quot;, param, result &#125;'</code>输出结果为：<code>The cosine of 60.000000 degrees is 0.500000.</code></td></tr><tr><td>sin( x )</td><td>返回 x 的正弦；x 是弧度。</td><td><code>$ awk 'BEGIN &#123; PI = 3.14159265 param = 30.0 result = sin(param * PI /180) printf &quot;The sine of %f degrees is %f.\n&quot;, param, result &#125;'</code>输出结果为：<code>The sine of 30.000000 degrees is 0.500000.</code></td></tr><tr><td>exp( x )</td><td>返回 x 幂函数。</td><td><code>$ awk 'BEGIN &#123; param = 5 result = exp(param); printf &quot;The exponential value of %f is %f.\n&quot;, param, result &#125;'</code>输出结果为：<code>The exponential value of 5.000000 is 148.413159.</code></td></tr><tr><td>log( x )</td><td>返回 x 的自然对数。</td><td><code>$ awk 'BEGIN &#123; param = 5.5 result = log (param) printf &quot;log(%f) = %f\n&quot;, param, result &#125;'</code>输出结果为：<code>log(5.500000) = 1.704748</code></td></tr><tr><td>sqrt( x )</td><td>返回 x 平方根。</td><td><code>$ awk 'BEGIN &#123; param = 1024.0 result = sqrt(param) printf &quot;sqrt(%f) = %f\n&quot;, param, result &#125;'</code>输出结果为：<code>sqrt(1024.000000) = 32.000000</code></td></tr><tr><td>int( x )</td><td>返回 x 的截断至整数的值。</td><td><code>$ awk 'BEGIN &#123; param = 5.12345 result = int(param) print &quot;Truncated value =&quot;, result &#125;'</code>输出结果为：<code>Truncated value = 5</code></td></tr><tr><td>rand( )</td><td>返回任意数字 n，其中 0 &lt;= n &lt; 1。</td><td><code>$ awk 'BEGIN &#123; print &quot;Random num1 =&quot; , rand() print &quot;Random num2 =&quot; , rand() print &quot;Random num3 =&quot; , rand() &#125;'</code>输出结果为：<code>Random num1 = 0.237788 Random num2 = 0.291066 Random num3 = 0.845814</code></td></tr><tr><td>srand( [Expr] )</td><td>将 rand 函数的种子值设置为 Expr 参数的值，或如果省略 Expr 参数则使用某天的时间。返回先前的种子值。</td><td><code>$ awk 'BEGIN &#123; param = 10 printf &quot;srand() = %d\n&quot;, srand() printf &quot;srand(%d) = %d\n&quot;, param, srand(param) &#125;'</code>输出结果为：<code>srand() = 1 srand(10) = 1417959587</code></td></tr></tbody></table><h5 id="字符串函数">字符串函数</h5><table><thead><tr><th><strong>函数</strong></th><th><strong>说明</strong></th><th><strong>实例</strong></th></tr></thead><tbody><tr><td>gsub( Ere, Repl, [ In ] )</td><td>gsub 是全局替换( global substitution )的缩写。除了正则表达式所有具体值被替代这点，它和 sub 函数完全一样地执行。</td><td><code>$ awk 'BEGIN &#123; str = &quot;Hello, World&quot; print &quot;String before replacement = &quot; str gsub(&quot;World&quot;, &quot;Jerry&quot;, str) print &quot;String after replacement = &quot; str &#125;'</code>输出结果为：<code>String before replacement = Hello, World String after replacement = Hello, Jerry</code></td></tr><tr><td>sub(regex,sub,string)</td><td>sub 函数执行一次子串替换。它将第一次出现的子串用 regex 替换。第三个参数是可选的，默认为 $0。</td><td><code>$ awk 'BEGIN &#123; str = &quot;Hello, World&quot; print &quot;String before replacement = &quot; str sub(&quot;World&quot;, &quot;Jerry&quot;, str) print &quot;String after replacement = &quot; str &#125;'</code>输出结果为：<code>String before replacement = Hello, World String after replacement = Hello, Jerry</code></td></tr><tr><td>substr(str, start, l)</td><td>substr 函数返回 str 字符串中从第 start 个字符开始长度为 l 的子串。如果没有指定 l 的值，返回 str 从第 start 个字符开始的后缀子串。</td><td><code>$ awk 'BEGIN &#123; str = &quot;Hello, World !!!&quot; subs = substr(str, 1, 5) print &quot;Substring = &quot; subs &#125;'</code>输出结果为：<code>Substring = Hello</code></td></tr><tr><td>index( String1, String2 )</td><td>在由 String1 参数指定的字符串（其中有出现 String2 指定的参数）中，返回位置，从 1 开始编号。如果 String2 参数不在 String1 参数中出现，则返回 0（零）。</td><td><code>$ awk 'BEGIN &#123; str = &quot;One Two Three&quot; subs = &quot;Two&quot; ret = index(str, subs) printf &quot;Substring \&quot;%s\&quot; found at %d location.\n&quot;, subs, ret &#125;'</code>输出结果为：<code>Substring &quot;Two&quot; found at 5 location.</code></td></tr><tr><td>length [(String)]</td><td>返回 String 参数指定的字符串的长度（字符形式）。如果未给出 String 参数，则返回整个记录的长度（$0 记录变量）。</td><td><code>$ awk 'BEGIN &#123; str = &quot;Hello, World !!!&quot; print &quot;Length = &quot;, length(str) &#125;'</code>输出结果为：<code>Substring &quot;Two&quot; found at 5 location.</code></td></tr><tr><td>blength [(String)]</td><td>返回 String 参数指定的字符串的长度（以字节为单位）。如果未给出 String 参数，则返回整个记录的长度（$0 记录变量）。</td><td></td></tr><tr><td>substr( String, M, [ N ] )</td><td>返回具有 N 参数指定的字符数量子串。子串从 String 参数指定的字符串取得，其字符以 M 参数指定的位置开始。M 参数指定为将 String 参数中的第一个字符作为编号 1。如果未指定 N 参数，则子串的长度将是 M 参数指定的位置到 String 参数的末尾 的长度。</td><td><code>$ awk 'BEGIN &#123; str = &quot;Hello, World !!!&quot; subs = substr(str, 1, 5) print &quot;Substring = &quot; subs &#125;'</code>输出结果为：<code>Substring = Hello</code></td></tr><tr><td>match( String, Ere )</td><td>在 String 参数指定的字符串（Ere 参数指定的扩展正则表达式出现在其中）中返回位置（字符形式），从 1 开始编号，或如果 Ere 参数不出现，则返回 0（零）。RSTART 特殊变量设置为返回值。RLENGTH 特殊变量设置为匹配的字符串的长度，或如果未找到任何匹配，则设置为 -1（负一）。</td><td><code>$ awk 'BEGIN &#123; str = &quot;One Two Three&quot; subs = &quot;Two&quot; ret = match(str, subs) printf &quot;Substring \&quot;%s\&quot; found at %d location.\n&quot;, subs, ret &#125;'</code>输出结果为：<code>Substring &quot;Two&quot; found at 5 location.</code></td></tr><tr><td>split( String, A, [Ere] )</td><td>将 String 参数指定的参数分割为数组元素 A[1], A[2], . . ., A[n]，并返回 n 变量的值。此分隔可以通过 Ere 参数指定的扩展正则表达式进行，或用当前字段分隔符（FS 特殊变量）来进行（如果没有给出 Ere 参数）。除非上下文指明特定的元素还应具有一个数字值，否则 A 数组中的元素用字符串值来创建。</td><td><code>$ awk 'BEGIN &#123; str = &quot;One,Two,Three,Four&quot; split(str, arr, &quot;,&quot;) print &quot;Array contains following values&quot; for (i in arr) &#123; print arr[i] &#125; &#125;'</code>输出结果为：<code>Array contains following values One Two Three Four</code></td></tr><tr><td>tolower( String )</td><td>返回 String 参数指定的字符串，字符串中每个大写字符将更改为小写。大写和小写的映射由当前语言环境的 LC_CTYPE 范畴定义。</td><td><code>$ awk 'BEGIN &#123; str = &quot;HELLO, WORLD !!!&quot; print &quot;Lowercase string = &quot; tolower(str) &#125;'</code>输出结果为：<code>Lowercase string = hello, world !!!</code></td></tr><tr><td>toupper( String )</td><td>返回 String 参数指定的字符串，字符串中每个小写字符将更改为大写。大写和小写的映射由当前语言环境的 LC_CTYPE 范畴定义。</td><td><code>$ awk 'BEGIN &#123; str = &quot;hello, world !!!&quot; print &quot;Uppercase string = &quot; toupper(str) &#125;'</code>输出结果为：<code>Uppercase string = HELLO, WORLD !!!</code></td></tr><tr><td>sprintf(Format, Expr, Expr, . . . )</td><td>根据 Format 参数指定的 printf 子例程格式字符串来格式化 Expr 参数指定的表达式并返回最后生成的字符串。</td><td><code>$ awk 'BEGIN &#123; str = sprintf(&quot;%s&quot;, &quot;Hello, World !!!&quot;) print str &#125;'</code>输出结果为：<code>Hello, World !!!</code></td></tr><tr><td>strtonum(str)</td><td>strtonum 将字符串 str 转换为数值。 如果字符串以 0 开始，则将其当作十进制数；如果字符串以 0x 或 0X 开始，则将其当作十六进制数；否则，将其当作浮点数。</td><td><code>$ awk 'BEGIN &#123; print &quot;Decimal num = &quot; strtonum(&quot;123&quot;) print &quot;Octal num = &quot; strtonum(&quot;0123&quot;) print &quot;Hexadecimal num = &quot; strtonum(&quot;0x123&quot;) &#125;'</code>输出结果为：<code>Decimal num = 123 Octal num = 83 Hexadecimal num = 291</code></td></tr></tbody></table><p>**注：**<strong>Ere</strong> 部分可以是正则表达式。</p><p><strong>1、gsub、sub 使用</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ awk <span class="string">&#x27;BEGIN&#123;info=&quot;this is a test2012test!&quot;;gsub(/[0-9]+/,&quot;||&quot;,info);print info&#125;&#x27;</span></span><br><span class="line">this is a <span class="built_in">test</span>||<span class="built_in">test</span>!</span><br></pre></td></tr></table></figure><p><strong>2、查找字符串（index 使用）</strong></p><p>使用了三元运算符: <strong>表达式 ? 动作1 : 动作2</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ awk <span class="string">&#x27;BEGIN&#123;info=&quot;this is a test2012test!&quot;;print index(info,&quot;11111&quot;)?&quot;ok&quot;:&quot;no found&quot;;&#125;&#x27;</span></span><br><span class="line">no found</span><br><span class="line">$ awk <span class="string">&#x27;BEGIN&#123;info=&quot;this is a test2012test!&quot;;print index(info,&quot;is&quot;)?&quot;ok&quot;:&quot;no found&quot;;&#125;&#x27;</span></span><br><span class="line">ok</span><br><span class="line">$ awk <span class="string">&#x27;BEGIN&#123;info=&quot;this is a test2012test!&quot;;print index(info,&quot;test&quot;)?&quot;ok&quot;:&quot;no found&quot;;&#125;&#x27;</span></span><br><span class="line">ok</span><br></pre></td></tr></table></figure><p><strong>3、正则表达式匹配查找(match 使用）</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ awk <span class="string">&#x27;BEGIN&#123;info=&quot;this is a test2012test!&quot;;print match(info,/[0-9]+/)?&quot;ok&quot;:&quot;no found&quot;;&#125;&#x27;</span></span><br><span class="line">ok</span><br></pre></td></tr></table></figure><p><strong>4、截取字符串(substr使用）</strong></p><p>从第 4 个 字符开始，截取 10 个长度字符串。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ awk <span class="string">&#x27;BEGIN&#123;info=&quot;this is a test2012test!&quot;;print substr(info,4,10);&#125;&#x27;</span></span><br><span class="line">s is a tes</span><br></pre></td></tr></table></figure><p><strong>5、字符串分割（split使用）</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ awk <span class="string">&#x27;BEGIN&#123;info=&quot;this is a test&quot;;split(info,tA,&quot; &quot;);print length(tA);for(k in tA)&#123;print k,tA[k];&#125;&#125;&#x27;</span></span><br><span class="line">4</span><br><span class="line">2 is</span><br><span class="line">3 a</span><br><span class="line">4 <span class="built_in">test</span></span><br><span class="line">1 this</span><br></pre></td></tr></table></figure><p>分割 info，将 info 字符串使用空格切分为动态数组 tA。注意 awk for …in 循环，是一个无序的循环。 并不是从数组下标 1…n ，因此使用时候需要特别注意。</p><h5 id="时间函数">时间函数</h5><table><thead><tr><th><strong>函数名</strong></th><th><strong>说明</strong></th><th><strong>实例</strong></th></tr></thead><tbody><tr><td>mktime( YYYY MM DD HH MM SS[ DST])</td><td>生成时间格式</td><td><code>$ awk 'BEGIN &#123; print &quot;Number of seconds since the Epoch = &quot; mktime(&quot;2014 12 14 30 20 10&quot;) &#125;'</code>输出结果为：<code>Number of seconds since the Epoch = 1418604610</code></td></tr><tr><td>strftime([format [, timestamp]])</td><td>格式化时间输出，将时间戳转为时间字符串 具体格式，见下表.</td><td><code>$ awk 'BEGIN &#123; print strftime(&quot;Time = %m/%d/%Y %H:%M:%S&quot;, systime()) &#125;'</code>输出结果为：<code>Time = 12/14/2014 22:08:42</code></td></tr><tr><td>systime()</td><td>得到时间戳,返回从1970年1月1日开始到当前时间(不计闰年)的整秒数</td><td><code>awk 'BEGIN&#123;now=systime();print now&#125;'</code>输出结果为：<code>1343210982</code></td></tr></tbody></table><p>strftime 日期和时间格式说明符:</p><table><thead><tr><th>序号</th><th>描述</th></tr></thead><tbody><tr><td>%a</td><td>星期缩写(Mon-Sun)。</td></tr><tr><td>%A</td><td>星期全称（Monday-Sunday）。</td></tr><tr><td>%b</td><td>月份缩写（Jan）。</td></tr><tr><td>%B</td><td>月份全称（January）。</td></tr><tr><td>%c</td><td>本地日期与时间。</td></tr><tr><td>%C</td><td>年份中的世纪部分，其值为年份整除100。</td></tr><tr><td>%d</td><td>十进制日期(01-31)</td></tr><tr><td>%D</td><td>等价于 %m/%d/%y.</td></tr><tr><td>%e</td><td>日期，如果只有一位数字则用空格补齐</td></tr><tr><td>%F</td><td>等价于 %Y-%m-%d，这也是 ISO 8601 标准日期格式。</td></tr><tr><td>%g</td><td>ISO8610 标准周所在的年份模除 100（00-99)。比如，1993 年 1 月 1 日属于 1992 年的第 53 周。所以，虽然它是 1993 年第 1 天，但是其　ISO8601 标准周所在年份却是 1992。同样，尽管 1973 年 12 月 31 日属于 1973 年但是它却属于 1994 年的第一周。所以 1973 年 12 月 31 日的 ISO8610　标准周所在的年是 1974 而不是 1973。</td></tr><tr><td>%G</td><td>ISO 标准周所在年份的全称。</td></tr><tr><td>%h</td><td>等价于 %b.</td></tr><tr><td>%H</td><td>用十进制表示的 24 小时格式的小时(00-23)</td></tr><tr><td>%I</td><td>用十进制表示的 12 小时格式的小时（00-12）</td></tr><tr><td>%j</td><td>一年中的第几天（001-366）</td></tr><tr><td>%m</td><td>月份（01-12）</td></tr><tr><td>%M</td><td>分钟数（00-59)</td></tr><tr><td>%n</td><td>换行符 (ASCII LF)</td></tr><tr><td>%p</td><td>十二进制表示法（AM/PM）</td></tr><tr><td>%r</td><td>十二进制表示法的时间（等价于 %I:%M:%S %p）。</td></tr><tr><td>%R</td><td>等价于 %H:%M。</td></tr><tr><td>%S</td><td>时间的秒数值（00-60）</td></tr><tr><td>%t</td><td>制表符 (tab)</td></tr><tr><td>%T</td><td>等价于 %H:%M:%S。</td></tr><tr><td>%u</td><td>以数字表示的星期(1-7),1 表示星期一。</td></tr><tr><td>%U</td><td>一年中的第几个星期（第一个星期天作为第一周的开始），00-53</td></tr><tr><td>%V</td><td>一年中的第几个星期（第一个星期一作为第一周的开始），01-53。</td></tr><tr><td>%w</td><td>以数字表示的星期（0-6），0表示星期日 。</td></tr><tr><td>%W</td><td>十进制表示的一年中的第几个星期（第一个星期一作为第一周的开始），00-53。</td></tr><tr><td>%x</td><td>本地日期表示</td></tr><tr><td>%X</td><td>本地时间表示</td></tr><tr><td>%y</td><td>年份模除 100。</td></tr><tr><td>%Y</td><td>十进制表示的完整年份。</td></tr><tr><td>%z</td><td>时区，表示格式为+HHMM（例如，格式要求生成的 RFC 822或者 RFC 1036 时间头）</td></tr><tr><td>%Z</td><td>时区名称或缩写，如果时区待定则无输出。</td></tr></tbody></table><h5 id="位操作函数">位操作函数</h5><table><thead><tr><th><strong>函数名</strong></th><th><strong>说明</strong></th><th><strong>实例</strong></th></tr></thead><tbody><tr><td>and</td><td>位与操作。</td><td><code>$ awk 'BEGIN &#123; num1 = 10 num2 = 6 printf &quot;(%d AND %d) = %d\n&quot;, num1, num2, and(num1, num2) &#125;'</code>输出结果为：<code>(10 AND 6) = 2</code></td></tr><tr><td>compl</td><td>按位求补。</td><td><code>$ awk 'BEGIN &#123; num1 = 10 printf &quot;compl(%d) = %d\n&quot;, num1, compl(num1) &#125;'</code>输出结果为：<code>compl(10) = 9007199254740981</code></td></tr><tr><td>lshift</td><td>左移位操作</td><td><code>$ awk 'BEGIN &#123; num1 = 10 printf &quot;lshift(%d) by 1 = %d\n&quot;, num1, lshift(num1, 1) &#125;'</code>输出结果为：<code>lshift(10) by 1 = 20</code></td></tr><tr><td>rshift</td><td>右移位操作</td><td><code>$ awk 'BEGIN &#123; num1 = 10 printf &quot;rshift(%d) by 1 = %d\n&quot;, num1, rshift(num1, 1) &#125;'</code>输出结果为：<code>rshift(10) by 1 = 5</code></td></tr><tr><td>or</td><td>按位或操作</td><td><code>$ awk 'BEGIN &#123; num1 = 10 num2 = 6 printf &quot;(%d OR %d) = %d\n&quot;, num1, num2, or(num1, num2) &#125;'</code>输出结果为：<code>(10 OR 6) = 14</code></td></tr><tr><td>xor</td><td>按位异或操作</td><td><code>$ awk 'BEGIN &#123; num1 = 10 num2 = 6 printf &quot;(%d XOR %d) = %d\n&quot;, num1, num2, xor(num1, num2) &#125;'</code>输出结果为：<code>(10 bitwise xor 6) = 12</code></td></tr></tbody></table><h5 id="其他函数">其他函数</h5><table><thead><tr><th><strong>函数名</strong></th><th><strong>说明</strong></th><th><strong>实例</strong></th></tr></thead><tbody><tr><td>close(expr)</td><td>关闭管道的文件</td><td>`$ awk 'BEGIN { cmd = “tr [a-z] [A-Z]” print “hello, world !!!”</td></tr><tr><td>delete</td><td>用于从数组中删除元素</td><td><code>$ awk 'BEGIN &#123; arr[0] = &quot;One&quot; arr[1] = &quot;Two&quot; arr[2] = &quot;Three&quot; arr[3] = &quot;Four&quot; print &quot;Array elements before delete operation:&quot; for (i in arr) &#123; print arr[i] &#125; delete arr[0] delete arr[1] print &quot;Array elements after delete operation:&quot; for (i in arr) &#123; print arr[i] &#125; &#125;'</code>输出结果为：<code>Array elements before delete operation: One Two Three Four Array elements after delete operation: Three Four</code></td></tr><tr><td>exit</td><td>终止脚本执行，它可以接受可选的参数 expr 传递 AWK 返回状态。</td><td><code>$ awk 'BEGIN &#123; print &quot;Hello, World !!!&quot; exit 10 print &quot;AWK never executes this statement.&quot; &#125;'</code>输出结果为：<code>Hello, World !!!</code></td></tr><tr><td>flush</td><td>刷新打开文件或管道的缓冲区</td><td></td></tr><tr><td>getline</td><td>读入下一行</td><td>使用 getline 从文件 marks.txt 中读入一行并输出：<code>$ awk '&#123;getline; print $0&#125;' marks.txt</code>，AWK 从文件 marks.txt 中读入一行存储到变量 0 中。在下一条语句中，我们使用 getline 读入下一行。因此AWK读入第二行并存储到 0 中。最后，AWK 使用 print 输出第二行的内容。这个过程一直到文件结束。</td></tr><tr><td>next</td><td>停止处理当前记录，并且进入到下一条记录的处理过程。</td><td>当模式串匹配成功后程序并不执行任何操作：<code>$ awk '&#123;if ($0 ~/Shyam/) next; print $0&#125;' marks.txt</code></td></tr><tr><td>nextfile</td><td>停止处理当前文件，从下一个文件第一个记录开始处理。</td><td>首先创建两个文件。 file1.txt 内容如下:<code>file1:str1 file1:str2 file1:str3 file1:str4</code>文件 file2.txt 内容如下：<code>file2:str1 file2:str2 file2:str3 file2:str4</code>现在我们来测试 nextfile 函数。<code>$ awk '&#123; if ($0 ~ /file1:str2/) nextfile; print $0 &#125;' file1.txt file2.txt</code>输出结果为：<code>file1:str1 file2:str1 file2:str2 file2:str3 file2:str4</code></td></tr><tr><td>return</td><td>从用户自定义的函数中返回值。请注意，如果没有指定返回值，那么的返回值是未定义的。</td><td>创建文件 functions.awk，内容如下：<code>function addition(num1, num2) &#123; result = num1 + num2 return result &#125; BEGIN &#123; res = addition(10, 20) print &quot;10 + 20 = &quot; res &#125;</code>执行该文件：<code>$ awk -f functions.awk 10 + 20 = 30</code></td></tr><tr><td>system</td><td>执行特定的命令然后返回其退出状态。返回值为 0 表示命令执行成功；非 0 表示命令执行失败。</td><td><code>$ awk 'BEGIN &#123; ret = system(&quot;date&quot;); print &quot;Return value = &quot; ret &#125;'</code>输出结果为：<code>Sun Dec 21 23:16:07 IST 2014 Return value = 0</code></td></tr></tbody></table><p>本文参考：</p><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/Jerry00713/article/details/123867016">linux三剑客sed之模式空间与保持空间</a></p></div><div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="http://mcorazon.top/posts/2b99b9f0/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/006.png"><meta itemprop="name" content="Corazon"><meta itemprop="description" content="<font color="#000000">网络安全从业人员个人博客</font>"> </span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="MCorazon"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/posts/2b99b9f0/" class="post-title-link" itemprop="url">【Linux】用户与权限管理</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2025-02-19 16:12:41 / 修改时间：22:01:57" itemprop="dateCreated datePublished" datetime="2025-02-19T16:12:41+08:00">2025-02-19</time></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>5.8k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>5 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><p>用户管理包括用户与组账号的管理。</p><p>在Unix/Linux系统中，不论是由本机或是远程登录系统，每个系统都必须拥有一个账号，并且对于不同的系统资源拥有不同的使用权限。</p><p>Unix/Linux系统中的root账号通常用于系统的维护和管理，它对Unix/Linux操作系统的所有部分具有不受限制的访问权限。</p><p>在Unix/Linux安装的过程中，系统会自动创建许多用户账号，而这些默认的用户就称为“标准用户”。</p><p>在大多数版本的Unix/Linux中，都不推荐直接使用root账号登录系统。</p><h3 id="whoami：查看当前用户">whoami：查看当前用户</h3><p>查看当前系统当前账号的用户名。可通过cat /etc/passwd查看系统用户信息。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[Corazon@rocky8:~]$ <span class="built_in">whoami</span></span><br><span class="line">Corazon</span><br></pre></td></tr></table></figure><h3 id="who：查看登录用户">who：查看登录用户</h3><p>who命令用于查看当前所有登录系统的用户信息。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[Corazon@rocky8:~]$ <span class="built_in">who</span></span><br><span class="line">root     tty1         2025-02-19 12:30</span><br><span class="line">root     pts/0        2025-02-19 13:17 (10.0.0.1)</span><br></pre></td></tr></table></figure><p>常用选项：</p><table><thead><tr><th style="text-align:center">选项</th><th>含义</th></tr></thead><tbody><tr><td style="text-align:center">-m或am I</td><td>只显示运行who命令的用户名、登录终端和登录时间</td></tr><tr><td style="text-align:center">-q或–count</td><td>只显示用户的登录账号和登录用户的数量</td></tr><tr><td style="text-align:center">-u</td><td>在登录时间后显示该用户最后一次操作到当前的时间间隔</td></tr><tr><td style="text-align:center">–heading</td><td>显示列标题</td></tr><tr><td style="text-align:center">-u</td><td>显示PID</td></tr></tbody></table><h4 id="exit：退出登录账户">exit：退出登录账户</h4><p>如果是图形界面，退出当前终端；</p><p>如果是使用ssh远程登录，退出登陆账户；</p><p>如果是切换后的登陆用户，退出则返回上一个登陆账号。</p><h4 id="useradd：添加用户账号">useradd：添加用户账号</h4><p>在Unix/Linux中添加用户账号可以使用adduser或useradd命令，因为adduser命令是指向useradd命令的一个链接，因此，这两个命令的使用格式完全一样。</p><p>useradd命令的使用格式如下： useradd [参数] 新建用户账号</p><table><thead><tr><th>参数</th><th>含义</th></tr></thead><tbody><tr><td>-d</td><td>指定用户登录系统时的主目录</td></tr><tr><td>-m</td><td>自动建立目录，未指定-d参数时会在/home/{当前用户}目录下建立主目录</td></tr><tr><td>-g</td><td>指定组名称</td></tr></tbody></table><p>相关说明：</p><ul class="lvl-0"><li class="lvl-2"><p>Linux每个用户都要有一个主目录，主目录就是第一次登陆系统，用户的默认当前目录(/home/用户)；</p></li><li class="lvl-2"><p>每一个用户必须有一个主目录，所以用useradd创建用户的时候，一定给用户指定一个主目录；</p></li><li class="lvl-2"><p>如果创建用户的时候，不指定组名，那么系统会自动创建一个和用户名一样的组名。</p></li><li class="lvl-2"><p>使用user创建账户后需要使用命令<code>passwd 新建用户</code>为新账户设置密码后才能登陆</p></li></ul><p>若创建用户时未指定家目录，后期可通过<code>usermod -d /home/abc abc</code>指定</p><table><thead><tr><th>命令</th><th>含义</th></tr></thead><tbody><tr><td>useradd -d /home/abc abc -m</td><td>创建abc用户，如果/home/abc目录不存在，就自动创建这个目录，同时用户属于abc组</td></tr><tr><td>useradd -d /home/a a -g test -m</td><td>创建一个用户名字叫a，主目录在/home/a，如果主目录不存在，就自动创建主目录，同时用户属于test组</td></tr><tr><td>cat /etc/passwd</td><td>查看系统当前用户名</td></tr></tbody></table><h4 id="设置用户密码：passwd">设置用户密码：passwd</h4><p>超级用户可以为自己和其他用户指定口令，普通用户只能用它修改自己的口令。命令的格式为：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">passwd 选项 用户名</span><br></pre></td></tr></table></figure><p>可使用的选项：</p><ul class="lvl-0"><li class="lvl-2"><p>-l 锁定口令，即禁用账号。</p></li><li class="lvl-2"><p>-u 口令解锁。</p></li><li class="lvl-2"><p>-d 使账号无口令。</p></li><li class="lvl-2"><p>-f 强迫用户下次登录时修改口令。</p></li></ul><p>普通用户修改自己的口令时，passwd命令会先询问原口令，验证后再要求用户输入两遍新口令，如果两次输入的口令一致，则将这个口令指定给用户；而超级用户为用户指定口令时，就不需要知道原口令。</p><p>假设当前用户是sam，则下面的命令修改该用户自己的口令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ passwd </span><br><span class="line">Old password:****** </span><br><span class="line">New password:******* </span><br><span class="line">Re-enter new password:*******</span><br></pre></td></tr></table></figure><p>如果是超级用户，可以用下列形式指定任何用户的口令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># passwd sam </span></span><br><span class="line">New password:******* </span><br><span class="line">Re-enter new password:*******</span><br></pre></td></tr></table></figure><p>使用root账户为用户指定空口令时，执行下列形式的命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">passwd -d sam</span><br></pre></td></tr></table></figure><p>此命令将用户 sam 的口令删除，这样用户 sam 下一次登录时，系统就不再允许该用户登录了。</p><p>passwd 命令还可以用 -l(lock) 选项锁定某一用户，使其不能登录，例如：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">passwd -l sam</span><br></pre></td></tr></table></figure><h4 id="usermod：修改用户">usermod：修改用户</h4><p>常用的选项包括<code>-c, -d, -m, -g, -G, -s, -u以及-o等</code>，这些选项的意义与<code>useradd</code>命令中的选项一样，可以为用户指定新的资源值 。</p><p>修改用户所在组：usermod -g 用户组 用户名</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">usermod -g <span class="built_in">test</span> abc</span><br></pre></td></tr></table></figure><p>改abc用户的家目录位置：usermod -d 家目录 用户名</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">usermod -d /home/abc abc</span><br></pre></td></tr></table></figure><p>选项<code>-l 新用户名</code>指定一个新的账号，可修改用户名：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">python@ubuntu:~/txt$ <span class="built_in">tail</span> /etc/passwd -n 1 </span><br><span class="line">aaa:x:1001:1001::/home/aaa:</span><br><span class="line">python@ubuntu:~/txt$ <span class="built_in">sudo</span> usermod -l bbb -d /home/bbb aaa   </span><br><span class="line">python@ubuntu:~/txt$ <span class="built_in">tail</span> /etc/passwd -n 1               </span><br><span class="line">bbb:x:1001:1001::/home/bbb:</span><br></pre></td></tr></table></figure><h4 id="删除用户：userdel">删除用户：userdel</h4><table><thead><tr><th>命令</th><th>含义</th></tr></thead><tbody><tr><td>userdel abc(用户名)</td><td>删除abc用户，但不会自动删除用户的主目录</td></tr><tr><td>userdel -r abc(用户名)</td><td>删除用户，同时删除用户的主目录</td></tr></tbody></table><h4 id="切换用户：su">切换用户：su</h4><p>su后面可以加“-”会将当前的工作目录自动转换到切换后的用户主目录.</p><table><thead><tr><th>命令</th><th>含义</th></tr></thead><tbody><tr><td>su</td><td>切换到root用户</td></tr><tr><td>su root</td><td>切换到root用户</td></tr><tr><td>su -</td><td>切换到root用户，同时切换目录到/root</td></tr><tr><td>su - root</td><td>切换到root用户，同时切换目录到/root</td></tr><tr><td>su 普通用户</td><td>切换到普通用户</td></tr><tr><td>su - 普通用户</td><td>切换到普通用户，同时切换普通用户所在的目录</td></tr></tbody></table><p>注意：对于ubuntu平台，只能通过sudo su进入root账号。</p><p>sudo允许系统管理员让普通用户执行一些或者全部的root命令的一个工具。</p><h4 id="sudo：以root身份执行指令">sudo：以root身份执行指令</h4><p>sudo命令可以临时获取root权限</p><p>使用权限：在 /etc/sudoers 中有出现的使用者。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">显示出自己（执行 <span class="built_in">sudo</span> 的使用者）的权限</span><br><span class="line"><span class="built_in">sudo</span> -l</span><br><span class="line">以root权限执行上一条命令</span><br><span class="line"><span class="built_in">sudo</span> !!</span><br></pre></td></tr></table></figure><p>sudoers文件配置语法</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">user  MACHINE=COMMANDS</span><br><span class="line">用户 登录的主机=（可以变换的身份） 可以执行的命令  </span><br></pre></td></tr></table></figure><p>例子：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">允许root用户执行任意路径下的任意命令 </span><br><span class="line">root    ALL=(ALL)       ALL</span><br><span class="line">允许wheel用户组中的用户执行所有命令  </span><br><span class="line">%wheel        ALL=(ALL)       ALL</span><br><span class="line">允许wheel用户组中的用户在不输入该用户的密码的情况下使用所有命令</span><br><span class="line">%wheel        ALL=(ALL)       NOPASSWD: ALL</span><br><span class="line">允许support用户在EPG的机器上不输入密码的情况下使用SQUID中的命令</span><br><span class="line">Cmnd_Alias   SQUID = /opt/vtbin/squid_refresh, /sbin/service, /bin/rm</span><br><span class="line">Host_Alias   EPG = 192.168.1.1, 192.168.1.2</span><br><span class="line">support EPG=(ALL) NOPASSWD: SQUID</span><br></pre></td></tr></table></figure><h4 id="添加、删除组账号：groupadd、groupdel">添加、删除组账号：groupadd、groupdel</h4><p>groupadd 新建组账号 groupdel 组账号 cat /etc/group 查看用户组</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python@ubuntu:~/test$ <span class="built_in">sudo</span> groupadd abc</span><br><span class="line">python@ubuntu:~/test$ <span class="built_in">sudo</span> groupdel abc</span><br></pre></td></tr></table></figure><h4 id="用户组管理：groupmod">用户组管理：groupmod</h4><p>修改用户组的属性使用groupmod命令。其语法如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">groupmod 选项 用户组</span><br></pre></td></tr></table></figure><p>常用的选项有：</p><ul class="lvl-0"><li class="lvl-2"><p>-g GID 为用户组指定新的组标识号。</p></li><li class="lvl-2"><p>-o 与-g选项同时使用，用户组的新GID可以与系统已有用户组的GID相同。</p></li><li class="lvl-2"><p>-n新用户组 将用户组的名字改为新名字</p></li></ul><p>将组group2的组标识号修改为102：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">groupmod -g 102 group2</span><br></pre></td></tr></table></figure><p>将组group2的标识号改为10000，组名修改为group3：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">groupmod –g 10000 -n group3 group2</span><br></pre></td></tr></table></figure><p>如果一个用户同时属于多个用户组，那么用户可以在用户组之间切换，以便具有其他用户组的权限。</p><p>用户可以在登录后，使用命令newgrp切换到其他用户组，这个命令的参数就是目的用户组。例如：</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>newgrp root</span><br></pre></td></tr></table></figure><p>这条命令将当前用户切换到root用户组，前提条件是root用户组确实是该用户的主组或附加组。类似于用户账号的管理，用户组的管理也可以通过集成的系统管理工具来完成。</p><h4 id="列出目录的内容：ls">列出目录的内容：ls</h4><p>Linux文件或者目录名称最长可以有265个字符，“.”代表当前目录，“…”代表上一级目录，以“.”开头的文件为隐藏文件，需要用 -a 参数才能显示。</p><p>ls常用参数：</p><table><thead><tr><th style="text-align:center">参数</th><th>含义</th></tr></thead><tbody><tr><td style="text-align:center">-a</td><td>显示指定目录下所有子目录与文件，包括隐藏文件</td></tr><tr><td style="text-align:center">-l</td><td>以列表方式显示文件的详细信息</td></tr><tr><td style="text-align:center">-h</td><td>配合 -l 以人性化的方式显示文件大小</td></tr></tbody></table><p><img src="/images/loading.jpeg" data-original="/posts/2b99b9f0//image-20250218170841665.png" alt="image-20250218170841665"></p><p>列出的信息的含义：</p><p><img src="/images/loading.jpeg" data-original="/posts/2b99b9f0//ccff78bd3a3c92ac11636923216ce3ed.png" alt="img"></p><p>ls支持通配符：</p><table><thead><tr><th style="text-align:center">通配符</th><th style="text-align:left">含义</th></tr></thead><tbody><tr><td style="text-align:center">*</td><td style="text-align:left">文件代表文件名中所有字符</td></tr><tr><td style="text-align:center">ls te*</td><td style="text-align:left">查找以te开头的文件</td></tr><tr><td style="text-align:center">ls *html</td><td style="text-align:left">查找结尾为html的文件</td></tr><tr><td style="text-align:center">？</td><td style="text-align:left">代表文件名中任意一个字符</td></tr><tr><td style="text-align:center">ls ?.c</td><td style="text-align:left">只找第一个字符任意，后缀为.c的文件</td></tr><tr><td style="text-align:center">ls a.?</td><td style="text-align:left">只找只有3个字符，前2字符为a.，最后一个字符任意的文件</td></tr><tr><td style="text-align:center">[]</td><td style="text-align:left">[”和“]”将字符组括起来，表示可以匹配字符组中的任意一个。“-”用于表示字符范围。</td></tr><tr><td style="text-align:center">[abc]</td><td style="text-align:left">匹配a、b、c中的任意一个</td></tr><tr><td style="text-align:center">[a-f]</td><td style="text-align:left">匹配从a到f范围内的的任意一个字符</td></tr><tr><td style="text-align:center">ls [a-f]*</td><td style="text-align:left">找到从a到f范围内的的任意一个字符开头的文件</td></tr><tr><td style="text-align:center">ls a-f</td><td style="text-align:left">查找文件名为a-f的文件,当“-”处于方括号之外失去通配符的作用</td></tr><tr><td style="text-align:center">\</td><td style="text-align:left">如果要使通配符作为普通字符使用，可以在其前面加上转义字符。“?”和“*”处于方括号内时不用使用转义字符就失去通配符的作用。</td></tr><tr><td style="text-align:center">ls \*a</td><td style="text-align:left">查找文件名为*a的文件</td></tr></tbody></table><h4 id="显示inode的内容：stat">显示inode的内容：stat</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">stat</span> [文件或目录]</span><br></pre></td></tr></table></figure><p>查看 testfile 文件的inode内容内容，可以用以下命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8 ~]# <span class="built_in">stat</span> anaconda-ks.cfg </span><br><span class="line">  File: anaconda-ks.cfg</span><br><span class="line">  Size: 1256      	Blocks: 8          IO Block: 4096   regular file</span><br><span class="line">Device: fd00h/64768d	Inode: 201326724   Links: 1</span><br><span class="line">Access: (0600/-rw-------)  Uid: (    0/    root)   Gid: (    0/    root)</span><br><span class="line">Context: system_u:object_r:admin_home_t:s0</span><br><span class="line">Access: 2025-02-18 21:18:29.137289911 +0800</span><br><span class="line">Modify: 2025-02-18 21:18:29.216289006 +0800</span><br><span class="line">Change: 2025-02-18 21:18:29.216289006 +0800</span><br><span class="line"> Birth: 2025-02-18 21:18:29.137289911 +0800</span><br></pre></td></tr></table></figure><h4 id="文件访问权限">文件访问权限</h4><p>用户能够控制一个给定的文件或目录的访问程度，一个文件或目录可能有读、写及执行权限：</p><ul class="lvl-0"><li class="lvl-2"><p>读权限（r） ：对于文件，具有读取文件内容的权限；对于目录，具有浏览目录的权限。</p></li><li class="lvl-2"><p>写权限（w） ：对于文件，具有修改文件内容的权限；对于目录，具有删除、移动目录内文件的权限。</p></li><li class="lvl-2"><p>可执行权限（x）： 对于文件，具有执行文件的权限；对于目录，该用户具有进入目录的权限。</p></li></ul><p>通常，Unix/Linux系统只允许文件的属主(所有者)或超级用户改变文件的读写权限。</p><p>示例：</p><p><img src="/images/loading.jpeg" data-original="/posts/2b99b9f0//7da5a8288cfb2d26b70da16da71b36e8.png" alt="img"></p><p>第1个字母代表文件的类型：</p><ul class="lvl-0"><li class="lvl-2"><p>“d” 代表文件夹</p></li><li class="lvl-2"><p>“-” 代表普通文件</p></li><li class="lvl-2"><p>“c” 代表硬件字符设备</p></li><li class="lvl-2"><p>“b” 代表硬件块设备</p></li><li class="lvl-2"><p>“s”表示管道文件</p></li><li class="lvl-2"><p>“l” 代表软链接文件。</p></li></ul><p>后9个字母分别代表三组权限：文件所有者、用户组、其他用户拥有的权限。</p><h4 id="chmod：修改文件权限">chmod：修改文件权限</h4><p>chmod 修改文件权限有两种使用格式：字母法与数字法。</p><p>字母法：chmod u/g/o/a +/-/= rwx 文件</p><table><thead><tr><th>[ u/g/o/a ]</th><th>含义</th></tr></thead><tbody><tr><td>u</td><td>user 表示该文件的所有者</td></tr><tr><td>g</td><td>group 表示与该文件的所有者属于同一组( group )者，即用户组</td></tr><tr><td>o</td><td>other 表示其他以外的人</td></tr><tr><td>a</td><td>all 表示这三者皆是</td></tr></tbody></table><table><thead><tr><th>[ ±= ]</th><th>含义</th></tr></thead><tbody><tr><td>+</td><td>增加权限</td></tr><tr><td>-</td><td>撤销权限</td></tr><tr><td>=</td><td>设定权限</td></tr></tbody></table><table><thead><tr><th>rwx</th><th>含义</th></tr></thead><tbody><tr><td>r</td><td>read 表示可读取，对于一个目录，如果没有r权限，那么就意味着不能通过ls查看这个目录的内容。</td></tr><tr><td>w</td><td>write 表示可写入，对于一个目录，如果没有w权限，那么就意味着不能在目录下创建新的文件。</td></tr><tr><td>x</td><td>excute 表示可执行，对于一个目录，如果没有x权限，那么就意味着不能通过cd进入这个目录。</td></tr></tbody></table><p>数字法：“rwx” 这些权限也可以用数字来代替</p><table><thead><tr><th>字母</th><th>说明</th></tr></thead><tbody><tr><td>r</td><td>读取权限，数字代号为 “4”</td></tr><tr><td>w</td><td>写入权限，数字代号为 “2”</td></tr><tr><td>x</td><td>执行权限，数字代号为 “1”</td></tr><tr><td>-</td><td>不具任何权限，数字代号为 “0”</td></tr></tbody></table><p>如执行：chmod u=rwx,g=rx,o=r filename 就等同于：chmod u=7,g=5,o=4 filename</p><p>chmod 751 file：</p><ul class="lvl-0"><li class="lvl-2"><p>文件所有者：读、写、执行权限</p></li><li class="lvl-2"><p>同组用户：读、执行的权限</p></li><li class="lvl-2"><p>其它用户：执行的权限</p></li></ul><p>chmod 777 file：所有用户拥有读、写、执行权限</p><p>注意：如果想递归所有目录加上相同权限，需要加上参数“ -R ”。 如：chmod 777 test/ -R 递归 test 目录下所有文件加 777 权限</p><h4 id="修改文件所有者：chown">修改文件所有者：chown</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[Corazon@rocky8:~]$ ll a</span><br><span class="line">-rw-rw-r--. 1 Corazon Corazon 0 Feb 19 13:31 a</span><br><span class="line">[Corazon@rocky8:~]$ su</span><br><span class="line">Password: </span><br><span class="line">[root@rocky8:Corazon]# <span class="built_in">chown</span> Cora a</span><br><span class="line">[root@rocky8:Corazon]# ll a</span><br><span class="line">-rw-rw-r--. 1 Cora Corazon 0 Feb 19 13:31 a</span><br></pre></td></tr></table></figure><h4 id="修改文件所属组：chgrp">修改文件所属组：chgrp</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky8:Corazon]# ll a</span><br><span class="line">-rw-rw-r--. 1 Cora Corazon 0 Feb 19 13:31 a</span><br><span class="line">[root@rocky8:Corazon]# ll a</span><br><span class="line">-rw-rw-r--. 1 Cora Corazon 0 Feb 19 13:31 a</span><br><span class="line">[root@rocky8:Corazon]# <span class="built_in">chgrp</span> Cora a</span><br><span class="line">[root@rocky8:Corazon]# ll a</span><br><span class="line">-rw-rw-r--. 1 Cora Cora 0 Feb 19 13:31 a</span><br></pre></td></tr></table></figure><p>本文参考：</p></div><div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="http://mcorazon.top/posts/5d71294b/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/006.png"><meta itemprop="name" content="Corazon"><meta itemprop="description" content="<font color="#000000">网络安全从业人员个人博客</font>"> </span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="MCorazon"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/posts/5d71294b/" class="post-title-link" itemprop="url">【Linux】Linux软件安装</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2025-02-19 15:59:53" itemprop="dateCreated datePublished" datetime="2025-02-19T15:59:53+08:00">2025-02-19</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2025-02-20 16:16:22" itemprop="dateModified" datetime="2025-02-20T16:16:22+08:00">2025-02-20</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>6.3k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>6 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="Ubuntu软件安装与卸载">Ubuntu软件安装与卸载</h2><h3 id="更新Ubuntu软件下载地址">更新Ubuntu软件下载地址</h3><p>开源软件镜像站 ：<a target="_blank" rel="noopener" href="https://mirrors.tuna.tsinghua.edu.cn/help/ubuntu/">https://mirrors.tuna.tsinghua.edu.cn/help/ubuntu/</a></p><p>Ubuntu 的软件源配置文件是 <code>/etc/apt/sources.list</code>。将系统自带的该文件做个备份，将该文件替换为下面内容，即可使用 TUNA 的软件源镜像。</p><p>ubuntu版本: 16.04 LTS</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 默认注释了源码镜像以提高 apt update 速度，如有需要可自行取消注释</span></span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial main restricted universe multiverse</span><br><span class="line"><span class="comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial main restricted universe multiverse</span></span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial-updates main restricted universe multiverse</span><br><span class="line"><span class="comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial-updates main restricted universe multiverse</span></span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial-backports main restricted universe multiverse</span><br><span class="line"><span class="comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial-backports main restricted universe multiverse</span></span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial-security main restricted universe multiverse</span><br><span class="line"><span class="comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial-security main restricted universe multiverse</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 预发布软件源，不建议启用</span></span><br><span class="line"><span class="comment"># deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial-proposed main restricted universe multiverse</span></span><br><span class="line"><span class="comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial-proposed main restricted universe multiverse</span></span><br></pre></td></tr></table></figure><p>然后</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> <span class="built_in">cp</span> /etc/apt/sources.list /etc/apt/sources.list.backup</span><br></pre></td></tr></table></figure><p>再sudo vim /etc/apt/sources.list修改为以上内容</p><h3 id="Ubuntu软件操作的相关命令">Ubuntu软件操作的相关命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get update  更新源</span><br><span class="line"><span class="built_in">sudo</span> apt-get install package 安装包</span><br><span class="line"><span class="built_in">sudo</span> apt-get remove package 删除包</span><br><span class="line"><span class="built_in">sudo</span> apt-cache search package 搜索软件包</span><br><span class="line"><span class="built_in">sudo</span> apt-cache show package  获取包的相关信息，如说明、大小、版本等</span><br><span class="line"><span class="built_in">sudo</span> apt-get install package --reinstall   重新安装包</span><br><span class="line"><span class="built_in">sudo</span> apt-get -f install   修复安装</span><br><span class="line"><span class="built_in">sudo</span> apt-get remove package --purge 删除包，包括配置文件等</span><br><span class="line"><span class="built_in">sudo</span> apt-get build-dep package 安装相关的编译环境</span><br><span class="line"><span class="built_in">sudo</span> apt-get upgrade 更新已安装的包</span><br><span class="line"><span class="built_in">sudo</span> apt-get dist-upgrade 升级系统</span><br><span class="line"><span class="built_in">sudo</span> apt-cache depends package 了解使用该包依赖那些包</span><br><span class="line"><span class="built_in">sudo</span> apt-cache rdepends package 查看该包被哪些包依赖</span><br><span class="line"><span class="built_in">sudo</span> apt-get <span class="built_in">source</span> package  下载该包的源代码</span><br><span class="line"><span class="built_in">sudo</span> apt-get clean &amp;&amp; <span class="built_in">sudo</span> apt-get autoclean 清理无用的包</span><br><span class="line"><span class="built_in">sudo</span> apt-get check 检查是否有损坏的依赖</span><br></pre></td></tr></table></figure><h2 id="yum安装命令">yum安装命令</h2><p>yum（ Yellow dog Updater, Modified）是一个在Fedora和RedHat以及SUSE中的Shell前端软件包管理器。</p><p>基於RPM包管理，能够从指定的服务器自动下载RPM包并且安装，可以自动处理依赖性关系，并且一次安装所有依赖的软体包，无须繁琐地一次次下载、安装。</p><p>yum提供了查找、安装、删除某一个、一组甚至全部软件包的命令，而且命令简洁而又好记。</p><h3 id="更新国内yum源">更新国内yum源</h3><p>网易（163）yum源是国内最好的yum源之一 ，无论是速度还是软件版本，都非常的不错。</p><p>将yum源设置为163 yum，可以提升软件包安装和更新的速度，同时避免一些常见软件版本无法找到。</p><p>首先备份/etc/yum.repos.d/CentOS-Base.repo</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mv /etc/yum<span class="selector-class">.repos</span>.d/CentOS-Base<span class="selector-class">.repo</span> /etc/yum<span class="selector-class">.repos</span>.d/CentOS-Base<span class="selector-class">.repo</span><span class="selector-class">.backup</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>下载对应版本 repo 文件, 放入 /etc/yum.repos.d/</p><ul class="lvl-0"><li class="lvl-2"><p><a target="_blank" rel="noopener" href="http://mirrors.163.com/.help/CentOS5-Base-163.repo">CentOS5</a> ：<a target="_blank" rel="noopener" href="http://mirrors.163.com/.help/CentOS5-Base-163.repo">http://mirrors.163.com/.help/CentOS5-Base-163.repo</a></p></li><li class="lvl-2"><p><a target="_blank" rel="noopener" href="http://mirrors.163.com/.help/CentOS6-Base-163.repo">CentOS6</a> ：<a target="_blank" rel="noopener" href="http://mirrors.163.com/.help/CentOS6-Base-163.repo">http://mirrors.163.com/.help/CentOS6-Base-163.repo</a></p></li><li class="lvl-2"><p><a target="_blank" rel="noopener" href="http://mirrors.163.com/.help/CentOS7-Base-163.repo">CentOS7</a> ：<a target="_blank" rel="noopener" href="http://mirrors.163.com/.help/CentOS7-Base-163.repo">http://mirrors.163.com/.help/CentOS7-Base-163.repo</a></p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget http://mirrors.163.com/.help/CentOS7-Base-163.repo</span><br><span class="line"><span class="built_in">mv</span> CentOS7-Base-163.repo /etc/yum.repos.d/CentOS-Base.repo</span><br><span class="line">12</span><br></pre></td></tr></table></figure><p>运行以下命令生成缓存</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum clean <span class="keyword">all</span></span><br><span class="line">yum makecache</span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure><p>除了网易之外，国内还有其他不错的 yum 源，比如中科大和搜狐。</p><p>中科大的 yum 源，安装方法查看：<a target="_blank" rel="noopener" href="https://lug.ustc.edu.cn/wiki/mirrors/help/centos">https://lug.ustc.edu.cn/wiki/mirrors/help/centos</a></p><p>sohu 的 yum 源安装方法查看: <a target="_blank" rel="noopener" href="http://mirrors.sohu.com/help/centos.html">http://mirrors.sohu.com/help/centos.html</a></p><h3 id="yum常用命令">yum常用命令</h3><p>yum 语法：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum [options] [<span class="built_in">command</span>] [package ...]</span><br></pre></td></tr></table></figure><p>选项：</p><ul class="lvl-0"><li class="lvl-2"><p>**options：**可选，选项包括-h（帮助），-y（当安装过程提示选择全部为&quot;yes&quot;），-q（不显示安装的过程）等等。</p></li><li class="lvl-2"><p>**command：**要进行的操作。</p></li><li class="lvl-2"><p>**package：**操作的对象。</p></li></ul><p>实例：</p><ul class="lvl-0"><li class="lvl-2"><p>列出所有可更新的软件清单命令：<code>yum check-update</code></p></li><li class="lvl-2"><p>更新所有软件命令：<code>yum update</code></p></li><li class="lvl-2"><p>仅安装指定的软件命令：<code>yum install &lt;package_name&gt;</code></p></li><li class="lvl-2"><p>仅更新指定的软件命令：<code>yum update &lt;package_name&gt;</code></p></li><li class="lvl-2"><p>显示包信息：<code>yum info &lt;package_name&gt;</code></p></li><li class="lvl-2"><p>列出所有可安裝的软件清单命令：<code>yum list</code></p></li><li class="lvl-2"><p>删除软件包命令：<code>yum remove &lt;package_name&gt;</code></p></li><li class="lvl-2"><p>查找软件包 命令：<code>yum search &lt;keyword&gt;</code></p></li><li class="lvl-2"><p>清除缓存命令:</p><ul class="lvl-2"><li class="lvl-4">yum clean packages: 清除缓存目录下的软件包</li><li class="lvl-4">yum clean headers: 清除缓存目录下的 headers</li><li class="lvl-4">yum clean oldheaders: 清除缓存目录下旧的 headers</li><li class="lvl-4">yum clean, yum clean all (= yum clean packages; yum clean oldheaders) :清除缓存目录下的软件包及旧的headers</li></ul></li></ul><h3 id="yum在线安装MySQL5-7">yum在线安装MySQL5.7</h3><p>Step1: 检测系统是否自带安装mysql</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum list installed | grep mysql</span><br></pre></td></tr></table></figure><p>Step2: 删除系统自带的mysql及其依赖</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y remove mysql-libs.x86_64</span><br></pre></td></tr></table></figure><p>Step3: 给CentOS添加rpm源，并且选择较新的源</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">wget dev.mysql.com/get/mysql-community-release-el7-5.noarch.rpm</span><br><span class="line">yum localinstall mysql-community-release-el7-5.noarch.rpm</span><br><span class="line">yum repolist all | grep mysql</span><br><span class="line">yum-config-manager --<span class="built_in">disable</span> mysql55-community</span><br><span class="line">yum-config-manager --<span class="built_in">disable</span> mysql56-community</span><br><span class="line">yum-config-manager --<span class="built_in">enable</span> mysql57-community-dmr</span><br><span class="line">yum repolist enabled | grep mysql</span><br></pre></td></tr></table></figure><p>Step4:安装mysql 服务器</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install mysql-community-server</span><br></pre></td></tr></table></figure><p>Step5: 启动mysql</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service mysqld start</span><br></pre></td></tr></table></figure><p>grep “password” /var/log/mysqld.log(查看临时密码)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SET PASSWORD = PASSWORD(<span class="string">&#x27;your new password&#x27;</span>);</span><br><span class="line">ALTER USER <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> PASSWORD EXPIRE NEVER;</span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure><p>默认的要求必须的设置格式：<br><strong>包含数字、小写或大写字母以及特殊字符</strong></p><p>默认的要求必须的设置格式：<br><strong>包含数字、小写或大写字母以及特殊字符</strong></p><p>如果不想复杂，可以使用以下方式</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> global validate_password_policy=0;</span><br><span class="line"><span class="built_in">set</span> global validate_password_length=1;</span><br></pre></td></tr></table></figure><p>Step6: 查看mysql是否自启动,并且设置开启自启动</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># chkconfig --list | grep mysqld</span></span><br><span class="line"><span class="comment"># chkconfig mysqld on</span></span><br></pre></td></tr></table></figure><p>Step7: mysql安全设置</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql_secure_installation</span><br></pre></td></tr></table></figure><h3 id="rpm">rpm</h3><p>RPM是Red Hat公司随Redhat Linux推出了一个软件包管理器，通过它能够更加轻松容易地实现软件的安装。</p><p>常见用法：</p><ul class="lvl-0"><li class="lvl-2"><p>rpm -ivh &lt;rpm包名&gt; 安装软件</p></li><li class="lvl-2"><p>rpm -e &lt;rpm包名&gt; 卸载安装</p></li><li class="lvl-2"><p>rpm -qi &lt;rpm包名&gt; 显示软件安装信息</p></li><li class="lvl-2"><p>rpm -qa | grep xxx 查询软件是否安装（包括相关依赖）</p></li><li class="lvl-2"><p>rpm -Uvh &lt;rpm包名&gt; 升级一个rpm</p></li></ul><p>具体参数详解：<br>-i, --install 安装包<br>-v, --verbose 列出更多详细信息，安装进度<br>-h, --hash 安装时列出hash标记 (与 -v连用)<br>-e, --erase 卸载安装包<br>-U, --upgrade=+ 升级包<br>–replacepkge 无论软件包是否已被安装，都强行安装软件包<br>–test 安装测试，并不实际安装<br>–nodeps 忽略软件包的依赖关系强行安装<br>–force 忽略软件包及文件的冲突<br>-q,–query:<br>-a, --all 查询/校验所有的安装包<br>-p, --package 查询/校验一个安装文件<br>-l, --list 列出安装文件<br>-d, --docfiles 列出所有文档文件<br>-f, --file 查询/校验安装包中所包含的文件</p><p>安装软件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># rpm -hvi dejagnu-1.4.2-10.noarch.rpm </span></span><br><span class="line">警告：dejagnu-1.4.2-10.noarch.rpm: V3 DSA 签名：NOKEY, key ID db42a60e</span><br><span class="line">准备...           </span><br><span class="line"><span class="comment">########################################### [100%]</span></span><br></pre></td></tr></table></figure><p>显示软件安装信息：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># rpm -qi dejagnu-1.4.2-10.noarch.rpm</span></span><br><span class="line"></span><br><span class="line">【第1次更新 教程、类似命令关联】</span><br></pre></td></tr></table></figure><h3 id="安装JDK">安装JDK</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">1.上传jdk-7u45-linux-x64.tar.gz到Linux上</span><br><span class="line">2.解压jdk到/usr/local目录</span><br><span class="line">tar -zxvf jdk-7u45-linux-x64.tar.gz -C /usr/local/</span><br><span class="line">3.设置环境变量，在/etc/profile文件最后追加相关内容(技巧r:!<span class="built_in">pwd</span>)</span><br><span class="line">vi /etc/profile</span><br><span class="line"><span class="built_in">export</span> JAVA_HOME=/usr/local/jdk1.7.0_45</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$JAVA_HOME</span>/bin</span><br><span class="line">4.刷新环境变量</span><br><span class="line"><span class="built_in">source</span> /etc/profile</span><br><span class="line">5.测试java命令是否可用</span><br><span class="line">java -version</span><br></pre></td></tr></table></figure><h3 id="制作本地YUM源">制作本地YUM源</h3><p>上传CentOS-6.7-x86_64-bin-DVD1.iso到服务器</p><p>将CentOS-6.7-x86_64-bin-DVD1.iso镜像挂载到某个目录:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> /var/iso</span><br><span class="line">mount -o loop CentOS-6.7-x86_64-bin-DVD1.iso /var/iso</span><br></pre></td></tr></table></figure><p>安装并启动Apache服务器：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum install -y httpd</span><br><span class="line">service httpd start</span><br></pre></td></tr></table></figure><p>使用浏览器访问<a target="_blank" rel="noopener" href="http://192.168.100.101">http://192.168.100.101</a>（如果访问不通，检查防火墙是否开启了80端口或关闭防火墙）</p><p>将YUM源配置到httpd中：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cp</span> -r /var/iso/ /var/www/html/CentOS-6.7</span><br><span class="line">umount /var/iso</span><br></pre></td></tr></table></figure><p>在浏览器中访问<a target="_blank" rel="noopener" href="http://192.168.100.101/CentOS-6.7/">http://192.168.100.101/CentOS-6.7/</a></p><p><img src="/images/loading.jpeg" data-original="/posts/5d71294b//5c1df1e303458b97c3fcde9babdec6c8.jpeg" alt="img"></p><p><strong>配置使用YUM源：</strong></p><p>备份原有的YUM源的配置文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /etc/yum.repos.d/</span><br><span class="line">rename .repo .repo.bak *</span><br></pre></td></tr></table></figure><p>修改YUM源配置文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">vi CentOS-Local.repo</span><br><span class="line">[base]</span><br><span class="line">name=CentOS-Local</span><br><span class="line">baseurl=http://192.168.100.101/CentOS-6.7</span><br><span class="line">gpgcheck=1</span><br><span class="line">enabled=1   <span class="comment">#很重要，1才启用</span></span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-6</span><br></pre></td></tr></table></figure><p>重建yum缓存</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#清除yum缓存文件，重新新建</span></span><br><span class="line">yum clean all &amp;&amp; yum makecache</span><br><span class="line"><span class="comment">#列出可用的YUM源</span></span><br><span class="line">yum repolist</span><br></pre></td></tr></table></figure><h3 id="rpm包生成yum源目录">rpm包生成yum源目录</h3><p>如果已经下载好了rpm包，可以自行制作一个yum源（yum仓库）。将下载的rpm包上传到centos服务器上（比如/data/rpm目录下），然后进入存放rpm包的目录，执行以下命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cd /data/rpm</span></span><br><span class="line"><span class="comment"># createrepo .</span></span><br></pre></td></tr></table></figure><p>这样，rpm包存放的目录就可以作为yum源目录使用。如果提示找不到createrepo命令，可以使用yum install createrepo安装该程序。</p><p>本文参考：</p></div><div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="http://mcorazon.top/posts/26e49edf/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/006.png"><meta itemprop="name" content="Corazon"><meta itemprop="description" content="<font color="#000000">网络安全从业人员个人博客</font>"> </span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="MCorazon"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/posts/26e49edf/" class="post-title-link" itemprop="url">【Linux】Linux系统启动过程</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2025-02-19 15:59:30 / 修改时间：22:01:57" itemprop="dateCreated datePublished" datetime="2025-02-19T15:59:30+08:00">2025-02-19</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>6.2k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>6 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="Linux系统启动过程">Linux系统启动过程</h2><p>Linux系统的启动过程可以分为5个阶段：</p><ul class="lvl-0"><li class="lvl-2"><p>内核的引导。</p></li><li class="lvl-2"><p>运行 init。</p></li><li class="lvl-2"><p>系统初始化。</p></li><li class="lvl-2"><p>建立终端 。</p></li><li class="lvl-2"><p>用户登录系统。</p></li></ul><hr><h3 id="加载内核">加载内核</h3><p>当计算机打开电源后，首先是BIOS开机自检，按照BIOS中设置的启动设备（通常是硬盘）来启动。</p><p>操作系统接管硬件以后，首先读入 /boot 目录下的内核文件。</p><p><img src="/images/loading.jpeg" data-original="/posts/26e49edf//1dbe9c625b5fe87278c65952f7c6736a.png" alt="img"></p><h3 id="启动初始化进程init">启动初始化进程init</h3><p>内核文件加载以后，就开始运行第一个程序 /sbin/init，它的作用是初始化系统环境。</p><p>init程序首先是需要读取配置文件/etc/inittab。</p><blockquote><p>CentOS 各版本init配置文件的位置：</p><ul class="lvl-1"><li class="lvl-2"><strong>SysV:</strong> init, CentOS 5之前, 配置文件： /etc/inittab。</li><li class="lvl-2"><strong>Upstart:</strong> init,CentOS 6, 配置文件： /etc/inittab, /etc/init/*.conf。</li><li class="lvl-2"><strong>Systemd：</strong> systemd, CentOS 7,配置文件： /usr/lib/systemd/system、 /etc/systemd/system。</li></ul></blockquote><p><img src="/images/loading.jpeg" data-original="/posts/26e49edf//738b4978d388849ac7518211f8cc564c.png" alt="1574411888879"></p><p>由于init是第一个运行的程序，它的进程编号（pid）就是1。其他所有进程都从它衍生，都是它的子进程。</p><h3 id="确定运行级别">确定运行级别</h3><p>许多程序需要开机启动。它们在Windows叫做&quot;服务&quot;（service），在Linux就叫做&quot;守护进程&quot;（daemon）。</p><p>init进程的一大任务，就是去运行这些开机启动的程序。</p><p>但是，不同的场合需要启动不同的程序，比如用作服务器时，需要启动Apache，用作桌面就不需要。</p><p>Linux允许为不同的场合，分配不同的开机启动程序，这就叫做&quot;运行级别&quot;（runlevel）。也就是说，启动时根据&quot;运行级别&quot;，确定要运行哪些程序。</p><p><img src="/images/loading.jpeg" data-original="/posts/26e49edf//bd1879efce8431f6e4f2e8267497e91c.png" alt="1574411922140"></p><p>Linux系统有7个运行级别(runlevel)：</p><ul class="lvl-0"><li class="lvl-2"><p>运行级别0：系统停机状态，系统默认运行级别不能设为0，否则不能正常启动</p></li><li class="lvl-2"><p>运行级别1：单用户工作状态，root权限，用于系统维护，禁止远程登陆</p></li><li class="lvl-2"><p>运行级别2：多用户状态(没有NFS)</p></li><li class="lvl-2"><p>运行级别3：完全的多用户状态(有NFS)，登陆后进入控制台命令行模式</p></li><li class="lvl-2"><p>运行级别4：系统未使用，保留</p></li><li class="lvl-2"><p>运行级别5：X11控制台，登陆后进入图形GUI模式</p></li><li class="lvl-2"><p>运行级别6：系统正常关闭并重启，默认运行级别不能设为6，否则不能正常启动</p></li></ul><p>可以使用运行级别执行关机或重启：</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">init</span> <span class="number">0</span>	关机</span><br><span class="line"><span class="attribute">init</span> <span class="number">6</span>	重启</span><br><span class="line"><span class="attribute">12</span></span><br></pre></td></tr></table></figure><h3 id="加载开机启动程序">加载开机启动程序</h3><p>在init的配置文件中有这么一行： <code>si::sysinit:/etc/rc.d/rc.sysinit</code>它调用执行了/etc/rc.d/rc.sysinit，而rc.sysinit是一个bash shell的脚本，它主要是完成一些系统初始化的工作，rc.sysinit是每一个运行级别都要首先运行的重要脚本。</p><p>它主要完成的工作有：激活交换分区，检查磁盘，加载硬件模块以及其它一些需要优先执行任务。</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">l5:</span><span class="number">5</span><span class="symbol">:wait</span><span class="symbol">:/etc/rc</span>.d/rc <span class="number">5</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>这一行表示以5为参数运行/etc/rc.d/rc，/etc/rc.d/rc是一个Shell脚本，它接受5作为参数，去执行/etc/rc.d/rc5.d/目录下的所有的rc启动脚本，/etc/rc.d/rc5.d/目录中的这些启动脚本实际上都是一些连接文件，而不是真正的rc启动脚本，真正的rc启动脚本实际上都是放在/etc/rc.d/init.d/目录下。</p><p>而这些rc启动脚本有着类似的用法，它们一般能接受start、stop、restart、status等参数。</p><p>/etc/rc.d/rc5.d/中的rc启动脚本通常是K或S开头的连接文件，对于以 S 开头的启动脚本，将以start参数来运行。</p><p>而如果发现存在相应的脚本也存在K打头的连接，而且已经处于运行态了(以/var/lock/subsys/下的文件作为标志)，则将首先以stop为参数停止这些已经启动了的守护进程，然后再重新运行。</p><p>这样做是为了保证是当init改变运行级别时，所有相关的守护进程都将重启。</p><p>至于在每个运行级中将运行哪些守护进程，用户可以通过chkconfig或setup中的&quot;System Services&quot;来自行设定。</p><p><img src="/images/loading.jpeg" data-original="/posts/26e49edf//7cee4633821586e191c96ed958888671.png" alt="1574413056057"></p><h3 id="用户登录">用户登录</h3><p>一般来说，用户的登录方式有三种：</p><ul class="lvl-0"><li class="lvl-2"><p>（1）命令行登录</p></li><li class="lvl-2"><p>（2）ssh登录</p></li><li class="lvl-2"><p>（3）图形界面登录</p></li></ul><p><img src="/images/loading.jpeg" data-original="/posts/26e49edf//ee92be977534d532ff7f7dd73799dc67.png" alt="1574413193850"></p><p>对于运行级别为5的图形方式用户来说，他们的登录是通过一个图形化的登录界面。登录成功后可以直接进入 KDE、Gnome 等窗口管理器。</p><p>而本文主要讲的还是文本方式登录的情况：当我们看到mingetty的登录界面时，我们就可以输入用户名和密码来登录系统了。</p><p>Linux 的账号验证程序是login，login会接收mingetty传来的用户名作为用户名参数。</p><p>然后login会对用户名进行分析：如果用户名不是root，且存在 /etc/nologin 文件，login 将输出 nologin 文件的内容，然后退出。</p><p>这通常用来系统维护时防止非root用户登录。只有/etc/securetty中登记了的终端才允许 root 用户登录，如果不存在这个文件，则root用户可以在任何终端上登录。</p><p>/etc/usertty文件用于对用户作出附加访问限制，如果不存在这个文件，则没有其他限制。</p><h3 id="图形模式与文字模式的切换方式">图形模式与文字模式的切换方式</h3><p>Linux预设提供了六个命令窗口终端机让我们来登录。</p><p>默认我们登录的就是第一个窗口，也就是tty1，这个六个窗口分别为tty1,tty2 … tty6，你可以按下Ctrl + Alt + F1 ~ F6 来切换它们。</p><p>如果你安装了图形界面，默认情况下是进入图形界面的，此时你就可以按Ctrl + Alt + F1 ~ F6来进入其中一个命令窗口界面。</p><p>当你进入命令窗口界面后再返回图形界面只要按下Ctrl + Alt + F7 就回来了。</p><p>如果你用的vmware 虚拟机，命令窗口切换的快捷键为 Alt + Space + F1~F6. 如果你在图形界面下请按Alt + Shift + Ctrl + F1~F6 切换至命令窗口。</p><h3 id="login-shell">login shell</h3><p><img src="/images/loading.jpeg" data-original="/posts/26e49edf//872c2da6d598914d7f05730635b2f8f4.png" alt="1574413231936"></p><p>shell，简单说就是命令行界面，让用户可以直接与操作系统对话。用户登录时打开的shell，就叫做login shell。</p><p>（1）命令行登录：首先读入 /etc/profile，这是对所有用户都有效的配置；然后依次寻找下面三个文件，这是针对当前用户的配置。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">~/.bash_profile</span><br><span class="line">~/.bash_login</span><br><span class="line">~/.profile</span><br><span class="line">123</span><br></pre></td></tr></table></figure><p>需要注意的是，这三个文件只要有一个存在，就不再读入后面的文件了。比如，要是 ~/.bash_profile 存在，就不会再读入后面两个文件了。</p><p>（2）ssh登录：与第一种情况完全相同。</p><p>（3）图形界面登录：只加载 /etc/profile 和 /.profile。也就是说，/.bash_profile 不管有没有，都不会运行。</p><h3 id="Linux关机">Linux关机</h3><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">sync </span>将数据由内存同步到硬盘中。</span><br><span class="line"></span><br><span class="line"><span class="keyword">shutdown </span>关机指令，你可以man <span class="keyword">shutdown </span>来看一下帮助文档。例如你可以运行如下命令关机：</span><br><span class="line"><span class="keyword">shutdown </span>–h <span class="number">10</span> <span class="string">&#x27;This server will shutdown after 10 mins&#x27;</span> 计算机将在<span class="number">10</span>分钟后关机，并且显示信息在登陆用户的当前屏幕中。</span><br><span class="line"><span class="keyword">shutdown </span>–h now 立马关机</span><br><span class="line"><span class="keyword">shutdown </span>–h <span class="number">20</span>:<span class="number">25</span> 系统会在今天<span class="number">20</span>:<span class="number">25</span>关机</span><br><span class="line"><span class="keyword">shutdown </span>–h +<span class="number">10</span> 十分钟后关机</span><br><span class="line"><span class="keyword">shutdown </span>–r now 系统立马重启</span><br><span class="line"><span class="keyword">shutdown </span>–r +<span class="number">10</span> 系统十分钟后重启</span><br><span class="line">reboot 就是重启，等同于 <span class="keyword">shutdown </span>–r now</span><br><span class="line">halt 关闭系统，等同于<span class="keyword">shutdown </span>–h now 和 poweroff</span><br><span class="line"><span class="number">1234567891011</span></span><br></pre></td></tr></table></figure><p>最后总结一下，不管是重启系统还是关闭系统，首先要运行<strong>sync</strong>命令，把内存中的数据写到磁盘中。</p><p>关机的命令有 <strong>shutdown –h now halt poweroff</strong> 和 <strong>init 0</strong> , 重启系统的命令有 <strong>shutdown –r now reboot init 6</strong>。</p><h3 id="计算机启动的流程">计算机启动的流程</h3><p><img src="/images/loading.jpeg" data-original="/posts/26e49edf//02c50cf1205162dd0365613fb883ab8f.png" alt="img"></p><p>boot是bootstrap（鞋带）的缩写，它来自一句谚语：</p><blockquote><p>“pull oneself up by one’s bootstraps”</p></blockquote><p>字面意思是&quot;拽着鞋带把自己拉起来&quot;，这当然是不可能的事情。最早的时候，工程师们用它来比喻，计算机启动是一个很矛盾的过程：必须先运行程序，然后计算机才能启动，但是计算机不启动就无法运行程序！</p><p>早期真的是这样，必须想尽各种办法，把一小段程序装进内存，然后计算机才能正常运行。所以，工程师们把这个过程叫做&quot;拉鞋带&quot;，久而久之就简称为boot了。</p><p>计算机的整个启动过程分成四个阶段。</p><h4 id="第一阶段：BIOS">第一阶段：BIOS</h4><p>上个世纪70年代初，“只读内存”（read-only memory，缩写为ROM）发明，开机程序被刷入ROM芯片，计算机通电后，第一件事就是读取它。</p><p>BIOS全称是Basic Input/Output System，即基本输入输出系统，即下图芯片里的程序。</p><p><img src="/images/loading.jpeg" data-original="/posts/26e49edf//3dc7f4a1ecf351ad1f46804e0e985f4c.png" alt="1574408997299"></p><p><strong>硬件自检</strong></p><p>BIOS程序首先检查，计算机硬件能否满足运行的基本条件，这叫做&quot;硬件自检&quot;（Power-On Self-Test），缩写为<a target="_blank" rel="noopener" href="http://en.wikipedia.org/wiki/Power-on_self-test">POST</a>。</p><p>如果硬件出现问题，主板会发出不同含义的<a target="_blank" rel="noopener" href="http://en.wikipedia.org/wiki/Power-on_self-test#Original_IBM_POST_beep_codes">蜂鸣</a>，启动中止。如果没有问题，屏幕就会显示出CPU、内存、硬盘等信息。</p><p><img src="/images/loading.jpeg" data-original="/posts/26e49edf//cd9cc5ec847de974c916cd5cf3bc9614.png" alt="1574409216362"></p><p><strong>启动顺序</strong></p><p>硬件自检完成后，BIOS把控制权转交给下一阶段的启动程序。</p><p>下一阶段的启动程序根据BIOS设置项Boot Sequence（启动顺序）决定，排在前面的设备就是优先转交控制权的设备。</p><p><img src="/images/loading.jpeg" data-original="/posts/26e49edf//83c7c00552e551c8fa859db5277e7103.png" alt="1574409397609"></p><h4 id="第二阶段：-主引加粗样式导记录">第二阶段： 主引加粗样式导记录</h4><p>BIOS按照&quot;启动顺序&quot;，把控制权转交给排在第一位的储存设备。</p><p>这时，计算机读取该设备的第一个扇区，也就是读取最前面的512个字节。如果这512个字节的最后两个字节是0x55和0xAA，表明这个设备可以用于启动；如果不是，表明设备不能用于启动，控制权于是被转交给&quot;启动顺序&quot;中的下一个设备。</p><p>这最前面的512个字节，就叫做<a target="_blank" rel="noopener" href="http://en.wikipedia.org/wiki/Master_boot_record">&quot;主引导记录&quot;</a>（Master boot record，缩写为MBR）。</p><p><strong>主引导记录组成</strong></p><p>主引导记录由三个部分组成：</p><blockquote><p>（1） 第1-446字节：调用操作系统的机器码。</p><p>（2） 第447-510字节：分区表（Partition table），共64字节。</p><p>（3） 第511-512字节：主引导记录签名（0x55和0xAA）。</p></blockquote><p>其中，第二部分&quot;分区表&quot;的作用，是将硬盘分成若干个区。</p><p><strong>分区表</strong></p><p>硬盘分区有很多好处。每个分区可以安装不同的操作系统，&quot;主引导记录&quot;因此必须知道将控制权转交给哪个区。</p><p>分区表的长度只有64个字节，里面又分成四项，每项16个字节。所以，一个硬盘最多只能分四个一级分区，又叫做&quot;主分区&quot;。</p><p>每个主分区的16个字节，由6个部分组成：</p><blockquote><p>（1） 第1个字节：如果为0x80，就表示该主分区是激活分区，控制权要转交给这个分区。四个主分区里面只能有一个是激活的。</p><p>（2） 第2-4个字节：主分区第一个扇区的物理位置（柱面、磁头、扇区号等等）。</p><p>（3） 第5个字节：<a target="_blank" rel="noopener" href="http://en.wikipedia.org/wiki/Partition_type">主分区类型</a>。</p><p>（4） 第6-8个字节：主分区最后一个扇区的物理位置。</p><p>（5） 第9-12字节：该主分区第一个扇区的逻辑地址。</p><p>（6） 第13-16字节：主分区的扇区总数。</p></blockquote><p>最后的四个字节（“主分区的扇区总数”），决定了这个主分区的长度。也就是说，一个主分区的扇区总数最多不超过2的32次方。</p><p>如果每个扇区为512个字节，就意味着单个分区最大不超过2TB。再考虑到扇区的逻辑地址也是32位，所以单个硬盘可利用的空间最大也不超过2TB。如果想使用更大的硬盘，只有2个方法：一是提高每个扇区的字节数，二是<a target="_blank" rel="noopener" href="http://en.wikipedia.org/wiki/GUID_Partition_Table">增加扇区总数</a>。</p><h4 id="第三阶段：硬盘启动">第三阶段：硬盘启动</h4><p>这时，计算机的控制权就要转交给硬盘的某个分区了，这里又分成三种情况。</p><p><strong>情况A：卷引导记录</strong></p><p>上一节提到，四个主分区里面，只有一个是激活的。计算机会读取激活分区的第一个扇区，叫做<a target="_blank" rel="noopener" href="http://en.wikipedia.org/wiki/Volume_Boot_Record">&quot;卷引导记录</a>&quot;（Volume boot record，缩写为VBR）。</p><p>&quot;卷引导记录&quot;的主要作用是，告诉计算机，操作系统在这个分区里的位置。然后，计算机就会加载操作系统了。</p><p><strong>情况B：扩展分区和逻辑分区</strong></p><p>随着硬盘越来越大，四个主分区已经不够了，需要更多的分区。但是，分区表只有四项，因此规定有且仅有一个区可以被定义成&quot;扩展分区&quot;（Extended partition）。</p><p>所谓&quot;扩展分区&quot;，就是指这个区里面又分成多个区。这种分区里面的分区，就叫做&quot;逻辑分区&quot;（logical partition）。</p><p>计算机先读取扩展分区的第一个扇区，叫做<a target="_blank" rel="noopener" href="http://en.wikipedia.org/wiki/Extended_partition">&quot;扩展引导记录&quot;</a>（Extended boot record，缩写为EBR）。它里面也包含一张64字节的分区表，但是最多只有两项（也就是两个逻辑分区）。</p><p>计算机接着读取第二个逻辑分区的第一个扇区，再从里面的分区表中找到第三个逻辑分区的位置，以此类推，直到某个逻辑分区的分区表只包含它自身为止（即只有一个分区项）。因此，扩展分区可以包含无数个逻辑分区。</p><p>但是，似乎很少通过这种方式启动操作系统。如果操作系统确实安装在扩展分区，一般采用下一种方式启动。</p><p><strong>情况C：启动管理器</strong></p><p>在这种情况下，计算机读取&quot;主引导记录&quot;前面446字节的机器码之后，不再把控制权转交给某一个分区，而是运行事先安装的<a target="_blank" rel="noopener" href="http://en.wikipedia.org/wiki/Boot_loader#Modern_boot_loaders">&quot;启动管理器&quot;</a>（boot loader），由用户选择启动哪一个操作系统。</p><p>Linux环境中的启动管理器例如<a target="_blank" rel="noopener" href="http://en.wikipedia.org/wiki/GNU_GRUB">Grub</a>。</p><p><img src="/images/loading.jpeg" data-original="/posts/26e49edf//0eba97ff505cb05cb14ea86c7b1fec93.png" alt="1574410612420"></p><h4 id="第四阶段：操作系统">第四阶段：操作系统</h4><p>控制权转交给操作系统后，操作系统的内核首先被载入内存。</p><p>以Linux系统为例，先载入/boot目录下面的kernel。内核加载成功后，第一个运行的程序是/sbin/init。它根据配置文件（Debian系统是/etc/initab）产生init进程。这是Linux启动后的第一个进程，pid进程编号为1，其他进程都是它的后代。</p><p>然后，init线程加载系统的各个模块，比如窗口程序和网络程序，直至执行/bin/login程序，跳出登录界面，等待用户输入用户名和密码。</p><p>至此，全部启动过程完成。</p><h3 id="单用户模式修改Centos系统root密码">单用户模式修改Centos系统root密码</h3><p>步骤如下：</p><p>重启linux系统</p><p><img src="/images/loading.jpeg" data-original="/posts/26e49edf//b4ff39b063d3a2da3580bc94930ed01e.png" alt="4_21"></p><p>3 秒之内要按一下回车，出现如下界面</p><p><img src="/images/loading.jpeg" data-original="/posts/26e49edf//67849db77018ceba958128dde3394dea.png" alt="4_22"></p><p>按向下方向键移动到第二行，按&quot;e&quot;进入编辑模式</p><p><img src="/images/loading.jpeg" data-original="/posts/26e49edf//86c2fc832669cfbe4fad0ff747dddc76.png" alt="4_23"></p><p>在 第二行最后边输入 single，用空格与前面内容隔开</p><p><img src="/images/loading.jpeg" data-original="/posts/26e49edf//e1a541c56549ab770ba103ee88686a9c.png" alt="4_24"></p><p>回车</p><p><img src="/images/loading.jpeg" data-original="/posts/26e49edf//9095c7353ef32c132b4e34c7ba1fdedc.png" alt="4_25"></p><p>最后按&quot;b&quot;启动，启动后就进入了单用户模式了</p><p><img src="/images/loading.jpeg" data-original="/posts/26e49edf//ccbc8027a3d2a1ca079bdc3dd29ee3fd.png" alt="4_26"></p><p>进入到单用户模式后，就可以使用passwd命令任意更改root密码了：</p><p><img src="/images/loading.jpeg" data-original="/posts/26e49edf//7b86f9afd2569841fe290d0d843aa3d7.png" alt="4_27"></p><h3 id="救援模式修改Ubuntu系统root密码">救援模式修改Ubuntu系统root密码</h3><p>重启，按住shift键，出现如下界面，选中如下选项</p><p><img src="/images/loading.jpeg" data-original="/posts/26e49edf//190138072fab9c55fddac036a934c26d.jpeg" alt="img"></p><p>按回车键进入如下界面，然后选中最新的recovery mode选项</p><p><img src="/images/loading.jpeg" data-original="/posts/26e49edf//02e68b1361efb698209cbe4573ff1158.jpeg" alt="img"></p><p>按e进入如下界面，找到图中红色框的recovery nomodeset并将其删掉，再在这一行的后面输入</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">quiet splash rw <span class="attribute">init</span>=/bin/bash</span><br><span class="line">1</span><br></pre></td></tr></table></figure><p><img src="/images/loading.jpeg" data-original="/posts/26e49edf//788cbb9e3090ad75aa67cd51011a8633.jpeg" alt="img"></p><p><img src="/images/loading.jpeg" data-original="/posts/26e49edf//73412c34d5fa9a4b55add0b77ad008d6.jpeg" alt="img"></p><p>接着按F10或者Ctrl+x 后出现如下界面，在命令行内输入passwd后进行修改密码即可</p><p><img src="/images/loading.jpeg" data-original="/posts/26e49edf//e2a2b2f6ce4531eab5bd71d51e4caee1.jpeg" alt="img"></p><p>修改完之后重启系统。</p><p>本文参考：</p></div><div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="http://mcorazon.top/posts/499dd9b6/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/006.png"><meta itemprop="name" content="Corazon"><meta itemprop="description" content="<font color="#000000">网络安全从业人员个人博客</font>"> </span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="MCorazon"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/posts/499dd9b6/" class="post-title-link" itemprop="url">【Linux】Linux简介</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2025-02-19 15:34:46" itemprop="dateCreated datePublished" datetime="2025-02-19T15:34:46+08:00">2025-02-19</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2025-02-20 15:06:22" itemprop="dateModified" datetime="2025-02-20T15:06:22+08:00">2025-02-20</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>2k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>2 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="Linux命令行快捷键">Linux命令行快捷键</h2><ul class="lvl-0"><li class="lvl-2">Ctrl+c 结束正在运行的程序</li><li class="lvl-2">Ctrl+d 结束输入或退出shell</li><li class="lvl-2">Ctrl+s 暂停屏幕输出【锁住终端】</li><li class="lvl-2">Ctrl+q 恢复屏幕输出【解锁终端】</li><li class="lvl-2">Ctrl+l 清屏，【是字母L的小写】等同于Clear</li><li class="lvl-2">当前光标到行首：ctrl+a</li><li class="lvl-2">当前光标到行尾：ctrl+e</li><li class="lvl-2">删除当前光标到行首：ctrl+u</li><li class="lvl-2">删除当前光标到行尾：ctrl+k</li><li class="lvl-2">Ctrl+y 在光标处粘贴剪切的内容</li><li class="lvl-2">Ctrl+r 查找历史命令【输入关键字，就能调出以前执行过的命令】</li><li class="lvl-2">Ctrl+t 调换光标所在处与其之前字符位置，并把光标移到下个字符</li><li class="lvl-2">Ctrl+x+u 撤销操作</li><li class="lvl-2">Ctrl+z 转入后台运行</li></ul><p><strong>Tips:</strong></p><ul class="lvl-0"><li class="lvl-2"><p>Linux命令格式：<code>command [-options] [parameter1] …</code></p></li><li class="lvl-2"><p>帮助文档help：<code>command --help</code>或<code>command -h</code></p></li><li class="lvl-2"><p><code>tab</code>键在敲命令式可以补全命令或文件名</p></li><li class="lvl-2"><p>直接使用命令<code>cd</code>可以进入当前用户的家目录</p></li><li class="lvl-2"><p>文件颜色及其含义</p></li></ul><table><thead><tr><th>文件的颜色</th><th>含义</th></tr></thead><tbody><tr><td>蓝色</td><td>目录</td></tr><tr><td>绿色</td><td>可执行文件</td></tr><tr><td>红色</td><td>压缩文件</td></tr><tr><td>浅蓝色</td><td>链接文件</td></tr><tr><td>灰色</td><td>其他文件</td></tr></tbody></table><h2 id="正则表达式">正则表达式</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">规则：</span><br><span class="line">.  : 任意一个字符</span><br><span class="line">a* : 任意多个a(零个或多个a)</span><br><span class="line">a? : 零个或一个a</span><br><span class="line">a+ : 一个或多个a</span><br><span class="line">.* : 任意多个任意字符</span><br><span class="line">\. : 转义.</span><br><span class="line">\&lt;h.*p\&gt; ：以h开头，p结尾的一个单词</span><br><span class="line">o\&#123;2\&#125; : o重复两次</span><br><span class="line"></span><br><span class="line">grep <span class="string">&#x27;^i.\&#123;18\&#125;n$&#x27;</span> /usr/share/dict/words</span><br><span class="line"></span><br><span class="line">查找不是以#开头的行</span><br><span class="line">grep -v <span class="string">&#x27;^#&#x27;</span> a.txt | grep -v <span class="string">&#x27;^$&#x27;</span> </span><br><span class="line"></span><br><span class="line">以h或r开头的</span><br><span class="line">grep <span class="string">&#x27;^[hr]&#x27;</span> /etc/passwd</span><br><span class="line"></span><br><span class="line">不是以h和r开头的</span><br><span class="line">grep <span class="string">&#x27;^[^hr]&#x27;</span> /etc/passwd</span><br><span class="line"></span><br><span class="line">不是以h到r开头的</span><br><span class="line">grep <span class="string">&#x27;^[^h-r]&#x27;</span> /etc/passwd</span><br></pre></td></tr></table></figure><h2 id="Linux的基本配置">Linux的基本配置</h2><p>1.修改主机名</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/sysconfig/network</span><br><span class="line">NETWORKING=<span class="built_in">yes</span></span><br><span class="line">HOSTNAME=hadoop1</span><br></pre></td></tr></table></figure><p>2.修改ip地址</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/sysconfig/network-scripts/ifcfg-eth0</span><br><span class="line">DEVICE=eth0</span><br><span class="line">TYPE=Ethernet</span><br><span class="line">ONBOOT=<span class="built_in">yes</span></span><br><span class="line">BOOTPROTO=static</span><br><span class="line">IPADDR=192.168.100.101</span><br><span class="line">NETMASK=255.255.255.0</span><br><span class="line"></span><br><span class="line">service network restart</span><br></pre></td></tr></table></figure><p>3.修改ip地址和主机名的映射关系</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/hosts</span><br><span class="line">127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4</span><br><span class="line">::1         localhost localhost.localdomain localhost6 localhost6.localdomain6</span><br><span class="line">192.168.100.101 hadoop1</span><br></pre></td></tr></table></figure><p>4.关闭iptables并设置其开机启动/不启动</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">service iptables stop</span><br><span class="line">chkconfig iptables on</span><br><span class="line">chkconfig iptables off</span><br></pre></td></tr></table></figure><h2 id="man手册">man手册</h2><p>man是linux提供的一个手册，包含了绝大部分的命令、函数使用说明</p><p>该手册分成很多章节（section），使用man时可以指定不同的章节来浏览。</p><p>例：man ls ; man 2 printf</p><p>man中各个section意义如下：</p><ol><li class="lvl-3"><p>Standard commands（标准命令）</p></li><li class="lvl-3"><p>System calls（系统调用，如open,write）</p></li><li class="lvl-3"><p>Library functions（库函数，如printf,fopen）</p></li><li class="lvl-3"><p>Special devices（设备文件的说明，/dev下各种设备）</p></li><li class="lvl-3"><p>File formats（文件格式，如passwd）</p></li><li class="lvl-3"><p>Games and toys（游戏和娱乐）</p></li><li class="lvl-3"><p>Miscellaneous（杂项、惯例与协定等，例如Linux档案系统、网络协定、ASCII 码；environ全局变量）</p></li><li class="lvl-3"><p>Administrative Commands（管理员命令，如ifconfig）</p></li></ol><p>man是按照手册的章节号的顺序进行搜索的。</p><p>man设置了如下的功能键：</p><table><thead><tr><th>功能键</th><th>功能</th></tr></thead><tbody><tr><td>空格键</td><td>显示手册页的下一屏</td></tr><tr><td>Enter键</td><td>一次滚动手册页的一行</td></tr><tr><td>b</td><td>回滚一屏</td></tr><tr><td>f</td><td>前滚一屏</td></tr><tr><td>q</td><td>退出man命令</td></tr><tr><td>h</td><td>列出所有功能键</td></tr><tr><td>/word</td><td>搜索word字符串</td></tr></tbody></table><p><img src="/images/loading.jpeg" data-original="/posts/499dd9b6//eaa669cc38073241cb90af97af43bc92.png" alt="img"></p><p>注意：实际上，我们不用指定第几个章节也用查看，如，man ls</p><h2 id="history游览历史">history游览历史</h2><p>当系统执行过一些命令后，可按上下键翻看以前的命令，history将执行过的命令列举出来</p><p>history保留了最近执行的命令记录，默认可以保留1000。历史清单从0开始编号到最大值。常见用法：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">history</span> N		显示最近N条命令</span><br><span class="line"><span class="built_in">history</span> -c		清除所有的历史记录</span><br><span class="line"><span class="built_in">history</span> -w  xxx.txt	保存历史记录到文本xxx.txt</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>本文参考：</p></div><div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="http://mcorazon.top/posts/4fb642e/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/006.png"><meta itemprop="name" content="Corazon"><meta itemprop="description" content="<font color="#000000">网络安全从业人员个人博客</font>"> </span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="MCorazon"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/posts/4fb642e/" class="post-title-link" itemprop="url">【Hexo】博客复制粘贴</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2025-02-18 16:18:22" itemprop="dateCreated datePublished" datetime="2025-02-18T16:18:22+08:00">2025-02-18</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2025-02-20 12:26:45" itemprop="dateModified" datetime="2025-02-20T12:26:45+08:00">2025-02-20</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/hexo/" itemprop="url" rel="index"><span itemprop="name">hexo</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>372</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>1 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><p>本文介绍使用chrom浏览器，在源码中copy element可以将博客复制下来，直接粘贴到自己的博客里。方便后期的更改。</p><ol><li class="lvl-3">首先,在自己喜欢的博客页面,点击鼠标右键,看到如下图片,点击最后一行<code>检查</code></li></ol><p><img src="/images/loading.jpeg" data-original="/posts/4fb642e//image-20250218162611570.png" alt="image-20250218162611570"></p><ol start="2"><li class="lvl-3"><p>然后,在右边的源码里边,找到&quot;article_content&quot;标签头,可以看到左侧部分的预览界面被选中的部分就是要复制粘贴文章(包括html部分),检查左侧被选中的部分是否是自己想要的部分.</p></li></ol><p><img src="/images/loading.jpeg" data-original="/posts/4fb642e//image-20250218163315027.png" alt="image-20250218163315027"></p><ol start="3"><li class="lvl-3"><p>之后,再右键选择该标签(“article_content”),如下图,选择Copy element复制(或者Cut element 剪切)该标签下的所有元素</p></li></ol><p><img src="/images/loading.jpeg" data-original="/posts/4fb642e//image-20250218163453271.png" alt="image-20250218163453271"></p><ol start="4"><li class="lvl-3"><p>新建一个 txt 文件，将后缀改为 .html ，把刚复制的 源代码 粘贴到文件中，浏览器打开后如下图，此时复制全文到markdown的软件<a target="_blank" rel="noopener" href="https://www.typora.io/">Typora</a>中</p></li></ol><p><img src="/images/loading.jpeg" data-original="/posts/4fb642e//image-20250220122601039.png" alt="image-20250220122601039"></p><p>本文参考：</p><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_36437693/article/details/127286941">如何csdn复制他人博客文章到自己博客下</a></p></div><div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><nav class="pagination"><span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a></nav></div><script>window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc">文章目录</li><li class="sidebar-nav-overview">站点概览</li></ul><div class="post-toc-wrap sidebar-panel"></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="Corazon" src="/images/006.png"><p class="site-author-name" itemprop="name">Corazon</p><div class="site-description" itemprop="description"><font color="#000000">网络安全从业人员个人博客</font></div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">16</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">4</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">7</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/Corazon-hacker" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Corazon-hacker" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a></span></div><div class="links-of-blogroll motion-element"><div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i> Links</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"><a href="https://www.runoob.com/" title="https:&#x2F;&#x2F;www.runoob.com&#x2F;" rel="noopener" target="_blank">菜鸟教程</a></li><li class="links-of-blogroll-item"><a href="http://c.biancheng.net/sitemap/" title="http:&#x2F;&#x2F;c.biancheng.net&#x2F;sitemap&#x2F;" rel="noopener" target="_blank">C语言中文网</a></li><li class="links-of-blogroll-item"><a href="https://csdiy.wiki/" title="https:&#x2F;&#x2F;csdiy.wiki&#x2F;" rel="noopener" target="_blank">CS自学指南</a></li><li class="links-of-blogroll-item"><a href="https://www.r2coding.com/#/" title="https:&#x2F;&#x2F;www.r2coding.com&#x2F;#&#x2F;" rel="noopener" target="_blank">Road To Coding</a></li><li class="links-of-blogroll-item"><a href="https://hackway.org/docs/cs/intro" title="https:&#x2F;&#x2F;hackway.org&#x2F;docs&#x2F;cs&#x2F;intro" rel="noopener" target="_blank">计算机专业学习路线</a></li></ul></div></div><div class="back-to-top motion-element"><i class="fa fa-arrow-up"></i> <span>0%</span></div><script type="text/javascript" charset="utf-8" src="/js/tagcloud.js"></script><script type="text/javascript" charset="utf-8" src="/js/tagcanvas.js"></script><div class="widget-wrap"><h3 class="widget-title">标签云</h3><div id="myCanvasContainer" class="widget tagcloud"><canvas width="250" height="250" id="resCanvas"><ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/" rel="tag">Linux</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MYSQL/" rel="tag">MYSQL</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blog/" rel="tag">blog</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bolg/" rel="tag">bolg</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/" rel="tag">hexo</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/private/" rel="tag">private</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/typora/" rel="tag">typora</a><span class="tag-list-count">2</span></li></ul></canvas></div></div></div></aside><div id="sidebar-dimmer"></div></div></main></div><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2025</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">Corazon</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-chart-area"></i> </span><span title="站点总字数">178k</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-coffee"></i> </span><span title="站点阅读时长">2:42</span></div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-user"></i> </span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span> </span></span><span class="post-meta-divider">|</span> <span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div></div></footer><script color="0,0,255" opacity="1" zindex="-1" count="99" src="/lib/canvas-nest/canvas-nest.min.js"></script><script src="/lib/anime.min.js"></script><script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/code-unfold.js"></script><script src="/js/local-search.js"></script><script>if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }</script><script>NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : true,
      appId      : '02iDSwDgb06k5K8yx5oSD85t-gzGzoHsz',
      appKey     : 'eA8vZdwW4UasH3SiNapGvXh5',
      placeholder: "你是我一生只会遇见一次的惊喜 ...",
      avatar     : 'monsterid',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : 'zh-cn' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : 'https://02idswdg.lc-cn-n1-shared.com'
    });
  }, window.Valine);
});</script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script><link href="https://cdn.bootcss.com/gitalk/1.4.0/gitalk.min.css" rel="stylesheet"><script src="https://cdn.bootcss.com/gitalk/1.4.0/gitalk.min.js"></script><script src="https://cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.min.js"></script><script type="text/javascript">var gitalk = new Gitalk({
    clientID: '',
    clientSecret: '',
    repo: 'Corazon-hacker.github.io',
    owner: '',
    admin: [''],
    id: md5(location.pathname),   // ISSUE：location.href 限制50个字符 (应该是Issue 内容存数据库的标识， 具体在页面上无感)
    labels: ''.split(',').filter(l => l),  // 需要的 labels需要一个数组，否则会报错
    perPage: ,
    pagerDirection: '',
    createIssueManually: ,
    distractionFreeMode: 
  })
  gitalk.render('gitalk-container')</script><style>[bg-lazy]{background-image:none!important;background-color:#eee!important}</style><script>window.imageLazyLoadSetting={isSPA:!1,preloadRatio:1,processImages:null}</script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})})</script><script>(r=>{r.imageLazyLoadSetting.processImages=t;var a=r.imageLazyLoadSetting.isSPA,o=r.imageLazyLoadSetting.preloadRatio||1,d=i();function i(){var t=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")),e=Array.prototype.slice.call(document.querySelectorAll("[bg-lazy]"));return t.concat(e)}function t(t){(a||t)&&(d=i());for(var e,n=0;n<d.length;n++)0<=(e=(e=d[n]).getBoundingClientRect()).bottom&&0<=e.left&&e.top<=(r.innerHeight*o||document.documentElement.clientHeight*o)&&(()=>{var t,e,a,o,i=d[n];e=function(){d=d.filter(function(t){return i!==t}),r.imageLazyLoadSetting.onImageLoaded&&r.imageLazyLoadSetting.onImageLoaded(i)},(t=i).dataset.loaded||(t.hasAttribute("bg-lazy")?(t.removeAttribute("bg-lazy"),e&&e()):(a=new Image,o=t.getAttribute("data-original"),a.onload=function(){t.src=o,t.removeAttribute("data-original"),t.setAttribute("data-loaded",!0),e&&e()},a.onerror=function(){t.removeAttribute("data-original"),t.setAttribute("data-loaded",!1),t.src=o},t.src!==o&&(a.src=o)))})()}function e(){clearTimeout(t.tId),t.tId=setTimeout(t,500)}t(),document.addEventListener("scroll",e),r.addEventListener("resize",e),r.addEventListener("orientationchange",e)})(this);</script></body></html>